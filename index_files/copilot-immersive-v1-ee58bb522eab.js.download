"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["copilot-immersive-v1","packages_code-mirror_CodeMirror_tsx"],{77939:(e,t,n)=>{n.d(t,{A:()=>a});let a={messageContainer:"ChatMessage-module__messageContainer--P78Nq","message-action":"ChatMessage-module__message-action--vjrqQ",user:"ChatMessage-module__user--UGo2h",ai:"ChatMessage-module__ai--zMYOs",contentContainer:"ChatMessage-module__contentContainer--XTssz",message:"ChatMessage-module__message--iDqZL",messageContent:"ChatMessage-module__messageContent--x5cFE",hasClientConfirmations:"ChatMessage-module__hasClientConfirmations--UEFyq",agentUnauthorizedAvatar:"ChatMessage-module__agentUnauthorizedAvatar--GTuSs",skillExecutionText:"ChatMessage-module__skillExecutionText--HOEoJ",fileListItem:"ChatMessage-module__fileListItem--hX_vZ",avatar:"ChatMessage-module__avatar--ublrF",clientConfirmationContainer:"ChatMessage-module__clientConfirmationContainer--LgTin",confirmationStatusText:"ChatMessage-module__confirmationStatusText--pUhyM",messageContentWrapper:"ChatMessage-module__messageContentWrapper--L96Ez","snippet-clipboard-content":"ChatMessage-module__snippet-clipboard-content--gS3Lo",messageActionsContainer:"ChatMessage-module__messageActionsContainer--WIjsz"}},67154:(e,t,n)=>{n.d(t,{Y:()=>a,w:()=>r});let a={InProgress:"in_progress",Completed:"completed",Failed:"failed",Idle:"idle",WaitingForUser:"waiting_for_user",TimedOut:"timed_out",Cancelled:"cancelled",Queued:"queued"};function r(e){switch(e){case a.InProgress:return"In progress";case a.Completed:return"Ready for review";case a.Failed:return"Failed";case a.Idle:return"Idle";case a.WaitingForUser:return"Waiting for user";case a.TimedOut:return"Timed out";case a.Cancelled:return"Cancelled";case a.Queued:return"Queued";default:return"Unknown"}}},55899:(e,t,n)=>{n.d(t,{u:()=>a});function a(){return crypto.randomUUID()}},54556:(e,t,n)=>{n.d(t,{E:()=>a});let a=n(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},98325:(e,t,n)=>{n.d(t,{o:()=>l});var a=n(45230),r=n(54528),i=n(24774),s=n(15874);let o=(0,n(44569).zw)()?[]:[{key:"Alt-g",run:()=>!0,preventDefault:!0}],l=[(0,a.b6)(),(0,s.WD)(),(0,i.$K)({formatNumber:e=>e.toString().padStart(3," ")}),(0,s.SG)(),(0,i.vX)({position:"absolute"}),(0,r.$P)({top:!0}),i.Lz.editorAttributes.of({class:"js-codemirror-editor","data-testid":"codemirror-editor"}),i.w4.of([...o,...a.pw,...r.Eo,...a.cL])]},3482:(e,t,n)=>{n.d(t,{G:()=>r});var a=n(24774);function r(e=null,t="bottom"){return[a.S7.of(()=>({dom:e,top:"top"===t}))]}},18351:(e,t,n)=>{n.d(t,{I:()=>r});var a=n(24774);function r(e){return[a.Z9.fromClass(class{constructor(t){t.scrollDOM.tabIndex=0,t.scrollDOM.setAttribute("role","region"),t.scrollDOM.setAttribute("aria-labelledby",e)}})]}},74713:(e,t,n)=>{n.d(t,{h:()=>m});var a=n(24774),r=n(68605),i=n(53839);let s=i.Pe.define({map:({from:e,to:t,severity:n},a)=>({from:a.mapPos(e),to:a.mapPos(t),severity:n})}),o=i.sU.define({create:()=>a.NZ.none,update(e,t){for(let n of(e=e.map(t.changes),t.effects))n.is(s)&&("error"===n.value.severity?e=e.update({add:[l.range(n.value.from,n.value.to)]}):"warning"===n.value.severity?e=e.update({add:[c.range(n.value.from,n.value.to)]}):"info"===n.value.severity&&(e=e.update({add:[d.range(n.value.from,n.value.to)]})));return e},provide:e=>a.Lz.decorations.from(e)}),l=a.NZ.mark({class:"CodeMirror-lint-mark-error"}),c=a.NZ.mark({class:"CodeMirror-lint-mark-warning"}),d=a.NZ.mark({class:"CodeMirror-lint-mark-info"}),u=(e,t)=>{let{from:n,to:a,severity:i}=e.detail,o=(0,r.TU)(t,{line:n.lineNumber,ch:n.character}),l=(0,r.TU)(t,{line:a.lineNumber,ch:a.character});t.dispatch({effects:[s.of({from:o,to:l,severity:i})]})};function m(){return[a.Lz.domEventHandlers({"secret-detected:lint":u}),o]}},63133:(e,t,n)=>{n.d(t,{r:()=>N});var a=n(5853),r=n(43720);let i={ruby:[{tag:r._A.variableName,color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"}],html:[{tag:r._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:r._A.name,color:"var(--color-prettylights-syntax-entity-tag)"}],javascript:[{tag:r._A.name,color:"var(--color-prettylights-syntax-variable)"}],typescript:[{tag:r._A.name,color:"var(--color-prettylights-syntax-variable)"},{tag:r._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],java:[{tag:r._A.typeName,color:"var(--color-prettylights-syntax-entity)"}],"c++":[{tag:r._A.meta,color:"var(--color-prettylights-syntax-constant)"},{tag:r._A.typeName,color:"var(--color-prettylights-syntax-keyword)"}],php:[{tag:r._A.processingInstruction,color:"var(--color-prettylights-syntax-constant)"},{tag:r._A.name,color:"var(--color-prettylights-syntax-entity)"}]},s=Object.keys(i);var o=n(53839),l=n(11636),c=n(9299),d=n(47404),u=n(24774),m=n(5225),p=n(54556),h=n(51987);let f=(0,m.A)(async function(){let e=new Request("/autocomplete/emojis_for_editor",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json",...(0,h.kt)()}}),t=await fetch(e);if(200!==t.status)throw Error(`emoji request failed with a ${t.status}`);let n=await t.json();return Object.keys(n).map(e=>{let t=n[e];return{name:e,src:t[0],emoji:t[1]}})});var g=n(50467),y=n(68605);let _=new WeakMap;function x(e,t){if((0,y.w0)(e)){let n=(0,y.Lo)(e.state);(0,y.tJ)(e,`${t}${n}${t}`)}else{let n=(0,y.BE)(e);(0,y.TC)(e,t.repeat(2)),(0,y.f9)(e,n.anchor+t.length)}return!0}function v(e,t){let n=(0,y.BE)(e),a=e.state.doc.lineAt(n.from),r=(0,y.Lo)(e.state),i=RegExp(`^${"ol"===t?"\\d+\\.":t}\\s`);if(r){let n=(r.endsWith(`
`)?r.slice(0,-2):r).split(`
`).map((t,n)=>{let r=a.number+n;return{text:e.state.doc.line(r).text,lineNumber:r}}),s=n.every(e=>i.test(e.text));for(let a=0;a<n.length;a++){let r=n[a];if(s){let t=r.text.match(i);t&&(0,y.YH)(e,r?.lineNumber,t[0])}else{let n=`${"ol"===t?`${a+1}.`:t} `;(0,y.Md)(e,r?.lineNumber,n)}}}else{let r=a.text.match(i);if(r)(0,y.YH)(e,a.number,r[0]);else{let r=`${"ol"===t?"1.":t} `;(0,y.Md)(e,a.number,r),a.text||(0,y.f9)(e,n.anchor+r.length)}}return!0}let b=[{key:"Mod-i",run:e=>x(e,"_"),preventDefault:!0},{key:"Mod-b",run:e=>x(e,"**"),preventDefault:!0},{key:"Mod-e",run:e=>x(e,"`"),preventDefault:!0},{key:"Mod-k",run:e=>{let t=(0,y.Lo)(e.state);if(t){let n=`[${t}](url)`;(0,y.tJ)(e,n);let a=(0,y.I6)(e,n).value.from;(0,y.td)(e,a+t.length+3,a+t.length+6)}else{let t=(0,y.BE)(e);(0,y.TC)(e,"[](url)"),(0,y.f9)(e,t.anchor+1)}return!0},preventDefault:!0},{key:"Shift-Mod-.",run:e=>v(e,">"),preventDefault:!0},{key:"Shift-Mod-7",run:e=>v(e,"ol"),preventDefault:!0},{key:"Shift-Mod-8",run:e=>v(e,"-"),preventDefault:!0},{key:"Mod-v",run:e=>(_.set(e,!1),!1)},{key:"Shift-Mod-v",run:e=>(_.set(e,!0),!1)}];function S(e){let t=u.NZ.line({attributes:{dir:"auto"}}),n=new o.vB;for(let{from:a,to:r}of e.visibleRanges)for(let i=a;i<=r;){let a=e.state.doc.lineAt(i);n.add(a.from,a.from,t),i=a.to+1}return n.finish()}let C=u.Z9.fromClass(class{update(e){(e.docChanged||e.viewportChanged)&&(this.decorations=S(e.view))}constructor(e){(0,g._)(this,"decorations",void 0),this.decorations=S(e)}},{decorations:e=>e.decorations}),j=[u.Lz.domEventHandlers({keydown(e){(e.metaKey||e.ctrlKey)&&"k"===e.key&&e.stopPropagation()},paste(e,t){_.get(t)||function(e,t){let n=(0,y.Lo)(e.state),a=t.clipboardData;if(n&&a){let r=a.getData("text/plain");if(!/^https?:\/\//i.test(r))return;r&&(t.preventDefault(),(0,y.tJ)(e,`[${n}](${r})`))}}(t,e),_.set(t,!1)}}),u.w4.of(b),C];async function N({autoCompleteCompartment:e,view:t,viewB:n,fileName:r,languageCompartment:m,managedExtensions:h,themeCompartment:g}){let y=r.split(".").pop()||"",_=y?a.e.find(e=>e.extensions.includes(y)||e.filename&&e.filename.test(r)):void 0;if(_&&t){var x;let a=(x=_.name,s.includes(x.toLowerCase())?i[x.toLowerCase()]:null);a&&w(t,n,{effects:g.reconfigure((0,l.O)(a))}),"Markdown"===_.name?(w(t,n,{effects:m.reconfigure((0,c.markdown)({base:c.markdownLanguage}))}),w(t,n,{effects:o.Pe.reconfigure.of([...j,...h])}),w(t,n,{effects:e.reconfigure([p.E,(0,d.yU)({override:[async e=>(function(e,t=[]){let n=e.matchBefore(/:\w+/);if(!n||n&&n.from===n.to&&!e.explicit)return null;let a=t.filter(e=>-1!==e.name.indexOf(n.text.replace(":",""))).map(e=>({label:e.name,apply:e.emoji||`:${e.name}:`,type:e.src}));return{from:n.from,to:n.to,options:a,filter:!1}})(e,await f())],icons:!1,addToOptions:[{render:e=>{let t=document.createElement("img");return t.className="emoji emoji-result mr-2",t.height=20,t.width=20,t.alt=`:${e.label}:`,t.src=e.type,t.setAttribute("async",""),t},position:0}]}),o.Nb.highest(u.w4.of([{key:"Tab",run:d.$w}]))])})):(w(t,n,{effects:e.reconfigure([])}),w(t,n,{effects:m.reconfigure(await _.load())}))}}function w(e,t,n){e.dispatch(n),t&&t.dispatch(n)}},11636:(e,t,n)=>{n.d(t,{O:()=>u});var a=n(24774),r=n(15874),i=n(43720);let s={"&":{background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--codeMirror-fgColor, var(--color-codemirror-text))",cursor:"text"},".cm-gutters, .cm-gutters.cm-gutters-before":{background:"var(--codeMirror-gutters-bgColor, var(--color-codemirror-gutters-bg))",borderRightWidth:0},".cm-lineNumbers .cm-gutterElement":{color:"var(--codeMirror-lineNumber-fgColor, var(--color-codemirror-linenumber-text))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-gutter-fontSize, var(--codeMirror-content-fontSize, 12px))",lineHeight:"20px",padding:"0 16px 0 16px"},".cm-content":{caretColor:"var(--codeMirror-cursor-fgColor, var(--color-codemirror-cursor))",fontFamily:"var(--fontStack-monospace)",fontSize:"var(--codeMirror-content-fontSize, 12px)",background:"var(--codeMirror-lines-bgColor, var(--color-codemirror-lines-bg))",lineHeight:"20px",paddingTop:"8px"},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},"&.cm-focused":{outline:"none"},"&.hide-help-until-focus":{"&.cm-focused .cm-panels-bottom":{display:"block"},"& .cm-panels-bottom":{display:"none"}},"&.hide-help":{"& .cm-panels-top":{display:"none",position:"absolute"}},".cm-content ::-moz-selection":{backgroundColor:"var(--codeMirror-selection-bgColor, var(--color-codemirror-selection-bg, #d7d4f0))"},".cm-activeLine":{backgroundColor:"var(--codeMirror-activeline-bgColor, var(--color-codemirror-activeline-bg))"},".cm-line":{paddingLeft:"16px"},".cm-help-panel":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"7px 10px",margin:0,fontSize:"13px",lineHeight:"16px",color:"var(--fgColor-muted, var(--color-fg-muted))",cursor:"default"},".cm-panels-bottom":{borderTop:"var(--borderWidth-thin, 1px) solid var(--borderColor-default, var(--color-border-default))",background:"none"},".js-upload-markdown-image & .cm-panels-bottom":{bottom:"30px !important"},".cm-panel.cm-search":{background:"var(--bgColor-muted, var(--color-canvas-subtle))",padding:"8px",fontSize:"16px"},".cm-panel.cm-search > button":{borderRadius:"6px",padding:"4px 8px",background:"var(--codeMirror-bgColor, var(--color-codemirror-bg))",color:"var(--button-default-fgColor-rest, var(--color-btn-text))",border:"1px solid var(--button-default-borderColor-rest, var(--color-btn-border))",textTransform:"capitalize"},".cm-panel.cm-search > label":{color:"var(--fgColor-default, var(--color-fg-default))",textTransform:"capitalize",fontSize:"12px"},".cm-panel.cm-search > input":{borderRadius:"6px",padding:"4px 8px",background:"var(--bgColor-default, var(--color-canvas-default))",color:"var(--fgColor-default, var(--color-fg-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",fontSize:"12px"},'.cm-panel.cm-search > button[name="close"]':{padding:"4px"},".cm-panels-top":{borderBottom:"var(--borderWidth-thin, 1px) solid var(--color-border-default)",background:"none"},".cm-panel.cm-search input, .cm-panel.cm-search button, .cm-panel.cm-search label":{marginRight:"8px",marginBottom:"4px",marginTop:"4px",marginLeft:0},".cm-lintRange":{cursor:"help",backgroundImage:"none !important"},".cm-placeholder":{height:"1em",color:"var(--fgColor-muted)"},"&.custom-tooltips .cm-tooltip":{border:"none !important",backgroundColor:"transparent !important"},"&.custom-tooltips .cm-diagnostic":{padding:0,marginLeft:"0 !important",borderLeft:"none !important",whiteSpace:"unset"}},o=[{tag:[i._A.keyword],color:"var(--codeMirror-syntax-fgColor-keyword, var(--color-codemirror-syntax-keyword))"},{tag:[i._A.comment],color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"},{tag:[i._A.bracket],color:"var(--codeMirror-matchingBracket-fgColor, var(--color-codemirror-matchingbracket-text))"},{tag:[i._A.string,i._A.url,i._A.regexp],color:"var(--codeMirror-syntax-fgColor-string, var(--color-codemirror-syntax-string))"},{tag:[i._A.constant(i._A.name),i._A.propertyName,i._A.attributeName],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[i._A.atom,i._A.number,i._A.bool],color:"var(--codeMirror-syntax-fgColor-constant, var(--color-codemirror-syntax-constant))"},{tag:[i._A.function(i._A.variableName)],color:"var(--codeMirror-syntax-fgColor-entity, var(--color-codemirror-syntax-entity))"},{tag:i._A.definition(i._A.variableName),color:"var(--codeMirror-syntax-fgColor-variable, var(--color-codemirror-syntax-variable))"},{tag:i._A.meta,color:"inherit"},{tag:i._A.heading,fontWeight:"bold",color:"inherit !important"},{tag:i._A.monospace,color:"var(--codeMirror-syntax-fgColor-comment, var(--color-codemirror-syntax-comment))"}],l=[{tag:i._A.link,textDecoration:"underline"},{tag:i._A.emphasis,fontStyle:"italic"},{tag:i._A.strong,fontWeight:"bold"},{tag:i._A.strikethrough,textDecoration:"line-through"}],c=[...o,...l],d=[...o,...l];function u(e=[]){let t=[...null!==document.querySelector('[data-color-mode="dark"]')?d:c,...e];return[a.Lz.theme(s),(0,r.y9)(r.cr.define(t),{fallback:!0})]}},68605:(e,t,n)=>{n.d(t,{BE:()=>o,Cw:()=>j,I6:()=>b,Lo:()=>d,Md:()=>f,TB:()=>S,TC:()=>v,TU:()=>m,YH:()=>g,Z3:()=>p,eO:()=>_,e_:()=>x,f9:()=>l,fJ:()=>N,fV:()=>h,tJ:()=>y,td:()=>u,w0:()=>c,ye:()=>C});var a=n(15874),r=n(54528),i=n(53839),s=n(24774);let o=e=>e.state.selection.main,l=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,n)=>{e.dispatch({selection:{anchor:t,head:n}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function p(e,t){let n=e.state.doc.lineAt(t);return{line:n.number-1,ch:t-n.from}}let h=(e,t)=>e.state.doc.line(t),f=(e,t,n)=>{let a=h(e,t);x(e,a.from,a.from,n)},g=(e,t,n)=>{let a=h(e,t);x(e,a.from,a.from+n.length,"")},y=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},_=(e,t,n)=>e.sliceDoc(t,n),x=(e,t,n,a)=>{e.dispatch({changes:{from:t,to:n,insert:a}})},v=(e,t)=>{let n=o(e);x(e,n.from,n.to,t)},b=(e,t)=>new r.ZX(e.state.doc,t).next(),S=(e,t,n)=>{let a=new r.ZX(e.state.doc,t).next();e.dispatch({changes:{from:a.value.from,to:a.value.to,insert:n}})},C=(e,t,n,a,r)=>{if(void 0!==n)try{let o=h(e,t),l=h(e,n);if(o&&l){e.focus();let t=r?l.from+r:l.to;u(e,o.from+(a??0),t),e.dispatch({effects:[s.Lz.scrollIntoView(i.OF.range(o.from,l.to),{y:"center"})]})}}catch{}else try{let n=h(e,t);n&&(e.focus(),l(e,n.from+(a??0)),e.dispatch({effects:[s.Lz.scrollIntoView(n.from,{y:"center"})]}))}catch{}};function j(e){return e.state.facet(a.Xt)}function N(e,t){if(e===t)return[];let n=0,a=Math.min(e.length,t.length);for(;n<a&&e[n]===t[n];)n++;let r=e.length,i=t.length;for(;r>n&&i>n&&e[r-1]===t[i-1];)r--,i--;return[{from:n,to:r,insert:t.slice(n,i)}]}},31315:(e,t,n)=>{function a(e){return r(e)[0]}function r(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[a,r]=n.trim().split("=");e===a&&void 0!==r&&t.push({key:a,value:r})}return t}function i(e,t,n=null,a=!1,r="lax"){let s=document.domain;if(null==s)throw Error("Unable to get document domain");s.endsWith(".github.com")&&(s="github.com");let o="https:"===location.protocol?"; secure":"",l=n?`; expires=${n}`:"";!1===a&&(s=`.${s}`);try{document.cookie=`${e}=${t}; path=/; domain=${s}${l}${o}; samesite=${r}`}catch{}}function s(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let a=new Date(Date.now()-1).toUTCString(),r="https:"===location.protocol?"; secure":"",i=`; expires=${a}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${i}${r}`}catch{}}n.d(t,{OR:()=>r,Ri:()=>a,TV:()=>i,Yj:()=>s})},27359:(e,t,n)=>{n.d(t,{v:()=>c});var a=n(21728),r=n(13017),i=n(40396),s=n(47789),o=n(35247),l=n(2635);function c(){let e=(0,a.c)(6),t=(0,s.qw)(),n=(0,l.A3)("activePlugin"),c=(0,r.zy)();if(o.W.improvedNavigation){let n;return e[0]!==c||e[1]!==t?(n=(0,i.B)(c,t),e[0]=c,e[1]=t,e[2]=n):n=e[2],n}{let a;return e[3]!==n||e[4]!==t?(a=n?t.find(e=>e.id===n):void 0,e[3]=n,e[4]=t,e[5]=a):a=e[5],a}}},52940:(e,t,n)=>{n.d(t,{p:()=>h});var a=n(4559),r=n(53419),i=n(96540),s=n(46665),o=n(25641),l=n(2635),c=n(33592),d=n(72303),u=n(72206),m=n(17285),p=n(27359);function h({excludeFeedback:e,inputRef:t,isLatestMessage:n,isStreaming:h,removeOutdatedContentPreviewItems:f}){let{message:g}=(0,s.V)(),y=(0,l.bP)("currentUserLogin","mode"),_=(0,u.tD)(),x=(0,c.b)(),v=(0,p.v)(),b=(0,o.Th)(g,y.currentUserLogin),S="Copilot"===b.name,C="user"===b.type,j=S||(0,o.yh)(b),N=S&&!!g.agentErrors?.length,w=!N&&!!S&&!!g.error&&g.error.isError,I=S&&!e&&(!n||!h)&&!w,E=(0,i.useRef)(null),T=g.interrupted,k=g.clientConfirmations&&g.clientConfirmations.length>0,R=w&&g.error?.retryable,[A,L]=(0,i.useState)([]),[D,P]=(0,i.useState)(void 0),M=(R||T)&&n,O=(0,i.useMemo)(()=>({openLinksInCurrentTab:"assistive"===y.mode,isStreaming:n&&h,extensions:v?.markdownExtensions?v.markdownExtensions.map(e=>e()):[]}),[y.mode,n,h,v?.markdownExtensions]),B=!w&&(I||j&&!!g.content&&!h)&&(!C||!g.confirmations)||C&&!n||w&&n,F=(0,i.useRef)(0);(0,i.useEffect)(()=>{let e=(g.skillExecutions??[]).find(e=>!A.some(t=>t.slug===e.slug&&t.statusMessage===e.statusMessage));if(e){let t=setTimeout(()=>{F.current=Date.now(),L([...A,e]),P(e)},Math.max(0,2e3-(Date.now()-F.current)));return()=>clearTimeout(t)}},[g.skillExecutions,A]),(0,i.useEffect)(()=>{n&&h&&(0,a.i)("Copilot is responding")},[n,h]),(0,i.useEffect)(()=>{n&&!h&&E.current&&(0,a.C)(E.current)},[n,h]);let U=(0,i.useCallback)(async(e,t,n)=>{if(n)n("accepted"===e.state);else{let n=_();await x.sendChatMessage({thread:(0,d.W)(n),content:`@${b.name} ${(0,m.Z)(e.state)} Confirmation: ${t}`,references:g.references??[],topic:n.currentTopic,context:n.context,confirmations:e,customInstructions:n.customInstructions,model:n.model})}},[_,x,b.name,g.references]),$=(0,i.useCallback)(()=>{window.setTimeout(()=>t?.current?.focus(),1)},[t]),V=(0,i.useCallback)(async()=>{let e=_(),t=(0,d.W)(e);t&&(f?.(),$(),(0,r.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_RETRY",mode:e.mode}),await x.retryLastUnsuccessfulChatMessage(t))},[_,f,$,x]),q=(0,i.useCallback)(async e=>{let t=_(),n=(0,d.W)(t);n&&(f?.(),$(),(0,r.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_RETRY_FOR_NEW_SUBTHREAD",mode:t.mode}),await x.retryUserChatMessage(n,g,e))},[_,x,g,f,$]),W=(0,i.useCallback)(async e=>{let t=_(),n=(0,d.W)(t);n&&(f?.(),await x.editUserChatMessage(n,g,e))},[_,x,g,f]);return{author:b,removeOutdatedContentPreviewItems:f,handleConfirmationAction:U,handleRetryErrorMessage:V,handleRetryCopilotResponse:q,handleEditUserMessage:W,hasClientConfirmations:k,isCopilot:S,isUser:C,isAI:j,isAgentError:N,isError:w,isInterrupted:T,myRef:E,rendererConfig:O,renderFeedback:I,shouldShowMessageActions:B,skillExecutionToUseForRespondingText:D,showRetryButton:M}}},87419:(e,t,n)=>{n.d(t,{Y:()=>d});var a=n(21728),r=n(96540),i=n(25641),s=n(79064),o=n(2635),l=n(33592),c=n(72303);function d(e){let t,n,d,u,m,p,h,f,g,y,_=(0,a.c)(26),x=(0,o.Pk)(),v=(0,l.b)(),{currentTopic:b,messages:S,selectedThreadID:C}=x;_[0]!==x?(t=(0,c.W)(x),_[0]=x,_[1]=t):t=_[1];let j=t,N=(0,r.useRef)(null),w=e||N;return _[2]!==v||_[3]!==S.length||_[4]!==j?(n=()=>{j&&S.length>0&&v.showTopicPicker(!1)},d=[j,S.length,v],_[2]=v,_[3]=S.length,_[4]=j,_[5]=n,_[6]=d):(n=_[5],d=_[6]),(0,r.useEffect)(n,d),_[7]!==b||_[8]!==C?(u=()=>{let e=b?(0,i.P)(b)?b.name:String(b.id):null;C&&e&&s.Jt.setSelectedTopic(C,e)},m=[C,b],_[7]=b,_[8]=C,_[9]=u,_[10]=m):(u=_[9],m=_[10]),(0,r.useEffect)(u,m),_[11]!==w?(p=()=>{let e=window.setTimeout(()=>{w.current?.focus()},1);return()=>{window.clearTimeout(e)}},h=[w],_[11]=w,_[12]=p,_[13]=h):(p=_[12],h=_[13]),(0,r.useEffect)(p,h),_[14]!==v||_[15]!==x.context?.[0]||_[16]!==x.currentRepository?(f=()=>{let e=x.context?.[0]??x.currentRepository;return e&&v.generateSuggestions(e),()=>{v.clearSuggestions()}},_[14]=v,_[15]=x.context?.[0],_[16]=x.currentRepository,_[17]=f):f=_[17],_[18]!==v||_[19]!==x.context||_[20]!==x.currentRepository||_[21]!==x.currentTopic||_[22]!==x.selectedThreadID?(g=[v,x.context,x.currentTopic,x.currentRepository,x.selectedThreadID],_[18]=v,_[19]=x.context,_[20]=x.currentRepository,_[21]=x.currentTopic,_[22]=x.selectedThreadID,_[23]=g):g=_[23],(0,r.useEffect)(f,g),_[24]!==w?(y={textAreaRef:w},_[24]=w,_[25]=y):y=_[25],y}},88392:(e,t,n)=>{n.d(t,{a:()=>o});var a=n(96540),r=n(63262),i=n(73952),s=n(51213);function o(e){let{streamingMessage:t,isWaitingOnCopilot:n,messages:o,selectedThreadID:l,pendingFirstMessage:c}=e,d=(0,a.useMemo)(()=>{let e={id:s.Wp,role:"assistant",content:"",createdAt:"",threadID:l||"",references:[],clientSide:!0,messageIndex:-1},a=(0,i.B)(o,c);return n?[...a,t??e]:a},[l,o,c,n,t]);return{messages:d,groupedMessages:(0,r.A)(d)}}},84802:(e,t,n)=>{n.d(t,{G:()=>c});var a=n(21728),r=n(33592),i=n(25641),s=n(35247),o=n(53627),l=n(96459);function c(){let e,t=(0,a.c)(3),n=(0,r.b)(),c=(0,l.Z)();return t[0]!==n||t[1]!==c?(e=async e=>{window.location.pathname!==i.Jz&&(s.W.improvedNavigation?c(i.Jz):(0,o.kd)(i.Jz),n.dispatch({type:"SELECT_PLUGIN",plugin:null}),await n.selectThread(null,e))},t[0]=n,t[1]=c,t[2]=e):e=t[2],e}},39619:(e,t,n)=>{n.d(t,{HS:()=>s,Oc:()=>i,Tv:()=>c,Xr:()=>SymbolChangedEvent,f7:()=>o,fD:()=>l,qR:()=>r});var a=n(50467);let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),(0,a._)(this,"payload",void 0),this.payload=e}};Event;let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),(0,a._)(this,"reference",void 0),(0,a._)(this,"openPanel",void 0),(0,a._)(this,"id",void 0),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),(0,a._)(this,"context",void 0),this.context=e}};function r(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function i(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function s(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function o(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function l(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function c(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},17285:(e,t,n)=>{n.d(t,{Z:()=>a});function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}},7812:(e,t,n)=>{n.d(t,{LU:()=>o,PO:()=>p,SI:()=>u,SX:()=>f,by:()=>d,oR:()=>h,oy:()=>s,wt:()=>c,yA:()=>m});var a=n(25641),r=n(51213),i=n(35247);function s(e){return e.split("#")[0]}function o(e,t){let n=s(e),a=t.get(n)??[],r=a.indexOf(e);return a.length>1&&-1!==r?r+1:null}function l(e,t){return`file:${e.name}#${t}`}function c(e,t,n){switch(e.type){case"thread-scoped-file":return o(l(e,t),n)??void 0;case"draft-issue":return o(h({ref:e,messageIndex:t}).id,n)??void 0}}function d(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??r.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function u(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??r.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function m(e){return{type:e.type,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,title:e.name,state:e.state,url:e.href}}function p(e){switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":case"update-issue":return{type:"draft-issue",tag:e.tag,parentTag:e.parentTag,title:e.name,description:e.body,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:e.projects,milestone:e.milestone,templateFormValuesById:e.defaultValuesById,issueNumber:e.issueNumber};default:return null}}function h({ref:e,messageIndex:t,messageId:n,timestamp:a}){switch(e.type){case"thread-scoped-file":return function(e,t,n=r.Wp,a){return{type:"file",id:l(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:a?new Date(a):new Date,isStreaming:!1,isUserEdited:n===r.Wp}}(e,t,n,a);case"draft-issue":return function({ref:e,messageId:t=r.Wp,messageIndex:n}){let a=e.issueNumber&&i.W.draftUpdateIssue?"update-issue":"new-issue";return{type:a,id:`${a}:${e.tag}#${n}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,name:e.title,body:e.description,assignees:e.assignees??[],labels:e.labels??[],issueType:e.issueType,projects:e.projects??[],milestone:e.milestone,isUserEdited:t===r.Wp,messageId:t,isStreaming:!1,template:e.template,defaultValuesById:e.templateFormValuesById??{},issueNumber:e.issueNumber}}({ref:e,messageIndex:t,messageId:n});default:return null}}function f(e,t,n){let a=s(e.id),r=n.get(a),i=r?.findIndex(t=>t===e.id)??-1,o=r?.[i-1];return o&&t.get(o)}},89775:(e,t,n)=>{var a,r,i,s,o,l,c=n(27744),d=n(70103),u=n(24683),m=n(74848),p=n(21728);function h(e){let t,n=(0,p.c)(2);return n[0]!==e.children?(t=(0,m.jsx)(m.Fragment,{children:e.children}),n[0]=e.children,n[1]=t):t=n[1],t}try{h.displayName||(h.displayName="App")}catch{}var f=n(50467),g=n(76143),y=n(6011),_=n(34164),x=n(96540);let v={scrollContainer:"ContentView-module__scrollContainer--_BylN",contentContainer:"ContentView-module__contentContainer--q5UcY",content:"ContentView-module__content--kzPet",medium:"ContentView-module__medium--TcCTp",small:"ContentView-module__small--r1fwP",banner:"ContentView-module__banner--rgHMe",serviceHeader:"ContentView-module__serviceHeader--DEEHs",serviceTitle:"ContentView-module__serviceTitle--PbOYe",serviceDescription:"ContentView-module__serviceDescription--ZNDZz",serviceActions:"ContentView-module__serviceActions--IucKo",section:"ContentView-module__section--avH_l",sectionTitle:"ContentView-module__sectionTitle--MkQwz",sectionGrid:"ContentView-module__sectionGrid--unHY4",sectionGridEmpty:"ContentView-module__sectionGridEmpty--oxnzj",skeletonCard:"ContentView-module__skeletonCard--e4yHy"};function b(e){let t,n,a,r,i=(0,p.c)(10),{children:s,width:o}=e;if(i[0]!==s){for(let e of(t=[],n=[],x.Children.toArray(s)))x.isValidElement(e)&&e.type===S?t.push(e):n.push(e);i[0]=s,i[1]=t,i[2]=n}else t=i[1],n=i[2];let l="small"===o,c="medium"===o;return i[3]!==l||i[4]!==c?(a=(0,_.$)(v.content,{[v.small]:l,[v.medium]:c}),i[3]=l,i[4]=c,i[5]=a):a=i[5],i[6]!==t||i[7]!==n||i[8]!==a?(r=(0,m.jsx)("div",{className:v.scrollContainer,children:(0,m.jsx)("div",{className:v.contentContainer,children:(0,m.jsxs)("div",{className:a,children:[t,n]})})}),i[6]=t,i[7]=n,i[8]=a,i[9]=r):r=i[9],r}function S(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:v.banner,children:a}),n[0]=a,n[1]=t):t=n[1],t}function C(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:v.serviceHeader,children:a}),n[0]=a,n[1]=t):t=n[1],t}function j(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("section",{className:v.section,children:a}),n[0]=a,n[1]=t):t=n[1],t}function N(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("h2",{className:v.serviceTitle,children:a}),n[0]=a,n[1]=t):t=n[1],t}function w(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("p",{className:v.serviceDescription,children:a}),n[0]=a,n[1]=t):t=n[1],t}function I(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:v.serviceActions,children:a}),n[0]=a,n[1]=t):t=n[1],t}function E(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("h3",{className:v.sectionTitle,children:a}),n[0]=a,n[1]=t):t=n[1],t}function T(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:v.sectionGridEmpty,children:a}),n[0]=a,n[1]=t):t=n[1],t}function k(e){let t,n,a,r=(0,p.c)(8),{children:i,loading:s}=e;if(void 0!==s&&s){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:v.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(L)}),r[0]=e):e=r[0],e}if(r[1]!==i){let e=x.Children.toArray(i);t=e.find(A),n=e.filter(R),r[1]=i,r[2]=t,r[3]=n}else t=r[2],n=r[3];let o=n;if(0===o.length&&t){let e;return r[4]!==t?(e=(0,m.jsx)(m.Fragment,{children:t}),r[4]=t,r[5]=e):e=r[5],e}return r[6]!==o?(a=(0,m.jsx)("div",{className:v.sectionGrid,children:o}),r[6]=o,r[7]=a):a=r[7],a}function R(e){return!(x.isValidElement(e)&&e.type===T)}function A(e){return x.isValidElement(e)&&e.type===T}function L(e,t){return(0,m.jsx)(y.f,{className:v.skeletonCard},t)}k.Empty=T,j.Title=E,j.Grid=k;let D={Title:N,Description:w,Actions:I,Container:b,Banner:S,Header:C,Section:j};D.displayName="ContentView",b.displayName="ContentView.Container",S.displayName="ContentView.Banner",C.displayName="ContentView.Header",j.displayName="ContentView.Section",N.displayName="ContentView.Title",w.displayName="ContentView.Description",I.displayName="ContentView.Actions",E.displayName="ContentView.Section.Title",k.displayName="ContentView.Section.Grid",T.displayName="ContentView.Section.Grid.Empty";var P=n(30388),M=n(38621);let O={header:"AgentsView-module__header--UnvJ9",button:"AgentsView-module__button--tJVCb",counter:"AgentsView-module__counter--Fv0FB",filterButtons:"AgentsView-module__filterButtons--io3h1",failedTaskCreationBanners:"AgentsView-module__failedTaskCreationBanners--TsT4h"};var B=n(93654),F=n(5106),U=n(64894),$=n(79634),V=n(97189),q=n(2635),W=n(33544),G=n(79512),H=n(33592),z=n(34295),Q=n(39820);function K(e){let t,n,a,r=(0,p.c)(8),{problemStatement:i,handleRetry:s,handleDismiss:o}=e,l=function(e,t=50,n=2){let a=t*n;return e.length<=a?e:`${e.substring(0,a).trim()}...`}(i??"",20,1),c=`Failed to create a task for '${l}'. Please try again.`;return r[0]!==o?(t=(0,m.jsx)(Q.l.SecondaryAction,{onClick:o,children:"Dismiss"}),r[0]=o,r[1]=t):t=r[1],r[2]!==s?(n=(0,m.jsx)(Q.l.PrimaryAction,{onClick:s,children:"Retry"}),r[2]=s,r[3]=n):n=r[3],r[4]!==c||r[5]!==t||r[6]!==n?(a=(0,m.jsx)(Q.l,{variant:"critical",title:"Task Creation Failed",hideTitle:!0,description:c,secondaryAction:t,primaryAction:n}),r[4]=c,r[5]=t,r[6]=n,r[7]=a):a=r[7],a}try{K.displayName||(K.displayName="TaskCreationFailedBanner")}catch{}var J=n(69599),Y=n(46309),X=n(47865);function Z(e){let t,n=(0,p.c)(3),{tasks:a,isError:r}=e;return n[0]!==r||n[1]!==a?(t=(0,m.jsx)(P.qJ.List,{id:"tasks-list","aria-labelledby":"open-tab",children:r?(0,m.jsxs)(P.qJ.EmptyState,{children:[(0,m.jsx)(M.AlertIcon,{size:24}),(0,m.jsx)("p",{children:"Sorry, something went wrong"})]}):0===a.length?(0,m.jsx)(P.qJ.EmptyState,{children:(0,m.jsx)("p",{children:"No open tasks yet. Start a new task to see it here."})}):(0,m.jsx)(m.Fragment,{children:a.map(ee)})}),n[0]=r,n[1]=a,n[2]=t):t=n[2],t}function ee(e){return e.isOptimistic?(0,m.jsx)(F.eB,{title:`Creating: ${e.problemStatement??""}`,repositoryNwo:e.nwo??""},e.clientGeneratedId):e.pull&&(0,m.jsx)(F.ZL,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prInMergeQueue:e.pull.inMergeQueue??!1},e.pull.id)}function et(e){let t,n,a=(0,p.c)(5),{tasks:r,isError:i}=e;return a[0]!==i||a[1]!==r?(t=i?(0,m.jsxs)(P.qJ.EmptyState,{children:[(0,m.jsx)(M.AlertIcon,{size:24}),(0,m.jsx)("p",{children:"Sorry, something went wrong"})]}):0===r.length?(0,m.jsx)(P.qJ.EmptyState,{children:(0,m.jsx)("p",{children:"No closed tasks yet."})}):r.map(en),a[0]=i,a[1]=r,a[2]=t):t=a[2],a[3]!==t?(n=(0,m.jsx)(P.qJ.List,{id:"tasks-list","aria-labelledby":"closed-tab",children:t}),a[3]=t,a[4]=n):n=a[4],n}function en(e){return(0,m.jsx)(F.ZL,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prInMergeQueue:e.pull.inMergeQueue??!1},e.pull.id)}function ea(e){let t,n,a,r,i,s,o,l,c,d,u,h=(0,p.c)(31),{tasks:f,isError:g,activeTab:y,setActiveTab:_}=e;h[0]!==f?(t=f.filter(ei),h[0]=f,h[1]=t):t=h[1];let x=t;h[2]!==f?(n=f.filter(er),h[2]=f,h[3]=n):n=h[3];let v=n;h[4]!==_?(a=()=>_("open"),h[4]=_,h[5]=a):a=h[5];let b="open"===y;h[6]!==x.length?(r=(0,m.jsx)("span",{className:O.counter,children:x.length}),h[6]=x.length,h[7]=r):r=h[7],h[8]!==a||h[9]!==b||h[10]!==r?(i=(0,m.jsxs)("button",{onClick:a,role:"tab","aria-selected":b,"aria-controls":"tasks-list",id:"open-tab",className:O.button,children:["Open ",r]}),h[8]=a,h[9]=b,h[10]=r,h[11]=i):i=h[11],h[12]!==_?(s=()=>_("closed"),h[12]=_,h[13]=s):s=h[13];let S="closed"===y;return h[14]!==v.length?(o=(0,m.jsx)("span",{className:O.counter,children:v.length}),h[14]=v.length,h[15]=o):o=h[15],h[16]!==s||h[17]!==S||h[18]!==o?(l=(0,m.jsxs)("button",{onClick:s,role:"tab","aria-selected":S,"aria-controls":"tasks-list",id:"closed-tab",className:O.button,children:["Closed ",o]}),h[16]=s,h[17]=S,h[18]=o,h[19]=l):l=h[19],h[20]!==l||h[21]!==i?(c=(0,m.jsx)(P.qJ.Header,{children:(0,m.jsxs)("div",{role:"tablist","aria-label":"Filter pull requests",className:O.filterButtons,children:[i,l]})}),h[20]=l,h[21]=i,h[22]=c):c=h[22],h[23]!==y||h[24]!==v||h[25]!==g||h[26]!==x?(d="open"===y?(0,m.jsx)(Z,{tasks:x,isError:g}):(0,m.jsx)(et,{tasks:v,isError:g}),h[23]=y,h[24]=v,h[25]=g,h[26]=x,h[27]=d):d=h[27],h[28]!==c||h[29]!==d?(u=(0,m.jsxs)(P.qJ,{children:[c,d]}),h[28]=c,h[29]=d,h[30]=u):u=h[30],u}function er(e){return!!(e.pull&&("merged"===e.pull.state||"closed"===e.pull.state))}function ei(e){return!e.pull||"merged"!==e.pull.state&&"closed"!==e.pull.state}function es(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(V.Fn,{children:(0,m.jsx)(eo,{})}),t[0]=e):e=t[0],e}function eo(){let e,t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,v,b,S,C,j,N,w=(0,p.c)(54),[I,E]=(0,x.useState)("open"),{apiURL:T,sessionsPollingInterval:k,showCopilotCodingAgentPremiumRequestsBanner:R,tasks:A,pullRequestsMap:L}=(0,$.X)();w[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],w[0]=e):e=w[0];let[P,M]=(0,x.useState)(e),F=T??"";w[1]!==L||w[2]!==A||w[3]!==k||w[4]!==F?(t={apiURL:F,sessionsPollingInterval:k,initialTasks:A,initialPullRequestsMap:L},w[1]=L,w[2]=A,w[3]=k,w[4]=F,w[5]=t):t=w[5];let{tasks:V,isError:Q}=(0,B.si)(t),Z=T??"";w[6]===Symbol.for("react.memo_cache_sentinel")?(n=(e,t)=>{M(n=>[...n,{...t,error:e,baseRef:t.baseRef,timestamp:new Date().toISOString()}])},w[6]=n):n=w[6],w[7]!==Z?(a={apiURL:Z,onError:n},w[7]=Z,w[8]=a):a=w[8];let{createTask:ee}=(0,X.Z)(a),et=(0,H.b)();w[9]===Symbol.for("react.memo_cache_sentinel")?(r=[],w[9]=r):r=w[9],(0,x.useEffect)(eu,r),w[10]!==et?(i=()=>{et.selectThread(null,{includeThreads:!1,clearTopic:!0})},s=[et],w[10]=et,w[11]=i,w[12]=s):(i=w[11],s=w[12]),(0,x.useEffect)(i,s),w[13]!==ee||w[14]!==et?(o=async(e,t,n,a)=>{let r=e.trim();""!==r&&n&&""!==n.trim()&&(t?(E("open"),ee({nwo:t.nameWithOwner,problemStatement:r,baseRef:n,eventType:"agents_page",subagent:a})):et.sendChatMessage({content:r,thread:null,references:[]}))},w[13]=ee,w[14]=et,w[15]=o):o=w[15];let en=o;w[16]!==ee||w[17]!==P?(l=e=>{let t=P[e];t&&(M(t=>t.filter((t,n)=>n!==e)),ee({nwo:t.nwo,problemStatement:t.problemStatement,baseRef:t.baseRef,eventType:"agents_page"}))},w[16]=ee,w[17]=P,w[18]=l):l=w[18];let er=l,{ssoOrganizations:ei,currentReferences:es}=(0,q.Pk)();w[19]!==ei?(c=ei.map(ed),w[19]=ei,w[20]=c):c=w[20];let eo=c;w[21]!==es?(d=es.find(ec),w[21]=es,w[22]=d):d=w[22];let em=d;w[23]!==eo?(u=()=>{let e=sessionStorage.getItem("PROTECTED_ORGS");JSON.stringify(eo)!==e&&(new z.l().removeLocalStorageAuthToken(),sessionStorage.setItem("PROTECTED_ORGS",JSON.stringify(eo)))},h=[eo],w[23]=eo,w[24]=u,w[25]=h):(u=w[24],h=w[25]),(0,x.useEffect)(u,h);let[ep,eh]=(0,x.useState)(!1);w[26]!==em?(f=em?{...em,private:em?.visibility==="private"}:void 0,w[26]=em,w[27]=f):f=w[27];let ef=f;return w[28]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsx)("div",{className:O.header}),w[28]=g):g=w[28],w[29]!==ep||w[30]!==R?(y=R&&!ep&&(0,m.jsx)(D.Banner,{children:(0,m.jsx)(U.C,{onBannerDismiss:()=>eh(!0)})}),w[29]=ep,w[30]=R,w[31]=y):y=w[31],w[32]===Symbol.for("react.memo_cache_sentinel")?(_=(0,m.jsxs)(D.Header,{children:[(0,m.jsx)(D.Title,{children:"Agents"}),(0,m.jsx)(D.Description,{children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."})]}),w[32]=_):_=w[32],w[33]!==eo?(v=eo.length>0&&!(0,J.G7)("global_sso_banner")&&(0,m.jsx)(D.Section,{children:(0,m.jsx)(W.x,{protectedOrgs:eo,redirectURI:el})}),w[33]=eo,w[34]=v):v=w[34],w[35]!==T||w[36]!==en||w[37]!==ef?(b=(0,m.jsx)(G.Q,{apiURL:T,handleUserSubmit:en,initialRepo:ef}),w[35]=T,w[36]=en,w[37]=ef,w[38]=b):b=w[38],w[39]!==P||w[40]!==er?(S=P.length>0&&(0,m.jsx)(Y.B,{direction:"vertical",className:O.failedTaskCreationBanners,children:P.map((e,t)=>(0,m.jsx)(K,{problemStatement:e?.problemStatement,handleRetry:()=>er(t),handleDismiss:()=>{M(e=>e.filter((e,n)=>n!==t))}},`${e?.nwo}-${e?.problemStatement}-${e?.timestamp}`))}),w[39]=P,w[40]=er,w[41]=S):S=w[41],w[42]!==b||w[43]!==S?(C=(0,m.jsxs)(D.Section,{children:[b,S]}),w[42]=b,w[43]=S,w[44]=C):C=w[44],w[45]!==I||w[46]!==Q||w[47]!==V?(j=(0,m.jsx)(D.Section,{children:(0,m.jsx)(ea,{tasks:V,isError:Q,activeTab:I,setActiveTab:E})}),w[45]=I,w[46]=Q,w[47]=V,w[48]=j):j=w[48],w[49]!==y||w[50]!==v||w[51]!==C||w[52]!==j?(N=(0,m.jsxs)(m.Fragment,{children:[g,(0,m.jsxs)(D.Container,{width:"small",children:[y,_,v,C,j]})]}),w[49]=y,w[50]=v,w[51]=C,w[52]=j,w[53]=N):N=w[53],N}function el(){return location.href}function ec(e){return"repository"===e.type}function ed(e){return e.login}function eu(){(0,g.D)("Agents \xb7 GitHub Copilot")}try{Z.displayName||(Z.displayName="OpenTaskList")}catch{}try{et.displayName||(et.displayName="ClosedTaskList")}catch{}try{ea.displayName||(ea.displayName="TaskList")}catch{}try{es.displayName||(es.displayName="AgentsViewWrapper")}catch{}try{eo.displayName||(eo.displayName="AgentsView")}catch{}var em=n(66108);let ep={subList:"Navigation-module__subList--AEkJW",section:"Navigation-module__section--qjRmV",expandButton:"Navigation-module__expandButton--mIsqs",item:"Navigation-module__item--FPCPQ",link:"Navigation-module__link--DGUY_",contextButton:"Navigation-module__contextButton--M54yM",icon:"Navigation-module__icon--tYIWA",textWrapper:"Navigation-module__textWrapper--gSQHD",text:"Navigation-module__text--bGb6x"};function eh(e){let t,n,a,r,i,s,o,l,c,d,u,h=(0,p.c)(38),{"aria-current":f,"data-analytics-event":g,children:y,contextMenuComponent:_,expandOnClick:v,hasItems:b,href:S,icon:C,iconOverride:j,onLinkClick:N,id:w,displayName:I,label:E}=e,T=void 0===v||v,[k,R]=(0,x.useState)(!1);h[0]!==k?(t=()=>{R(!k)},h[0]=k,h[1]=t):t=h[1];let A=t;h[2]!==T||h[3]!==w||h[4]!==N?(n=e=>{N?.(e,w),T&&R(!0)},h[2]=T,h[3]=w,h[4]=N,h[5]=n):n=h[5];let L=n;h[6]!==f||h[7]!==g||h[8]!==L?(a={"aria-current":f,"data-analytics-event":g,className:ep.link,onClick:L},h[6]=f,h[7]=g,h[8]=L,h[9]=a):a=h[9];let D=a;return h[10]!==k||h[11]!==b||h[12]!==A?(r=b&&(0,m.jsx)("button",{"aria-label":"Expand","aria-expanded":k,className:ep.expandButton,onClick:A,children:k?(0,m.jsx)(M.ChevronDownIcon,{size:12}):(0,m.jsx)(M.ChevronRightIcon,{size:12})}),h[10]=k,h[11]=b,h[12]=A,h[13]=r):r=h[13],h[14]!==C||h[15]!==j?(i=C?(0,m.jsx)(C,{size:16}):j,h[14]=C,h[15]=j,h[16]=i):i=h[16],h[17]!==i?(s=(0,m.jsx)("div",{className:ep.icon,children:i}),h[17]=i,h[18]=s):s=h[18],h[19]!==I?(o=(0,m.jsx)("div",{className:ep.textWrapper,children:(0,m.jsx)("div",{className:ep.text,children:I})}),h[19]=I,h[20]=o):o=h[20],h[21]!==D||h[22]!==S||h[23]!==E||h[24]!==s||h[25]!==o?(l=(0,m.jsxs)(em.N,{to:S,...D,children:[s,o,E]}),h[21]=D,h[22]=S,h[23]=E,h[24]=s,h[25]=o,h[26]=l):l=h[26],h[27]!==_||h[28]!==r||h[29]!==l?(c=(0,m.jsxs)("div",{className:ep.item,children:[r,l,_]}),h[27]=_,h[28]=r,h[29]=l,h[30]=c):c=h[30],h[31]!==y||h[32]!==k||h[33]!==b?(d=k&&b&&(0,m.jsx)("ul",{className:ep.subList,children:y}),h[31]=y,h[32]=k,h[33]=b,h[34]=d):d=h[34],h[35]!==c||h[36]!==d?(u=(0,m.jsxs)("li",{className:ep.section,children:[c,d]}),h[35]=c,h[36]=d,h[37]=u):u=h[37],u}try{eh.displayName||(eh.displayName="Navigation")}catch{}try{(a=function(e){let t,n,a,r,i=(0,p.c)(14),{"aria-current":s,contextMenuComponent:o,displayName:l,href:c,icon:d,iconOverride:u,onLinkClick:h}=e;return i[0]!==d||i[1]!==u?(t=d?(0,m.jsx)(d,{size:16,className:ep.icon}):u,i[0]=d,i[1]=u,i[2]=t):t=i[2],i[3]!==l?(n=(0,m.jsx)("div",{className:ep.textWrapper,children:(0,m.jsx)("div",{className:ep.text,children:l})}),i[3]=l,i[4]=n):n=i[4],i[5]!==s||i[6]!==c||i[7]!==h||i[8]!==t||i[9]!==n?(a=(0,m.jsxs)(em.N,{className:ep.link,to:c,"aria-current":s,onClick:h,children:[t,n]}),i[5]=s,i[6]=c,i[7]=h,i[8]=t,i[9]=n,i[10]=a):a=i[10],i[11]!==o||i[12]!==a?(r=(0,m.jsxs)("li",{className:ep.item,children:[a,o]}),i[11]=o,i[12]=a,i[13]=r):r=i[13],r}).displayName||(a.displayName="NavigationSubItem")}catch{}try{(r=function(e){let t,n,a=(0,p.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(M.KebabHorizontalIcon,{size:16}),a[0]=t):t=a[0],a[1]!==e?(n=(0,m.jsx)("button",{...e,className:ep.contextButton,children:t}),a[1]=e,a[2]=n):n=a[2],n}).displayName||(r.displayName="NavigationContextMenuButton")}catch{}var ef=n(13017),eg=n(71315);let ey="agents",e_="/copilot/agents";function ex(e,t,n,a,r,i,s,o,l,c,d=0,u=!1){let m=new Date("2025-06-04T20:00:00.000Z"),p=new Date(m.getTime()-24*c*36e5),h=new Date(m.getTime()-24*d*36e5);return{id:e,number:t,state:n,title:a,reviewable_state:r,url:`http://github.localhost:80/monalisa/smile/pull/${t}`,labels:i,comments:s,assignees_avatar_urls:Array.from({length:o},(t,n)=>`https://avatars.githubusercontent.com/u/${e+n}?v=4`),created_at:p.toISOString(),updated_at:h.toISOString(),merged_at:"merged"===n?h.toISOString():void 0,closed_at:"closed"===n||"merged"===n?h.toISOString():void 0,author:l,head_sha:`${a.toLowerCase().replace(/\s+/g,"")}123456789abcdef0123456789abcdef01234567`.substring(0,40),repository_nwo:"monalisa/smile",inMergeQueue:u}}function ev(e,t,n,a,r,i,s,o=0,l=0,c){let d=new Date("2025-06-04T20:00:00.000Z"),u=new Date(d.getTime()-60*s*6e4),m=new Date(d.getTime()-60*o*6e4);return{id:e,name:t,user_id:n,agent_id:a,state:r,owner_id:9919,repo_id:4,resource_type:"pull",resource_id:i,created_at:u.toISOString(),last_updated_at:m.toISOString(),completed_at:"completed"===r||"failed"===r?m.toISOString():void 0,workflow_run_id:12340+Math.floor(30*Math.random()),log_entries:[],error:c?{message:c}:null,premium_requests:l,event_identifiers:null,event_type:"api_call_received"}}function eb(e,t){return{resource_type:"pull",resource_id:e.id,session_count:1,latest_session_updated_at:t.last_updated_at,latest_session_state:t.state,pull:e}}(()=>{let e=["cancelled","idle","in_progress","waiting_for_user","completed","failed","timed_out"],t={titles:["Refactor database queries for performance","Implement dark mode theme","Optimize API response times","Add mobile responsive design","Implement caching layer","Add internationalization support","Update documentation and README","Fix critical security vulnerability","Add user authentication system","Initial project setup and configuration","Implement real-time notifications","Add search functionality","Optimize bundle size","Add unit tests coverage","Implement error handling","Add accessibility features","Optimize database connections","Implement feature flags","Migrate to TypeScript","Implement CI/CD pipeline","Add monitoring and alerts"],authors:["alice-dev","bob-backend","charlie-frontend","diana-fullstack","eve-designer","frank-security"],labels:[["performance","database"],["ui","theme","enhancement"],["performance","api"],["mobile","responsive","ui"],["performance","caching","backend"],["i18n","feature","localization"]],errorMessages:["timeout","validation error","resource conflict","permission denied"]},n=1;return[...["open","closed","merged"].flatMap(a=>e.map(e=>{let r=(n-1)%t.titles.length,i=t.titles[r],s=t.authors[(n-1)%t.authors.length],o=t.labels[r%t.labels.length],l=eb(ex(n,n,a,i,Math.random()>.7?"draft":"ready",o,Math.floor(15*Math.random())+1,Math.floor(3*Math.random()),s,n,n),ev(`session-${n.toString().padStart(3,"0")}`,`${i.split(" ").slice(0,3).join(" ")} - ${e}`,0x996718+n,1143300+n,e,n,n,n,Math.floor(10*Math.random()),"failed"===e?`Operation failed due to ${t.errorMessages[Math.floor(4*Math.random())]}`:void 0));return n++,l})),eb(ex(n,n,"open","Add feature flags support (in merge queue)","ready",["feature","flags"],5,1,"alice-dev",21,0,!0),ev(`session-${n.toString().padStart(3,"0")}`,"Add feature flags support - in_progress",0x996718+n,1143300+n,"in_progress",n,1,0,2,void 0))]})();var eS=n(21654),eC=n(55248);function ej(e){let t,n,a,r=(0,p.c)(7),{onLinkClick:i,"data-analytics-event":s}=e,o=(0,ef.zy)(),l=eg.fV?.pathname||o?.pathname||"";r[0]!==i?(t=(e,t)=>{i?.(e,t)},r[0]=i,r[1]=t):t=r[1];let c=t,d=l===e_?"page":void 0;return r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(eS.A,{variant:"success",children:"Preview"}),r[2]=n):n=r[2],r[3]!==s||r[4]!==c||r[5]!==d?(a=(0,m.jsx)(eh,{"aria-current":d,displayName:"Agents",href:e_,icon:eC.p,id:ey,onLinkClick:c,label:n,"data-analytics-event":s}),r[3]=s,r[4]=c,r[5]=d,r[6]=a):a=r[6],a}try{ej.displayName||(ej.displayName="AgentsViewNavigation")}catch{}let eN=/\/copilot\/agents/;let AgentsPlugin=class AgentsPlugin{matchPage(e){return!!e&&eN.test(e)}matchView(e){return!!e&&eN.test(e)}constructor(){(0,f._)(this,"id",ey),(0,f._)(this,"displayName","Agents"),(0,f._)(this,"routes",[eN]),(0,f._)(this,"ViewComponent",es),(0,f._)(this,"NavigationComponent",ej),(0,f._)(this,"navigationItems",[{id:ey,displayName:"Agents",href:e_,icon:eC.p,label:(0,x.createElement)(eS.A,{variant:"success"},"Preview")}])}};var ew=n(47789),eI=n(25641),eE=n(35247);let eT=(0,x.lazy)(async()=>({default:(await Promise.all([n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_d3-transition_src_index_js"),n.e("vendors-node_modules_d3-zoom_src_index_js"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_lz-string_libs_lz-string_js-6649eb"),n.e("packages_copilot-loops_components_Loop_tsx")]).then(n.bind(n,88574))).Loop}));try{eT.displayName||(eT.displayName="LazyLoop")}catch{}var ek=n(82590),eR=n(49851);function eA(e){let t,n,a=(0,p.c)(6),{onLinkClick:r,"data-analytics-event":i}=e,s=(0,ef.zy)(),o=eg.fV?.pathname||s?.pathname||"";a[0]!==r?(t=(e,t)=>{r?.(e,t)},a[0]=r,a[1]=t):t=a[1];let l=t,c=o===ek.QK?"page":void 0;return a[2]!==i||a[3]!==l||a[4]!==c?(n=(0,m.jsx)(eh,{"aria-current":c,displayName:"Loops",href:ek.QK,icon:eR.LP,id:ek.S$,onLinkClick:l,"data-analytics-event":i}),a[2]=i,a[3]=l,a[4]=c,a[5]=n):n=a[5],n}try{eA.displayName||(eA.displayName="PipesNavigation")}catch{}var eL=n(85094),eD=n(47970),eP=n(99519),eM=n(46665),eO=n(46857);function eB(){let{message:e}=(0,eM.V)(),t=(0,eO.O)(e);return t?.pipeline??null}let eF={container:"LoopBlock-module__container--F3X80",streaming:"LoopBlock-module__streaming--kzTU_",header:"LoopBlock-module__header--Bmyfz",headerCollapsed:"LoopBlock-module__headerCollapsed--Yoo66",expandButton:"LoopBlock-module__expandButton--kYkwN",buttonText:"LoopBlock-module__buttonText--pH2DI",content:"LoopBlock-module__content--SQW7_",node:"LoopBlock-module__node--GZLd9",iconContainer:"LoopBlock-module__iconContainer--QF1t5",checkIcon:"LoopBlock-module__checkIcon--_Toxw",nodeTitle:"LoopBlock-module__nodeTitle--upYDV"};var eU=n(55847);function e$(e){let t,n,a,r,i,s,o,l,c,d=(0,p.c)(26),{loop:u,headerButton:h,isStreaming:f}=e,[g,y]=(0,x.useState)(!0);if(!u)return null;d[0]!==g?(t=()=>y(!g),d[0]=g,d[1]=t):t=d[1];let v=t,b=f&&eF.streaming;d[2]!==b?(n=(0,_.$)(eF.container,b),d[2]=b,d[3]=n):n=d[3];let S=!g&&eF.headerCollapsed;return d[4]!==S?(a=(0,_.$)(eF.header,S),d[4]=S,d[5]=a):a=d[5],d[6]!==g?(r=g?(0,m.jsx)(M.ChevronDownIcon,{size:16}):(0,m.jsx)(M.ChevronRightIcon,{size:16}),d[6]=g,d[7]=r):r=d[7],d[8]!==u.title?(i=(0,m.jsx)("span",{className:eF.buttonText,children:u.title}),d[8]=u.title,d[9]=i):i=d[9],d[10]!==r||d[11]!==i||d[12]!==v?(s=(0,m.jsx)(eU.Q,{variant:"invisible",onClick:v,className:eF.expandButton,leadingVisual:r,children:i}),d[10]=r,d[11]=i,d[12]=v,d[13]=s):s=d[13],d[14]!==h||d[15]!==a||d[16]!==s?(o=(0,m.jsxs)("div",{className:a,children:[s,h]}),d[14]=h,d[15]=a,d[16]=s,d[17]=o):o=d[17],d[18]!==g||d[19]!==f||d[20]!==u.nodes?(l=g&&(0,m.jsx)("div",{className:eF.content,children:u.nodes.map((e,t)=>{let n=f&&t===u.nodes.length-1;return(0,m.jsxs)("div",{className:eF.node,children:[(0,m.jsx)("div",{className:eF.iconContainer,children:(0,m.jsx)(M.CheckCircleFillIcon,{size:16,className:eF.checkIcon})}),n&&!e.title?null:(0,m.jsx)("span",{className:eF.nodeTitle,children:e.title})]},e.id)})}),d[18]=g,d[19]=f,d[20]=u.nodes,d[21]=l):l=d[21],d[22]!==l||d[23]!==n||d[24]!==o?(c=(0,m.jsxs)("div",{className:n,children:[o,l]}),d[22]=l,d[23]=n,d[24]=o,d[25]=c):c=d[25],c}try{e$.displayName||(e$.displayName="LoopBlockContent")}catch{}function eV(e){let t,n=(0,p.c)(3),{isStreaming:a}=e,r=eB();return n[0]!==a||n[1]!==r?(t=(0,m.jsx)(e$,{loop:r,isStreaming:a}),n[0]=a,n[1]=r,n[2]=t):t=n[2],t}try{eV.displayName||(eV.displayName="ReadOnlyLoopBlock")}catch{}var eq=n(91348),eW=n(8283),eG=n(12465);function eH(e){let t,n,a,r=(0,p.c)(12),{isStreaming:i}=e,s=eB(),{mutate:o}=(0,eG.P)(),l=(0,eW.H_)();r[0]!==s||r[1]!==l||r[2]!==o?(t=()=>{if(!l||!s)return;let e=(0,eq.cZ)({...s,id:l},[]);o({loopID:l,updateFn:()=>e})},r[0]=s,r[1]=l,r[2]=o,r[3]=t):t=r[3];let c=t;r[4]!==c||r[5]!==i||r[6]!==l?(n=l&&!i?(0,m.jsx)(eU.Q,{variant:"invisible",onClick:c,children:"Restore"}):null,r[4]=c,r[5]=i,r[6]=l,r[7]=n):n=r[7];let d=n;return r[8]!==i||r[9]!==s||r[10]!==d?(a=(0,m.jsx)(e$,{loop:s,headerButton:d,isStreaming:i}),r[8]=i,r[9]=s,r[10]=d,r[11]=a):a=r[11],a}try{eH.displayName||(eH.displayName="InteractiveLoopBlock")}catch{}function ez(e){let t,n=(0,p.c)(4),{isStreaming:a}=e;if((0,eP.Ak)()){let e;return n[0]!==a?(e=(0,m.jsx)(eH,{isStreaming:a}),n[0]=a,n[1]=e):e=n[1],e}return n[2]!==a?(t=(0,m.jsx)(eV,{isStreaming:a}),n[2]=a,n[3]=t):t=n[3],t}try{ez.displayName||(ez.displayName="LoopBlock")}catch{}let eQ="data-loop-block",eK=(0,eL.F)(eQ),eJ={div:(e,t)=>{let n=(0,eL.k)(e,eQ);return n?(0,m.jsx)(ez,{...n}):t}};function eY(){return{transformMarkdown:e=>(0,eD.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[eK]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eD.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&eK in a.properties&&n.children.splice(t,1,a)}),reactComponents:eJ}}var eX=n(54908),eZ=n(43134),e0=n(21046),e1=n(82075),e2=n(93364),e3=n(33026);function e4(e){return!!e&&"object"==typeof e&&"loopID"in e&&"string"==typeof e.loopID}let IndexedDBLoopsStorage=class IndexedDBLoopsStorage{async getLoop(e,t){let n=await this.getPipelineRecord(e);if(!n)return(0,e2.YD)("loop record not found");let a=t===e3.qD?n.pipeline:n.draftPipeline;return a?(0,e2.$j)(a):(0,e2.YD)("loop not found")}async getAllLoops(e){let t=await this.getAllPipelineRecords();if(!t)return{success:!0,data:[]};let n=t.map(t=>e===e3.qD?t.pipeline:t.draftPipeline).filter(e=>null!==e);return(0,e2.$j)(n)}async createLoop(e){try{let t,n;"string"==typeof e?(t={id:e,version:"",title:"",updatedAt:Date.now(),nodes:[]},n=e):n=(t=e).id;let a={loopID:n,pipeline:null,draftPipeline:{...t}},r=await this.createPipelineRecord(a);if(!r?.draftPipeline)return(0,e2.YD)("Failed to create loop");return(0,e2.$j)(r.draftPipeline)}catch(e){return(0,e2.YD)(e)}}async updateLoop(e,t){try{let n=await this.updatePipelineRecord(e,e=>{let n=t(e.draftPipeline);return{...e,draftPipeline:n}});if(!n?.draftPipeline)return(0,e2.YD)("Error updating loop");return(0,e2.$j)(n.draftPipeline)}catch(e){return(0,e2.YD)(e)}}async deleteLoop(e){try{return await this.deletePipeline(e),{success:!0,data:void 0}}catch(e){return(0,e2.YD)(e)}}async saveLoop(e){try{let t=await this.updatePipelineRecord(e,e=>{if(!e.draftPipeline)throw Error("No draft pipeline to save");return{...e,pipeline:{...e.draftPipeline}}});if(!t?.pipeline)return(0,e2.YD)("Error saving loop");return(0,e2.$j)(t.pipeline)}catch(e){return(0,e2.YD)(e)}}async revertLoop(e){try{let t=await this.updatePipelineRecord(e,e=>{if(!e.pipeline)throw Error("No saved pipeline to revert to");return{...e,draftPipeline:{...e.pipeline}}});if(!t?.pipeline)return(0,e2.YD)("Error reverting loop");return(0,e2.$j)(t.pipeline)}catch(e){return(0,e2.YD)(e)}}async getPipelineRecord(e){return this.withTransaction(IndexedDBLoopsStorage.PIPELINES_STORE,"readonly",t=>t.get(e),e=>e4(e)?e:null)}async getPipeline(e){return this.getPipelineRecord(e)}async getAllPipelineRecords(){return this.withTransaction(IndexedDBLoopsStorage.PIPELINES_STORE,"readonly",e=>e.getAll(),e=>Array.isArray(e)?e.filter(e=>e4(e)?e.pipeline:null):[])}createPipelineRecord(e){let t=Date.now(),n=e.pipeline?{...e.pipeline,id:e.loopID,updatedAt:t}:e.pipeline,a=e.draftPipeline?{...e.draftPipeline,id:e.loopID,updatedAt:t}:e.draftPipeline,r={...e,pipeline:n,draftPipeline:a};return this.withTransaction(IndexedDBLoopsStorage.PIPELINES_STORE,"readwrite",e=>e.put(r),()=>r)}async updatePipelineRecord(e,t){let n=await this.getDatabase();return new Promise((a,r)=>{let i=n.transaction(IndexedDBLoopsStorage.PIPELINES_STORE,"readwrite");i.oncomplete=()=>n.close(),i.onerror=()=>r(i.error);let s=i.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE),o=s.get(e);o.onerror=()=>r(o.error),o.onsuccess=()=>{let n=o.result;if(!e4(n))return void r(Error(`Pipeline with ID ${e} not found`));try{let i=t(n),o=i.pipeline?{...i.pipeline,id:e}:i.pipeline,l=i.draftPipeline?{...i.draftPipeline,id:e,updatedAt:Date.now()}:i.draftPipeline,c={...i,pipeline:o,draftPipeline:l},d=s.put(c);d.onerror=()=>r(d.error),d.onsuccess=()=>a(c)}catch(e){r(e)}}})}deletePipeline(e){return this.withTransaction(IndexedDBLoopsStorage.PIPELINES_STORE,"readwrite",t=>t.delete(e),()=>e)}getExecution(e,t,n){if(n===e3.qD)return this.getLatestExecution(e,t);try{let a=IndexedDBLoopsStorage.getExecutionKey(e,t,n),r=IndexedDBLoopsStorage.executionStorage.getItem(a);if(!r)return Promise.resolve((0,e2.YD)(`execution ${n} not found`));return Promise.resolve({success:!0,data:JSON.parse(r)})}catch{return Promise.resolve((0,e2.YD)("error getting execution"))}}getLatestExecution(e,t){let n=IndexedDBLoopsStorage.executionStorage.getKeys(),a=null;for(let i of n){var r;let n;if(!i.includes(e))continue;let s=IndexedDBLoopsStorage.executionStorage.getItem(i);if(s){try{n=JSON.parse(s)}catch(e){(0,e0.vV)(e);continue}(r=n)&&"object"==typeof r&&"id"in r&&"string"==typeof r.id&&"createdAt"in r&&"number"==typeof r.createdAt&&"nodes"in r&&"object"==typeof r.nodes&&n.loopID===e&&n.loopVersion===t&&(!a||n.createdAt>a.createdAt)&&(a=n)}}return Promise.resolve(a?(0,e2.$j)(a):(0,e2.YD)("no latest execution found"))}async createExecution(e,t,n){let a=crypto.randomUUID(),r={id:a,loopID:e,loopVersion:t,createdAt:Date.now(),nodes:{},...n};try{let n=IndexedDBLoopsStorage.getExecutionKey(e,t,a);return IndexedDBLoopsStorage.executionStorage.setItem(n,JSON.stringify(r)),(0,e2.$j)(r)}catch(e){return(0,e2.YD)(e)}}async updateExecution(e,t,n,a){try{let r=IndexedDBLoopsStorage.getExecutionKey(e,t,n);if(!IndexedDBLoopsStorage.executionStorage.getItem(r))throw Error(`No execution found for pipeline ${e}`);return IndexedDBLoopsStorage.executionStorage.setItem(r,JSON.stringify(a)),(0,e2.$j)(a)}catch(e){return(0,e2.YD)(e)}}static getExecutionKey(e,t,n){return JSON.stringify({loopID:e,version:t,executionID:n})}async withTransaction(e,t,n,a){let r=await this.getDatabase();return new Promise((i,s)=>{let o=r.transaction(e,t);o.oncomplete=()=>r.close(),o.onerror=()=>s(o.error);let l=n(o.objectStore(e));l.onsuccess=()=>i(a(l.result)),l.onerror=()=>s(l.error)})}getDatabase(){return new Promise((e,t)=>{let n=indexedDB.open(IndexedDBLoopsStorage.PIPES_DB,IndexedDBLoopsStorage.CURRENT_VERSION);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=async e=>{try{await IndexedDBLoopsStorage.handleDatabaseUpgrade(n.result,e)}catch(e){t(e)}}})}static async handleDatabaseUpgrade(e,t){let n=t.oldVersion;if(0===n)return void await IndexedDBLoopsStorage.upgradeFromVersion0(e);n<2&&await IndexedDBLoopsStorage.upgradeFromVersion1(t),n<3&&await IndexedDBLoopsStorage.upgradeFromVersion2(t),n<4&&await IndexedDBLoopsStorage.upgradeFromVersion3(t),n<5&&await IndexedDBLoopsStorage.upgradeFromVersion4(t),n<6&&await IndexedDBLoopsStorage.upgradeFromVersion5(t),n<7&&await IndexedDBLoopsStorage.upgradeFromVersion6(t),n<8&&await IndexedDBLoopsStorage.upgradeFromVersion7(t),n<9&&await IndexedDBLoopsStorage.upgradeFromVersion8(t)}static upgradeFromVersion0(e){return new Promise((t,n)=>{try{e.createObjectStore(IndexedDBLoopsStorage.PIPELINES_STORE,{keyPath:"loopID"}).createIndex("loopID","loopID",{unique:!0}),t()}catch(e){n(e)}})}static async waitForAllAndResolve(e,t,n){try{await Promise.all(e),t()}catch(e){n(e)}}static upgradeFromVersion1(e){return new Promise((t,n)=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();let r=a.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let a=e.target?.result;if(a)try{let e=a.value;e.pipeline&&(e.pipeline.updatedAt=new Date().toISOString());let t=new Promise((t,n)=>{let r=a.update(e);r.onsuccess=()=>t(),r.onerror=()=>n(r.error)});i.push(t),a.continue()}catch(e){n(e)}else IndexedDBLoopsStorage.waitForAllAndResolve(i,t,n)},r.onerror=function(){n(r.error)}})}static upgradeFromVersion2(e){return new Promise((t,n)=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();let r=[],i=a.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor();i.onsuccess=function(e){let i=e.target?.result;if(i){let e=i.value;e?.pipeline&&!e.pipeline.updatedAt&&(e.pipeline.updatedAt=new Date().toISOString()),r.push(e),i.continue()}else try{a.db.deleteObjectStore(IndexedDBLoopsStorage.PIPELINES_STORE);let e=a.db.createObjectStore(IndexedDBLoopsStorage.PIPELINES_STORE,{keyPath:"loopID"});e.createIndex("loopID","loopID",{unique:!0});let i=r.map(e=>({loopID:e.pipeline.id,threadID:e.threadID,pipeline:e.pipeline}));if(0===i.length)return void t();let s=[];for(let t of i){let n=new Promise((n,a)=>{let r=e.put(t);r.onsuccess=()=>n(),r.onerror=()=>a(r.error)});s.push(n)}IndexedDBLoopsStorage.waitForAllAndResolve(s,t,n)}catch(e){n(e)}},i.onerror=function(){n(i.error)}})}static upgradeFromVersion3(e){return new Promise((t,n)=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();let r=a.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let a=e.target?.result;if(a)try{let e=a.value;if(e.pipeline&&!e.draftPipeline){e.draftPipeline={...e.pipeline};let t=new Promise((t,n)=>{let r=a.update(e);r.onsuccess=()=>t(),r.onerror=e=>n(e)});i.push(t)}a.continue()}catch(e){n(e)}else IndexedDBLoopsStorage.waitForAllAndResolve(i,t,n)},r.onerror=function(){n(r.error)}})}static upgradeFromVersion4(e){return new Promise((t,n)=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();let r=a.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let a=e.target?.result;if(a)try{let e=a.value;if(e.threadID&&e.loopID)try{(0,eZ.aq)(e.loopID,e.threadID)}catch(e){(0,e0.FF)("Failed to migrate thread ID to localStorage:",e)}if("threadID"in e){delete e.threadID;let t=new Promise((t,n)=>{let r=a.update(e);r.onsuccess=()=>t(),r.onerror=e=>n(e)});i.push(t)}a.continue()}catch(e){n(e)}else IndexedDBLoopsStorage.waitForAllAndResolve(i,t,n)},r.onerror=function(){n(r.error)}})}static upgradeFromVersion5(e){return new Promise(t=>{if(!e.target)return t();let n=e.target.transaction;if(!n)return t();n.db.deleteObjectStore(IndexedDBLoopsStorage.EXECUTION_STORE);let a=n.db.createObjectStore(IndexedDBLoopsStorage.EXECUTION_STORE,{keyPath:["pipelineId","executionId"]});a.createIndex("pipelineId, executionId",["pipelineId","executionId"],{unique:!0}),a.createIndex("pipelineId","pipelineId",{unique:!1}),t()})}static upgradeFromVersion6(e){return new Promise(t=>{if(!e.target)return t();let n=e.target.transaction;if(!n)return t();n.db.objectStoreNames.contains(IndexedDBLoopsStorage.EXECUTION_STORE)&&n.db.deleteObjectStore(IndexedDBLoopsStorage.EXECUTION_STORE),t()})}static upgradeFromVersion7(e){return new Promise((t,n)=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();let r=a.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let a=e.target?.result;if(a)try{let e=a.value;if("string"==typeof e.pipeline?.updatedAt||"string"==typeof e.draftPipeline?.updatedAt){e.pipeline&&(e.pipeline={...e.pipeline,updatedAt:new Date(e.pipeline.updatedAt).getTime()}),e.draftPipeline&&(e.draftPipeline={...e.draftPipeline,updatedAt:new Date(e.draftPipeline.updatedAt).getTime()});let t=new Promise((t,n)=>{let r=a.update(e);r.onsuccess=()=>t(),r.onerror=e=>n(e)});i.push(t)}a.continue()}catch(e){n(e)}else IndexedDBLoopsStorage.waitForAllAndResolve(i,t,n)},r.onerror=function(){n(r.error)}})}static upgradeFromVersion8(e){return new Promise((t,n)=>{if(!e.target)return t();let a=e.target.transaction;if(!a)return t();let r=a.objectStore(IndexedDBLoopsStorage.PIPELINES_STORE).openCursor(),i=[];r.onsuccess=function(e){let a=e.target?.result;if(a)try{let e=a.value,t=!1;for(let n of e.pipeline?.nodes??[])"text"===n.type&&"inputType"in n&&"object"==typeof n.inputType&&(n.metadata={...n.inputType,inputType:n.inputType.type},t=!0),"prompt"===n.type&&"model"in n&&(n.metadata={model:n.model},t=!0);for(let n of e.draftPipeline?.nodes??[])"text"===n.type&&"inputType"in n&&"object"==typeof n.inputType&&(n.metadata={...n.inputType,inputType:n.inputType.type},t=!0),"prompt"===n.type&&"model"in n&&(n.metadata={model:n.model},t=!0);if(t){let t=new Promise((t,n)=>{let r=a.update(e);r.onsuccess=()=>t(),r.onerror=e=>n(e)});i.push(t)}a.continue()}catch(e){n(e)}else IndexedDBLoopsStorage.waitForAllAndResolve(i,t,n)},r.onerror=function(){n(r.error)}})}};(0,f._)(IndexedDBLoopsStorage,"PIPES_DB","copilot-pipes"),(0,f._)(IndexedDBLoopsStorage,"PIPELINES_STORE","pipelines"),(0,f._)(IndexedDBLoopsStorage,"EXECUTION_STORE","executionStates"),(0,f._)(IndexedDBLoopsStorage,"CURRENT_VERSION",9),(0,f._)(IndexedDBLoopsStorage,"executionStorage",(0,e1.A)("sessionStorage",{ttl:18e5,throwQuotaErrorsOnSet:!1}));var e5=n(35750),e6=n(18150),e7=n(85242),e8=n(88243),e9=n(16213),te=n(65411),tt=n(46062),tn=n(53419),ta=new WeakMap,tr=new WeakMap,ti=new WeakMap,ts=new WeakSet;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,n){let a=(0,tt.wv)(),r=t??a.id,i=await (0,e5._)(this,ta).getAuthToken(),s=await (0,eI.p)({basePath:(0,e5._)(this,tr),body:{messages:e,model:r,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:i,integrationId:this.directConnectConfiguration.integrationID,realIp:(0,e5._)(this,ti),signal:n});if(!s.ok){let e=await s.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||s.error}catch(e){}throw(0,tn.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!n?.aborted&&s.body&&(yield*(0,e8._)(this,ts,to).call(this,s.body,n))}get directConnectConfiguration(){return{integrationID:"copilot-chat"}}constructor(e,t,n=""){(0,e9._)(this,ts),(0,e6._)(this,ta,{writable:!0,value:void 0}),(0,e6._)(this,tr,{writable:!0,value:void 0}),(0,e6._)(this,ti,{writable:!0,value:void 0}),(0,e7._)(this,tr,e),(0,e7._)(this,ta,new te.J(t)),(0,e7._)(this,ti,n)}};async function*to(e,t){let n=new TextDecoder("utf-8"),a=e.getReader(),r="";try{for(;;){if(t?.aborted)return;let{done:e,value:i}=await a.read();if(e)break;for(r+=n.decode(i);;){if(r.startsWith("data: [DONE]"))return;let e=r.indexOf(`

`);if(-1===e)break;let t=r.slice(0,e).replace(/^data:\s+/,"");if(""===t){r=r.slice(e+2);continue}try{let e=JSON.parse(t),n=e.choices?.[0]?.delta?.content??"";n&&(yield n)}catch{}r=r.slice(e+2)}}}finally{a.releaseLock()}}var tl=n(96379);let tc=["SAML"],td={FORBIDDEN:["SAML error"]};var tu=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t){let n=await (0,tl.Sr)((0,e5._)(this,tu),{method:"POST",body:{query:e},signal:t});if(n.ok){let e=await n.json();if(function(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!tc.includes(e.type)&&!td[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,tn.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,e0.vV)(n),(0,tn.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}(e,n.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e){(0,e6._)(this,tu,{writable:!0,value:void 0}),(0,e7._)(this,tu,e)}};var tm=n(93412);let tp={scrollContainer:"ServiceView-module__scrollContainer--swtgr",contentContainer:"ServiceView-module__contentContainer--Au73t",v3SpacesContent:"ServiceView-module__v3SpacesContent--DzlI6",content:"ServiceView-module__content--HpruR",small:"ServiceView-module__small--FVEmh",empty:"ServiceView-module__empty--knQes",banner:"ServiceView-module__banner--JgP7i",serviceHeader:"ServiceView-module__serviceHeader--iICuM",serviceDescription:"ServiceView-module__serviceDescription--t0gT5",serviceTitle:"ServiceView-module__serviceTitle--oDHTP",serviceIcon:"ServiceView-module__serviceIcon--_LuTr",section:"ServiceView-module__section--cxvUl",sectionTitle:"ServiceView-module__sectionTitle--l52Kf",sectionGrid:"ServiceView-module__sectionGrid--llRh_",sectionGridEmpty:"ServiceView-module__sectionGridEmpty--uAFBz",skeletonCard:"ServiceView-module__skeletonCard--NpF23"};function th(e){let t,n,a,r,i,s=(0,p.c)(12),{children:o,empty:l,width:c}=e;if(s[0]!==o){for(let e of(t=[],n=[],x.Children.toArray(o)))x.isValidElement(e)&&e.type===tf?t.push(e):n.push(e);s[0]=o,s[1]=t,s[2]=n}else t=s[1],n=s[2];let d="small"===c;return s[3]!==l||s[4]!==d?(a=(0,_.$)(tp.content,tp.v3SpacesContent,{[tp.empty]:l,[tp.small]:d}),s[3]=l,s[4]=d,s[5]=a):a=s[5],s[6]!==n||s[7]!==a?(r=(0,m.jsx)("div",{className:a,children:n}),s[6]=n,s[7]=a,s[8]=r):r=s[8],s[9]!==t||s[10]!==r?(i=(0,m.jsx)("div",{className:tp.scrollContainer,children:(0,m.jsxs)("div",{className:tp.contentContainer,children:[t,r]})}),s[9]=t,s[10]=r,s[11]=i):i=s[11],i}function tf(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:tp.banner,children:a}),n[0]=a,n[1]=t):t=n[1],t}function tg(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:tp.serviceHeader,children:a}),n[0]=a,n[1]=t):t=n[1],t}function ty(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("section",{className:tp.section,children:a}),n[0]=a,n[1]=t):t=n[1],t}function t_(e){let t,n=(0,p.c)(2),{icon:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:tp.serviceIcon,children:a}),n[0]=a,n[1]=t):t=n[1],t}function tx(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("h2",{className:tp.serviceTitle,children:a}),n[0]=a,n[1]=t):t=n[1],t}function tv(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("p",{className:tp.serviceDescription,children:a}),n[0]=a,n[1]=t):t=n[1],t}function tb(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("h3",{className:tp.sectionTitle,children:a}),n[0]=a,n[1]=t):t=n[1],t}function tS(e){let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:tp.sectionGridEmpty,children:a}),n[0]=a,n[1]=t):t=n[1],t}function tC(e){let t,n,a,r=(0,p.c)(8),{children:i,loading:s}=e;if(void 0!==s&&s){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:tp.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(tw)}),r[0]=e):e=r[0],e}if(r[1]!==i){let e=x.Children.toArray(i);t=e.find(tN),n=e.filter(tj),r[1]=i,r[2]=t,r[3]=n}else t=r[2],n=r[3];let o=n;if(0===o.length&&t){let e;return r[4]!==t?(e=(0,m.jsx)(m.Fragment,{children:t}),r[4]=t,r[5]=e):e=r[5],e}return r[6]!==o?(a=(0,m.jsx)("div",{className:tp.sectionGrid,children:o}),r[6]=o,r[7]=a):a=r[7],a}function tj(e){return!(x.isValidElement(e)&&e.type===tS)}function tN(e){return x.isValidElement(e)&&e.type===tS}function tw(e,t){return(0,m.jsx)(y.f,{className:tp.skeletonCard},t)}tC.Empty=tS,ty.Title=tb,ty.Grid=tC;let tI={Icon:t_,Title:tx,Description:tv,Container:th,Header:tg,Section:ty};try{th.displayName||(th.displayName="ServiceContainer")}catch{}try{tf.displayName||(tf.displayName="ServiceBanner")}catch{}try{tg.displayName||(tg.displayName="ServiceHeader")}catch{}try{ty.displayName||(ty.displayName="ServiceSection")}catch{}try{t_.displayName||(t_.displayName="Icon")}catch{}try{tx.displayName||(tx.displayName="Title")}catch{}try{tv.displayName||(tv.displayName="Description")}catch{}try{tb.displayName||(tb.displayName="SectionTitle")}catch{}try{tS.displayName||(tS.displayName="SectionGridEmpty")}catch{}try{tC.displayName||(tC.displayName="SectionGrid")}catch{}let tE={header:"LoopsView-module__header--ZnQDC",input:"LoopsView-module__input--HBzte"};var tT=n(4663),tk=n(80770),tR=n(82595),tA=n(49912),tL=n(17005),tD=n(5945),tP=n(87330),tM=n(52446);let tO={header:"LoopsViewHeader-module__header--miwmH",rightControls:"LoopsViewHeader-module__rightControls--tpwkz"};function tB(){let e,t,n,a,r=(0,p.c)(4),i=(0,x.useRef)(null),s=(0,x.useRef)(null);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(tP.K,{icon:M.KebabHorizontalIcon,"aria-label":"Menu",onClick:tU})}),r[0]=e):e=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{i.current?.openDialog(),(0,tn.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsxs)(tM.l.Item,{onSelect:t,children:["Give feedback",(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.CommentIcon,{})})]}),r[2]=n):n=r[2],r[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("div",{className:tO.header,children:(0,m.jsxs)("div",{className:tO.rightControls,children:[(0,m.jsxs)(tD.W,{anchorRef:s,children:[e,(0,m.jsx)(tD.W.Overlay,{width:"small",children:(0,m.jsx)(tM.l,{children:(0,m.jsxs)(tM.l.Group,{children:[n,(0,m.jsxs)(tM.l.LinkItem,{href:"/settings/copilot",onClick:tF,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.GearIcon,{})}),"Settings"]})]})})})]}),(0,m.jsx)(tL.l,{ref:i,mode:"immersive",returnFocusRef:s})]})}),r[3]=a):a=r[3],a}function tF(){return(0,tn.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function tU(){return(0,tn.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}try{tB.displayName||(tB.displayName="LoopsViewHeader")}catch{}let t$=[{altText:"GitHub Battle Royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub Battle Royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",metadata:{inputType:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",metadata:{inputType:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",metadata:{inputType:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",metadata:{inputType:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]}},{altText:"Battle Royale report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First Responder Activity Report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",metadata:{inputType:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]}},{altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub Feature Announcement Magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",metadata:{inputType:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",metadata:{inputType:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",metadata:{inputType:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,metadata:{inputType:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]}}],tV={cardContainer:"Card-module__cardContainer--nHo_a",cardContent:"Card-module__cardContent--JvAss",cardMenu:"Card-module__cardMenu--Y9ePc",itemHeader:"Card-module__itemHeader--iPhwl",edgeToEdge:"Card-module__edgeToEdge--Fe2_P",itemImage:"Card-module__itemImage--_n3S3",itemMain:"Card-module__itemMain--VE6Cn",itemContent:"Card-module__itemContent--NHydI",itemHeaderTitle:"Card-module__itemHeaderTitle--lOBWj",itemHeaderDescription:"Card-module__itemHeaderDescription--Pgc4P",itemMetadata:"Card-module__itemMetadata--zIQbb",itemMetadataItem:"Card-module__itemMetadataItem--KenwE"},tq=e=>{let t,n,a,r,i,s,o,l,c,d,u,h=(0,p.c)(47),f=null,g=null,y=null,v=null,b=null,S=null;if(h[0]!==e.children){for(let t of x.Children.toArray(e.children))x.isValidElement(t)&&(t.type===tW?f=t:t.type===tG?g=t:t.type===tH?y=t:t.type===tz?v=t:t.type===tK?b=t:t.type===tQ&&(S=t));h[0]=e.children,h[1]=f,h[2]=g,h[3]=y,h[4]=v,h[5]=b,h[6]=S}else f=h[1],g=h[2],y=h[3],v=h[4],b=h[5],S=h[6];h[7]!==g?(t=(0,_.$)(tV.itemHeader,g&&tV.edgeToEdge),h[7]=g,h[8]=t):t=h[8];let C=f||g;h[9]!==t||h[10]!==C?(n=(0,m.jsx)("div",{className:t,children:C}),h[9]=t,h[10]=C,h[11]=n):n=h[11],h[12]!==v||h[13]!==y?(a=(0,m.jsxs)("div",{className:tV.itemContent,children:[y,v]}),h[12]=v,h[13]=y,h[14]=a):a=h[14],h[15]!==b?(r=(0,m.jsx)("div",{className:tV.itemMetadata,children:b}),h[15]=b,h[16]=r):r=h[16],h[17]!==a||h[18]!==r?(i=(0,m.jsxs)("div",{className:tV.itemMain,children:[a,r]}),h[17]=a,h[18]=r,h[19]=i):i=h[19],h[20]!==n||h[21]!==i?(s=(0,m.jsxs)(m.Fragment,{children:[n,i]}),h[20]=n,h[21]=i,h[22]=s):s=h[22];let j=s;if("href"in e){let t,n,a,r,i;return h[23]!==e?({href:t,...n}=e,h[23]=e,h[24]=t,h[25]=n):(t=h[24],n=h[25]),h[26]!==j||h[27]!==t||h[28]!==n?(a=(0,m.jsx)(ef.N_,{...n,to:t,className:tV.cardContent,children:j}),h[26]=j,h[27]=t,h[28]=n,h[29]=a):a=h[29],h[30]!==S?(r=S?(0,m.jsx)("div",{className:tV.cardMenu,children:S}):null,h[30]=S,h[31]=r):r=h[31],h[32]!==a||h[33]!==r?(i=(0,m.jsxs)("div",{className:tV.cardContainer,children:[a,r]}),h[32]=a,h[33]=r,h[34]=i):i=h[34],i}return h[35]!==e?({onClick:o,...l}=e,h[35]=e,h[36]=o,h[37]=l):(o=h[36],l=h[37]),h[38]!==j||h[39]!==o||h[40]!==l?(c=(0,m.jsx)("button",{...l,className:tV.cardContent,onClick:o,children:j}),h[38]=j,h[39]=o,h[40]=l,h[41]=c):c=h[41],h[42]!==S?(d=S?(0,m.jsx)("div",{className:tV.cardMenu,children:S}):null,h[42]=S,h[43]=d):d=h[43],h[44]!==c||h[45]!==d?(u=(0,m.jsxs)("div",{className:tV.cardContainer,children:[c,d]}),h[44]=c,h[45]=d,h[46]=u):u=h[46],u},tW=e=>{let t,n=(0,p.c)(3),{icon:a,color:r}=e;return n[0]!==r||n[1]!==a?(t=(0,m.jsx)(tR.I,{icon:a,hasBackground:!0,color:r,size:16}),n[0]=r,n[1]=a,n[2]=t):t=n[2],t},tG=e=>{let t,n=(0,p.c)(3),{img:a,alt:r}=e,i=void 0===r?"":r;return n[0]!==i||n[1]!==a?(t=(0,m.jsx)("img",{src:a,alt:i,className:tV.itemImage}),n[0]=i,n[1]=a,n[2]=t):t=n[2],t},tH=e=>{let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("h3",{className:tV.itemHeaderTitle,children:a}),n[0]=a,n[1]=t):t=n[1],t},tz=e=>{let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("p",{className:tV.itemHeaderDescription,children:a}),n[0]=a,n[1]=t):t=n[1],t},tQ=e=>{let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)(m.Fragment,{children:a}),n[0]=a,n[1]=t):t=n[1],t},tK=e=>{let t,n=(0,p.c)(2),{children:a}=e;return n[0]!==a?(t=(0,m.jsx)("div",{className:tV.itemMetadataItem,children:a}),n[0]=a,n[1]=t):t=n[1],t};tq.Icon=tW,tq.Image=tG,tq.Heading=tH,tq.Description=tz,tq.Menu=tQ,tq.Metadata=tK;try{tq.displayName||(tq.displayName="Card")}catch{}try{tW.displayName||(tW.displayName="Icon")}catch{}try{tG.displayName||(tG.displayName="Image")}catch{}try{tH.displayName||(tH.displayName="Heading")}catch{}try{tz.displayName||(tz.displayName="Description")}catch{}try{tQ.displayName||(tQ.displayName="Menu")}catch{}try{tK.displayName||(tK.displayName="Metadata")}catch{}var tJ=n(56359),tY=n(17616);function tX(e){let t,n,a,r,i,s,o,l,c,d=(0,p.c)(25),{item:u,onClick:h}=e;d[0]!==u.color?(t=tY.u.find(e=>e===u.color),d[0]=u.color,d[1]=t):t=d[1];let f=t,g=`${eI.Jz}/l/${u.id}`;return d[2]!==f||d[3]!==u.title?(n=f??(0,tY.S)(u.title,tY.u),d[2]=f,d[3]=u.title,d[4]=n):n=d[4],d[5]!==n?(a=(0,m.jsx)(tq.Icon,{icon:"loops",color:n}),d[5]=n,d[6]=a):a=d[6],d[7]!==u.title?(r=(0,m.jsx)(tq.Heading,{children:u.title}),d[7]=u.title,d[8]=r):r=d[8],d[9]!==u.description?(i=(0,m.jsx)(tq.Description,{children:u.description}),d[9]=u.description,d[10]=i):i=d[10],d[11]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(eR.GS,{}),d[11]=s):s=d[11],d[12]!==u.nodes.length?(o=(0,m.jsxs)(tq.Metadata,{children:[s,u.nodes.length]}),d[12]=u.nodes.length,d[13]=o):o=d[13],d[14]!==u.id?(l=(0,m.jsx)(tq.Menu,{children:(0,m.jsx)(tJ.T,{loopId:u.id})}),d[14]=u.id,d[15]=l):l=d[15],d[16]!==u.id||d[17]!==h||d[18]!==g||d[19]!==a||d[20]!==r||d[21]!==i||d[22]!==o||d[23]!==l?(c=(0,m.jsxs)(tq,{href:g,onClick:h,children:[a,r,i,o,l]},u.id),d[16]=u.id,d[17]=h,d[18]=g,d[19]=a,d[20]=r,d[21]=i,d[22]=o,d[23]=l,d[24]=c):c=d[24],c}try{tX.displayName||(tX.displayName="LoopCard")}catch{}function tZ(e){let t,n,a,r,i,s,o,l=(0,p.c)(20),{altText:c,assetPath:d,exampleLoop:u,onSelect:h}=e;l[0]!==u||l[1]!==h?(t=()=>{(0,tn.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),h({...u,id:crypto.randomUUID(),updatedAt:Date.now()})},l[0]=u,l[1]=h,l[2]=t):t=l[2];let f=t;return l[3]!==c||l[4]!==d?(n=(0,m.jsx)(tq.Image,{alt:c,img:d}),l[3]=c,l[4]=d,l[5]=n):n=l[5],l[6]!==u.title?(a=(0,m.jsx)(tq.Heading,{children:u.title}),l[6]=u.title,l[7]=a):a=l[7],l[8]!==u.description?(r=(0,m.jsx)(tq.Description,{children:u.description}),l[8]=u.description,l[9]=r):r=l[9],l[10]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(eR.GS,{}),l[10]=i):i=l[10],l[11]!==u.nodes.length?(s=(0,m.jsxs)(tq.Metadata,{children:[i,u.nodes.length]}),l[11]=u.nodes.length,l[12]=s):s=l[12],l[13]!==u.title||l[14]!==f||l[15]!==n||l[16]!==a||l[17]!==r||l[18]!==s?(o=(0,m.jsxs)(tq,{onClick:f,children:[n,a,r,s]},u.title),l[13]=u.title,l[14]=f,l[15]=n,l[16]=a,l[17]=r,l[18]=s,l[19]=o):o=l[19],o}try{tZ.displayName||(tZ.displayName="LoopExampleCard")}catch{}function t0(e){let t,n,a=(0,p.c)(5),{chatState:r,plugin:i}=e;if(!i||!(0,tA.j)(i))throw Error("LoopsView can only be used with a LoopsPlugin");return a[0]!==r?(t=(0,m.jsx)(t1,{chatState:r}),a[0]=r,a[1]=t):t=a[1],a[2]!==i.service||a[3]!==t?(n=(0,m.jsx)(eP.qT,{value:i.service,children:t}),a[2]=i.service,a[3]=t,a[4]=n):n=a[4],n}function t1(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,v=(0,p.c)(33),{chatState:b}=e,{data:S,isLoading:C}=(0,tk.C)(),j=(0,H.b)(),N=(0,ef.Zp)(),w=(0,eP.EY)(),I=(0,tt.GF)(b.availableModels);v[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],v[0]=t):t=v[0],(0,x.useEffect)(t4,t),v[1]!==j?(n=()=>{j.selectThread(null,{includeThreads:!1,clearTopic:!0})},a=[j],v[1]=j,v[2]=n,v[3]=a):(n=v[2],a=v[3]),(0,x.useEffect)(n,a),v[4]!==I||v[5]!==w||v[6]!==j||v[7]!==N?(r=async e=>{let t=e.trim();if(""===t)return;(0,tn.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let n=crypto.randomUUID(),a={scopeId:ek.S$},r=await j.createThread(a);await w.createLoop(n),(0,eZ.aq)(n,r.id);let i={content:t,model:I,references:[],thread:r,mode:ek.lh};j.sendChatMessage(i),N(`${eI.Jz}/l/${n}`)},v[4]=I,v[5]=w,v[6]=j,v[7]=N,v[8]=r):r=v[8];let E=r;v[9]!==w||v[10]!==N?(i=async e=>{await w.createLoop(e),N(`${eI.Jz}/l/${e.id}`)},v[9]=w,v[10]=N,v[11]=i):i=v[11];let T=i;return v[12]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(tB,{}),v[12]=s):s=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsxs)(tI.Header,{children:[(0,m.jsx)(tI.Icon,{icon:(0,m.jsx)(tR.I,{icon:"loops",size:32})}),(0,m.jsx)(tI.Title,{children:"Automate once. Loop forever."}),(0,m.jsx)(tI.Description,{children:"Loops simplifies workflow automation by allowing you to define processes with clear inputs, prompts, and outputs\u2014no manual setup required. Powered by Copilot, Loops makes it easy to automate and manage tasks, streamlining your operations with minimal effort."})]}),v[13]=o):o=v[13],v[14]===Symbol.for("react.memo_cache_sentinel")?(l=[{name:"Loop",icon:(0,m.jsx)(M.LoopIcon,{}),submitLabel:"Automate",placeholder:"What would you like to automate?"}],v[14]=l):l=v[14],v[15]!==E?(c=(0,m.jsx)(tT.V,{modes:l,size:"large",onSubmit:E}),v[15]=E,v[16]=c):c=v[16],v[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(tm.h,{}),v[17]=d):d=v[17],v[18]!==c?(u=(0,m.jsxs)("div",{className:tE.header,children:[o,(0,m.jsxs)("div",{className:tE.input,children:[c,d]})]}),v[18]=c,v[19]=u):u=v[19],v[20]!==C||v[21]!==S?(h=C||S&&S.length>0?(0,m.jsxs)(tI.Section,{children:[(0,m.jsx)(tI.Section.Title,{children:"Your loops"}),(0,m.jsx)(tI.Section.Grid,{loading:C,children:S?.map(t2)})]}):null,v[20]=C,v[21]=S,v[22]=h):h=v[22],v[23]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(tI.Section.Title,{children:"Examples"}),v[23]=f):f=v[23],v[24]!==T?(g=t$.map(e=>{let{altText:t,assetPath:n,loop:a}=e;return(0,m.jsx)(tZ,{altText:t,assetPath:n,exampleLoop:a,onSelect:T},a.title)}),v[24]=T,v[25]=g):g=v[25],v[26]!==C||v[27]!==g?(y=(0,m.jsxs)(tI.Section,{children:[f,(0,m.jsx)(tI.Section.Grid,{loading:C,children:g})]}),v[26]=C,v[27]=g,v[28]=y):y=v[28],v[29]!==u||v[30]!==h||v[31]!==y?(_=(0,m.jsxs)(m.Fragment,{children:[s,(0,m.jsxs)(tI.Container,{children:[u,h,y]})]}),v[29]=u,v[30]=h,v[31]=y,v[32]=_):_=v[32],_}function t2(e){return(0,m.jsx)(tX,{item:e,onClick:t3},e.id)}function t3(){return(0,tn.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function t4(){(0,g.D)("Loops \xb7 GitHub Copilot"),Promise.all([n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_d3-transition_src_index_js"),n.e("vendors-node_modules_d3-zoom_src_index_js"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_lz-string_libs_lz-string_js-6649eb"),n.e("packages_copilot-loops_components_Loop_tsx")]).then(n.bind(n,88574))}try{t0.displayName||(t0.displayName="LoopsView")}catch{}try{t1.displayName||(t1.displayName="LoopsViewInner")}catch{}var t5=new WeakMap,t6=new WeakSet;let LoopsClient=class LoopsClient{listLoops(){return(0,e8._)(this,t6,t7).call(this,{operation:"list-loops"})}listLoopVersions(e){return(0,e8._)(this,t6,t7).call(this,{operation:"list-loop-versions",loopID:e})}createLoop(e){return(0,e8._)(this,t6,t7).call(this,{operation:"create-loop",loop:e})}updateLoop(e,t,n){return(0,e8._)(this,t6,t7).call(this,{operation:"update-loop",loopID:e,version:t,loop:n})}getLoop(e,t){return(0,e8._)(this,t6,t7).call(this,{operation:"get-loop",loopID:e,versionConstraint:t})}deleteLoop(e){return(0,e8._)(this,t6,t7).call(this,{operation:"delete-loop",loopID:e})}createExecution(e,t,n,a,r){return(0,e8._)(this,t6,t7).call(this,{operation:"create-execution",loopID:e,version:t,executionInit:{inputValues:a,nodes:n},shareID:r})}getExecution(e,t,n){return(0,e8._)(this,t6,t7).call(this,{operation:"get-execution",loopID:e,version:t,executionID:n})}updateNodeExecution(e,t,n,a,r,i){return(0,e8._)(this,t6,t7).call(this,{operation:"update-node-execution",loopID:e,version:t,executionID:n,nodeID:a,nodeExecution:r,shareID:i})}shareLoop(e){return(0,e8._)(this,t6,t7).call(this,{operation:"share-loop",loopID:e})}unshareLoop(e){return(0,e8._)(this,t6,t7).call(this,{operation:"unshare-loop",loopID:e})}getSharedLoop(e){return(0,e8._)(this,t6,t7).call(this,{operation:"get-shared-loop",shareID:e})}duplicateSharedLoop(e){return(0,e8._)(this,t6,t7).call(this,{operation:"duplicate-shared-loop",shareID:e})}constructor(e){(0,e9._)(this,t6),(0,e6._)(this,t5,{writable:!0,value:void 0}),(0,e7._)(this,t5,e)}};async function t7(e){let t=await (0,tl.DI)((0,e5._)(this,t5),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(!t.ok){let e=await t.text();try{return(0,e2.YD)(JSON.parse(e),t)}catch(e){return(0,e2.YD)(e,t)}}let n=204===t.status?void 0:await t.json();return(0,e2.$j)(n)}let LoopsPlugin=class LoopsPlugin{matchPage(e){return!!e&&(ek.bW.test(e)||ek.lN.test(e)||ek.ZS.test(e))}matchView(e){return!!e&&ek.qe.test(e)}matchThread(e,t){return!!this.routes.some(e=>e.test(eg.fV.pathname))||!!(0,eO.I)(t,!0)}async overrideCreateMessageOptions(e){return{...e,mode:ek.lh}}constructor(e,t,n,a,r,i){(0,f._)(this,"id",ek.S$),(0,f._)(this,"displayName",ek.Os),(0,f._)(this,"service",void 0),(0,f._)(this,"previewUrl",void 0),(0,f._)(this,"markdownExtensions",[eY]),(0,f._)(this,"routes",[ek.qe,ek.bW,ek.lN,ek.ZS]),(0,f._)(this,"skipSyncRouteToThread",!0),(0,f._)(this,"PageComponent",eT),(0,f._)(this,"ViewComponent",t0),(0,f._)(this,"NavigationComponent",eA),(0,f._)(this,"navigationItems",[{id:ek.S$,displayName:"Loops",href:ek.QK,icon:eR.LP}]),this.service=new eX.J(new LoopsClient(n),new IndexedDBLoopsStorage,new GraphQLClient(t),new ChatCompletionsClient(e,a,i)),this.previewUrl=r}};let t8=(0,x.createContext)({registerNavigableRef:()=>{},unregisterNavigableRef:()=>{}});function t9(e){let t,n,a,r,i,s,o,l,c=(0,p.c)(9),{children:d}=e;c[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],c[0]=t):t=c[0];let[u,h]=x.useState(t);c[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{h(t=>t.some(t=>t===e)?t:[...t,e])},c[1]=n):n=c[1];let f=n;c[2]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{h(t=>t.filter(t=>t!==e))},c[2]=a):a=c[2];let g=a;return c[3]!==u?(r=()=>{let e=e=>{if(e.ctrlKey&&"F6"===e.key){let t=u.filter(nn).sort(nt);if(0===t.length)return;let n=t.findIndex(ne),a=(!e.shiftKey?t[n+1]??t[0]:t[n-1]??t[t.length-1])?.current;if(a){if(!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(a.tagName)&&!a.hasAttribute("tabindex")){a.setAttribute("tabindex","-1");let e=()=>{a.removeAttribute("tabindex"),a.removeEventListener("blur",e)};a.addEventListener("blur",e,{once:!0})}a.focus()}}};return eg.XC?.addEventListener("keydown",e),()=>{eg.XC?.removeEventListener("keydown",e)}},i=[u],c[3]=u,c[4]=r,c[5]=i):(r=c[4],i=c[5]),(0,x.useEffect)(r,i),c[6]===Symbol.for("react.memo_cache_sentinel")?(o={registerNavigableRef:f,unregisterNavigableRef:g},c[6]=o):o=c[6],s=o,c[7]!==d?(l=(0,m.jsx)(t8.Provider,{value:s,children:d}),c[7]=d,c[8]=l):l=c[8],l}function ne(e){return e.current?.contains(eg.XC?.activeElement||null)}function nt(e,t){let n=e.current,a=t.current;return n===a?0:n.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}function nn(e){return null!==e.current}function na(){let e,t,n=(0,p.c)(4),a=(0,x.useRef)(null),{registerNavigableRef:r,unregisterNavigableRef:i}=(0,x.useContext)(t8);return n[0]!==r||n[1]!==i?(e=()=>(r(a),()=>{i(a)}),t=[r,i],n[0]=r,n[1]=i,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,x.useEffect)(e,t),a}try{t8.displayName||(t8.displayName="NavigableRefContext")}catch{}try{t9.displayName||(t9.displayName="NavigableRefProvider")}catch{}var nr=n(30721),ni=n(94195),ns=n(51625);let no={trailingVisual:"SparkNavigation-module__trailingVisual--_Fod3"};function nl(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(eh,{"aria-current":eg.fV.pathname===ns.cP?"page":void 0,displayName:"Spark",href:ns.cP,icon:M.SparkleIcon,id:ns.eu,contextMenuComponent:(0,m.jsx)(M.ArrowUpRightIcon,{className:no.trailingVisual})}),t[0]=e):e=t[0],e}try{nl.displayName||(nl.displayName="SparkNavigation")}catch{}let nc=/\/copilot\/spark/;let SparkPlugin=class SparkPlugin{matchView(e){return this.routes.some(t=>t.test(e))}constructor(){(0,f._)(this,"id",ns.eu),(0,f._)(this,"displayName",ns._x),(0,f._)(this,"routes",[nc]),(0,f._)(this,"NavigationComponent",nl),(0,f._)(this,"navigationItems",[{id:ns.eu,displayName:"Spark",href:ns.cP,icon:M.SparkleIcon,label:(0,x.createElement)(eS.A,{variant:"success"},"Preview"),external:!0}])}};var nd=n(18312),nu=n(76347),nm=n(78328),np=n(10871);let nh={container:"ImmersiveDisabled-module__container--MY4uP",content:"ImmersiveDisabled-module__content--ZhI_r",footer:"ImmersiveDisabled-module__footer--PVto2",bannerContainer:"ImmersiveDisabled-module__bannerContainer--QHoXa"};function nf(){let e,t,n=(0,p.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:nh.content,children:(0,m.jsx)(nm.A,{})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:nh.container,children:[e,(0,m.jsx)("div",{className:nh.footer,children:(0,m.jsx)("div",{className:nh.bannerContainer,children:(0,m.jsx)(Q.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,m.jsx)(np.z,{as:"a",href:"https://github.com/settings/copilot",onClick:ng,children:"Settings"})})})})]}),n[1]=t):t=n[1],t}function ng(){return(0,tn.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"})}try{nf.displayName||(nf.displayName="ImmersiveDisabled")}catch{}var ny=n(79184),n_=n(27359),nx=n(79064),nv=n(23657),nb=n(84646),nS=n(7812);function nC(e){let t,n=(0,p.c)(7),{messageId:a,messageIndex:r,messageTimestamp:i}=e,{openPreviewPane:s,openItem:o,updateItem:l}=(0,nu.xx)();return n[0]!==a||n[1]!==r||n[2]!==i||n[3]!==o||n[4]!==s||n[5]!==l?(t=(e,t)=>{let n;switch(e.type){case"file":n=(0,nS.by)(e,a,i);break;case"thread-scoped-file":n=(0,nS.oR)({ref:e,messageIndex:r,messageId:a,timestamp:i});break;case"draft-issue":n=(0,nS.oR)({ref:e,messageIndex:r,messageId:a});break;case"issue":n=(0,nS.SI)(e,a);break;default:return}t?.preventDefault(),l(n),o(n.id),s()},n[0]=a,n[1]=r,n[2]=i,n[3]=o,n[4]=s,n[5]=l,n[6]=t):t=n[6],t}function nj(){let e=(0,q.Pk)(),{referenceId:t,messageIndex:n}=function(){let e,t,n,a=(0,p.c)(6),r=(0,ef.zy)();if(a[0]!==r.search){let n=new URLSearchParams(r.search);e=n.get("reference_id"),t=n.get("message_index"),a[0]=r.search,a[1]=e,a[2]=t}else e=a[1],t=a[2];let i=t,s=null;if(null!==i){let e=parseInt(i,10);isNaN(e)||(s=e)}return a[3]!==s||a[4]!==e?(n={referenceId:e,messageIndex:s},a[3]=s,a[4]=e,a[5]=n):n=a[5],n}(),[,a]=(0,ef.ok)(),r=(0,x.useMemo)(()=>e.messages??[],[e.messages]),i=(0,x.useMemo)(()=>null!==n&&n>=0&&n<r.length?r[n]:null,[r,n]),s=(0,x.useMemo)(()=>i?.references??e.currentReferences??[],[i?.references,e.currentReferences]),o=(0,x.useMemo)(()=>t&&s.length?s.find(e=>(0,eI.Vb)(e)===t)??null:null,[t,s]),l=nC({messageIndex:n??r.length,messageId:i?.id,messageTimestamp:i?.createdAt});(0,x.useEffect)(()=>{o&&(l(o),a(e=>{let t=new URLSearchParams(e);return t.delete("reference_id"),t.delete("message_index"),t}))},[o,l,a])}var nN=n(7730),nw=n(75202),nI=n(6551),nE=n(11683),nT=n(82678),nk=n(71941),nR=n(81246),nA=n(88657);let nL={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--uGjJA"};function nD(e){let t,n,a,r,i,s,o=(0,p.c)(8),{regionName:l}=e;return o[0]!==l?(t=()=>{let e=`ERROR_FALLBACK_${l.toUpperCase().replace(/\s+/g,"_")}`;(0,tn.BI)("dotcom_chat.activate",{target:e,mode:"immersive",message:`${l} error fallback`})},n=[l],o[0]=l,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,x.useEffect)(t,n),o[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(nA.E.Visual,{children:(0,m.jsx)(M.AlertIcon,{size:"medium"})}),r=(0,m.jsx)(nA.E.Heading,{children:"Something went wrong"}),o[3]=a,o[4]=r):(a=o[3],r=o[4]),o[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(nR.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),o[5]=i):i=o[5],o[6]!==l?(s=(0,m.jsx)("div",{className:nL.errorFallbackContainer,children:(0,m.jsxs)(nA.E,{children:[a,r,(0,m.jsxs)(nA.E.Description,{children:[l," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",i,"."]})]})}),o[6]=l,o[7]=s):s=o[7],s}try{nD.displayName||(nD.displayName="ErrorFallback")}catch{}let nP={container:"ContentPreview-module__container--y5_MG",toolbar:"ContentPreview-module__toolbar--_XWuB",tabsContainer:"ContentPreview-module__tabsContainer--t0I1P",actions:"ContentPreview-module__actions--o_YRg",tabs:"ContentPreview-module__tabs--X2Pn9",rightDivider:"ContentPreview-module__rightDivider--LY__Z",leftDivider:"ContentPreview-module__leftDivider--FCyvC",content:"ContentPreview-module__content--FgZZL"};var nM=n(90651),nO=n(49246),nB=n(66827),nF=n(29731);let nU="/favicons/favicon-copilot.svg",n$={container:"FailureState-module__container--EliAz",icon:"FailureState-module__icon--TP632",heading:"FailureState-module__heading--ohXqD",subtitle:"FailureState-module__subtitle--VM7x1"};function nV(e){let t,n,a,r,i,s=(0,p.c)(11),{title:o,description:l,icon:c}=e;return s[0]!==c?(t=(0,m.jsx)(c,{size:24,className:n$.icon}),s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),s[2]=n):n=s[2],s[3]!==o?(a=(0,m.jsx)("h2",{className:n$.heading,children:o}),s[3]=o,s[4]=a):a=s[4],s[5]!==l?(r=(0,m.jsx)("p",{className:n$.subtitle,children:l}),s[5]=l,s[6]=r):r=s[6],s[7]!==t||s[8]!==a||s[9]!==r?(i=(0,m.jsxs)("div",{className:n$.container,children:[t,n,a,r]}),s[7]=t,s[8]=a,s[9]=r,s[10]=i):i=s[10],i}try{nV.displayName||(nV.displayName="FailureState")}catch{}var nq=n(26100);let nW={anchor:"VersionSelector-module__anchor--Tx_UX"};function nG(e){let t,n,a,r,i,s=(0,p.c)(16),{item:o,onVersionSelect:l}=e,{versionedItems:c,openItem:d}=(0,nu.xx)(),u=(0,nS.oy)(o.id),h=c.get(u)??[],f=h.indexOf(o.id);if((0,x.useEffect)(()=>{l&&h.length>1&&l(`Version${f+1}`)},[f,l,h.length]),h.length<=1)return null;let g=tD.W,y=f+1;s[0]!==y?(t=(0,m.jsx)(tD.W.Button,{variant:"invisible",className:nW.anchor,children:(0,m.jsx)(nq.g,{version:y,"data-testid":"version-selector"})}),s[0]=y,s[1]=t):t=s[1];let _=tD.W,v=tM.l;s[2]!==o.id||s[3]!==l||s[4]!==d?(n=(e,t)=>(0,m.jsxs)(tM.l.Item,{onSelect:()=>{d(e),l&&l(`Version${t+1}`)},selected:e===o.id,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(nq.g,{version:t+1})}),"Version ",t+1]},e),s[2]=o.id,s[3]=l,s[4]=d,s[5]=n):n=s[5];let b=h.map(n);return s[6]!==v||s[7]!==b?(a=(0,m.jsx)(v,{selectionVariant:"single",children:b}),s[6]=v,s[7]=b,s[8]=a):a=s[8],s[9]!==_.Overlay||s[10]!==a?(r=(0,m.jsx)(_.Overlay,{children:a}),s[9]=_.Overlay,s[10]=a,s[11]=r):r=s[11],s[12]!==g||s[13]!==t||s[14]!==r?(i=(0,m.jsxs)(g,{children:[t,r]}),s[12]=g,s[13]=t,s[14]=r,s[15]=i):i=s[15],i}try{nG.displayName||(nG.displayName="VersionSelector")}catch{}var nH=n(58335),nz=n(79531),nQ=n(83494),nK=n(96665),nJ=n(12004),nY=n(26861);let nX={dialogFooter:"BulkCreateDialog-module__dialogFooter--aWAd9",dialogFooterStatus:"BulkCreateDialog-module__dialogFooterStatus--RMt1N",dialogFooterActions:"BulkCreateDialog-module__dialogFooterActions--BvuR4",loadingIndicator:"BulkCreateDialog-module__loadingIndicator--sRZcS"};function nZ(e){let t,n=(0,p.c)(3);if("existing-issue"===e.type){if("open"===e.state){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.IssueOpenedIcon,{className:"fgColor-open"}),n[0]=e):e=n[0],e}if("closed"===e.state){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.IssueClosedIcon,{className:"fgColor-done"}),n[1]=e):e=n[1],e}}return n[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(M.IssueDraftIcon,{className:"fgColor-muted"}),n[2]=t):t=n[2],t}try{nZ.displayName||(nZ.displayName="IssueIcon")}catch{}var n0=n(90352);let n1={container:"IssueTree-module__container--kYTT7",subHeader:"IssueTree-module__subHeader--BDblp",tree:"IssueTree-module__tree--GQG9_",grid:"IssueTree-module__grid--hqjkj",item:"IssueTree-module__item--th4vZ",rootItem:"IssueTree-module__rootItem--hxb6j",spacer:"IssueTree-module__spacer--Z4HHo",leadingVisual:"IssueTree-module__leadingVisual--e_q3O",content:"IssueTree-module__content--Ko11D",title:"IssueTree-module__title--v0mbM",trailingVisual:"IssueTree-module__trailingVisual--SewMY"},n2=x.createContext({hasTrailingVisuals:void 0}),n3=x.createContext({level:0});function n4(e){let t,n,a,r,i,s,o,l=(0,p.c)(16),{subIssueCount:c,subIssueHeaderText:d,hasTrailingVisuals:u,children:h}=e,f=void 0===d?"Sub-issues":d,g=void 0!==u&&u;if(l[0]!==h){let e=x.Children.toArray(h);t=e.find(n6),n=e.filter(n5),l[0]=h,l[1]=t,l[2]=n}else t=l[1],n=l[2];let y=n;l[3]!==g?(r={hasTrailingVisuals:g},l[3]=g,l[4]=r):r=l[4],a=r;let _=!!g||void 0;return l[5]!==y||l[6]!==c||l[7]!==f?(i=y.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:n1.subHeader,children:[f,(0,m.jsx)(n0.A,{children:c})]}),(0,m.jsx)("ul",{role:"tree",className:n1.tree,children:y})]}),l[5]=y,l[6]=c,l[7]=f,l[8]=i):i=l[8],l[9]!==t||l[10]!==_||l[11]!==i?(s=(0,m.jsxs)("div",{className:n1.container,"data-has-trailing-visual":_,children:[t,i]}),l[9]=t,l[10]=_,l[11]=i,l[12]=s):s=l[12],l[13]!==a||l[14]!==s?(o=(0,m.jsx)(n2.Provider,{value:a,children:s}),l[13]=a,l[14]=s,l[15]=o):o=l[15],o}function n5(e){return x.isValidElement(e)&&e.type===n8}function n6(e){return x.isValidElement(e)&&e.type===n7}function n7(e){let t,n,a,r,i=(0,p.c)(4);return i[0]===Symbol.for("react.memo_cache_sentinel")?(n={level:0},i[0]=n):n=i[0],t=n,i[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,_.$)(n1.item,n1.rootItem),i[1]=a):a=i[1],i[2]!==e?(r=(0,m.jsx)(n3.Provider,{value:t,children:(0,m.jsx)("div",{className:a,children:(0,m.jsx)(at,{...e})})}),i[2]=e,i[3]=r):r=i[3],r}function n8(e){let t,n,a,r,i,s,o,l,c,d,u=(0,p.c)(19);if(u[0]!==e?({children:t,...n}=e,u[0]=e,u[1]=t,u[2]=n):(t=u[1],n=u[2]),u[3]!==t){let e=x.Children.toArray(t);a=e.filter(ae),r=e.filter(n9),u[3]=t,u[4]=a,u[5]=r}else a=u[4],r=u[5];let h=r,{level:f}=x.useContext(n3),g=f+1;return u[6]!==g?(s={level:g},u[6]=g,u[7]=s):s=u[7],i=s,u[8]!==h||u[9]!==n?(o=(0,m.jsx)(at,{...n,children:h}),u[8]=h,u[9]=n,u[10]=o):o=u[10],u[11]!==a?(l=a.length>0&&(0,m.jsx)("ul",{role:"group",className:n1.tree,children:a}),u[11]=a,u[12]=l):l=u[12],u[13]!==o||u[14]!==l?(c=(0,m.jsxs)("li",{role:"treeitem","aria-selected":"false",className:n1.item,children:[o,l]}),u[13]=o,u[14]=l,u[15]=c):c=u[15],u[16]!==i||u[17]!==c?(d=(0,m.jsx)(n3.Provider,{value:i,children:c}),u[16]=i,u[17]=c,u[18]=d):d=u[18],d}function n9(e){return!(x.isValidElement(e)&&e.type===n8)}function ae(e){return x.isValidElement(e)&&e.type===n8}function at(e){let t,n,a,r,i,s,o,l,c=(0,p.c)(27),{leadingVisual:d,title:u,trailingBadge:h,trailingVisual:f,href:g,onClick:y}=e,{level:_}=x.useContext(n3),{hasTrailingVisuals:v}=x.useContext(n2);e:{if(g){t="a";break e}if(y){t="button";break e}t="div"}let b=t;c[0]!==_?(n={"--level":_},c[0]=_,c[1]=n):n=c[1];let S=!!y||void 0;if(c[2]!==_?(a=_>0&&(0,m.jsx)("div",{className:n1.spacer}),c[2]=_,c[3]=a):a=c[3],c[4]!==d?(r=(0,m.jsx)("div",{className:n1.leadingVisual,children:d}),c[4]=d,c[5]=r):r=c[5],c[6]!==g||c[7]!==y||c[8]!==u||c[9]!==b){let e;c[11]!==g||c[12]!==y?(e={className:n1.title,href:g,onClick:y},c[11]=g,c[12]=y,c[13]=e):e=c[13],i=x.createElement(b,e,u),c[6]=g,c[7]=y,c[8]=u,c[9]=b,c[10]=i}else i=c[10];return c[14]!==i||c[15]!==h?(s=(0,m.jsxs)("div",{className:n1.content,children:[i,h]}),c[14]=i,c[15]=h,c[16]=s):s=c[16],c[17]!==v||c[18]!==f?(o=v&&(0,m.jsx)("div",{className:n1.trailingVisual,children:f}),c[17]=v,c[18]=f,c[19]=o):o=c[19],c[20]!==n||c[21]!==S||c[22]!==a||c[23]!==r||c[24]!==s||c[25]!==o?(l=(0,m.jsxs)("div",{className:n1.grid,style:n,"data-has-onclick":S,children:[a,r,s,o]}),c[20]=n,c[21]=S,c[22]=a,c[23]=r,c[24]=s,c[25]=o,c[26]=l):l=c[26],l}let an=Object.assign(n4,{RootItem:n7,Item:n8});try{n4.displayName||(n4.displayName="Tree")}catch{}try{n7.displayName||(n7.displayName="TreeRootItem")}catch{}try{n8.displayName||(n8.displayName="TreeItem")}catch{}try{at.displayName||(at.displayName="TreeItemContent")}catch{}try{an.displayName||(an.displayName="IssueTree")}catch{}var aa=n(16654),ar=n(94747),ai=n(97286);function as(e,t){for(let n of(t(e),e.children))as(n,t)}function ao(){let e,t,n=(0,p.c)(6),{items:a,allOpenItems:r,versionedItems:i}=(0,nu.xx)();n[0]!==r?(e=new Set(r),n[0]=r,n[1]=e):e=n[1];let s=e;if(n[2]!==a||n[3]!==s||n[4]!==i){let e=[...i.entries()].filter(ad).map(e=>{let[,t]=e,n=t.find(e=>s.has(e));if(n)return a.get(n);let r=t.at(-1);return r?a.get(r):void 0}).filter(ac);for(let n of(t=e.reduce(al,new Map),e)){if(!n.parentTag)continue;let e=t.get(n.parentTag),a=t.get(n.tag);e&&a&&(a.parent=e,e.children.push(a))}n[2]=a,n[3]=s,n[4]=i,n[5]=t}else t=n[5];return t}function al(e,t){return e.set(t.tag,{item:t,parent:null,children:[]}),e}function ac(e){return!!e}function ad(e){let[t]=e;return t.startsWith("new-issue:")||t.startsWith("existing-issue:")}var au=n(16049),am=n(73952);function ap(){let e,t,n=(0,p.c)(4),{messages:a}=(0,q.Pk)();n[0]!==a?(e=(0,am.B)(a),n[0]=a,n[1]=e):e=n[1];let r=e;return n[2]!==r?(t=(e,t)=>null==e?Promise.resolve(t):ah(t,e.databaseId,r[0]?.threadID),n[2]=r,n[3]=t):t=n[3],t}async function ah(e,t,n){let a=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),r=new Set;for(let e of a||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&r.add(t)}if(r.size>0){let a=Array.from(r).map(async e=>{let t=await fetch(e),n=await t.blob(),a=n.type.split("/")[1],r=`copilot-image.${a}`,i=await createImageBitmap(n),s=i.width;return i.close(),{file:new File([n],r,{type:n.type}),url:e,width:s}}),i=await Promise.all(a);for(let n of(await Promise.all(i.map(async e=>{if(e)return{uploadedFile:await (0,au.QM)(e.file,t?.toString()),originalUrl:e.url,width:e.width}}))))if(n){let{uploadedFile:t,originalUrl:a,width:r}=n,i=t.url;if(i){let t=RegExp(`!\\[(.*?)\\]\\(${a}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${r}" src="${i}" />`)}}(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:r.size,threadId:n})}return e}function af(e){return!e.state.error&&e.state.data?.job.state!=="success"&&e.state.data?.job.state!=="error"&&2e3}var ag=n(62559),ay=n(81724),a_=n(977),ax=n(18501),av=n(40961),ab=n(5338),aS=n(72767),aC=n(16378);async function aj(e,t,n){let a=await (0,nd.fetchQuery)(e,aS.F,{repoId:t,filename:n}).toPromise();return a&&a.node?(0,aC.EV)(a.node)??null:null}async function aN(e,t,n){let a,r={},i=new Map;for(let[s,o]of(as(n,e=>i.set(e.item.tag,e.item)),i)){if(r[s]={errorMessages:[]},"new-issue"===o.type&&!o.repository){r[s].errorMessages.push("Repository is required");continue}let[n,i]=o.repository?.split("/")||[];if(!n||!i){r[s].errorMessages.push('Repository must be in the format "owner/repo"');continue}let l=await (0,aa.tZ)(e,n,i);if(!l){r[s].errorMessages.push("Repository not found");continue}if(a??(a=l.owner.login),l.owner.login!==a){r[s].errorMessages.push("All issues must belong to the same repository owner");continue}if("existing-issue"===o.type)continue;if(!l.hasIssuesEnabled){r[s].errorMessages.push("Repository does not have issues enabled");continue}if(l.viewerInteractionLimitReasonHTML){r[s].errorMessages.push(l.viewerInteractionLimitReasonHTML);continue}let c=o.template?await aj(e,l.id,o.template):void 0;if(o.template&&!c){r[s].errorMessages.push("Issue template not found");continue}if(!l.isBlankIssuesEnabled&&!c){r[s].errorMessages.push("Issue template is required");continue}let d=(0,ag.O_)(o.name);if(d.isValid||r[s].errorMessages.push(d.errorMessage||"Issue title is invalid"),c&&(0,ay.GQ)(c.data)){t.current=null;let n=document.createElement("div"),a=(0,ab.H)(n);if((0,av.flushSync)(()=>{a.render((0,m.jsx)(ax.c,{partialName:"copilot-creates-issues-bulk-validation",wasServerRendered:!1,children:(0,m.jsx)(nd.RelayEnvironmentProvider,{environment:e,children:(0,m.jsx)(aw,{repository:l,draftIssue:o,template:c,outputRef:t})})}))}),!t.current)throw Error("IssueFormRef is not set");let i=t.current;try{if(i.getInvalidInputs().length>0){r[s].errorMessages.push("Invalid form input");continue}o.body=i.markdown()}finally{i.clearSessionStorage(),a.unmount(),n.remove()}}let u=(0,ag.QK)(o.body??"");u.isValid||r[s].errorMessages.push(u.errorMessage||"Issue body is invalid")}return r}function aw(e){let t,n,a,r=(0,p.c)(10),{repository:i,draftIssue:s,template:o,outputRef:l}=e,c=`${i.owner.login}/${i.name}`;if(r[0]!==i.databaseId||r[1]!==i.slashCommandsEnabled||r[2]!==c?(n={type:"issue",repository:{databaseId:i.databaseId,nwo:c,slashCommandsEnabled:i.slashCommandsEnabled}},r[0]=i.databaseId,r[1]=i.slashCommandsEnabled,r[2]=c,r[3]=n):n=r[3],t=n,!(0,ay.GQ)(o.data))return;let d=`copilot-creates-issues:${s.tag}`;return r[4]!==s.defaultValuesById||r[5]!==l||r[6]!==t||r[7]!==d||r[8]!==o.data?(a=(0,m.jsx)(a_.Z,{outputRef:l,issueFormRef:o.data,subject:t,sessionStorageKey:d,defaultValuesById:s.defaultValuesById}),r[4]=s.defaultValuesById,r[5]=l,r[6]=t,r[7]=d,r[8]=o.data,r[9]=a):a=r[9],a}try{aw.displayName||(aw.displayName="IssueFormWrapper")}catch{}var aI=n(51213),aE=n(72303),aT=n(20382);function ak(){let e,t=(0,p.c)(8),n=(0,H.b)(),a=(0,q.Pk)(),{closeItems:r,openItem:i,openPreviewPane:s,versionedItems:o,updateItem:l}=(0,nu.xx)();return t[0]!==r||t[1]!==n||t[2]!==i||t[3]!==s||t[4]!==a||t[5]!==l||t[6]!==o?(e=async e=>{var t;if(0===e.length)return;let c=e.find(aA)??e[0];(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_SAVED",mode:"immersive",threadId:(0,aE.W)(a)?.id,chatReferrer:document.referrer,repositoryId:c.repository.databaseId,draftType:c.draftType,issueTag:c.tag,issueNumber:c.number,templateType:c.template?c.template.endsWith(".md")?"markdown":"yaml":"none",savedIssuesCount:e.length});let d=[],u=[],m=[];for(let t of e){let n=t.repository.owner.login,a=t.repository.name,r=t.number;l({type:"issue",id:aL(t),messageId:aI.Wp,name:t.title,owner:n,repo:a,number:r,href:t.url}),d.push(`[${n}/${a}#${r}](${t.url})`);let i=e.find(e=>e.tag===t.parentTag);u.push({tag:`${n}/${a}#${r}`,parentTag:i?`${i.repository.owner.login}/${i.repository.name}#${i.number}`:void 0,title:t.title,repository:`${t.repository.owner.login}/${t.repository.name}`,number:t.number,state:"open",url:t.url}),m.push(t.tag)}r(e.map(aR).flatMap(e=>o.get(e)??[])),i(aL(c)),s();let p={type:"text",name:`timeline-event: {"type": "issue-saved", "markdownContent": "${(t=d).length>1?`Saved ${t.length} issues`:`Issue saved to ${t[0]}`}"}`,text:`${d.length>1?"Fetch the details for all saved issues and return them in a code block with YAML following this example format:":"Fetch the issue details and return them in a code block with YAML following this example format:"}
\`\`\`\`yaml type="issue-tree"
${(0,aT.Bh)({data:u},{forceQuotes:!0,noArrayIndent:!0,lineWidth:-1})}\`\`\`\``},h={type:"text",name:"ignore-obsolete-drafts",text:`From now on, you should only interact with these newly saved issues and not their corresponding drafts. You MUST exclude the draft issues with the following tags from any future tree creation: ${m.join(", ")}`};await n.sendChatMessage({thread:(0,aE.W)(a),content:d.length>1?`Saved the issues to ${d.join(", ")}`:`Saved the issue to ${d[0]}`,references:[p,h,...a.currentReferences],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=r,t[1]=n,t[2]=i,t[3]=s,t[4]=a,t[5]=l,t[6]=o,t[7]=e):e=t[7],e}function aR(e){return`${e.draftType}:${e.tag}`}function aA(e){return!e.parentTag}function aL(e){let t=e.repository.owner.login,n=e.repository.name,a=e.number;return`issue:${t}/${n}/${a}`}function aD({issueNode:e,onComplete:t,onCancel:n}){let a=(0,x.useMemo)(()=>{let t=e;for(;t?.parent;)t=t.parent;return t},[e]),r=(0,x.useMemo)(()=>{let e=0;return as(a,t=>{"new-issue"===t.item.type&&e++}),e},[a]),{mutate:i,isLoading:s,data:o,isComplete:l,isError:c,error:d}=function(e){let t,n,a,r=(0,p.c)(13),{issueNode:i}=e;r[0]!==i?(t={issueNode:i},r[0]=i,r[1]=t):t=r[1];let s=function(e){let t,n,a,r=(0,p.c)(9),{issueNode:i}=e,s=(0,nd.useRelayEnvironment)(),o=ap();return r[0]!==i.item.tag?(t=["copilot-issues-bulk-create",i.item.tag],r[0]=i.item.tag,r[1]=t):t=r[1],r[2]!==s||r[3]!==i||r[4]!==o?(n=async()=>{let e=new Map;as(i,t=>e.set(t.item.tag,t.item));let t=[],n=new Map;for(let[,a]of e){if("existing-issue"===a.type){t.push({tag:a.tag,parent_tag:a.parentTag,repository_nwo:a.repository,number:a.number});continue}let e=a.body;if(e&&a.repository){let t=n.get(a.repository);if(!t){let[e,r]=a.repository.split("/");null!=e&&null!=r&&(t=await (0,aa.tZ)(s,e,r),n.set(a.repository,t))}e=await o(t,e)}t.push({title:a.name,tag:a.tag,repository_nwo:a.repository,body:e,parent_tag:a.parentTag,labels:a.labels,assignees:a.assignees,milestone:a.milestone,issue_type:a.issueType,template:a.template,projects:a.projects})}let a=await (0,tl.Sr)("/copilot_issues/bulk_create",{method:"POST",body:{data:{issues:t}}});if(429===a.status)throw Error((await a.json()).error||"Rate limit exceeded. Please try again later.");if(!a.ok)throw Error((await a.json()).error.message||"Failed to create issues.");return await a.json()},r[2]=s,r[3]=i,r[4]=o,r[5]=n):n=r[5],r[6]!==t||r[7]!==n?(a={mutationKey:t,mutationFn:n},r[6]=t,r[7]=n,r[8]=a):a=r[8],(0,ar.n)(a)}(t),o=function(e){let t,n,a,r=(0,p.c)(7),i=!!e;return r[0]!==e?(t=["copilot-issues-bulk-create-status",e],n=async t=>{let n=await (0,tl.Sr)(e);if(!n.ok){let e=await n.json();throw t.client.setQueryData(t.queryKey,e),Error(e?.job.error_message||"Failed to fetch job status")}return await n.json()},r[0]=e,r[1]=t,r[2]=n):(t=r[1],n=r[2]),r[3]!==i||r[4]!==t||r[5]!==n?(a={enabled:i,queryKey:t,queryFn:n,refetchInterval:af},r[3]=i,r[4]=t,r[5]=n,r[6]=a):a=r[6],(0,ai.I)(a)}(s.data?.jobStatusUrl),l=s.error||o.error,c=s.isError||o.isError;r[2]!==s.isPending||r[3]!==o.data?.job.state||r[4]!==o.isLoading?(n=s.isPending||o.isLoading||["pending","queued","started"].includes(o.data?.job.state||""),r[2]=s.isPending,r[3]=o.data?.job.state,r[4]=o.isLoading,r[5]=n):n=r[5];let d=o.data?.job.state==="success";return r[6]!==s.mutate||r[7]!==o.data||r[8]!==l||r[9]!==c||r[10]!==n||r[11]!==d?(a={mutate:s.mutate,data:o.data,error:l,isError:c,isLoading:n,isComplete:d},r[6]=s.mutate,r[7]=o.data,r[8]=l,r[9]=c,r[10]=n,r[11]=d,r[12]=a):a=r[12],a}({issueNode:a}),u=ak(),{loading:h,result:f}=function(e){let t,n,a,r,i=(0,p.c)(8),[s,o]=(0,x.useState)(!1);i[0]===Symbol.for("react.memo_cache_sentinel")?(t={},i[0]=t):t=i[0];let[l,c]=(0,x.useState)(t),d=(0,nd.useRelayEnvironment)(),u=(0,x.useRef)(null);return i[1]!==d||i[2]!==e?(n=()=>{!async function(){o(!0),c(await aN(d,u,e)),o(!1)}()},a=[d,e],i[1]=d,i[2]=e,i[3]=n,i[4]=a):(n=i[3],a=i[4]),(0,x.useEffect)(n,a),i[5]!==s||i[6]!==l?(r={loading:s,result:l},i[5]=s,i[6]=l,i[7]=r):r=i[7],r}(a),g=(0,x.useMemo)(()=>f&&Object.values(f).some(e=>e.errorMessages.length>0),[f]);(0,x.useEffect)(()=>{if(!o||!l)return;let e=new Map;as(a,t=>{e.set(t.item.tag,t.item)});let n=o.job.completed_issues.map(t=>{let n=e.get(t.tag),[a,r]=n.repository.split("/");return{draftType:n.type,tag:t.tag,parentTag:n.parentTag,template:"new-issue"===n.type?n.template:void 0,repository:{databaseId:t.repository_id,name:r,owner:{login:a}},number:t.number,title:n.name,url:t.href}});t(),u(n)},[a,o,l,t,u]);let y=(0,x.useCallback)(()=>{s||l||i()},[s,l,i]),_=(0,x.useCallback)(()=>{s||l||n()},[s,l,n]),v=(0,x.useMemo)(()=>{let e=new Set;return(as(a,t=>e.add(t.item.type)),1===e.size&&"existing-issue"===a.item.type)?{title:"Update existing issues?",description:"Clicking Update will update the relationships between the issues shown below.",button:"Update issues"}:e.size>1&&"existing-issue"===a.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish all Copilot draft issues shown below. Existing sub-issues aren't displayed and remain unchanged.",button:1===r?"Create 1 issue":`Create ${r} issues`}:e.size>1&&"new-issue"===a.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish the Copilot draft issues shown below.",button:1===r?"Create 1 issue":`Create ${r} issues`}:{title:"Create all linked draft issues?",description:"These drafts are linked. Creating a sub-issue automatically publishes its parent and any nested drafts.",button:1===r?"Create 1 issue":`Create ${r} issues`}},[a,r]);return(0,m.jsx)(nK.l,{title:v.title,onClose:_,renderFooter:()=>h?null:(0,m.jsxs)(nK.l.Footer,{className:nX.dialogFooter,children:[(0,m.jsx)("div",{className:nX.dialogFooterStatus,children:c&&(0,m.jsx)(nY.v,{variant:"critical",children:d?.message})}),(0,m.jsxs)("div",{className:nX.dialogFooterActions,children:[(0,m.jsx)(eU.Q,{variant:"default",onClick:_,inactive:s||l,children:"Cancel"}),(0,m.jsx)(eU.Q,{variant:"primary",onClick:y,loading:s||l,disabled:g||c,children:v.button})]})]}),children:h?(0,m.jsx)("div",{className:nX.loadingIndicator,role:"status","aria-label":"Validating issues",children:(0,m.jsx)(nJ.A,{})}):g?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Q.l,{variant:"warning",hideTitle:!0,title:"Validation errors",description:"Fill out missing required fields to create all of these issues.",className:"mb-3"}),(0,m.jsx)(aP,{issueNode:a,iconSelector:e=>{if(f?.[e.item.tag]?.errorMessages.length)return(0,m.jsx)(M.AlertIcon,{className:"fgColor-attention","data-testid":`warning-icon-${e.item.tag}`})}})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:v.description}),(0,m.jsx)(aP,{issueNode:a,iconSelector:e=>{if(o?.job.completed_issues.some(t=>t.tag===e.item.tag))return(0,m.jsx)(M.CheckIcon,{className:"fgColor-success","data-testid":`success-icon-${e.item.tag}`})}})]})})}function aP({issueNode:e,iconSelector:t}){let{versionedItems:n}=(0,nu.xx)(),a=(0,x.useMemo)(()=>{let t=0;return as(e,e=>{e.parent&&t++}),t},[e]),r=e=>{let a=(0,nS.LU)(e.item.id,n);return(0,m.jsx)(an.Item,{title:e.item.name,leadingVisual:(0,m.jsx)(nZ,{...e.item}),trailingBadge:null!=a?(0,m.jsx)(nq.g,{version:a}):void 0,trailingVisual:t?.(e),children:e.children.length>0&&e.children.map(r)},e.item.tag)},i=(0,nS.LU)(e.item.id,n);return(0,m.jsxs)(an,{subIssueHeaderText:"existing-issue"===e.item.type?"New sub-issues":void 0,subIssueCount:a,hasTrailingVisuals:!0,children:[(0,m.jsx)(an.RootItem,{title:e.item.name,leadingVisual:(0,m.jsx)(nZ,{...e.item}),trailingBadge:null!=i?(0,m.jsx)(nq.g,{version:i}):void 0,trailingVisual:t?.(e)}),e.children.length>0&&e.children.map(r)]})}try{aD.displayName||(aD.displayName="BulkCreateDialog")}catch{}try{aP.displayName||(aP.displayName="IssueTree")}catch{}function aM(e){let t,n,a,r,i,s,o=(0,p.c)(11),{issueNode:l,disabled:c,onSuccess:d}=e,u=void 0!==c&&c,[h,f]=(0,x.useState)(!1),g=l;for(;g?.parent;)g=g.parent;t=g;let y=new Set;as(t,e=>y.add(e.item.type));e:{if(1===y.size&&y.has("existing-issue")){n="Update all";break e}n="Create all"}let _=n;return y.size>1&&"existing-issue"===l.item.type?null:(o[0]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{e.preventDefault(),f(!0)},o[0]=a):a=o[0],o[1]!==_||o[2]!==u?(r=(0,m.jsx)(nQ.cQ,{commandId:"github:submit-form",variant:"primary",disabled:u,"data-testid":"create-bulk-issue-dialog-button",showKeybindingHint:!0,onClick:a,children:_}),o[1]=_,o[2]=u,o[3]=r):r=o[3],o[4]!==d||o[5]!==t||o[6]!==h?(i=h&&(0,m.jsx)(aD,{issueNode:t,onComplete:()=>{f(!1),d()},onCancel:()=>{f(!1)}}),o[4]=d,o[5]=t,o[6]=h,o[7]=i):i=o[7],o[8]!==r||o[9]!==i?(s=(0,m.jsxs)(m.Fragment,{children:[r,i]}),o[8]=r,o[9]=i,o[10]=s):s=o[10],s)}try{aM.displayName||(aM.displayName="BulkCreateButton")}catch{}function aO({issueTemplate:e,issueNode:t,issueFormRef:n,noRepoAccess:a=!1,onClose:r}){let[i,s]=x.useState(!1),o=x.useRef(null),{repository:l}=(0,nz.u)(),c=l&&!e&&!l.isBlankIssuesEnabled,{clearSessionData:d}=(0,nz.u)(),u=(0,x.useCallback)(()=>{d(),n.current?.clearSessionStorage()},[d,n]),p=(0,x.useCallback)(()=>{u(),r?.()},[u,r]);return eE.W.draftIssueTree&&(t?.parent||t?.children.length)?(0,m.jsx)(aM,{issueNode:t,disabled:a,onSuccess:p}):l&&l.hasIssuesEnabled?c?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(nQ.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:o,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),s(!0)},children:"Create"}),i&&(0,m.jsx)(nK.l,{title:"Select a template",onClose:()=>s(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>s(!1)}],returnFocusRef:o,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."})]}):(0,m.jsx)(nH.l,{hideCreateMore:!0,className:"width-auto"}):null}try{aO.displayName||(aO.displayName="CreateIssueButton")}catch{}var aB=n(89070),aF=n(73189),aU=n(88752);function a$(e){let t,n,a,r,i,s=(0,p.c)(20),{className:o,messageId:l,messageIndex:c,messageTimestamp:d,references:u,size:h}=e;s[0]!==l||s[1]!==c||s[2]!==d?(t={messageId:l,messageIndex:c,messageTimestamp:d},s[0]=l,s[1]=c,s[2]=d,s[3]=t):t=s[3];let f=nC(t),{updateItem:g,versionedItems:y}=(0,nu.xx)();return s[4]!==l||s[5]!==c||s[6]!==d||s[7]!==u||s[8]!==g?(n=()=>{for(let e of u){let t=(0,nS.oR)({ref:e,messageIndex:void 0!==c?c:1,messageId:l,timestamp:d});null!=t&&g(t)}},a=[l,c,d,u,g],s[4]=l,s[5]=c,s[6]=d,s[7]=u,s[8]=g,s[9]=n,s[10]=a):(n=s[9],a=s[10]),(0,x.useEffect)(n,a),s[11]!==c||s[12]!==y?(r=e=>(0,nS.wt)(e,c,y),s[11]=c,s[12]=y,s[13]=r):r=s[13],s[14]!==o||s[15]!==f||s[16]!==u||s[17]!==h||s[18]!==r?(i=(0,m.jsx)(aU.t,{references:u,onClickReference:f,size:h,className:o,getReferenceVersion:r}),s[14]=o,s[15]=f,s[16]=u,s[17]=h,s[18]=r,s[19]=i):i=s[19],i}try{a$.displayName||(a$.displayName="ChatMessageReferences")}catch{}var aV=n(4817);let aq=(0,x.createContext)(null),aW=()=>{let e=(0,x.useContext)(aq);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{aq.displayName||(aq.displayName="ContentPreviewBlockContext")}catch{}var aG=n(39876),aH=n(23967),az=n(22072);function aQ(e){let t,n,a,r=(0,p.c)(4),{className:i}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,m.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("defs",{children:(0,m.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,m.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),r[1]=n):n=r[1],r[2]!==i?(a=(0,m.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:i,children:[t,n]}),r[2]=i,r[3]=a):a=r[3],a}try{aQ.displayName||(aQ.displayName="ExpandIcon")}catch{}let aK={container:"FileBlock-module__container--Dzsqa",header:"FileBlock-module__header--AdNd3",language:"FileBlock-module__language--hjnkp",name:"FileBlock-module__name--PRLLi",previewCode:"FileBlock-module__previewCode--xp45Y",isClipped:"FileBlock-module__isClipped--g6E0E",expandIconContainer:"FileBlock-module__expandIconContainer--re33w",insightsButtonContainer:"FileBlock-module__insightsButtonContainer--QtzBn"};function aJ(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,v,b,S,C,j=(0,p.c)(71),{language:N,name:w,code:I,line:E,children:T,isClipped:k,isStreaming:R,index:A,startOffset:L,endOffset:D}=e,{message:P}=(0,eM.V)(),{updateItem:O,openItem:B,openPreviewPane:F,versionedItems:U,getOpenItems:$}=(0,nu.xx)(),{messageIndex:V,messageId:q,messageTimestamp:W,autoOpenPreviewPane:G,markdown:H,hasAutoOpenedPreviewPaneRef:z,setHasAutoOpenedPreviewPane:Q}=aW(),{name:K}=(0,aH.vL)(N),J=`file:${w}`,Y=`${J}#${V}.${E}`,X=!!I,Z=U.get(J)??[],ee=Z.indexOf(Y),et=Z.length>1&&-1!==ee?ee+1:null;j[0]!==$||j[1]!==Y||j[2]!==A||j[3]!==B||j[4]!==F?(t=(e,t)=>{(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive"}),B(Y,void 0===t||t||$().length<1||0===A),e&&F()},j[0]=$,j[1]=Y,j[2]=A,j[3]=B,j[4]=F,j[5]=t):t=j[5];let en=t;j[6]!==I||j[7]!==Y||j[8]!==R||j[9]!==N||j[10]!==H||j[11]!==q||j[12]!==W||j[13]!==w||j[14]!==X||j[15]!==O?(n=()=>{let e=I?.trimEnd();X&&q!==aI.Wp&&-1!==H.indexOf(e)&&O({messageId:q,id:Y,language:N,name:w,value:I,type:"file",timestamp:new Date(W),isStreaming:R,isUserEdited:!1})},a=[I,N,q,w,O,Y,X,W,R,H],j[6]=I,j[7]=Y,j[8]=R,j[9]=N,j[10]=H,j[11]=q,j[12]=W,j[13]=w,j[14]=X,j[15]=O,j[16]=n,j[17]=a):(n=j[16],a=j[17]),(0,x.useEffect)(n,a),j[18]!==G||j[19]!==z||j[20]!==R||j[21]!==q||j[22]!==en||j[23]!==X||j[24]!==Q?(r=()=>{R&&X&&q!==aI.Wp&&(en(G&&!z.current,!1),Q(!0))},i=[R,X,en,G,q,z,Q],j[18]=G,j[19]=z,j[20]=R,j[21]=q,j[22]=en,j[23]=X,j[24]=Q,j[25]=r,j[26]=i):(r=j[25],i=j[26]),(0,x.useEffect)(r,i);let[ea,er]=(0,x.useState)(!1),{publicCodeReferences:ei,codeVulnerabilities:es}=(0,aG.R)(P.copilotAnnotations,L,D);j[27]!==en?(s=()=>en(!0),j[27]=en,j[28]=s):s=j[28];let eo=`View file: ${w}`,el=`chat-message-view-file-${w}`,ec=R?(0,m.jsx)(nJ.A,{size:"small",className:aV.sX}):aH.Yr.has(K)?(0,m.jsx)(M.MarkdownIcon,{className:aV.sX}):(0,m.jsx)(M.CodeIcon,{className:aV.sX});j[29]!==w?(o=(0,m.jsx)("span",{className:aK.name,children:w}),j[29]=w,j[30]=o):o=j[30],j[31]!==et?(l=null!==et&&(0,m.jsx)(nq.g,{version:et}),j[31]=et,j[32]=l):l=j[32],j[33]!==aK.language||j[34]!==ec||j[35]!==o||j[36]!==l?(c=(0,m.jsxs)("div",{className:aK.language,children:[ec,o,l]}),j[33]=aK.language,j[34]=ec,j[35]=o,j[36]=l,j[37]=c):c=j[37],j[38]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)("div",{className:aK.expandIconContainer,children:(0,m.jsx)(aQ,{})}),j[38]=d):d=j[38],j[39]!==aK.header||j[40]!==c?(u=(0,m.jsxs)("div",{className:aK.header,children:[c,d]}),j[39]=aK.header,j[40]=c,j[41]=u):u=j[41];let ed=k&&aK.isClipped;return j[42]!==ed?(h=(0,_.$)(aK.previewCode,ed),j[42]=ed,j[43]=h):h=j[43],j[44]!==T?(f=(0,m.jsx)("code",{children:T}),j[44]=T,j[45]=f):f=j[45],j[46]!==h||j[47]!==f?(g=(0,m.jsx)("pre",{className:h,"aria-hidden":!0,children:f}),j[46]=h,j[47]=f,j[48]=g):g=j[48],j[49]!==el||j[50]!==u||j[51]!==g||j[52]!==aK.container||j[53]!==s||j[54]!==eo?(y=(0,m.jsxs)("button",{className:aK.container,onClick:s,"aria-label":eo,"data-testid":el,children:[u,g]}),j[49]=el,j[50]=u,j[51]=g,j[52]=aK.container,j[53]=s,j[54]=eo,j[55]=y):y=j[55],j[56]!==es||j[57]!==ei.length||j[58]!==er?(v=(ei.length>0||es.length>0)&&(0,m.jsx)("div",{className:aK.insightsButtonContainer,children:(0,m.jsx)(tP.K,{variant:"invisible",size:"small",icon:M.ShieldIcon,"aria-label":"Code insights",onClick:()=>er(!0)})}),j[56]=es,j[57]=ei.length,j[58]=er,j[59]=v):v=j[59],j[60]!==y||j[61]!==v?(b=(0,m.jsxs)("div",{className:"position-relative",children:[y,v]}),j[60]=y,j[61]=v,j[62]=b):b=j[62],j[63]!==es||j[64]!==ea||j[65]!==ei||j[66]!==er?(S=ea&&(0,m.jsx)(az.t,{publicCodeReferences:ei,codeVulnerabilities:es,onClose:()=>er(!1)}),j[63]=es,j[64]=ea,j[65]=ei,j[66]=er,j[67]=S):S=j[67],j[68]!==b||j[69]!==S?(C=(0,m.jsxs)(m.Fragment,{children:[b,S]}),j[68]=b,j[69]=S,j[70]=C):C=j[70],C}try{aJ.displayName||(aJ.displayName="FileBlock")}catch{}let aY="data-fileblock-props",aX=(0,eL.F)(aY),aZ=/^name=(?<name>[^\s]+)/,a0=/^name=(?<name>[^\s]+)\n?/,a1={code:(e,t)=>{let n=(0,eL.k)(e,aY);return n?(0,m.jsx)(aJ,{...n,children:e.children}):t}},a2=/^type=(?<type>[^\s]+)\n?/,a3=e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e;function a4(e){let{messages:t}=(0,q.Pk)(),n=(0,am.B)(t);return function(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let a of n){let n=/\(image(\d+)\)/,r=parseInt(a.match(n)[1],10),i=t.length-r,s=t[i]?.chatAttachmentUrl||t[i]?.url;if(s){let t=a.replace(n,`(${s})`);e=e.replace(a,t)}}return e}(e,(0,x.useMemo)(()=>n.flatMap(e=>e.mediaContent||[]),[n]))}var a5=n(46996),a6=n(12874);let a7=e=>e.replace(/\\n/g,`
`).replace(/^\s+|\s+$/g,""),a8=(e,t)=>{let n=(e||[]).map(e=>a7(e)),a=(t||[]).map(e=>a7(e));return n.length===a.length&&(0,a5.A)((0,a6.A)(n),(0,a6.A)(a))},a9=e=>null==e?"":a7(e),re=e=>{if(Array.isArray(e)){let t=e.map(e=>"string"==typeof e?a7(e):String(e));return`[${t.join(",")}]`}return"string"==typeof e||null==e?a9(e):JSON.stringify(e)},rt=(e,t)=>{let n=[],a={};return a9(e.title)!==a9(t.title)&&(n.push("title"),a.title={expected:re(t.title),actual:re(e.title)}),a9(e.body)!==a9(t.description)&&(n.push("body"),a.body={expected:re(t.description),actual:re(e.body)}),a9(e.repository)!==a9(t.repository)&&(n.push("repository"),a.repository={expected:re(t.repository),actual:re(e.repository)}),a9(e.template)!==a9(t.template)&&(n.push("template"),a.template={expected:re(t.template),actual:re(e.template)}),a9(e.issueType)!==a9(t.issueType)&&(n.push("issueType"),a.issueType={expected:re(t.issueType),actual:re(e.issueType)}),a9(e.milestone)!==a9(t.milestone)&&(n.push("milestone"),a.milestone={expected:re(t.milestone),actual:re(e.milestone)}),a8(e.assignees,t.assignees)||(n.push("assignees"),a.assignees={expected:re(t.assignees),actual:re(e.assignees)}),a8(e.labels,t.labels)||(n.push("labels"),a.labels={expected:re(t.labels),actual:re(e.labels)}),a8(e.projects,t.projects)||(n.push("projects"),a.projects={expected:re(t.projects),actual:re(e.projects)}),(0,a5.A)(e.templateFormValues,t.templateFormValuesById)||(n.push("templateFormValues"),a.templateFormValues={expected:re(t.templateFormValuesById),actual:re(e.templateFormValues)}),{isEqual:0===n.length,mismatchedFields:n,fieldComparisons:a}};function rn(e){let t,n,a=(0,p.c)(8),{issues:r,isStreaming:i,isIssueTree:s}=e,o=void 0!==s&&s,{messages:l,threadSelectedAt:c}=(0,q.Pk)(),{messageId:d}=aW();a[0]!==o||a[1]!==i||a[2]!==r||a[3]!==d||a[4]!==l||a[5]!==c?(t=()=>{let e=(0,am.B)(l),t=e[e.length-1],n=e.find(e=>e.id===d);if(!i&&n&&"assistant"===n.role&&n.id===t?.id&&new Date(n.createdAt)>=c&&n.references&&r.length>0){let e=n.references.filter(ra);for(let t of r)if(t.tag){let n=e.find(e=>e.tag===t.tag);if(n){let e=rt(t,n);if(!e.isEqual)return void(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_DRAFT_ISSUE_REFERENCE_MISMATCH",mode:"immersive",messageId:d,issueTree:o,mismatchedFields:e.mismatchedFields.join(","),fieldComparisons:JSON.stringify(e.fieldComparisons),yamlMarshaled:(0,J.G7)("copilot_api_agentic_issue_marshal_yaml")})}}}},n=[i,r,l,c,o,d],a[0]=o,a[1]=i,a[2]=r,a[3]=d,a[4]=l,a[5]=c,a[6]=t,a[7]=n):(t=a[6],n=a[7]),(0,x.useEffect)(t,n)}function ra(e){return"draft-issue"===e.type}let rr={container:"DraftIssueBlock-module__container--T7FjG",icon:"DraftIssueBlock-module__icon--kjMXp",previewText:"DraftIssueBlock-module__previewText--ypNM1"},ri="data-draft-issue-block",rs={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title&&(t.title=e.title),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"issueNumber"in e&&"number"==typeof e.issueNumber&&(t.issueNumber=e.issueNumber),"issueType"in e&&"string"==typeof e.issueType?t.issueType=e.issueType:"type"in e&&"string"==typeof e.type&&"draft-issue"!==e.type&&"draft-update-issue"!==e.type&&(t.issueType=e.type),t}};function ro({yaml:e,isStreaming:t}){let[n,a]=(0,x.useState)(t);(0,x.useEffect)(()=>{t&&a(!0)},[t]);let{updateItem:r,openItem:i,openPreviewPane:s,versionedItems:o,items:l}=(0,nu.xx)(),{messageId:c,messageIndex:d,autoOpenPreviewPane:u,hasAutoOpenedPreviewPaneRef:p,setHasAutoOpenedPreviewPane:h}=aW();e=a4(e);let f=(0,x.useRef)({}),g=(0,x.useMemo)(()=>{let t=(e=>{try{let t=(0,aT.Hh)(e);return rs.fromUnknown(t)}catch{return null}})(e);return null!=t?(f.current=t,t):f.current},[e]);rn({issues:[g],isStreaming:t,isIssueTree:!1}),(0,x.useEffect)(()=>(0,tn.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"}),[]);let y=eE.W.draftUpdateIssue?null==g.issueNumber?void 0:g.issueNumber?"update-issue":"new-issue":"new-issue",_=null!=g.tag&&null!=y?`${y}:${g.tag}#${d}`:void 0,v=null!=_?(0,nS.LU)(_,o):null,b=null!=_?l.get(_):void 0,S=g.repository||null==y||b?.type!==y?g.repository:b.repository||"",C=(0,x.useCallback)(({selectItem:e})=>{null!=_&&(i(_,e),(e||u&&!p.current)&&(s(),h(!0)),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[_,i,u,p,s,h]);(0,x.useEffect)(()=>{null!=_&&r({messageId:c,name:g.title??"",body:g.body,repository:S,id:_,type:y,tag:g.tag??"",isStreaming:t,template:g.template,issueType:g.issueType,milestone:g.milestone,assignees:g.assignees?.sort()??[],labels:g.labels?.sort()??[],projects:g.projects?.sort()??[],isUserEdited:!1,defaultValuesById:g.templateFormValues??{},issueNumber:g.issueNumber})},[_,y,t,S,g.assignees,g.body,g.tag,g.title,g.labels,g.template,g.issueType,g.projects,g.milestone,g.templateFormValues,c,r,g.issueNumber]),(0,x.useEffect)(()=>{null!=_&&n&&C({selectItem:!0})},[_,C,n]);let j=(0,x.useCallback)(()=>C({selectItem:!0}),[C]);return(0,m.jsxs)("div",{className:rr.container,role:"button",onClick:j,onKeyDown:e=>{("Enter"===e.code||"Space"===e.code)&&j()},tabIndex:0,children:[t?(0,m.jsx)(nJ.A,{size:"small",className:aV.sX}):(0,m.jsx)(M.IssueDraftIcon,{className:rr.icon}),(0,m.jsx)("span",{className:rr.previewText,children:g.title}),null!=v&&(0,m.jsx)(nq.g,{"data-testid":"version-label",version:v})]})}try{ro.displayName||(ro.displayName="DraftIssueBlock")}catch{}let rl=(0,eL.F)(ri),rc={div:(e,t)=>{let n=(0,eL.k)(e,ri);return n?(0,m.jsx)(ro,{...n}):t}},rd={fromUnknown:e=>{if("object"!=typeof e||null===e)return null;let t={};return"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"url"in e&&"string"==typeof e.url&&(t.url=e.url),!t.tag&&t.url&&(t.tag=t.url),!t.parentTag&&"parentUrl"in e&&"string"==typeof e.parentUrl&&(t.parentTag=e.parentUrl),t}};function ru(e){try{let t=(0,aT.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(rd.fromUnknown).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function rm({data:e}){let[t,n]=(0,x.useState)(()=>ru(e)??[]);(0,x.useEffect)(()=>n(t=>ru(e)??t),[e]);let{messageId:a}=aW(),{updateItem:r,openItem:i,openPreviewPane:s}=(0,nu.xx)(),o=(0,x.useMemo)(()=>{let e=t.reduce((e,t)=>(e.set(t.tag,{item:t,parent:null,children:[]}),e),new Map);for(let n of t){if(!n.parentTag)continue;let t=e.get(n.parentTag),a=e.get(n.tag);t&&a&&(a.parent=t,t.children.push(a))}return e},[t]),l=(0,x.useMemo)(()=>Array.from(o.values()).filter(e=>!e.parent),[o]);function c(e){if(!e.url)return;let[t,n]=e.repository?.split("/")??[];if(!t||!n||!e.number)return;let o=`issue:${t}/${n}/${e.number}`;r({messageId:a,name:e.title??"",number:e.number,owner:t,repo:n,id:o,href:e.url,type:"issue"}),i(o),s()}function d(e){return(0,m.jsx)(an.Item,{title:e.item.title??"",leadingVisual:(0,m.jsx)(rp,{item:e.item}),trailingBadge:(0,m.jsx)(rh,{node:e}),href:e.item.url??"#",onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),c(e.item)},children:e.children.length>0&&e.children.map(d)},e.item.tag)}return(0,m.jsx)(m.Fragment,{children:l.map(e=>{let t=-1;return as(e,()=>t++),(0,m.jsxs)(an,{subIssueCount:t,children:[(0,m.jsx)(an.RootItem,{leadingVisual:(0,m.jsx)(rp,{item:e.item}),title:e.item.title??"",trailingBadge:(0,m.jsx)(rh,{node:e}),href:e.item.url??"#",onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),c(e.item)}}),e.children.map(d)]},e.item.url)})})}function rp(e){let t=(0,p.c)(2),{item:n}=e;if("open"===n.state){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.IssueOpenedIcon,{className:"fgColor-open"}),t[0]=e):e=t[0],e}if("closed"===n.state){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.IssueClosedIcon,{className:"fgColor-done"}),t[1]=e):e=t[1],e}}function rh(e){let t,n=(0,p.c)(5),{node:a}=e;if(!a.item.repository||!a.item.number)return null;if(a.item.repository===a.parent?.item.repository){let e;return n[0]!==a.item.number?(e=(0,m.jsxs)("span",{className:"fgColor-muted no-wrap",children:["#",a.item.number]}),n[0]=a.item.number,n[1]=e):e=n[1],e}return n[2]!==a.item.number||n[3]!==a.item.repository?(t=(0,m.jsxs)("span",{className:"fgColor-muted no-wrap",children:[a.item.repository,"#",a.item.number]}),n[2]=a.item.number,n[3]=a.item.repository,n[4]=t):t=n[4],t}try{rm.displayName||(rm.displayName="IssueTreeBlock")}catch{}try{rp.displayName||(rp.displayName="LeadingVisual")}catch{}try{rh.displayName||(rh.displayName="IssueLocation")}catch{}function rf(e){return"state"in e?"draft"===e.state:"assignees"in e||"labels"in e||"issueType"in e||"projects"in e||"milestone"in e||"template"in e||"templateFormValues"in e||"body"in e}function rg(e){return"state"in e&&("open"===e.state||"closed"===e.state)}function ry({data:e,isStreaming:t}){e=a4(e);let n=(0,x.useRef)([]),a=(0,x.useMemo)(()=>{let t=function(e){try{let t=(0,aT.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).map(e=>{switch("state"in e?e.state:void 0){case void 0:case"draft":return rs.fromUnknown(e);case"open":case"closed":return rd.fromUnknown(e)}}).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}(e);return t&&(n.current=t),n.current},[e]),{items:r,updateItem:i,openItem:s,openPreviewPane:o,closeItem:l,versionedItems:c}=(0,nu.xx)(),{messageId:d,messageIndex:u,autoOpenPreviewPane:h,hasAutoOpenedPreviewPaneRef:f,setHasAutoOpenedPreviewPane:g}=aW(),y=(0,x.useCallback)(e=>rf(e)&&e.tag?`new-issue:${e.tag}#${u}`:rg(e)&&e.repository&&e.number?`existing-issue:${e.repository}/${e.number}`:void 0,[u]);rn({issues:a,isStreaming:t,isIssueTree:!0}),(0,x.useEffect)(()=>{for(let e of a)e.tag&&y(e)&&(rf(e)&&i({messageId:d,type:"new-issue",id:`new-issue:${e.tag}#${u}`,tag:e.tag,parentTag:e.parentTag,name:e.title??"",body:e.body,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort()??[],labels:e.labels?.sort()??[],projects:e.projects?.sort()??[],defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:t}),rg(e)&&e.repository&&e.number&&e.url&&(l(`issue:${e.repository}/${e.number}`),i({messageId:d,type:"existing-issue",id:`existing-issue:${e.repository}/${e.number}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,name:e.title??"",state:e.state??"open",href:e.url})))},[y,t,a,d,u,i,l]);let _=(0,x.useCallback)((e,{selectItem:t})=>{let n=y(e);n&&(s(n,t),(t||h&&!f.current)&&(o(),g(!0)),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[y,s,h,f,o,g]),v=(0,x.useCallback)(e=>{let t=[...r.entries()].find(([t,n])=>(t.startsWith("new-issue:")||t.startsWith("existing-issue:"))&&("new-issue"===n.type||"existing-issue"===n.type)&&n.tag===e);if(!t)return;let[n]=t,a=(0,nS.oy)(n),i=c.get(a),s=i?.at(-1);if(!s)return;let o=r.get(s);if(o)switch(o?.type){case"new-issue":return rs.fromUnknown(o);case"existing-issue":return rd.fromUnknown(o);default:return}},[r,c]),b=(0,x.useMemo)(()=>{let e=a.reduce((e,t)=>(e.set(t.tag,{item:t,parent:null,children:[]}),e),new Map);for(let t of a){if(!t.parentTag)continue;let n=e.get(t.parentTag),a=e.get(t.tag);if(!n&&eE.W.draftIssueWithMixedTrees){let a=v(t.parentTag);if(!a)continue;e.set(t.parentTag,{item:a,parent:null,children:[]}),n=e.get(t.parentTag)}n&&a&&(a.parent=n,n.children.push(a))}return Array.from(e.values()).filter(e=>!e.parent)},[a,v]),S=function(e){let t,n,a=(0,p.c)(4),[r,i]=(0,x.useState)(!1),s=(0,x.useRef)(e);return a[0]!==r||a[1]!==e?(t=()=>{e&&(s.current=!0),e||!s.current||r||i(!0)},n=[e,r],a[0]=r,a[1]=e,a[2]=t,a[3]=n):(t=a[2],n=a[3]),(0,x.useEffect)(t,n),r}(t);(0,x.useEffect)(()=>{if(!S)return;let e=!0;for(let t of b.values()){if(rf(t.item)){_(t.item,{selectItem:e}),e=!1;continue}for(let n of t.children)rf(n.item)&&(_(n.item,{selectItem:e}),e=!1)}},[S,b,_]);let C=e=>{let n=y(e.item),a=n?(0,nS.LU)(n,c):null;return(0,m.jsx)(an.Item,{title:e.item.title??"",leadingVisual:(0,m.jsx)(r_,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,m.jsx)(nq.g,{version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),_(e.item,{selectItem:!0}))},href:rg(e.item)?e.item.url:void 0,children:e.children.length>0&&e.children.map(C)},e.item.tag)};return(0,m.jsx)(m.Fragment,{children:b.map(e=>{let n=y(e.item),a=n?(0,nS.LU)(n,c):null,r=-1;return as(e,()=>r++),(0,m.jsxs)(an,{subIssueHeaderText:rg(e.item)?"New sub-issues":void 0,subIssueCount:r,children:[(0,m.jsx)(an.RootItem,{title:e.item.title??"",leadingVisual:(0,m.jsx)(r_,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,m.jsx)(nq.g,{"data-testid":"version-label",version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),_(e.item,{selectItem:!0}))},href:rg(e.item)?e.item.url:void 0}),e.children.length>0&&e.children.map(C)]},e.item.tag)})})}function r_(e){let t=(0,p.c)(4),{isStreaming:n,item:a}=e;if(n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nJ.A,{size:"small",className:`${aV.sX} mt-1`}),t[0]=e):e=t[0],e}if(rf(a)){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nZ,{type:"new-issue"}),t[1]=e):e=t[1],e}if(rg(a)){let e;return t[2]!==a.state?(e=(0,m.jsx)(nZ,{type:"existing-issue",state:a.state}),t[2]=a.state,t[3]=e):e=t[3],e}}try{ry.displayName||(ry.displayName="DraftIssueTreeBlock")}catch{}try{r_.displayName||(r_.displayName="LeadingVisual")}catch{}let rx="data-draft-tree-issue-block",rv=(0,eL.F)(rx);var rb=n(72534);function rS(e){let t,n,a,r,i,s,o=(0,p.c)(28),{owner:l,repo:c,issueNumber:d,href:u,children:h}=e,{updateItem:f,openItem:g,openPreviewPane:y,items:_}=(0,nu.xx)(),{messageId:v}=aW(),b=(0,q.A3)("messages"),S=Number(d),C=`issue:${l}/${c}/${S}`;o[0]!==C||o[1]!==_?(t=_.get(C),o[0]=C,o[1]=_,o[2]=t):t=o[2];let j=t;o[3]!==j?.name||o[4]!==v||o[5]!==b||o[6]!==S||o[7]!==l||o[8]!==c?(n=function(e,t,n,a,r){if(!n||!a||!r||isNaN(r))return;let i=e.find(e=>e.id===t),s=i?.references,o=s?.find(e=>"issue"===e.type&&e.number===r&&e.repository.name===a&&e.repository.owner===n),l=o?.title;if(l)return l;let c=s?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${a}`&&e.data.number===r),d=c?.data;return d?.title}(b,v,l,c,S)??j?.name??`Issue #${S}`,o[3]=j?.name,o[4]=v,o[5]=b,o[6]=S,o[7]=l,o[8]=c,o[9]=n):n=o[9];let N=n;return o[10]!==u||o[11]!==C||o[12]!==v||o[13]!==S||o[14]!==l||o[15]!==c||o[16]!==N||o[17]!==f?(a=()=>{l&&c&&f({messageId:v,name:N,number:S,owner:l,repo:c,id:C,href:u,type:"issue"})},r=[C,v,u,S,l,c,N,f],o[10]=u,o[11]=C,o[12]=v,o[13]=S,o[14]=l,o[15]=c,o[16]=N,o[17]=f,o[18]=a,o[19]=r):(a=o[18],r=o[19]),(0,x.useEffect)(a,r),o[20]!==C||o[21]!==g||o[22]!==y?(i=e=>{e.metaKey||e.ctrlKey||(g(C),y(),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},o[20]=C,o[21]=g,o[22]=y,o[23]=i):i=o[23],o[24]!==h||o[25]!==u||o[26]!==i?(s=(0,m.jsx)(nR.A,{href:u,onClick:i,target:"_blank",rel:"noreferrer",children:h}),o[24]=h,o[25]=u,o[26]=i,o[27]=s):s=o[27],s}try{rS.displayName||(rS.displayName="IssueLinkBlock")}catch{}let rC="data-issuelink-props",rj=(0,eL.F)(rC),rN=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,rw={span:(e,t)=>{let n=(0,eL.k)(e,rC);return n?(0,m.jsx)(rS,{...n}):t}};var rI=n(77430),rE=n(89169),rT=n(81817);let rk={list:"IssueListBlock-module__list--hU3Jz",streaming:"IssueListBlock-module__streaming--sTYSD",toggleContent:"IssueListBlock-module__toggleContent--NWbi1",item:"IssueListBlock-module__item--gmkkY",link:"IssueListBlock-module__link--fc5wy",content:"IssueListBlock-module__content--bNFq8",metadata:"IssueListBlock-module__metadata--W4tCj",header:"IssueListBlock-module__header--NtmSe",title:"IssueListBlock-module__title--Di3wj",unknownTitle:"IssueListBlock-module__unknownTitle--JszGm",number:"IssueListBlock-module__number--vsvJy",labels:"IssueListBlock-module__labels--xeeTb",labelIcon:"IssueListBlock-module__labelIcon--g4B1V",description:"IssueListBlock-module__description--Uf86U",icon:"IssueListBlock-module__icon--qAaLP",open:"IssueListBlock-module__open--CQmwr",draft:"IssueListBlock-module__draft--ymDJ6",done:"IssueListBlock-module__done--bWmcu",closed:"IssueListBlock-module__closed--Iuz7v",unassignedAvatar:"IssueListBlock-module__unassignedAvatar--RB1C7",toggleButton:"IssueListBlock-module__toggleButton--C9dbQ",shimmer:"IssueListBlock-module__shimmer--xZ0Bt",toggleIcon:"IssueListBlock-module__toggleIcon--hynWs"},rR={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),t}};function rA(e){let t,n,a,r,i,s=(0,p.c)(8),{item:o,isStreaming:l}=e,c=o.author;return o.merged_at?(r=o.merged_at,i="Merged"):o.closed_at?(r=o.closed_at,i="Closed"):o.created_at&&(r=o.created_at,i="Opened"),s[0]!==r?(n=(t=r?new Date(r):null)&&isNaN(t.getTime()),s[0]=r,s[1]=t,s[2]=n):(t=s[1],n=s[2]),n&&(t=null),s[3]!==i||s[4]!==c||s[5]!==l||s[6]!==t?(a=c&&t||!l?(0,m.jsxs)("span",{className:rk.description,children:[c," ",c?i?.toLowerCase():i," ",t&&(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(rE.A,{date:t,format:"relative"})})]}):null,s[3]=i,s[4]=c,s[5]=l,s[6]=t,s[7]=a):a=s[7],a}let rL=e=>{try{let t=(0,aT.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(rR.fromUnknown);return null}catch{return null}};function rD(e){let t,n,a,r,i,s,o,l,c,d,u,h=(0,p.c)(39),{data:f,type:g,isStreaming:y}=e;h[0]!==f?(t=()=>rL(f)??[],h[0]=f,h[1]=t):t=h[1];let[v,b]=(0,x.useState)(t),{updateItem:S,openItem:C,openPreviewPane:j}=(0,nu.xx)(),{messageId:N}=aW(),[w,I]=(0,x.useState)(!0);h[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,J.G7)("copilot_issue_list_show_more"),h[2]=n):n=h[2];let E=n;h[3]!==w||h[4]!==v?(a=E&&w?v.slice(0,10):v,h[3]=w,h[4]=v,h[5]=a):a=h[5];let T=a,k=E&&v.length>10;h[6]!==f?(r=()=>b(e=>rL(f)??e),i=[f],h[6]=f,h[7]=r,h[8]=i):(r=h[7],i=h[8]),(0,x.useEffect)(r,i),h[9]!==g?(s=()=>{"issue"===g?(0,tn.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):(0,tn.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"})},o=[g],h[9]=g,h[10]=s,h[11]=o):(s=h[10],o=h[11]),(0,x.useEffect)(s,o);let R=y&&rk.streaming;if(h[12]!==R?(l=(0,_.$)(rk.list,R),h[12]=R,h[13]=l):l=h[13],h[14]!==y||h[15]!==N||h[16]!==C||h[17]!==j||h[18]!==g||h[19]!==S||h[20]!==T){let e;h[22]!==y||h[23]!==N||h[24]!==C||h[25]!==j||h[26]!==g||h[27]!==S||h[28]!==T.length?(e=(e,t)=>{let n={...e,type:g},a=y&&t===T.length-1,{icon:r,colorClass:i}=function(e){let t,n=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(n=(0,m.jsx)(M.IssueDraftIcon,{"aria-label":"Draft issue"}),t=rk.draft):"closed"===e.state&&e.draft&&(n=(0,m.jsx)(M.SkipIcon,{"aria-label":"Closed draft issue"}),t=rk.draft):(n=(0,m.jsx)(M.IssueClosedIcon,{"aria-label":"Closed issue"}),t=rk.done):(n=(0,m.jsx)(M.IssueOpenedIcon,{"aria-label":"Open issue"}),t=rk.open);else if("pr"===e.type){let a="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!a&&e.draft?(n=(0,m.jsx)(M.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),t=rk.draft):"open"!==e.state||a||e.draft?"closed"!==e.state||a?"closed"===e.state&&a&&(n=(0,m.jsx)(M.GitMergeIcon,{"aria-label":"Merged pull request"}),t=rk.done):(n=(0,m.jsx)(M.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),t=rk.closed):(n=(0,m.jsx)(M.GitPullRequestIcon,{"aria-label":"Pull request"}),t=rk.open)}return{icon:n,colorClass:t}}(n);return(0,m.jsx)("li",{className:rk.item,children:(0,m.jsxs)("div",{className:rk.content,children:[(0,m.jsx)("div",{className:(0,_.$)(i,rk.icon),children:r}),(0,m.jsxs)("div",{className:rk.header,children:[a&&!n.title?null:(0,m.jsx)("a",{...(0,nF.G)("issue-list-item-link"),href:n.url??"#",className:rk.link,onClick:e=>{if(!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),n.url))if("issue"===n.type){(0,tn.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:e,repo:t,number:a}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(n.url);if(e&&t&&a){let r=`issue:${e}/${t}/${a}`;S({messageId:N,name:n.title??`Issue #${a}`,number:a,owner:e,repo:t,id:r,href:n.url,type:"issue"}),C(r),j()}}else(0,tn.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(n.url,"_self")},target:"_blank",rel:"noreferrer",children:n.title||void 0===n.number?(0,m.jsxs)(m.Fragment,{children:[n.title?(0,m.jsx)("span",{className:rk.title,children:n.title}):(0,m.jsx)("span",{className:(0,_.$)(rk.title,rk.unknownTitle),children:"Unknown issue"}),void 0!==n.number&&(0,m.jsxs)("span",{className:rk.number,children:["#",n.number]})]}):(0,m.jsxs)("span",{className:rk.title,children:["#",n.number]})}),(0,m.jsxs)("div",{className:rk.labels,children:[n.labels?.length?n.labels.map(rM):null,0!==n.comments&&void 0!==n.comments&&(0,m.jsxs)(eS.A,{size:"small",variant:"secondary",children:[(0,m.jsx)(M.CommentIcon,{className:rk.labelIcon,size:12}),n.comments]})]})]}),(0,m.jsx)(rA,{item:n,isStreaming:a}),(0,m.jsx)("div",{className:rk.metadata,children:void 0===n.assignees_avatar_urls?null:0===n.assignees_avatar_urls.length?(0,m.jsx)("div",{className:rk.unassignedAvatar,role:"img","aria-label":"Unassigned",children:(0,m.jsx)(M.PersonIcon,{size:12})}):(0,m.jsx)("div",{role:"img","aria-label":`${n.assignees_avatar_urls.length} ${1===n.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,m.jsx)(rT.A,{disableExpand:!0,children:n.assignees_avatar_urls.map(rP)})})})]})},t)},h[22]=y,h[23]=N,h[24]=C,h[25]=j,h[26]=g,h[27]=S,h[28]=T.length,h[29]=e):e=h[29],c=T.map(e),h[14]=y,h[15]=N,h[16]=C,h[17]=j,h[18]=g,h[19]=S,h[20]=T,h[21]=c}else c=h[21];return h[30]!==w||h[31]!==k||h[32]!==y||h[33]!==v?(d=k&&(0,m.jsx)("li",{className:rk.item,children:(0,m.jsx)("div",{className:(0,_.$)(rk.content,rk.toggleContent),children:(0,m.jsxs)("button",{type:"button",className:(0,_.$)(rk.toggleButton,y&&rk.shimmer),onClick:()=>I(!w),"aria-expanded":!w,"aria-controls":"issue-list",children:[(0,m.jsx)("span",{className:rk.toggleIcon,children:w?(0,m.jsx)(M.UnfoldIcon,{size:16}):(0,m.jsx)(M.FoldIcon,{size:16})}),w?`Show ${v.length-10} more`:"Show less"]})})}),h[30]=w,h[31]=k,h[32]=y,h[33]=v,h[34]=d):d=h[34],h[35]!==c||h[36]!==d||h[37]!==l?(u=(0,m.jsx)("div",{children:(0,m.jsxs)("ul",{id:"issue-list",className:l,children:[c,d]})}),h[35]=c,h[36]=d,h[37]=l,h[38]=u):u=h[38],u}function rP(e){return(0,m.jsx)(rI.r,{src:e,alt:"Assignee avatar"},e)}function rM(e){return(0,m.jsx)(eS.A,{size:"small",variant:"secondary",children:e},e)}try{rA.displayName||(rA.displayName="Description")}catch{}try{rD.displayName||(rD.displayName="ListBlock")}catch{}let rO="data-issues-list-block",rB=(0,eL.F)(rO),rF={div:(e,t)=>{let n=(0,eL.k)(e,rO);return n?(0,m.jsx)(rD,{...n}):t}},rU="data-tree-issue-block",r$=(0,eL.F)(rU);var rV=n(35673),rq=n(1002);function rW(e){return e.tag}let rG={container:"PlanningTasklistBlock-module__container--Vl4PK"},rH="data-planning-tasklist-block",rz=e=>{if("object"!=typeof e||null===e||!("tag"in e)||"string"!=typeof e.tag||!("title"in e)||"string"!=typeof e.title||!("description"in e)||"string"!=typeof e.description||"dependencyTags"in e&&!Array.isArray(e.dependencyTags)||"repository"in e&&"string"!=typeof e.repository||"pullRequest"in e&&"number"!=typeof e.pullRequest)return!1;let t="pullRequest"in e&&null!=e.pullRequest,n="repository"in e&&null!=e.repository&&""!==e.repository;return!t||!!n},rQ={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={name:"name"in e&&"string"==typeof e.name?e.name:"Tasklist",tasks:[]};if("tasks"in e&&Array.isArray(e.tasks))for(let n of e.tasks)"object"==typeof n&&null!=n&&rz(n)&&t.tasks.push(n);return t}};function rK({yaml:e,isStreaming:t}){let[n,a]=(0,x.useState)(t),r=(0,x.useRef)(new Set);(0,x.useEffect)(()=>{t&&a(!0)},[t]);let{updateItem:i,openItem:s,openPreviewPane:o,versionedItems:l}=(0,nu.xx)(),{messageId:c,messageIndex:d,setHasAutoOpenedPreviewPane:u}=aW(),h=(0,x.useRef)({name:"Tasklist",tasks:[]}),f=(0,x.useMemo)(()=>{let t=(e=>{try{let t=(0,aT.Hh)(e);return rQ.fromUnknown(t)}catch{return(0,tn.BI)("copilot.planning_tasklist",{type:"MALFORMED_YAML",mode:"immersive"}),null}})(e);return null!=t?(h.current=t,t):h.current},[e]),g=(0,x.useMemo)(()=>f.tasks.map(e=>{let n=`planning-task:${e.tag}#${d}`,{title:a,...r}=e;return{...r,name:a,messageId:c,id:n,type:"planning-task",isUserEdited:!1,isStreaming:t}}),[f,d,c,t]),{convertAllToDraftIssues:y}=function(e){let t,n,a=(0,p.c)(6),r=(0,H.b)(),i=(0,q.Pk)();a[0]!==r||a[1]!==e||a[2]!==i?(t=async()=>{(0,tn.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ALL_ISSUES",mode:"immersive",threadId:(0,aE.W)(i)?.id});let t=`
Create draft issues for all tasks with the following tags: ${e.map(rW).join(", ")}.
The tasks should be filed under a new parent issue. If the tasklist has a title, use that as the parent issue title.
`;await r.sendChatMessage({thread:(0,aE.W)(i),content:t,references:[{type:"text",name:'timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting all tasks as issues..."}'}],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model,intent:aI.wh.planningAgent})},a[0]=r,a[1]=e,a[2]=i,a[3]=t):t=a[3];let s=t;return a[4]!==s?(n={convertAllToDraftIssues:s},a[4]=s,a[5]=n):n=a[5],n}(g),_=(0,x.useCallback)((e,t={})=>{let{selectItem:n}=t;s(e.id,n),o(),u(!0),(0,tn.BI)("copilot.planning_tasklist",{type:"TASK_OPENED",mode:"immersive"})},[s,o,u]);(0,x.useEffect)(()=>{for(let e=0;e<g.length;e++){let t=g[e];i(t),n&&!r.current.has(t.id)&&(r.current.add(t.id),_(t,{selectItem:0===e}))}},[g,i,_,n]);let v=(0,x.useCallback)(e=>_(e),[_]);(0,x.useEffect)(()=>(0,tn.BI)("copilot.planning_tasklist",{type:"BLOCK_RENDERED",mode:"immersive"}),[]),(0,x.useEffect)(()=>{!t&&n&&0===g.length&&(0,tn.BI)("copilot.planning_tasklist",{type:"NO_TASKS",mode:"immersive"})},[n,t,g]);let b=g.map(e=>{let n=(0,nS.LU)(e.id,l);return(0,m.jsxs)(tM.l.Item,{onSelect:()=>v(e),className:"py-2",children:[(0,m.jsx)(tM.l.LeadingVisual,{children:t?(0,m.jsx)(nJ.A,{size:"small",className:aV.sX}):e.pullRequest?(0,m.jsx)(M.GitPullRequestIcon,{}):(0,m.jsx)(M.TasklistIcon,{})}),e.name,(0,m.jsx)(tM.l.Description,{variant:"block",children:(0,m.jsx)(rq.A,{title:e.description,maxWidth:"100%",children:e.description})}),(0,m.jsx)(tM.l.TrailingVisual,{children:null!=n&&(0,m.jsx)(nq.g,{version:n})})]},e.id)}),S=(0,m.jsx)("span",{children:"No tasks were created, please retry."});return(0,m.jsx)("div",{className:rG.container,children:(0,m.jsxs)(tM.l,{variant:"full",showDividers:!0,children:[(0,m.jsxs)(tM.l.Heading,{as:"h4",className:"mx-3 mt-3 mb-1 d-flex flex-items-center",children:[f?.name??"Tasklist",(0,m.jsx)(n0.A,{className:"ml-2 pb-1",children:g.length}),g.length>0&&(0,m.jsx)("div",{className:"flex-justify-end d-flex flex-1",children:(0,m.jsxs)(tD.W,{children:[(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(tP.K,{icon:M.KebabHorizontalIcon,variant:"invisible","aria-label":`Tasklist '${f?.name??""}' options`})}),(0,m.jsx)(rV.UJ,{children:(0,m.jsx)(tM.l,{children:(0,m.jsx)(tM.l.Item,{onSelect:y,children:"Draft all as issues"})})})]})})]}),t||0!==g.length?b:S]})})}try{rK.displayName||(rK.displayName="PlanningTasklistBlock")}catch{}let rJ=(0,eL.F)(rH),rY={div:(e,t)=>{let n=(0,eL.k)(e,rH);return n?(0,m.jsx)(rK,{...n}):t}},rX={markdownOverrides:"MarkdownViewer-module__markdownOverrides--xtpOl"},rZ=e=>{let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,v,b,S,C=(0,p.c)(35);C[0]!==e?({messageId:a,messageIndex:r,messageTimestamp:i,autoOpenPreviewPane:t,markdown:n,...s}=e,C[0]=e,C[1]=t,C[2]=n,C[3]=a,C[4]=r,C[5]=i,C[6]=s):(t=C[1],n=C[2],a=C[3],r=C[4],i=C[5],s=C[6]);let j=(0,x.useRef)(!1);C[7]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{j.current=e},C[7]=o):o=C[7];let N=o;C[8]!==s.extensions?(c=s.extensions??[],d=function(e){return{transformMarkdown:t=>(0,eD.YR)(t,"code",t=>{let n=t.lang??"",{name:a,code:r}=function(e,t){let n=e&&aZ.exec(e);if(n)return{name:n.groups?.name,code:t};let a=a0.exec(t);return a?{name:a.groups?.name,code:t.replace(a0,"")}:{code:t}}(t.meta??void 0,t.value);if(!a)return;e.includes(a)||e.push(a);let i=r.split(`
`,6),s=6===i.length,o=s?i.join(`
`):`${i.join(`
`)}
`,l=t.position?.start.line??0;t.value=o,t.data={...t.data,hName:"code",hProperties:{[aX]:JSON.stringify({language:n,name:a,code:r,line:l,isStreaming:t.isStreaming??!1,isClipped:s,index:e.indexOf(a),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,eD.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&"code"===a.tagName&&aX in a.properties&&n.children.splice(t,1,a)}),reactComponents:a1}}([]),C[8]=s.extensions,C[9]=c,C[10]=d):(c=C[9],d=C[10]),C[11]===Symbol.for("react.memo_cache_sentinel")?(u={transformMarkdown:e=>(0,eD.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=rN.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:a="",number:r=""}=t.groups;e.data={hName:"span",hProperties:{[rj]:JSON.stringify({owner:n,repo:a,issueNumber:r,href:e.url,children:(0,rb.d)(e)})}}}),reactComponents:rw},h={transformMarkdown:e=>(0,eD.YR)(e,"code",e=>{if("list"!==e.lang)return;let t=a3(a2.exec(e.meta??"")?.groups?.type??"");("issue"===t||"pr"===t)&&(e.data={hName:"div",hProperties:{[rB]:JSON.stringify({data:e.value,type:t,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eD.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&rB in a.properties&&n.children.splice(t,1,a)}),reactComponents:rF},f={transformMarkdown:e=>(0,eD.YR)(e,"code",e=>{"yaml"===e.lang&&"draft-issue"===a3(a2.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[rl]:JSON.stringify({yaml:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eD.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&rl in a.properties&&n.children.splice(t,1,a)}),reactComponents:rc},g={transformMarkdown:e=>(0,eD.YR)(e,"code",e=>{"yaml"===e.lang&&"planning-tasklist"===a3(a2.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[rJ]:JSON.stringify({yaml:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eD.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&rJ in a.properties&&n.children.splice(t,1,a)}),reactComponents:rY},C[11]=u,C[12]=h,C[13]=f,C[14]=g):(u=C[11],h=C[12],f=C[13],g=C[14]),C[15]!==c||C[16]!==d?(y=[...c,d,u,h,f,g],C[15]=c,C[16]=d,C[17]=y):y=C[17];let w=y;if(eE.W.draftIssueTree){let e,t,n,a=w;C[18]===Symbol.for("react.memo_cache_sentinel")?(e={transformMarkdown:e=>(0,eD.YR)(e,"code",e=>{"yaml"===e.lang&&"draft-issue-tree"===a3(a2.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[rv]:JSON.stringify({data:e.value,isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,eD.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&rv in a.properties&&n.children.splice(t,1,a)}),reactComponents:{div:(e,t)=>{let n=(0,eL.k)(e,rx);return n?(0,m.jsx)(ry,{...n}):t}}},t={transformMarkdown:e=>(0,eD.YR)(e,"code",e=>{"yaml"===e.lang&&"issue-tree"===a3(a2.exec(e.meta??"")?.groups?.type??"")&&(e.data={hName:"div",hProperties:{[r$]:JSON.stringify({data:e.value})},hChildren:[]})}),transformHtml:e=>(0,eD.YR)(e,"element",(e,t,n)=>{let a=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&a?.type==="element"&&r$ in a.properties&&n.children.splice(t,1,a)}),reactComponents:{div:(e,t)=>{let n=(0,eL.k)(e,rU);return n?(0,m.jsx)(rm,{...n}):t}}},C[18]=e,C[19]=t):(e=C[18],t=C[19]),C[20]!==w?(n=[...a,e,t],C[20]=w,C[21]=n):n=C[21],w=n}return l=w,C[22]!==t||C[23]!==n||C[24]!==a||C[25]!==r||C[26]!==i?(v={messageId:a,messageIndex:r,messageTimestamp:i,autoOpenPreviewPane:t,markdown:n,hasAutoOpenedPreviewPaneRef:j,setHasAutoOpenedPreviewPane:N},C[22]=t,C[23]=n,C[24]=a,C[25]=r,C[26]=i,C[27]=v):v=C[27],_=v,C[28]!==l||C[29]!==n||C[30]!==s?(b=(0,m.jsx)(aV.To,{...s,markdown:n,extensions:l,chatMode:"immersive",className:rX.markdownOverrides}),C[28]=l,C[29]=n,C[30]=s,C[31]=b):b=C[31],C[32]!==_||C[33]!==b?(S=(0,m.jsx)(aq.Provider,{value:_,children:b}),C[32]=_,C[33]=b,C[34]=S):S=C[34],S},r0=x.memo(rZ);try{rZ.displayName||(rZ.displayName="MarkdownViewer")}catch{}try{r0.displayName||(r0.displayName="MemoizedMarkdownViewer")}catch{}let r1={timelineEvent:"TimelineEvents-module__timelineEvent--FV3V3",icon:"TimelineEvents-module__icon--E6IJb",situationalTimelineEvent:"TimelineEvents-module__situationalTimelineEvent--WTQlM TimelineEvents-module__timelineEvent--FV3V3",references:"TimelineEvents-module__references--lv7xz ChatMessage-module__references--Pi5OH"};function r2(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function r3(e,t){return e.references?.some(e=>r2(e)&&(void 0===t||t?.some(t=>e.name.startsWith(`timeline-event: {"type": "${t}"`))))??!1}function r4(e){let t,n,a,r=(0,p.c)(10),{message:i,messageIndex:s,isViewingSharedThread:o,isSharedMessage:l,isLatestMessage:c}=e;return r[0]!==i||r[1]!==s?(t=r3(i)&&(0,m.jsx)(r5,{message:i,messageIndex:s}),r[0]=i,r[1]=s,r[2]=t):t=r[2],r[3]!==c||r[4]!==l||r[5]!==o?(n=(0,m.jsx)(r7,{isViewingSharedThread:o,isSharedMessage:l,isLatestMessage:c}),r[3]=c,r[4]=l,r[5]=o,r[6]=n):n=r[6],r[7]!==t||r[8]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[t,n]}),r[7]=t,r[8]=n,r[9]=a):a=r[9],a}function r5(e){let t,n,a,r,i,s,o,l=(0,p.c)(24),{message:c,messageIndex:d}=e,{updateItem:u}=(0,nu.xx)();if(l[0]!==c.createdAt||l[1]!==c.id||l[2]!==c.references||l[3]!==d||l[4]!==u?(t=()=>{if(c.references)for(let e of c.references){let t=(0,nS.oR)({ref:e,messageIndex:d,messageId:c.id,timestamp:c.createdAt});null!=t&&u(t)}},n=[c.references,c.id,d,c.createdAt,u],l[0]=c.createdAt,l[1]=c.id,l[2]=c.references,l[3]=d,l[4]=u,l[5]=t,l[6]=n):(t=l[5],n=l[6]),(0,x.useEffect)(t,n),l[7]!==c.references){a=Symbol.for("react.early_return_sentinel");e:{let e=c.references?.filter(r6);if(!e){a=void 0;break e}for(let t of(r=[],e)){let e=JSON.parse(t.name.replace("timeline-event: ","")),n=t.icon||M.CheckIcon;r.push({type:e.type,markdownContent:e.markdownContent,icon:n})}}l[7]=c.references,l[8]=a,l[9]=r}else a=l[8],r=l[9];return a!==Symbol.for("react.early_return_sentinel")?a:(l[10]!==c.createdAt||l[11]!==c.id||l[12]!==c.references||l[13]!==d?(i=c.references&&c.references.length>0&&(0,m.jsx)(a$,{className:r1.references,messageId:c.id,messageTimestamp:c.createdAt,messageIndex:d,references:c.references,size:"medium"}),l[10]=c.createdAt,l[11]=c.id,l[12]=c.references,l[13]=d,l[14]=i):i=l[14],l[15]!==c.content||l[16]!==c.createdAt||l[17]!==c.id||l[18]!==d||l[19]!==r?(s=r.map(e=>{let{type:t,markdownContent:n,icon:a}=e;return(0,m.jsxs)("div",{className:r1.timelineEvent,children:[(0,m.jsx)(a,{className:r1.icon}),(0,m.jsx)(rZ,{autoOpenPreviewPane:!1,markdown:n,messageId:c.id,messageIndex:d,messageTimestamp:c.createdAt,accessibleHeader:(0,eI.hV)("Timeline",c.content??"")})]},t)}),l[15]=c.content,l[16]=c.createdAt,l[17]=c.id,l[18]=d,l[19]=r,l[20]=s):s=l[20],l[21]!==i||l[22]!==s?(o=(0,m.jsxs)(m.Fragment,{children:[i,s]}),l[21]=i,l[22]=s,l[23]=o):o=l[23],o)}function r6(e){return r2(e)}function r7(e){let t,n,a,r=(0,p.c)(9),{isSharedMessage:i,isViewingSharedThread:s,isLatestMessage:o}=e;return r[0]!==i||r[1]!==s?(t=i&&!s&&(0,m.jsxs)("div",{className:r1.situationalTimelineEvent,children:[(0,m.jsx)(M.LinkIcon,{className:r1.icon})," Messages up to this point are included in shared link"]}),r[0]=i,r[1]=s,r[2]=t):t=r[2],r[3]!==o||r[4]!==s?(n=o&&eE.W.copilotDuplicateThread&&s&&(0,m.jsxs)("div",{className:r1.situationalTimelineEvent,children:[(0,m.jsx)(M.RepoForkedIcon,{className:r1.icon})," Messages beyond this point will start a new private conversation"]}),r[3]=o,r[4]=s,r[5]=n):n=r[5],r[6]!==t||r[7]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[t,n]}),r[6]=t,r[7]=n,r[8]=a):a=r[8],a}try{r4.displayName||(r4.displayName="TimelineEvents")}catch{}try{r5.displayName||(r5.displayName="UserMessageTimelineEvent")}catch{}try{r7.displayName||(r7.displayName="SituationalTimelineEvents")}catch{}var r8=n(15106),r9=n(66457),ie=n(58321),it=n(921),ia=n(85391),ir=n(97764),ii=n(46036),is=n(43063);function io({issue:e}){let{openItem:t,versionedItems:n}=(0,nu.xx)(),a=ao(),r=function(){let e,t=(0,p.c)(4),n=(0,H.b)(),a=(0,q.Pk)(),{updateItem:r}=(0,nu.xx)();return t[0]!==n||t[1]!==a||t[2]!==r?(e=async e=>{(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_UNLINK_FROM_PARENT",mode:"immersive",threadId:(0,aE.W)(a)?.id,chatReferrer:document.referrer,issueRepository:e.repository,issueTab:e.tag,parentIssueTag:e.parentTag});let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},i={...e,parentTag:void 0,isUserEdited:!1};r(i);let s="existing-issue"===i.type?(0,nS.yA)(i):(0,nS.PO)(i);await n.sendChatMessage({thread:(0,aE.W)(a),content:"Unlink the sub-issue from its parent issue",references:[t,s],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=n,t[1]=a,t[2]=r,t[3]=e):e=t[3],e}(),i=a.get(e.tag),s=i?i.children:[],o=(0,x.useMemo)(()=>{if(!i)return 0;let e=-1;return as(i,()=>e++),e},[i]);if(!eE.W.draftIssueTree)return null;let l=e=>{let a=(0,nS.LU)(e.item.id,n);return(0,m.jsx)(r9.r,{title:(0,m.jsx)(ir.T,{value:e.item.name,onClick:()=>{t(e.item.id,!0)},trailingBadges:null!=a?[(0,m.jsx)(nq.g,{version:a},`${e.item.tag}#${a}`)]:void 0}),secondaryActions:(0,m.jsx)(ie.o,{actions:[],staticMenuActions:[{key:"unlink",render:()=>(0,m.jsxs)(tM.l.Item,{onSelect:()=>r(e.item),children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.LinkIcon,{})}),"Unlink sub-issue"]},`${e.item.tag}-unlink`)}]}),subItems:e.children?.length?e.children.map(l):void 0,defaultExpanded:!0,children:(0,m.jsx)(it.Q,{children:(0,m.jsx)(ia.D,{children:(0,m.jsx)(nZ,{...e.item})})})},e.item.tag)};return(0,m.jsx)("div",{className:"mt-2 border rounded-2",children:(0,m.jsx)(r8.v,{title:"Sub-issues",header:(0,m.jsx)(ii.s,{title:(0,m.jsx)(is.c,{title:"Sub-issues",className:"p-0",children:(0,m.jsx)(n0.A,{children:o})}),className:"border-0 bgColor-default"}),children:s.map(l)})})}try{io.displayName||(io.displayName="SubissuesList")}catch{}var il=n(72429),ic=n(33987),id=n(40104);function iu(e){let{openItem:t,updateItem:n}=(0,nu.xx)(),{selectedThreadID:a}=(0,q.Pk)(),r=function(e){let{messages:t}=(0,q.Pk)(),{tag:n,issueNumber:a}=e,r=a&&eE.W.draftUpdateIssue?"update-issue":"new-issue";return`${r}:${n}#${t.length}`}(e),i=`edited-${a}-${r}`,[s,o]=(0,id.Fo)(i,void 0);return(0,x.useCallback)((i,s=!1)=>{let l,c=!1;for(l in i)(0,a5.A)(i[l],e[l])||(c=!0,"name"!==l&&"body"!==l&&"defaultValuesById"!==l&&(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:a,repository:e.repository,issueTag:e.tag,userChangedField:l,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[l])}));if(!c)return;let d={...e,...i};!s&&(d.id=r,d.isUserEdited=!0,eE.W.copilotPersistEditedDraftIssues&&o(d)),n(d),t(d.id)},[e,n,t,a,r,o])}function im(e){return e.login}function ip(e){return e.login}let ih=function(){var e={defaultValue:100,kind:"LocalArgument",name:"count"},t={defaultValue:"",kind:"LocalArgument",name:"labelNames"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},a={defaultValue:null,kind:"LocalArgument",name:"repo"},r=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],i=[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o=[s,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,n,a],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"LabelPickerLabel",selections:o,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,a,t,e],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:r,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:i,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:o,storageKey:null}],storageKey:null},s],storageKey:null}]},params:{id:"b807cb351c9187646a1c1af734d12afb",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}}}();ih.hash="e88ca04244b8cb67aad293081213c7ad";var ig=n(14111);function iy(e){return(0,ig.P5)(e)}function i_(e){return!!e}function ix(e){return e.name}function iv(e){return e.name}var ib=n(17402),iS=n(58115);function iC(e){return!1===e.hasReachedItemsLimit}function ij(e){return!1===e.closed}function iN(e){return e.toLowerCase()}function iw(e,t){return e.set(t.id,t),e}function iI(e){return e.title}function iE(e){return e.title}var iT=n(52927);function ik(e,t){return e?.toLowerCase()===t?.toLowerCase()}function iR({draftIssue:e,issueNode:t,template:n,issueFormRef:a,loadingDraftIssueRepo:r,onCreate:i,onChange:s,onClose:o,onBeforeCreate:l,onFieldChange:c}){let{name:d,body:u="",defaultValuesById:h}=e,{repository:f,clearSessionData:g}=(0,nz.u)(),[y,_]=(0,x.useState)(d),[v,b]=(0,x.useState)(u),S=function(){let e,t=(0,p.c)(3),n=(0,H.b)(),a=(0,q.Pk)();return t[0]!==n||t[1]!==a?(e=async(e,t)=>{let r;if(e.parentMessageID&&(r=a.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!r||!r.content)return;(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_RETRY_MESSAGE",mode:"immersive",threadId:(0,aE.W)(a)?.id,customMessage:t});let i={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,icon:M.XIcon};await n.sendChatMessage({thread:(0,aE.W)(a),content:r.content,references:[...r.references??[],i],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model,parentMessageId:e.id})},t[0]=n,t[1]=a,t[2]=e):e=t[2],e}(),C=(0,q.Pk)(),j=(0,x.useCallback)(()=>{g(),a.current?.clearSessionStorage()},[g,a]),N=(0,x.useCallback)(()=>{j(),o?.()},[j,o]);if((0,x.useEffect)(()=>{_(d),b(u)},[u,d]),!function(e){let t,n,a,r,i,s,o,l=(0,p.c)(26),{repository:c,assignees:d,setAssignees:u}=(0,nz.u)(),[m,h]=(0,x.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==e.assignees||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,assignees:e.assignees},l[0]=e.assignees,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:_}=function(e){let t,n,a,r,i,s=(0,p.c)(16),{owner:o,repo:l,assignees:c}=e,d=(0,nd.useRelayEnvironment)();s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,ic.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),s[0]=t):t=s[0];let u=t;return s[1]!==d?(n=JSON.stringify(d),s[1]=d,s[2]=n):n=s[2],s[3]!==c||s[4]!==o||s[5]!==l||s[6]!==n?(a=["copilot-immersive-assignees",n,u,o,l,c],s[3]=c,s[4]=o,s[5]=l,s[6]=n,s[7]=a):a=s[7],s[8]!==c||s[9]!==d||s[10]!==o||s[11]!==l?(r=async()=>o&&l&&c?await (0,il.fH)(d,{owner:o,repo:l,assignees:c,capabilities:u}):[],s[8]=c,s[9]=d,s[10]=o,s[11]=l,s[12]=r):r=s[12],s[13]!==a||s[14]!==r?(i={queryKey:a,queryFn:r},s[13]=a,s[14]=r,s[15]=i):i=s[15],(0,ai.I)(i)}(t);l[4]!==_?(n=_?.map(ip)??[],l[4]=_,l[5]=n):n=l[5],l[6]!==e||l[7]!==n?(a={...e,assignees:n},l[6]=e,l[7]=n,l[8]=a):a=l[8];let v=iu(a);l[9]!==y||l[10]!==c||l[11]!==_||l[12]!==u?(r=()=>{!y&&_&&(c?.viewerIssueCreationPermissions?.assignable?u(_):null!=c&&u([]))},l[9]=y,l[10]=c,l[11]=_,l[12]=u,l[13]=r):r=l[13];let b=c?.viewerIssueCreationPermissions?.assignable;l[14]!==y||l[15]!==c||l[16]!==_||l[17]!==u||l[18]!==b?(i=[y,_,u,b,c],l[14]=y,l[15]=c,l[16]=_,l[17]=u,l[18]=b,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==d||l[21]!==m||l[22]!==y||l[23]!==v?(s=()=>{y||m===d||(v({assignees:d.map(im)}),h(d))},o=[y,m,d,v],l[20]=d,l[21]=m,l[22]=y,l[23]=v,l[24]=s,l[25]=o):(s=l[24],o=l[25]),(0,x.useEffect)(s,o)}(e),!function(e){let t,n,a,r,i,s,o,l=(0,p.c)(26),{repository:c,labels:d,setLabels:u}=(0,nz.u)(),[m,h]=(0,x.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==e.labels||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,labels:e.labels},l[0]=e.labels,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:_}=function(e){let t,n,a,r,i=(0,p.c)(15),{owner:s,repo:o,labels:l}=e,c=(0,nd.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==l||i[3]!==s||i[4]!==o||i[5]!==t?(n=["copilot-immersive-labels",t,s,o,l],i[2]=l,i[3]=s,i[4]=o,i[5]=t,i[6]=n):n=i[6],i[7]!==c||i[8]!==l||i[9]!==s||i[10]!==o?(a=async()=>{if(!s||!o||!l)return[];let e=await (0,nr.SD)({environment:c,query:ih,variables:{owner:s,repo:o,labelNames:l.join(","),count:l.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(i_).map(iy)},i[7]=c,i[8]=l,i[9]=s,i[10]=o,i[11]=a):a=i[11],i[12]!==n||i[13]!==a?(r={queryKey:n,queryFn:a},i[12]=n,i[13]=a,i[14]=r):r=i[14],(0,ai.I)(r)}(t);l[4]!==_?(n=_?.map(iv)??[],l[4]=_,l[5]=n):n=l[5],l[6]!==e||l[7]!==n?(a={...e,labels:n},l[6]=e,l[7]=n,l[8]=a):a=l[8];let v=iu(a);l[9]!==y||l[10]!==c||l[11]!==_||l[12]!==u?(r=()=>{!y&&_&&(c?.viewerIssueCreationPermissions?.labelable?u(_):null!=c&&u([]))},l[9]=y,l[10]=c,l[11]=_,l[12]=u,l[13]=r):r=l[13];let b=c?.viewerIssueCreationPermissions?.labelable;l[14]!==y||l[15]!==c||l[16]!==_||l[17]!==u||l[18]!==b?(i=[y,_,u,b,c],l[14]=y,l[15]=c,l[16]=_,l[17]=u,l[18]=b,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==d||l[21]!==m||l[22]!==y||l[23]!==v?(s=()=>{y||m===d||(v({labels:d.map(ix)}),h(d))},o=[y,m,d,v],l[20]=d,l[21]=m,l[22]=y,l[23]=v,l[24]=s,l[25]=o):(s=l[24],o=l[25]),(0,x.useEffect)(s,o)}(e),!function(e){let t,n,a,r,i,s,o,l=(0,p.c)(30),{repository:c,issueType:d,setIssueType:u}=(0,nz.u)(),[m,h]=(0,x.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==f||l[1]!==g?(t={owner:f,repo:g},l[0]=f,l[1]=g,l[2]=t):t=l[2];let{isLoading:y,data:_}=function(e){let t,n,a,r,i=(0,p.c)(13),{owner:s,repo:o}=e,l=(0,nd.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(n=["copilot-immersive-issue-types",t,s,o],i[2]=s,i[3]=o,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==s||i[8]!==o?(a=async()=>s&&o?await (0,iT.RX)(l,{owner:s,repo:o,pageSize:25}):[],i[6]=l,i[7]=s,i[8]=o,i[9]=a):a=i[9],i[10]!==n||i[11]!==a?(r={queryKey:n,queryFn:a},i[10]=n,i[11]=a,i[12]=r):r=i[12],(0,ai.I)(r)}(t);e:{let t;if(!e.issueType||y){n=null;break e}l[3]!==e.issueType||l[4]!==_?(t=_?.find(t=>ik(t.name,e.issueType)),l[3]=e.issueType,l[4]=_,l[5]=t):t=l[5],n=t}let v=n,b=v?.name;l[6]!==e||l[7]!==b?(a={...e,issueType:b},l[6]=e,l[7]=b,l[8]=a):a=l[8];let S=iu(a);l[9]!==y||l[10]!==c||l[11]!==v||l[12]!==u?(r=()=>{y||(c?.viewerIssueCreationPermissions?.typeable?u(v??null):null!=c&&u(null))},l[9]=y,l[10]=c,l[11]=v,l[12]=u,l[13]=r):r=l[13];let C=c?.viewerIssueCreationPermissions?.typeable;l[14]!==y||l[15]!==c||l[16]!==v||l[17]!==u||l[18]!==C?(i=[y,v,u,C,c],l[14]=y,l[15]=c,l[16]=v,l[17]=u,l[18]=C,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==d||l[21]!==m?.name||l[22]!==y||l[23]!==S?(s=()=>{y||ik(m?.name,d?.name)||(S({issueType:d?.name}),h(d))},l[20]=d,l[21]=m?.name,l[22]=y,l[23]=S,l[24]=s):s=l[24],l[25]!==d||l[26]!==m||l[27]!==y||l[28]!==S?(o=[y,m,d,S],l[25]=d,l[26]=m,l[27]=y,l[28]=S,l[29]=o):o=l[29],(0,x.useEffect)(s,o)}(e),!function(e){let t,n,a,r,i,s,o=(0,p.c)(28),{repository:l,milestone:c,setMilestone:d}=(0,nz.u)(),[u,m]=(0,x.useState)(c),h=l?.owner.login,f=l?.name;o[0]!==e.milestone||o[1]!==h||o[2]!==f?(t={owner:h,repo:f,milestone:e.milestone},o[0]=e.milestone,o[1]=h,o[2]=f,o[3]=t):t=o[3];let{isLoading:g,data:y}=function(e){let t,n,a,r,i=(0,p.c)(15),{owner:s,repo:o,milestone:l}=e,c=(0,nd.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==l||i[3]!==s||i[4]!==o||i[5]!==t?(n=["copilot-immersive-milestones",t,s,o,l],i[2]=l,i[3]=s,i[4]=o,i[5]=t,i[6]=n):n=i[6],i[7]!==c||i[8]!==l||i[9]!==s||i[10]!==o?(a=async()=>s&&o&&l?(await (0,ib.Ud)(c,{owner:s,repo:o,query:l,count:1}))[0]??null:null,i[7]=c,i[8]=l,i[9]=s,i[10]=o,i[11]=a):a=i[11],i[12]!==n||i[13]!==a?(r={queryKey:n,queryFn:a},i[12]=n,i[13]=a,i[14]=r):r=i[14],(0,ai.I)(r)}(t),_=y?.title;o[4]!==e||o[5]!==_?(n={...e,milestone:_},o[4]=e,o[5]=_,o[6]=n):n=o[6];let v=iu(n);o[7]!==g||o[8]!==l||o[9]!==y||o[10]!==d?(a=()=>{g||(l?.viewerIssueCreationPermissions?.milestoneable?d(y??null):null!=l&&d(null))},o[7]=g,o[8]=l,o[9]=y,o[10]=d,o[11]=a):a=o[11];let b=l?.viewerIssueCreationPermissions?.milestoneable;o[12]!==g||o[13]!==l||o[14]!==y||o[15]!==d||o[16]!==b?(r=[g,y,d,b,l],o[12]=g,o[13]=l,o[14]=y,o[15]=d,o[16]=b,o[17]=r):r=o[17],(0,x.useEffect)(a,r),o[18]!==c||o[19]!==u?.title||o[20]!==g||o[21]!==v?(i=()=>{var e,t;g||(e=u?.title,t=c?.title,e?.toLowerCase()===t?.toLowerCase())||(v({milestone:c?.title}),m(c))},o[18]=c,o[19]=u?.title,o[20]=g,o[21]=v,o[22]=i):i=o[22],o[23]!==c||o[24]!==u||o[25]!==g||o[26]!==v?(s=[g,u,c,v],o[23]=c,o[24]=u,o[25]=g,o[26]=v,o[27]=s):s=o[27],(0,x.useEffect)(i,s)}(e),!function(e){let t,n,a,r,i,s,o,l=(0,p.c)(26),{repository:c,projects:d,setProjects:u}=(0,nz.u)(),[m,h]=(0,x.useState)(d),f=c?.owner.login,g=c?.name;l[0]!==e.projects||l[1]!==f||l[2]!==g?(t={owner:f,repo:g,projects:e.projects},l[0]=e.projects,l[1]=f,l[2]=g,l[3]=t):t=l[3];let{isLoading:y,data:_}=function(e){let t,n,a,r,i=(0,p.c)(15),{owner:s,repo:o,projects:l}=e,c=(0,nd.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==s||i[3]!==l||i[4]!==o||i[5]!==t?(n=["copilot-immersive-projects",t,s,o,l],i[2]=s,i[3]=l,i[4]=o,i[5]=t,i[6]=n):n=i[6],i[7]!==c||i[8]!==s||i[9]!==l||i[10]!==o?(a=async()=>{if(!s||!o||!l||!l.length)return[];let{repositoryProjects:e,recentRepositoryProjects:t,ownerProjects:n,recentOwnerProjects:a}=await (0,iS.vj)(c,{owner:s,repo:o,query:l.join(",")}),r=[...[...e,...t,...n,...a].reduce(iw,new Map).values()],i=new Set(l.map(iN));return r.filter(ij).filter(iC).filter(e=>i.has(e.title.toLowerCase()))},i[7]=c,i[8]=s,i[9]=l,i[10]=o,i[11]=a):a=i[11],i[12]!==n||i[13]!==a?(r={queryKey:n,queryFn:a},i[12]=n,i[13]=a,i[14]=r):r=i[14],(0,ai.I)(r)}(t);l[4]!==_?(n=_?.map(iE)??[],l[4]=_,l[5]=n):n=l[5],l[6]!==e||l[7]!==n?(a={...e,projects:n},l[6]=e,l[7]=n,l[8]=a):a=l[8];let v=iu(a);l[9]!==y||l[10]!==c||l[11]!==_||l[12]!==u?(r=()=>{!y&&_&&(c?.viewerIssueCreationPermissions?.triageable?u(_):null!=c&&u([]))},l[9]=y,l[10]=c,l[11]=_,l[12]=u,l[13]=r):r=l[13];let b=c?.viewerIssueCreationPermissions?.triageable;l[14]!==y||l[15]!==c||l[16]!==_||l[17]!==u||l[18]!==b?(i=[y,_,u,b,c],l[14]=y,l[15]=c,l[16]=_,l[17]=u,l[18]=b,l[19]=i):i=l[19],(0,x.useEffect)(r,i),l[20]!==d||l[21]!==m||l[22]!==y||l[23]!==v?(s=()=>{y||m===d||(v({projects:d.map(iI)}),h(d))},o=[y,m,d,v],l[20]=d,l[21]=m,l[22]=y,l[23]=v,l[24]=s,l[25]=o):(s=l[24],o=l[25]),(0,x.useEffect)(s,o)}(e),null==f)return void 0===e.repository&&e.isStreaming||r?(0,m.jsx)(nB.Q,{optionConfig:{useViewportQueries:!1}}):(0,m.jsx)(nV,{title:"Repository required",description:"Please select a repository above to continue creating your issue.",icon:M.IssueDraftIcon});let w=C.messages.at(-1);if(w&&r3(w,["switch-issue-template","switch-issue-repo"]))return(0,m.jsx)(nB.Q,{optionConfig:{useViewportQueries:!1}});let I=C.messages.find(t=>t.id===e.messageId),E=I?.parentMessageIndex!==void 0?C.messages[I.parentMessageIndex]:void 0;if(I&&E){let e=n&&(0,ay.GQ)(n.data),t=0===Object.keys(h||{}).length,a=!C.isWaitingOnCopilot,r=I.messageIndex===C.messages.length-1,i="assistant"===I.role,s=r3(E,["automatic-retry"]);if(e&&t)if(!a)return(0,m.jsx)(nB.Q,{optionConfig:{useViewportQueries:!1}});else if(r&&i&&!s)return S(I,"Copilot failed to use the issue template, retrying\u2026"),(0,m.jsx)(nB.Q,{optionConfig:{useViewportQueries:!1}});else return(0,m.jsx)(nV,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:M.IssueDraftIcon})}return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(aB.e,{repository:f,title:y,body:v,setTitle:e=>{_(e),s?.({name:e})},setBody:e=>{b(e),s?.({body:e})},clearOnCreate:N,issueFormRef:a,onCreateSuccess:({issue:e})=>i?.(e),onCreateError:aF.l,onCancel:N,onBeforeCreate:l,defaultValuesById:h,selectedTemplate:n,onFieldChange:c}),t?.children&&t.children.length>0&&(0,m.jsx)(io,{issue:e})]})}try{iR.displayName||(iR.displayName="CreateIssueForm")}catch{}let iA={container:"CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",toolbar:"CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",toolbarLeft:"CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",feedbackLink:"CreateIssuePreview-module__feedbackLink--LbrC8",parentSelectorAnchor:"CreateIssuePreview-module__parentSelectorAnchor--qiqro",truncateText:"CreateIssuePreview-module__truncateText--Cyrbf",form:"CreateIssuePreview-module__form--X4Vwp",viewerContainer:"CreateIssuePreview-module__viewerContainer--bRxNh"};function iL({node:e,onItemSelected:t}){let n=(0,x.useMemo)(()=>{let t=[],n=e;for(;n;)t.push(n),n=n.parent;return t.reverse()},[e]);if(e.parent&&eE.W.draftIssueTree)return(0,m.jsxs)(tD.W,{children:[(0,m.jsxs)(tD.W.Button,{variant:"invisible",className:iA.parentSelectorAnchor,children:[(0,m.jsx)("span",{className:"fgColor-muted",children:"Parent:"})," ",e?.parent?.item.name]}),(0,m.jsx)(tD.W.Overlay,{width:"large",children:(0,m.jsx)(tM.l,{children:n.map((n,a)=>(0,m.jsxs)(tM.l.Item,{active:n.item.tag===e.item.tag,onSelect:()=>t(n),sx:{paddingLeft:`calc(${a} * var(--base-size-12))`},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(nZ,{...n.item})}),(0,m.jsx)("div",{className:iA.truncateText,children:n.item.name})]},n.item.tag))})})]})}try{iL.displayName||(iL.displayName="ParentSelector")}catch{}var iD=n(3398);let iP={container:"RepositoryPicker-module__container--codNO",label:"RepositoryPicker-module__label--WplGo",ssoBanner:"RepositoryPicker-module__ssoBanner--TbTWl"};function iM(e){let t,n,a,r,i,s,o,l,c,d=(0,p.c)(23),{draftIssue:u,resolvedDraftIssueRepo:h,loadingDraftIssueRepo:f,topRepos:g}=e,[y,v]=(0,x.useState)(void 0),{repository:b,setRepository:S}=(0,nz.u)(),C=iu(u),j=function(e){let t,n=(0,p.c)(5),a=(0,H.b)(),r=(0,q.Pk)(),{updateItem:i}=(0,nu.xx)();return n[0]!==e||n[1]!==a||n[2]!==r||n[3]!==i?(t=async(t,n)=>{let s=`${n}/${t}`,o=[{type:"text",name:`timeline-event: {"type": "switch-issue-repo", "markdownContent": "Changing repository to ${s}\u{2026}"}`,text:`Update draft issue with tag \`${e.tag}\` to use the \`${s}\` repository. DO NOT ask the user for a template. If there is a template in the new repository that makes sense to use, use it. If you cannot find a template, draft a blank issue. Regenerate the title and description. Maintain all conversation context. Update the metadata to follow the new repository and template. DO NOT change the \`tag\` field.`}];if(e.isUserEdited){let t={...e,...s&&{repository:s},isUserEdited:!1};i(t),o.push((0,nS.PO)(t))}await a.sendChatMessage({thread:(0,aE.W)(r),content:`Use the ${s} repository`,references:[...o,...r.currentReferences],topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model})},n[0]=e,n[1]=a,n[2]=r,n[3]=i,n[4]=t):t=n[4],t}(u);d[0]!==C||d[1]!==j||d[2]!==S?(t=e=>{null!=e&&(eE.W.draftIssueCodeSearch?j(e.name,e.owner.login):C({repository:e.nameWithOwner,template:void 0},!1),S(e))},d[0]=C,d[1]=j,d[2]=S,d[3]=t):t=d[3];let N=t;!function(e,t,n,a){let r,i,s,o,l,c=(0,p.c)(14),{repository:d,setRepository:u}=(0,nz.u)(),[m,h]=(0,x.useState)(d),f=iu(e);t?.nameWithOwner,d?.nameWithOwner,r=!n&&t?.nameWithOwner==null||t?.nameWithOwner===d?.nameWithOwner,c[0]!==e.isStreaming||c[1]!==e.repository||c[2]!==n||c[3]!==t||c[4]!==u||c[5]!==a?(i=()=>{void 0===e.repository&&e.isStreaming||n||(null!=t?u(t):null!=a&&a.length>0?u(a[0]):u(void 0))},s=[e.isStreaming,e.repository,n,t,u,a],c[0]=e.isStreaming,c[1]=e.repository,c[2]=n,c[3]=t,c[4]=u,c[5]=a,c[6]=i,c[7]=s):(i=c[6],s=c[7]),(0,x.useEffect)(i,s),c[8]!==d||c[9]!==m||c[10]!==f||c[11]!==r?(o=()=>{m!==d&&(f({repository:d?.nameWithOwner},r),h(d))},l=[f,d,r,m],c[8]=d,c[9]=m,c[10]=f,c[11]=r,c[12]=o,c[13]=l):(o=c[12],l=c[13]),(0,x.useEffect)(o,l)}(u,h,f,g),d[4]!==b||d[5]!==f||d[6]!==g?(n=()=>{f||null==b||null==g||g.find(e=>e.id===b.id)||v(b.id)},a=[b,f,g],d[4]=b,d[5]=f,d[6]=g,d[7]=n,d[8]=a):(n=d[7],a=d[8]),(0,x.useEffect)(n,a);let{ssoOrganizations:w}=(0,q.Pk)();d[9]!==w?(i=w?.map(iB)??[],d[9]=w,d[10]=i):i=d[10],r=i;let I=b??g?.[0],E=u.isStreaming||f;return d[11]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(iD.A,{className:(0,_.$)(iP.label,"sr-only"),required:!0,children:"Repository"}),d[11]=s):s=d[11],d[12]!==E?(o={hasIssuesEnabled:!0,readonly:E},d[12]=E,d[13]=o):o=d[13],d[14]!==r?(l=(0,J.G7)("global_sso_banner")?void 0:(0,m.jsx)(W.x,{className:iP.ssoBanner,forceWrap:!0,protectedOrgs:r,maxVisibleOrgNames:0,redirectURI:iO}),d[14]=r,d[15]=l):l=d[15],d[16]!==y||d[17]!==N||d[18]!==I||d[19]!==o||d[20]!==l||d[21]!==g?(c=(0,m.jsxs)("div",{className:iP.container,children:[s,(0,m.jsx)(aa.f0,{initialRepository:I,onSelect:N,options:o,topRepositories:g,enforceAtleastOneSelected:!0,subtitle:l},y)]}),d[16]=y,d[17]=N,d[18]=I,d[19]=o,d[20]=l,d[21]=g,d[22]=c):c=d[22],c}function iO(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function iB(e){return e.login}try{iM.displayName||(iM.displayName="RepositoryPicker")}catch{}let iF=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i=[n,a,r,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],s=[n,a,r,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:i,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:s,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:i,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:s,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}}}();iF.hash="582a468668cd62a5a95ad0f91f7ea5e5";let iU={kind:"InlineDataFragment",name:"TemplatePickerForm"};iU.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let i$={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};i$.hash="fa6038bb9389af7bff23ba3491dd0507";var iV=n(86391),iq=n(69487);function iW(e,t){return e.filename.localeCompare(t.filename)}function iG(e){return(0,iq.readInlineData)(iU,e)}function iH(e){return(0,iq.readInlineData)(i$,e)}function iz(e){let t,n,a,r,i=(0,p.c)(10),{draftIssue:s}=e,{repository:o}=(0,nz.u)(),l=o?.owner.login,c=o?.name;i[0]!==l||i[1]!==c?(t={owner:l,repo:c},i[0]=l,i[1]=c,i[2]=t):t=i[2];let{data:d}=function(e){let t,n,a,r,i=(0,p.c)(13),{owner:s,repo:o}=e,l=(0,nd.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(n=["copilot-immersive-templates",t,s,o],i[2]=s,i[3]=o,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==s||i[8]!==o?(a=async()=>{if(!s||!o)return[];let e=await (0,iq.fetchQuery)(l,iF,{owner:s,repo:o}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(iH),...(e?.repository?.issueForms||[]).map(iG)].sort(iW)},i[6]=l,i[7]=s,i[8]=o,i[9]=a):a=i[9],i[10]!==n||i[11]!==a?(r={queryKey:n,queryFn:a},i[10]=n,i[11]=a,i[12]=r):r=i[12],(0,ai.I)(r)}(t);if(null==d||0===d.length)return null;i[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)("span",{children:"/"}),i[3]=n):n=i[3],i[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)(iD.A,{className:(0,_.$)(iP.label,"sr-only"),children:"Template"}),i[4]=a):a=i[4];let u=o?.nameWithOwner,h=o?.isBlankIssuesEnabled;return i[5]!==s||i[6]!==u||i[7]!==h||i[8]!==d?(r=(0,m.jsxs)(m.Fragment,{children:[n,(0,m.jsxs)("div",{className:iP.container,children:[a,(0,m.jsx)(iQ,{templates:d,draftIssue:s,repositoryNwo:u,isBlankIssuesEnabled:h})]})]}),i[5]=s,i[6]=u,i[7]=h,i[8]=d,i[9]=r):r=i[9],r}function iQ(e){let t,n,a,r,i,s,o,l,c=(0,p.c)(23),{templates:d,draftIssue:u,isBlankIssuesEnabled:h,repositoryNwo:f}=e,[g,y]=(0,x.useState)("");e:{let e;if(!g){t=d;break e}c[0]!==g||c[1]!==d?(e=d?.filter(e=>e.name?.toLowerCase().includes(g.toLowerCase())),c[0]=g,c[1]=d,c[2]=e):e=c[2],t=e}let _=t,[v,b]=(0,x.useState)(void 0);c[3]!==u.template||c[4]!==d?(n=()=>{if(!u.template)return void b(void 0);let e=u.template.split("/").pop();b(d?.find(t=>t.filename===e))},a=[d,u.template],c[3]=u.template,c[4]=d,c[5]=n,c[6]=a):(n=c[5],a=c[6]),(0,x.useEffect)(n,a);let S=function(){let e,t=(0,p.c)(4),n=(0,H.b)(),a=(0,q.Pk)(),{updateItem:r}=(0,nu.xx)();return t[0]!==n||t[1]!==a||t[2]!==r?(e=async(e,t,i)=>{let s=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the draft issue with tag \`${e.tag}\` with the \`${t.filename}\` template${i?` in the \`${i}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` field.`:`Update draft issue with tag \`${e.tag}\` to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the \`tag\` field.`}];if(e.isUserEdited){let t={...e,...i&&{repository:i},isUserEdited:!1};r(t),s.push((0,nS.PO)(t))}await n.sendChatMessage({thread:(0,aE.W)(a),content:t?`Use the '${t.name}' template`:"Remove the template",references:[...s,...a.currentReferences],topic:a.currentTopic,context:a.context,customInstructions:a.customInstructions,model:a.model})},t[0]=n,t[1]=a,t[2]=r,t[3]=e):e=t[3],e}(),C=(0,x.useRef)(null),j=null!=h&&!h;return c[7]!==_?(r=_??[],c[7]=_,c[8]=r):r=c[8],c[9]!==v?(i=v?[v]:[],c[9]=v,c[10]=i):i=c[10],c[11]!==v||c[12]!==j?(s=e=>(0,m.jsxs)(eU.Q,{trailingVisual:M.TriangleDownIcon,...e,ref:C,children:[v?(0,m.jsx)("span",{children:v.name}):"Select a template",j&&(0,m.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),c[11]=v,c[12]=j,c[13]=s):s=c[13],c[14]!==u||c[15]!==S||c[16]!==f?(o=async e=>{let[t]=e;b(t),await S(u,t,f)},c[14]=u,c[15]=S,c[16]=f,c[17]=o):o=c[17],c[18]!==r||c[19]!==i||c[20]!==s||c[21]!==o?(l=(0,m.jsx)(iV.O,{items:r,initialSelectedItems:i,placeholderText:"Search",selectionVariant:"single",filterItems:y,title:"Select a template",renderAnchor:s,getItemKey:iJ,convertToItemProps:iK,onSelectionChange:o,selectPanelRef:C,height:"large",width:"medium"}),c[18]=r,c[19]=i,c[20]=s,c[21]=o,c[22]=l):l=c[22],l}function iK(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function iJ(e){return e.filename}try{iz.displayName||(iz.displayName="TemplatePicker")}catch{}try{iQ.displayName||(iQ.displayName="TemplatePickerInternal")}catch{}var iY=n(10286);function iX(e,t){let n,a=(0,p.c)(3);return a[0]!==e||a[1]!==t?(n=(n,a,r)=>{let i=n||`${iY.y}-${a}`;if(e.defaultValuesById&&e.defaultValuesById[i]===r)return;let s={...e,defaultValuesById:{...e.defaultValuesById}};s.defaultValuesById[i]=r,t(s,!1)},a[0]=e,a[1]=t,a[2]=n):n=a[2],n}function iZ(e){let t,n,a,r,i=(0,p.c)(13),{owner:s,repo:o}=e,l=(0,nd.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==s||i[3]!==o||i[4]!==t?(n=["copilot-immersive-current-repo",t,s,o],i[2]=s,i[3]=o,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==s||i[8]!==o?(a=async()=>s&&o?await (0,aa.tZ)(l,s,o):null,i[6]=l,i[7]=s,i[8]=o,i[9]=a):a=i[9],i[10]!==n||i[11]!==a?(r={queryKey:n,queryFn:a},i[10]=n,i[11]=a,i[12]=r):r=i[12],(0,ai.I)(r)}function i0(e){var t;let n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,v,b,S,C,j,N,w,I,E,T,k,R,A,L=(0,p.c)(86),{isPreviewOpening:D,issue:P,onClose:O}=e,{openItem:B}=(0,nu.xx)(),F=ao();L[0]!==P.tag||L[1]!==F?(n=F.get(P.tag),L[0]=P.tag,L[1]=F,L[2]=n):n=L[2];let U=n,[$,V]=(0,x.useState)(D);L[3]!==$?(a=()=>{if($){let e=setTimeout(()=>V(!1),400);return()=>clearTimeout(e)}},r=[$],L[3]=$,L[4]=a,L[5]=r):(a=L[4],r=L[5]),(0,x.useEffect)(a,r);let{selectedThreadID:W}=(0,q.Pk)(),{isLoading:G,data:H}=function(){let e,t,n,a,r=(0,p.c)(9),i=(0,nd.useRelayEnvironment)();return r[0]!==i?(e=JSON.stringify(i),r[0]=i,r[1]=e):e=r[1],r[2]!==e?(t=["copilot-immersive-top-repos",e],r[2]=e,r[3]=t):t=r[3],r[4]!==i?(n=async()=>await (0,aa.St)(i,{first:10,hasIssuesEnabled:!0}),r[4]=i,r[5]=n):n=r[5],r[6]!==t||r[7]!==n?(a={queryKey:t,queryFn:n},r[6]=t,r[7]=n,r[8]=a):a=r[8],(0,ai.I)(a)}();L[6]!==P.repository?(i=P.repository?.split("/")??[],L[6]=P.repository,L[7]=i):i=L[7];let[z,Q]=i;L[8]!==z||L[9]!==Q?(s={owner:z,repo:Q},L[8]=z,L[9]=Q,L[10]=s):s=L[10];let{isLoading:K,data:J}=iZ(s),[X,Z]=(0,x.useState)(J);L[11]!==J?(o=()=>{J&&Z(J)},l=[J],L[11]=J,L[12]=o,L[13]=l):(o=L[12],l=L[13]),(0,x.useEffect)(o,l),c=null!=X&&(!X.hasIssuesEnabled||null!=X.viewerInteractionLimitReasonHTML&&X.viewerInteractionLimitReasonHTML?.length>0);let ee=ap(),et=ak();L[14]!==P.parentTag||L[15]!==P.tag||L[16]!==P.template||L[17]!==P.type||L[18]!==et?(d=async e=>{await et([{draftType:P.type,tag:P.tag,parentTag:P.parentTag,template:P.template,repository:{databaseId:e.repository.databaseId,name:e.repository.name,owner:{login:e.repository.owner.login}},number:e.number,title:e.title,url:e.url}])},L[14]=P.parentTag,L[15]=P.tag,L[16]=P.template,L[17]=P.type,L[18]=et,L[19]=d):d=L[19];let en=d,ea=iu(P),er=iX(P,ea),ei=(0,x.useRef)(null),es=function(e){let t,n=(0,p.c)(2);n[0]!==e.current?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e.current,n[1]=t):t=n[1];let a=t;return(0,x.useSyncExternalStore)(i1,a)}(ei),eo=eE.W.draftIssueTree&&U?.parent!=null,el=(0,x.useRef)(null),ec=J?.id??"",ed=P.template||"";L[20]!==ec||L[21]!==ed?(u={repoId:ec,filename:ed},L[20]=ec,L[21]=ed,L[22]=u):u=L[22];let{isLoading:eu,data:em}=function(e){let t,n,a,r,i=(0,p.c)(13),{repoId:s,filename:o}=e,l=(0,nd.useRelayEnvironment)();return i[0]!==l?(t=JSON.stringify(l),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==s||i[4]!==t?(n=["copilot-immersive-template-payload",t,s,o],i[2]=o,i[3]=s,i[4]=t,i[5]=n):n=i[5],i[6]!==l||i[7]!==o||i[8]!==s?(a=async()=>s&&o?await aj(l,s,o):null,i[6]=l,i[7]=o,i[8]=s,i[9]=a):a=i[9],i[10]!==n||i[11]!==a?(r={queryKey:n,queryFn:a},i[10]=n,i[11]=a,i[12]=r):r=i[12],(0,ai.I)(r)}(u),ep=J??void 0;L[23]!==ep?(h={repository:ep},L[23]=ep,L[24]=h):h=L[24];let eh=h;if($||G||eu){let e;return L[25]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nB.Q,{optionConfig:{useViewportQueries:!1}}),L[25]=e):e=L[25],e}let ef=`${P.id}@${W}`;return L[26]!==es||L[27]!==ef?(f=(0,nM.S)({storageKeyPrefix:ef,insidePortal:es}),L[26]=es,L[27]=ef,L[28]=f):f=L[28],L[29]===Symbol.for("react.memo_cache_sentinel")?(g=(0,nF.G)("create-issue-preview"),L[29]=g):g=L[29],L[30]!==P?(y=(0,m.jsx)("div",{children:(0,m.jsx)(nG,{item:P})}),L[30]=P,L[31]=y):y=L[31],L[32]!==U||L[33]!==B||L[34]!==eo?(_=eo&&(0,m.jsx)("div",{children:(0,m.jsx)(iL,{node:U,onItemSelected:e=>B(e.item.id,!0)})}),L[32]=U,L[33]=B,L[34]=eo,L[35]=_):_=L[35],L[36]!==y||L[37]!==_?(v=(0,m.jsxs)("div",{className:iA.toolbarLeft,children:[y,_]}),L[36]=y,L[37]=_,L[38]=v):v=L[38],L[39]===Symbol.for("react.memo_cache_sentinel")?(b=(0,m.jsx)(nR.A,{href:"https://gh.io/copilot-create-issues-feedback",className:iA.feedbackLink,children:"Give feedback"}),L[39]=b):b=L[39],L[40]!==U||L[41]!==c||L[42]!==O||L[43]!==em?(S=(0,m.jsxs)("div",{className:iA.toolbarActions,children:[b,(0,m.jsx)(aO,{issueTemplate:em,issueNode:U,issueFormRef:el,noRepoAccess:c,onClose:O})]}),L[40]=U,L[41]=c,L[42]=O,L[43]=em,L[44]=S):S=L[44],L[45]!==v||L[46]!==S?(C=(0,m.jsxs)("div",{className:iA.toolbar,children:[v,S]}),L[45]=v,L[46]=S,L[47]=C):C=L[47],L[48]!==H?(j=H||[],L[48]=H,L[49]=j):j=L[49],L[50]!==P||L[51]!==J||L[52]!==K||L[53]!==j?(N=(0,m.jsx)(iM,{draftIssue:P,resolvedDraftIssueRepo:J,loadingDraftIssueRepo:K,topRepos:j}),L[50]=P,L[51]=J,L[52]=K,L[53]=j,L[54]=N):N=L[54],L[55]!==P?(w=(0,m.jsx)(iz,{draftIssue:P}),L[55]=P,L[56]=w):w=L[56],L[57]!==N||L[58]!==w?(I=(0,m.jsxs)(Y.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[N,w]}),L[57]=N,L[58]=w,L[59]=I):I=L[59],L[60]!==J||L[61]!==c?(E=c&&((t=J)&&!t.hasIssuesEnabled?(0,m.jsx)(nV,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue creating your issue.",icon:M.IssueDraftIcon}):t&&t.viewerInteractionLimitReasonHTML?(0,m.jsx)(nV,{title:"You cannot create issues in this repository",description:t.viewerInteractionLimitReasonHTML,icon:M.IssueDraftIcon}):void 0),L[60]=J,L[61]=c,L[62]=E):E=L[62],L[63]!==U||L[64]!==P||L[65]!==J||L[66]!==K||L[67]!==c||L[68]!==ea||L[69]!==O||L[70]!==en||L[71]!==er||L[72]!==em||L[73]!==ee?(T=!c&&(0,m.jsx)(iR,{draftIssue:P,issueNode:U,template:em??void 0,issueFormRef:el,loadingDraftIssueRepo:K,onCreate:en,onChange:ea,onClose:O,onBeforeCreate:e=>ee(J,e),onFieldChange:er}),L[63]=U,L[64]=P,L[65]=J,L[66]=K,L[67]=c,L[68]=ea,L[69]=O,L[70]=en,L[71]=er,L[72]=em,L[73]=ee,L[74]=T):T=L[74],L[75]!==I||L[76]!==E||L[77]!==T?(k=(0,m.jsxs)("div",{className:iA.form,children:[I,E,T]}),L[75]=I,L[76]=E,L[77]=T,L[78]=k):k=L[78],L[79]!==C||L[80]!==k?(R=(0,m.jsxs)("div",{className:iA.container,ref:ei,children:[C,k]}),L[79]=C,L[80]=k,L[81]=R):R=L[81],L[82]!==eh||L[83]!==f||L[84]!==R?(A=(0,m.jsx)(nO.S,{optionConfig:f,preselectedData:eh,...g,children:R}),L[82]=eh,L[83]=f,L[84]=R,L[85]=A):A=L[85],A}function i1(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{i0.displayName||(i0.displayName="CreateIssuePreview")}catch{}var i2=n(59907),i3=n(76158);function i4({isPreviewOpening:e,issue:t,onClose:n}){let[a,r]=(0,x.useState)(e),{openItem:i}=(0,nu.xx)(),s=ao().get(t.tag);(0,x.useEffect)(()=>{if(a){let e=setTimeout(()=>r(!1),400);return()=>clearTimeout(e)}},[a]);let o=(0,x.useMemo)(()=>(0,m.jsx)(tP.K,{icon:M.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(t.href,"_blank")}}),[t.href]),l=(0,x.useMemo)(()=>({navigate:aF.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,withLiveUpdates:!0,onIssueDelete:n,additionalHeaderActions:o,showRepositoryPill:!0}),[n,o]),c=(0,x.useMemo)(()=>{let[e,n]=t.repository.split("/");if(e&&n)return{owner:e,repo:n,number:t.number,type:"Issue"}},[t.number,t.repository]);return a||!c?(0,m.jsx)(nB.Q,{optionConfig:l}):(0,m.jsxs)("div",{className:iA.container,children:[(0,m.jsxs)("div",{className:iA.toolbar,children:[(0,m.jsx)("div",{className:iA.toolbarLeft,children:s.parent&&(0,m.jsx)(iL,{node:s,onItemSelected:e=>i(e.item.id,!0)})}),(0,m.jsxs)("div",{className:iA.toolbarActions,children:[(0,m.jsx)(nR.A,{href:"https://gh.io/copilot-create-issues-feedback",className:iA.feedbackLink,children:"Give feedback"}),(0,m.jsx)(aM,{issueNode:s,onSuccess:n})]})]}),(0,m.jsx)("div",{className:iA.viewerContainer,children:(0,m.jsx)(i3.e,{children:(0,m.jsx)(i2.cI,{itemIdentifier:c,optionConfig:l})})})]})}try{i4.displayName||(i4.displayName="ExistingIssuePreview")}catch{}let i5=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{kind:"Variable",name:"input",variableName:"input"}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"bodyVersion",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateIssueMutationMutation",selections:[{alias:null,args:t,concreteType:"UpdateIssuePayload",kind:"LinkedField",name:"updateIssue",plural:!1,selections:[{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[n,a,r,i,s,o,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[l,n,c,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[d],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"errors",plural:!0,selections:[u],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateIssueMutationMutation",selections:[{alias:null,args:t,concreteType:"UpdateIssuePayload",kind:"LinkedField",name:"updateIssue",plural:!1,selections:[{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[n,a,r,i,s,o,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[l,n,c,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[m,d,n],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"errors",plural:!0,selections:[m,u],storageKey:null}],storageKey:null}]},params:{id:"2c8ef2284abf6fe7bc782f8b29657589",metadata:{},name:"updateIssueMutationMutation",operationKind:"mutation",text:null}}}();function i6({issueRepo:e,draftIssue:t,existingIssue:n,issueFormRef:a,onUpdate:r,onClose:i}){let s=(0,nd.useRelayEnvironment)(),[o,l]=(0,x.useState)(!1),[c,d]=(0,x.useState)(null),{clearSessionData:u}=(0,nz.u)(),p=(0,x.useCallback)(()=>{u(),a.current?.clearSessionStorage()},[u,a]),h=(0,x.useCallback)(()=>{p(),i?.()},[p,i]),f=ap(),g=(0,x.useCallback)(async a=>{a.preventDefault(),l(!0),d(null);try{let a=t.name,i=(0,ag.O_)(a);if(!i.isValid)return void d(i.errorMessage);let o=await f(e,t.body??"");await new Promise((e,t)=>{!function({environment:e,input:{issueId:t,title:n,body:a,bodyVersion:r},onError:i,onCompleted:s}){let o={id:t};if(void 0!==n&&(o.title=n),void 0!==a){if(""===r)throw Error("bodyVersion cannot be empty when body is provided");o.body=a,o.bodyVersion=r}if(1===Object.keys(o).length&&o.id)throw Error("At least one field (title or body) must be provided for update");(0,nd.commitMutation)(e,{mutation:i5,variables:{input:o},onError:e=>i?.(e),onCompleted:e=>{if(!e.updateIssue?.issue){let n="Unable to update issue",a=e.updateIssue?.errors;if(a&&a.length>0){for(let e of a){var t;reportError((t=e.message,Error(`Issue update mutation failed with error: ${t}`)))}n=function(e){let t=e.map(e=>e?.message).filter(Boolean).join(", ");return t?t.charAt(0).toUpperCase()+t.slice(1):void 0}(a)??n}return i?.(Error(n))}let n=e.updateIssue.issue;s?.({issue:n})}})}({environment:s,input:{issueId:n.id,title:a,body:o,bodyVersion:n.bodyVersion},onCompleted:({issue:t})=>{e(),h(),r?.(t)},onError:e=>{t(e)}})})}catch(e){d(e instanceof Error?e.message:"Failed to update issue")}finally{l(!1)}},[t.name,t.body,f,e,s,n.id,n.bodyVersion,h,r]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(eU.Q,{variant:"primary","data-testid":"update-issue-button",onClick:g,disabled:o,children:o?"Updating...":"Update"}),c&&(0,m.jsxs)("div",{className:"flash flash-error mt-2",children:[(0,m.jsx)("strong",{children:"Error:"})," ",c]})]})}i5.hash="5b643f077e87d5b820add74e36d77cc5";try{i6.displayName||(i6.displayName="UpdateIssueButton")}catch{}let i7={kind:"InlineDataFragment",name:"useIssueQueryIssueContent"};i7.hash="a398c7766bf0599e8e413cdf14d94d21";let i8=function(){var e={defaultValue:null,kind:"LocalArgument",name:"name"},t={defaultValue:null,kind:"LocalArgument",name:"number"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},a=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],r=[{kind:"Variable",name:"number",variableName:"number"}],i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s=[i,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bodyVersion",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,n],kind:"Fragment",metadata:null,name:"useIssueQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:r,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useIssueQueryIssueContent",selections:s,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e,t],kind:"Operation",name:"useIssueQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:r,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:s,storageKey:null},i],storageKey:null}]},params:{id:"11182a6bec5af416c2da63bef8f53ed9",metadata:{},name:"useIssueQueryQuery",operationKind:"query",text:null}}}();function i9(e){var t,n,a,r;let i,s,o,l,c,d,u,h,f,g,y,_,v,b,S,C,j,N,w,I,E,T,k=(0,p.c)(73),{isPreviewOpening:R,issue:A,onClose:L}=e,[D,P]=(0,x.useState)(R);k[0]!==D?(i=()=>{if(D){let e=setTimeout(()=>P(!1),400);return()=>clearTimeout(e)}},s=[D],k[0]=D,k[1]=i,k[2]=s):(i=k[1],s=k[2]),(0,x.useEffect)(i,s);let{selectedThreadID:O}=(0,q.Pk)(),B=null!=A.repository||!A.isStreaming,F=null!=A.issueNumber||!A.isStreaming;k[3]!==A.repository?(o=A.repository?.split("/")??[],k[3]=A.repository,k[4]=o):o=k[4];let[U,$]=o;k[5]!==U||k[6]!==$?(l={owner:U,repo:$},k[5]=U,k[6]=$,k[7]=l):l=k[7];let{isLoading:V,data:W}=iZ(l);k[8]!==U||k[9]!==$||k[10]!==A.issueNumber?(c={owner:U,repo:$,issueNumber:A.issueNumber},k[8]=U,k[9]=$,k[10]=A.issueNumber,k[11]=c):c=k[11];let{isLoading:G,data:H}=function(e){let t,n,a,r,i=(0,p.c)(15),{owner:s,repo:o,issueNumber:l}=e,c=(0,nd.useRelayEnvironment)();return i[0]!==c?(t=JSON.stringify(c),i[0]=c,i[1]=t):t=i[1],i[2]!==l||i[3]!==s||i[4]!==o||i[5]!==t?(n=["copilot-immersive-issue",t,s,o,l],i[2]=l,i[3]=s,i[4]=o,i[5]=t,i[6]=n):n=i[6],i[7]!==c||i[8]!==l||i[9]!==s||i[10]!==o?(a=async()=>{if(!s||!o||!l)return null;let e=await (0,nd.fetchQuery)(c,i8,{owner:s,name:o,number:l},{fetchPolicy:"store-or-network"}).toPromise(),t=e?.repository?.issue;return t?(0,nd.readInlineData)(i7,t):null},i[7]=c,i[8]=l,i[9]=s,i[10]=o,i[11]=a):a=i[11],i[12]!==n||i[13]!==a?(r={queryKey:n,queryFn:a},i[12]=n,i[13]=a,i[14]=r):r=i[14],(0,ai.I)(r)}(c);d=null!=W&&(!W.hasIssuesEnabled||null!=W.viewerInteractionLimitReasonHTML&&W.viewerInteractionLimitReasonHTML?.length>0);let z=ap(),Q=ak();k[12]!==Q||k[13]!==A.parentTag||k[14]!==A.tag||k[15]!==A.type?(u=async e=>{await Q([{draftType:A.type,tag:A.tag,parentTag:A.parentTag,repository:{databaseId:e.repository.databaseId,name:e.repository.name,owner:{login:e.repository.owner.login}},number:e.number,title:e.title,url:e.url,template:void 0}])},k[12]=Q,k[13]=A.parentTag,k[14]=A.tag,k[15]=A.type,k[16]=u):u=k[16];let K=u,J=iu(A),Y=iX(A,J),X=(0,x.useRef)(null),Z=function(e){let t,n=(0,p.c)(2);n[0]!==e.current?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e.current,n[1]=t):t=n[1];let a=t;return(0,x.useSyncExternalStore)(se,a)}(X),ee=(0,x.useRef)(null),et=W??void 0;k[17]!==et?(h={repository:et},k[17]=et,k[18]=h):h=k[18];let en=h;if(D||!B||!F||G||V){let e;return k[19]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nB.Q,{optionConfig:{useViewportQueries:!1}}),k[19]=e):e=k[19],e}let ea=`${A.id}@${O}`;return k[20]!==Z||k[21]!==ea?(f=(0,nM.S)({storageKeyPrefix:ea,insidePortal:Z}),k[20]=Z,k[21]=ea,k[22]=f):f=k[22],k[23]===Symbol.for("react.memo_cache_sentinel")?(g=(0,nF.G)("update-issue-preview"),k[23]=g):g=k[23],k[24]!==A?(y=(0,m.jsx)("div",{className:iA.toolbarLeft,children:(0,m.jsx)(nG,{item:A})}),k[24]=A,k[25]=y):y=k[25],k[26]===Symbol.for("react.memo_cache_sentinel")?(_=(0,m.jsx)(nR.A,{href:"https://gh.io/copilot-create-issues-feedback",className:iA.feedbackLink,children:"Give feedback"}),k[26]=_):_=k[26],k[27]!==H||k[28]!==W||k[29]!==d||k[30]!==L||k[31]!==K||k[32]!==A?(v=!d&&W&&H&&(0,m.jsx)(i6,{issueRepo:W,draftIssue:A,existingIssue:H,issueFormRef:ee,onUpdate:K,onClose:L}),k[27]=H,k[28]=W,k[29]=d,k[30]=L,k[31]=K,k[32]=A,k[33]=v):v=k[33],k[34]!==v?(b=(0,m.jsxs)("div",{className:iA.toolbarActions,children:[_,v]}),k[34]=v,k[35]=b):b=k[35],k[36]!==y||k[37]!==b?(S=(0,m.jsxs)("div",{className:iA.toolbar,children:[y,b]}),k[36]=y,k[37]=b,k[38]=S):S=k[38],k[39]!==W||k[40]!==d?(C=d&&((t=W).hasIssuesEnabled?t.viewerInteractionLimitReasonHTML?(0,m.jsx)(nV,{title:"You cannot update issues in this repository",description:t.viewerInteractionLimitReasonHTML,icon:M.IssueDraftIcon}):void 0:(0,m.jsx)(nV,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue updating your issue.",icon:M.IssueDraftIcon})),k[39]=W,k[40]=d,k[41]=C):C=k[41],k[42]!==W||k[43]!==d||k[44]!==A.repository?(j=!d&&!W&&((n=A.repository)?(0,m.jsx)(nV,{title:`${n} is not found`,description:"Please verify if the repository exists and is accessible before trying again.",icon:M.IssueDraftIcon}):(0,m.jsx)(nV,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:M.IssueDraftIcon})),k[42]=W,k[43]=d,k[44]=A.repository,k[45]=j):j=k[45],k[46]!==H||k[47]!==W||k[48]!==d||k[49]!==A.issueNumber||k[50]!==A.repository?(N=!d&&W&&!H&&(a=A.repository,(r=A.issueNumber)?(0,m.jsx)(nV,{title:`The target issue ${a}#${r} is not found`,description:"Please verify if the issue exists and is accessible before trying again.",icon:M.IssueDraftIcon}):(0,m.jsx)(nV,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:M.IssueDraftIcon})),k[46]=H,k[47]=W,k[48]=d,k[49]=A.issueNumber,k[50]=A.repository,k[51]=N):N=k[51],k[52]!==H||k[53]!==W||k[54]!==d||k[55]!==J||k[56]!==L||k[57]!==Y||k[58]!==z||k[59]!==A?(w=!d&&W&&H&&(0,m.jsx)(iR,{draftIssue:A,issueFormRef:ee,onChange:J,onClose:L,onBeforeCreate:e=>z(W,e),onFieldChange:Y}),k[52]=H,k[53]=W,k[54]=d,k[55]=J,k[56]=L,k[57]=Y,k[58]=z,k[59]=A,k[60]=w):w=k[60],k[61]!==C||k[62]!==j||k[63]!==N||k[64]!==w?(I=(0,m.jsxs)("div",{className:iA.form,children:[C,j,N,w]}),k[61]=C,k[62]=j,k[63]=N,k[64]=w,k[65]=I):I=k[65],k[66]!==S||k[67]!==I?(E=(0,m.jsxs)("div",{className:iA.container,ref:X,children:[S,I]}),k[66]=S,k[67]=I,k[68]=E):E=k[68],k[69]!==en||k[70]!==f||k[71]!==E?(T=(0,m.jsx)(nO.S,{optionConfig:f,preselectedData:en,...g,children:E}),k[69]=en,k[70]=f,k[71]=E,k[72]=T):T=k[72],T}function se(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}i8.hash="a1c6e44ba1445bc4d870fb9c11487d4d";try{i9.displayName||(i9.displayName="UpdateIssuePreview")}catch{}var st=n(25849),sn=n(98755),sa=n(53037),sr=n(23125);function si(e){let t,n,a,r=(0,p.c)(6);return r[0]!==e?(n=function({language:e,value:t}){var n;let a=(n=t,/^\t/m.test(n)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 4;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,a),indentWithTabs:"tab"===a,lineWrapping:function(e){let t=(0,aH.vL)(e);return t?.wrap??!1}(e)}}(e),r[0]=e,r[1]=n):n=r[1],t=n,r[2]!==t.indentUnit||r[3]!==t.indentWithTabs||r[4]!==t.lineWrapping?(a={indentUnit:t.indentUnit,indentWithTabs:t.indentWithTabs,lineWrapping:t.lineWrapping},r[2]=t.indentUnit,r[3]=t.indentWithTabs,r[4]=t.lineWrapping,r[5]=a):a=r[5],a}var ss=n(41649),so=n(83510);let sl={container:"CodeMirrorDiff-module__container--RCtmx"};var sc=n(53839),sd=n(63133),su=n(98325),sm=n(71381),sp=n(74713),sh=n(11636),sf=n(18351),sg=n(24774),sy=n(41185);function s_(e){return"split"===e.view?(0,m.jsx)(sx,{...e}):(0,m.jsx)(sv,{...e})}function sx(e){let t=(0,x.useRef)(null);return!function({fileName:e,left:t,leftLabelledBy:n,parentRef:a,right:r,rightLabelledBy:i,spacing:s}){let o=(0,x.useRef)(null),l=(0,x.useMemo)(()=>new sc.xx,[]),c=(0,x.useMemo)(()=>new sc.xx,[]),d=(0,x.useMemo)(()=>new sc.xx,[]),[u,m]=(0,x.useMemo)(()=>{let e=[...su.o,...(0,sm.u)(s),(0,sp.h)(),c.of([]),l.of([]),d.of([(0,sh.O)()]),(0,sy.T)()],t=[(0,sf.I)(n),sg.Lz.contentAttributes.of({"aria-labelledby":n})],a=[(0,sf.I)(i),sg.Lz.contentAttributes.of({"aria-labelledby":i})];return[e.concat(t),e.concat(a)]},[s,c,l,d,n,i]);(0,x.useEffect)(()=>{let n=a.current;if(n)return o.current=new so.SV({a:{doc:t,extensions:u},b:{doc:r,extensions:m},parent:n,gutter:!1}),(0,sd.r)({autoCompleteCompartment:l,fileName:e,languageCompartment:c,managedExtensions:[],themeCompartment:d,view:o.current?.a,viewB:o.current?.b}),()=>o.current?.destroy()},[])}({...e,parentRef:t}),(0,m.jsx)("div",{ref:t,className:sl.container})}function sv(e){let t=(0,x.useMemo)(()=>[(0,so.ex)({original:e.left,mergeControls:!1,gutter:!1})],[e.left]);return(0,m.jsx)(st.default,{ariaLabelledBy:e.unifiedLabelledBy,containerClassName:sl.container,fileName:e.fileName,height:"100%",isReadOnly:!0,spacing:e.spacing,value:e.right,onChange:aF.l,placeholder:"Loading...",hideHelp:!0,extensions:t})}try{s_.displayName||(s_.displayName="CodeMirrorDiff")}catch{}try{sx.displayName||(sx.displayName="CodeMirrorDiffSplit")}catch{}try{sv.displayName||(sv.displayName="CodeMirrorDiffUnified")}catch{}function sb(e){let t,n,a,r,i,s=(0,p.c)(24),{left:o,right:l,view:c}=e,d=(0,x.useId)(),u=(0,x.useId)(),h=(0,x.useId)(),f=si(o);return s[0]!==o.name||s[1]!==d?(t=(0,m.jsxs)("span",{id:d,className:"sr-only",children:[o.name," original file contents"]}),s[0]=o.name,s[1]=d,s[2]=t):t=s[2],s[3]!==l.name||s[4]!==u?(n=(0,m.jsxs)("span",{id:u,className:"sr-only",children:[l.name," modified file contents"]}),s[3]=l.name,s[4]=u,s[5]=n):n=s[5],s[6]!==o.name||s[7]!==l.name||s[8]!==h?(a=(0,m.jsxs)("span",{id:h,className:"sr-only",children:[o.name," and ",l.name," unified diff view"]}),s[6]=o.name,s[7]=l.name,s[8]=h,s[9]=a):a=s[9],s[10]!==f||s[11]!==o.name||s[12]!==o.value||s[13]!==d||s[14]!==l.value||s[15]!==u||s[16]!==h||s[17]!==c?(r=(0,m.jsx)(s_,{fileName:o.name,left:o.value,leftLabelledBy:d,right:l.value,rightLabelledBy:u,spacing:f,unifiedLabelledBy:h,view:c}),s[10]=f,s[11]=o.name,s[12]=o.value,s[13]=d,s[14]=l.value,s[15]=u,s[16]=h,s[17]=c,s[18]=r):r=s[18],s[19]!==t||s[20]!==n||s[21]!==a||s[22]!==r?(i=(0,m.jsxs)("div",{children:[t,n,a,r]}),s[19]=t,s[20]=n,s[21]=a,s[22]=r,s[23]=i):i=s[23],i}try{sb.displayName||(sb.displayName="DiffView")}catch{}function sS(e){let t,n,a,r,i,s,o,l=(0,p.c)(15),{isUnifiedDiff:c,setIsUnifiedDiff:d}=e;l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(tP.K,{icon:M.GearIcon,"aria-label":"Open diff view settings",variant:"invisible"})}),l[0]=t):t=l[0],l[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(tM.l.GroupHeading,{children:"Layout"}),l[1]=n):n=l[1],l[2]!==d?(a=()=>d(!0),l[2]=d,l[3]=a):a=l[3],l[4]!==c||l[5]!==a?(r=(0,m.jsx)(tM.l.Item,{selected:c,onSelect:a,children:"Unified"}),l[4]=c,l[5]=a,l[6]=r):r=l[6];let u=!c;return l[7]!==d?(i=()=>d(!1),l[7]=d,l[8]=i):i=l[8],l[9]!==u||l[10]!==i?(s=(0,m.jsx)(tM.l.Item,{selected:u,onSelect:i,children:"Split"}),l[9]=u,l[10]=i,l[11]=s):s=l[11],l[12]!==r||l[13]!==s?(o=(0,m.jsxs)(tD.W,{children:[t,(0,m.jsx)(tD.W.Overlay,{children:(0,m.jsx)(tM.l,{children:(0,m.jsxs)(tM.l.Group,{selectionVariant:"single",children:[n,r,s]})})})]}),l[12]=r,l[13]=s,l[14]=o):o=l[14],o}try{sS.displayName||(sS.displayName="DiffViewSettings")}catch{}let sC=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)},sj={container:"FilePreview-module__container--P2h3J",previewContainer:"FilePreview-module__previewContainer--KRQup",codeMirrorContainer:"FilePreview-module__codeMirrorContainer--lxGn_",toolbar:"FilePreview-module__toolbar--ZZWN1",toolbarLeft:"FilePreview-module__toolbarLeft--RCKxW",toolbarLoC:"FilePreview-module__toolbarLoC--I7tcY",toolbarActions:"FilePreview-module__toolbarActions--h04aW",footer:"FilePreview-module__footer--o2xcM"};var sN=n(74807);let sw={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function sI(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}let sE={container:"SandboxView-module__container--PAb4m",iframe:"SandboxView-module__iframe--r6S4N"},sT={error:"ErrorMessage-module__error--xol56",errorIcon:"ErrorMessage-module__errorIcon--ODD8l",errorHeader:"ErrorMessage-module__errorHeader--hmJF7"};function sk(e){let t,n=(0,p.c)(4),{error:a}=e;if(n[0]!==a){let e,r,i=a?.split(`
`)??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("span",{className:sT.errorIcon,children:(0,m.jsx)(M.StopIcon,{size:24})}),r=(0,m.jsx)("h2",{className:sT.errorHeader,children:"HTML rendering failed"}),n[2]=e,n[3]=r):(e=n[2],r=n[3]),t=(0,m.jsxs)("div",{className:sT.error,children:[e,r,i.length>0?(0,m.jsx)("p",{children:i.map(sR)}):(0,m.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=a,n[1]=t}else t=n[1];return t}function sR(e){return(0,m.jsxs)(m.Fragment,{children:[e,(0,m.jsx)("br",{})]},`error-line-${e}}`)}try{sk.displayName||(sk.displayName="ErrorMessage")}catch{}function sA(e){let t,n,a,r,i=(0,p.c)(14),{content:s,inlineScripts:o,inlineStyles:l,headScripts:c,bodyScripts:d,styles:u,viewscreenUrl:h}=e,f=(0,J.G7)("viewscreen_sandbox");i[0]!==h?(n=new URL("view/sandbox?url=client://sandbox",h).toString(),t=new URL(n,eg.fV.origin),i[0]=h,i[1]=t,i[2]=n):(t=i[1],n=i[2]);let g=t.origin,y=(0,x.useRef)(null),_=(0,x.useRef)(null);i[3]!==d||i[4]!==s||i[5]!==c||i[6]!==o||i[7]!==l||i[8]!==u?(a={content:s,headScripts:c,bodyScripts:d,inlineScripts:o,inlineStyles:l,styles:u},i[3]=d,i[4]=s,i[5]=c,i[6]=o,i[7]=l,i[8]=u,i[9]=a):a=i[9];let{renderState:v,errorMessage:b}=function(e,t,n,a){let r,i,s,o,l,c,d=(0,p.c)(16),[u,m]=(0,x.useState)(sw.LOADING),[h,f]=(0,x.useState)();d[0]!==t||d[1]!==e||d[2]!==a?(r=n=>(function(e,t,n,a,r,i){let s=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!s)return;let o=s.body,l=n.current?.contentWindow;switch(o){case"hello":sI(l,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),sI(l,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":i(sw.ERROR),s.payload?.error&&r(s.payload.error);break;case"loading":i(sw.LOADING);break;case"loaded":if(!n.current||!a.current)return;i(sw.LOADED);break;case"ready":if(!n.current||!a.current)return;i(sw.READY)}})(n,0,e,t,f,m),d[0]=t,d[1]=e,d[2]=a,d[3]=r):r=d[3];let g=r;return d[4]!==g?(i=()=>(window.addEventListener("message",g),()=>window.removeEventListener("message",g)),s=[g],d[4]=g,d[5]=i,d[6]=s):(i=d[5],s=d[6]),(0,x.useEffect)(i,s),d[7]!==t||d[8]!==e||d[9]!==n||d[10]!==u?(o=()=>{u===sw.READY&&e.current&&t.current&&function(e,t,n){let a={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...n}}};sI(e.contentWindow,a)}(e.current,t.current,n)},l=[t,e,n,u],d[7]=t,d[8]=e,d[9]=n,d[10]=u,d[11]=o,d[12]=l):(o=d[11],l=d[12]),(0,x.useEffect)(o,l),d[13]!==h||d[14]!==u?(c={renderState:u,errorMessage:h},d[13]=h,d[14]=u,d[15]=c):c=d[15],c}(y,_,a,g);if(!f)return null;for(let e of((0,tn.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:f}),Array.from(new Set([...c||[],...d||[],...u||[]].map(e=>{try{return new URL(e,g).origin}catch{return null}}).filter(Boolean)))))(0,tn.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return i[10]!==b||i[11]!==v||i[12]!==n?(r=(0,m.jsx)("div",{ref:_,className:sE.container,children:v===sw.ERROR?(0,m.jsx)(sk,{error:b}):(0,m.jsx)("iframe",{ref:y,className:sE.iframe,sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:n})}),i[10]=b,i[11]=v,i[12]=n,i[13]=r):r=i[13],r}try{sA.displayName||(sA.displayName="SandboxView")}catch{}let sL={loadingContainer:"HtmlPreview-module__loadingContainer--t3YC7",loadingHead:"HtmlPreview-module__loadingHead--XAabR",loadingText:"HtmlPreview-module__loadingText--WYn1B"};function sD(e,t,n){let a=`file:${e}`;if(!n.has(a))return null;let r=n.get(a)??[],i=r[r.length-1];if(!i)return null;let s=t.get(i);return s&&"file"===s.type?s:null}function sP(e){let t,n,a=(0,p.c)(15),{file:r}=e,{previewUrl:i}=(0,$.X)(),{items:s,versionedItems:o}=(0,nu.xx)(),{scripts:l,styles:c,files:d}=function(e,t,n){let a=Array.from(e.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>sD(e,t,n)),r=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(e).map(e=>sD(e,t,n)),i=Array.from(e.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e);return{scripts:[...a.map(e=>e?.value??""),...i,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:r.map(e=>e?.value??"").join(`
`),files:a.concat(r)}}(r.value,s,o),[u,h]=(0,x.useState)(!1),f=(r.isStreaming||d.some(sM))&&!u;a[0]!==f||a[1]!==h?(t=()=>{if(f){let e=setTimeout(()=>{h(!0)},3e3);return()=>clearTimeout(e)}},a[0]=f,a[1]=h,a[2]=t):t=a[2],(0,x.useEffect)(t),a[3]!==r.value?(n=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[],a=[];for(let r of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(r)?n.push(r):a.push(r);return{headScripts:n,bodyScripts:a,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(r.value),a[3]=r.value,a[4]=n):n=a[4];let{headScripts:g,bodyScripts:y,styles:_}=n;if(f){let e;return a[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)("div",{className:sL.loadingContainer,children:[(0,m.jsx)("div",{className:sL.loadingHead,children:(0,m.jsx)(sN.N,{animationType:"thinking",loopAnimation:!0})}),(0,m.jsx)("p",{className:sL.loadingText,children:"Preparing your preview\u2026"})]}),a[5]=e):e=a[5],e}{let e;return a[6]!==y||a[7]!==_||a[8]!==r.id||a[9]!==r.value||a[10]!==g||a[11]!==i||a[12]!==l||a[13]!==c?(e=(0,m.jsx)(sA,{inlineScripts:l,inlineStyles:c,headScripts:g,bodyScripts:y,styles:_,content:r.value,viewscreenUrl:i},r.id),a[6]=y,a[7]=_,a[8]=r.id,a[9]=r.value,a[10]=g,a[11]=i,a[12]=l,a[13]=c,a[14]=e):e=a[14],e}}function sM(e){return!e||e.isStreaming}try{sP.displayName||(sP.displayName="HtmlPreview")}catch{}var sO=n(24880),sB=n(73017),sF=n(74022);let sU={markdownPreview:"MarkdownPreview-module__markdownPreview--KrJBX",spinner:"MarkdownPreview-module__spinner--rHtSt",error:"MarkdownPreview-module__error--Kjmwv",errorIcon:"MarkdownPreview-module__errorIcon--msbkW",errorHeader:"MarkdownPreview-module__errorHeader--yOGh9"};function s$(e){let t,n,a,r=(0,p.c)(7),{file:i}=e,s=function(e,t){let n,a,r,i,s=(0,p.c)(6),[o,l]=(0,x.useState)(e);return 2e3!==s[0]?(a=(0,sF.A)(l,t),s[0]=t,s[1]=a):a=s[1],n=a,s[2]!==n||s[3]!==e?(r=()=>n(e),i=[n,e],s[2]=n,s[3]=e,s[4]=r,s[5]=i):(r=s[4],i=s[5]),(0,x.useEffect)(r,i),o}(i.value,2e3);r[0]!==i.name||r[1]!==s?(t={queryKey:["copilot-immersive","MarkdownPreview",s,i.name],queryFn:async()=>{let e=await (0,tl.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:s,filename:i.name}});if(!e.ok)throw Error(`Failed to load rendered markdown (${e.status} on ${e.url})`);return await e.json()},placeholderData:sO.rX,staleTime:1/0},r[0]=i.name,r[1]=s,r[2]=t):t=r[2];let{status:o,data:l}=(0,ai.I)(t);return r[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,_.$)("readme html-blob blob",sU.markdownPreview),r[3]=n):n=r[3],r[4]!==l||r[5]!==o?(a=(0,m.jsx)("div",{className:n,children:"pending"===o?(0,m.jsx)("div",{className:sU.spinner,children:(0,m.jsx)(nJ.A,{srText:"Loading Markdown preview\u2026"})}):"error"===o?(0,m.jsxs)("div",{className:sU.error,children:[(0,m.jsx)("span",{className:sU.errorIcon,children:(0,m.jsx)(M.StopIcon,{size:24})}),(0,m.jsx)("h2",{className:sU.errorHeader,children:"Markdown rendering failed"}),(0,m.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,m.jsx)(sB.$6,{className:"markdown-body",html:l.html})}),r[4]=l,r[5]=o,r[6]=a):a=r[6],a}try{s$.displayName||(s$.displayName="MarkdownPreview")}catch{}function sV(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,v,b,S,C,j,N=(0,p.c)(67),{isPreviewOpening:w,file:I,onClose:E}=e,{updateItem:T,items:k,versionedItems:R}=(0,nu.xx)(),A=(0,q.Pk)();N[0]!==I.isStreaming||N[1]!==I.messageId||N[2]!==A.messages?(t=I.isStreaming?A.messages[A.messages.length-1]:A.messages.find(e=>e.id===I.messageId),N[0]=I.isStreaming,N[1]=I.messageId,N[2]=A.messages,N[3]=t):t=N[3];let L=t,{linesOfCode:D,isPreviewable:P,size:O}=function(e){let t,n,a,r,i=(0,p.c)(12);if(i[0]!==e.language||i[1]!==e.value){let r,s,o=new Blob([e.value]).size;i[5]===Symbol.for("react.memo_cache_sentinel")?(r=new Set(["markdown","html"]),i[5]=r):r=i[5];let l=r;i[6]!==e.value?(s=e.value.split(`
`),i[6]=e.value,i[7]=s):s=i[7],t=s.length,n=l.has(e.language),a=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(o),i[0]=e.language,i[1]=e.value,i[2]=t,i[3]=n,i[4]=a}else t=i[2],n=i[3],a=i[4];return i[8]!==t||i[9]!==n||i[10]!==a?(r={linesOfCode:t,isPreviewable:n,size:a},i[8]=t,i[9]=n,i[10]=a,i[11]=r):r=i[11],r}(I);!function(e,t){let n,a,r,i,s,o,l,c=(0,p.c)(25),{reference:d}=e,u=(0,H.b)(),m=d?.type;c[0]!==d?(n=d?(0,eI.Vb)(d):void 0,c[0]=d,c[1]=n):n=c[1],c[2]!==m||c[3]!==n?(a=["copilot-reference-preview","copilot","references",m,n],c[2]=m,c[3]=n,c[4]=a):a=c[4],c[5]!==e||c[6]!==u||c[7]!==d||c[8]!==t?(r=async()=>{if(!d||"file"!==d.type||e.value)return null;let n=await u.service.hydrateReference(d);return n.ok?(t({...e,value:n.payload.contents,isStreaming:!1}),n.payload):null},c[5]=e,c[6]=u,c[7]=d,c[8]=t,c[9]=r):r=c[9],c[10]!==a||c[11]!==r?(i={queryKey:a,queryFn:r,staleTime:1/0},c[10]=a,c[11]=r,c[12]=i):i=c[12];let{isLoading:h,isError:f,data:g}=(0,ai.I)(i);c[13]!==g||c[14]!==e||c[15]!==t?(s=()=>{g?.contents&&e.value!==g.contents&&t({...e,value:g.contents,isStreaming:!1})},c[13]=g,c[14]=e,c[15]=t,c[16]=s):s=c[16];let y=g?.contents;c[17]!==e||c[18]!==y||c[19]!==t?(o=[y,e,t],c[17]=e,c[18]=y,c[19]=t,c[20]=o):o=c[20],(0,x.useEffect)(s,o),c[21]!==g||c[22]!==f||c[23]!==h?(l={isLoading:h,isError:f,data:g},c[21]=g,c[22]=f,c[23]=h,c[24]=l):l=c[24]}(I,T);let[B,F]=(0,x.useState)("code"),[U,$]=(0,x.useState)(!0),[V,W]=(0,x.useState)(void 0);N[4]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{W(e)},N[4]=n):n=N[4];let G=n;N[5]!==I||N[6]!==k||N[7]!==R?(a=(0,nS.SX)(I,k,R),N[5]=I,N[6]=k,N[7]=R,N[8]=a):a=N[8];let z=a,Q=eE.W.hyperspaceDiffView&&!!z;N[9]!==L?.error?.type||N[10]!==E?(r=()=>{(L?.error?.type==="publicCode"||L?.error?.type==="filtered")&&E()},N[9]=L?.error?.type,N[10]=E,N[11]=r):r=N[11];let K=L?.error;if(N[12]!==E||N[13]!==K?(i=[K,E],N[12]=E,N[13]=K,N[14]=i):i=N[14],(0,x.useEffect)(r,i),N[15]!==Q||N[16]!==P||N[17]!==B){if(s=[["code","Code"]],o="code",P&&(s.unshift(["preview","Preview"]),o="preview"===B?"preview":"code"),Q){let e;N[20]===Symbol.for("react.memo_cache_sentinel")?(e=["diff","Diff"],N[20]=e):e=N[20],s.push(e),o="diff"===B?"diff":o}N[15]=Q,N[16]=P,N[17]=B,N[18]=s,N[19]=o}else s=N[18],o=N[19];e:{var J;if("object"==typeof(J=I.reference)&&null!==J&&"repoOwner"in J&&"repoName"in J&&"string"==typeof J.repoOwner&&"string"==typeof J.repoName){l=`${I.reference.repoOwner}/${I.reference.repoName}/${I.name}`;break e}l=I.name}let Y=l;N[21]!==s||N[22]!==Q||N[23]!==P||N[24]!==B?(c=(P||Q)&&(0,m.jsx)(sa.I,{"aria-label":"File view",onChange:e=>{let t=s[e]?.[0]||"code";F(t),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:s.map(e=>{let[t,n]=e;return(0,m.jsx)(sa.I.Button,{selected:B===t,children:n},t)})}),N[21]=s,N[22]=Q,N[23]=P,N[24]=B,N[25]=c):c=N[25],N[26]!==I?(d=(0,m.jsx)(nG,{item:I,onVersionSelect:G}),N[26]=I,N[27]=d):d=N[27];let X=1===D?"line":"lines";return N[28]!==D||N[29]!==O||N[30]!==X?(u=(0,m.jsxs)("p",{className:sj.toolbarLoC,children:[D," ",X," \xb7 ",O]}),N[28]=D,N[29]=O,N[30]=X,N[31]=u):u=N[31],N[32]!==u||N[33]!==c||N[34]!==d?(h=(0,m.jsxs)("div",{className:sj.toolbarLeft,children:[c,d,u]}),N[32]=u,N[33]=c,N[34]=d,N[35]=h):h=N[35],N[36]!==I.reference?(f=I.reference&&"url"in I.reference&&(0,m.jsx)(tP.K,{as:"a","aria-label":"Go to the file",icon:M.LinkExternalIcon,variant:"invisible",href:I?.reference?.url}),N[36]=I.reference,N[37]=f):f=N[37],N[38]!==I.value?(g=(0,m.jsx)(sn.T,{textToCopy:I.value,ariaLabel:"Copy code",onCopy:sq}),N[38]=I.value,N[39]=g):g=N[39],N[40]!==I.name||N[41]!==I.value||N[42]!==V?(y=(0,m.jsx)(tP.K,{"aria-label":"Download code",icon:M.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=I.name.lastIndexOf(".");if(e>0){let t=I.name.substring(0,e),n=I.name.substring(e);return void 0!==V?`${t}_${V}${n}`:I.name}return void 0!==V?`${I.name}_${V}`:I.name})();sC(new File([I.value],e)),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),N[40]=I.name,N[41]=I.value,N[42]=V,N[43]=y):y=N[43],N[44]!==o||N[45]!==U?(_="diff"===o&&(0,m.jsx)(sS,{isUnifiedDiff:U,setIsUnifiedDiff:$}),N[44]=o,N[45]=U,N[46]=_):_=N[46],N[47]!==f||N[48]!==g||N[49]!==y||N[50]!==_?(v=(0,m.jsxs)("div",{className:sj.toolbarActions,children:[f,g,y,_]}),N[47]=f,N[48]=g,N[49]=y,N[50]=_,N[51]=v):v=N[51],N[52]!==h||N[53]!==v?(b=(0,m.jsxs)("div",{className:sj.toolbar,children:[h,v]}),N[52]=h,N[53]=v,N[54]=b):b=N[54],N[55]!==o||N[56]!==I||N[57]!==w||N[58]!==U||N[59]!==z?(S="preview"===o?(0,m.jsx)(sH,{file:I}):"diff"===o?(0,m.jsx)(sb,{left:z,right:I,view:U?"unified":"split"}):(0,m.jsx)(sG,{file:I,isPreviewOpening:w}),N[55]=o,N[56]=I,N[57]=w,N[58]=U,N[59]=z,N[60]=S):S=N[60],N[61]!==Y?(C=(0,m.jsx)("footer",{className:sj.footer,children:(0,m.jsx)("span",{"aria-live":"polite",children:Y})}),N[61]=Y,N[62]=C):C=N[62],N[63]!==b||N[64]!==S||N[65]!==C?(j=(0,m.jsxs)("div",{className:sj.container,children:[b,S,C]}),N[63]=b,N[64]=S,N[65]=C,N[66]=j):j=N[66],j}function sq(){return(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}let sW=(0,sr.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function sG({file:e,isPreviewOpening:t}){let{openItem:n,updateItem:a,versionedItems:r}=(0,nu.xx)(),i=(0,x.useRef)(!1),s=function(e,t){let n=e.get((0,nS.oy)(t.id))??[];return n[n.length-1]===t.id}(r,e),o=!e.reference||"thread-scoped-file"===e.reference.type,l=o&&!e.isStreaming&&s,c=(0,x.useId)(),d=si(e),[u,p]=(0,x.useState)(),h=u?.id===e.id?u.value:e.value,[f,g]=(0,x.useState)(!0),{messages:y}=(0,q.Pk)();(0,x.useEffect)(()=>{g(!1)},[]),(0,x.useEffect)(()=>{t&&(i.current=!0)},[t]);let _=(0,ss.K)((0,x.useCallback)(t=>{if(l&&t!==e.value)if(e.isUserEdited)p({value:t,id:e.id}),sW(e,t,a);else{let r={...e,messageId:aI.Wp,id:`file:${e.name}#${y.length}`,timestamp:new Date,isUserEdited:!0,value:t};a(r),n(r.id),p({value:t,id:r.id})}},[e,l,y.length,n,a]));return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("span",{id:c,className:"sr-only",children:[e.name," file contents"]}),(0,m.jsx)(st.default,{ariaLabelledBy:c,containerClassName:sj.codeMirrorContainer,fileName:e.name,height:"100%",isReadOnly:!l,spacing:d,value:f?"":h,onChange:_,focusNextRenderRef:i,placeholder:"Loading...",hideHelp:!0}),o&&!s&&(0,m.jsx)("div",{className:sj.footer,children:"Switch to the latest version to edit this file."})]})}function sH(e){let t=(0,p.c)(4),{file:n}=e;if("markdown"===n.language){let e;return t[0]!==n?(e=(0,m.jsx)("div",{className:sj.previewContainer,children:(0,m.jsx)(s$,{file:n})}),t[0]=n,t[1]=e):e=t[1],e}if("html"!==n.language)return null;{let e;return t[2]!==n?(e=(0,m.jsx)("div",{className:sj.previewContainer,children:(0,m.jsx)(sP,{file:n})}),t[2]=n,t[3]=e):e=t[3],e}}try{sV.displayName||(sV.displayName="FilePreview")}catch{}try{sG.displayName||(sG.displayName="CodeMirrorView")}catch{}try{sH.displayName||(sH.displayName="PreviewComponent")}catch{}let sz={container:"ImagePreview-module__container--lxQZb",imageElement:"ImagePreview-module__imageElement--WTRgY"};function sQ(e){let t,n=(0,p.c)(3),{image:a}=e;return n[0]!==a.altText||n[1]!==a.url?(t=(0,m.jsx)("div",{className:sz.container,children:(0,m.jsx)("img",{className:sz.imageElement,src:a.url,alt:a.altText})}),n[0]=a.altText,n[1]=a.url,n[2]=t):t=n[2],t}try{sQ.displayName||(sQ.displayName="ImagePreview")}catch{}let sK={container:"IssuePreview-module__container--O4xBI"},sJ=(0,x.memo)(function(e){let t,n,a,r,i,s,o,l,c,d=(0,p.c)(17),{isPreviewOpening:u,issue:h,onClose:f}=e,[g,y]=(0,x.useState)(u);if(d[0]!==g?(t=()=>{if(g){let e=setTimeout(()=>y(!1),400);return()=>clearTimeout(e)}},n=[g],d[0]=g,d[1]=t,d[2]=n):(t=d[1],n=d[2]),(0,x.useEffect)(t,n),d[3]!==h.href?(r=(0,m.jsx)(tP.K,{icon:M.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(h.href,"_blank")}}),d[3]=h.href,d[4]=r):r=d[4],a=r,d[5]!==f||d[6]!==a?(s={navigate:aF.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,titleAs:"h2",useViewportQueries:!1,withLiveUpdates:!0,onIssueDelete:f,additionalHeaderActions:a,showRepositoryPill:!0},d[5]=f,d[6]=a,d[7]=s):s=d[7],i=s,d[8]!==h.number||d[9]!==h.owner||d[10]!==h.repo?(l={owner:h.owner,repo:h.repo,number:h.number,type:"Issue"},d[8]=h.number,d[9]=h.owner,d[10]=h.repo,d[11]=l):l=d[11],o=l,g){let e;return d[12]!==i?(e=(0,m.jsx)(nB.Q,{optionConfig:i}),d[12]=i,d[13]=e):e=d[13],e}return d[14]!==o||d[15]!==i?(c=(0,m.jsx)("div",{className:sK.container,children:(0,m.jsx)(i3.e,{children:(0,m.jsx)(i2.cI,{itemIdentifier:o,optionConfig:i})})}),d[14]=o,d[15]=i,d[16]=c):c=d[16],c});try{sJ.displayName||(sJ.displayName="IssuePreview")}catch{}var sY=n(26076);let sX={container:"PlanningTaskPreview-module__container--eGhPC",toolbar:"PlanningTaskPreview-module__toolbar--dVIF8 FilePreview-module__toolbar--ZZWN1",toolbarLeft:"PlanningTaskPreview-module__toolbarLeft--KQZ13 FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"PlanningTaskPreview-module__toolbarActions--FLWif FilePreview-module__toolbarActions--h04aW",toolbarStatus:"PlanningTaskPreview-module__toolbarStatus--c0H7N",content:"PlanningTaskPreview-module__content--DbEla",spinner:"PlanningTaskPreview-module__spinner--u5IGS"};function sZ(e){let t,n,a,r,i,s=(0,p.c)(12),{planningTask:o}=e;t=o.name?`# ${o.name}

${o.description}`:o.description,s[0]!==t||s[1]!==o.tag?(n={queryKey:["copilot-immersive","PlanningTaskPreview",t,o.tag],queryFn:async()=>{let e=await (0,tl.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:t,filename:`${o.tag}.md`}});if(!e.ok)throw Error(`Failed to load rendered markdown (${e.status} on ${e.url})`);return await e.json()},staleTime:1/0},s[0]=t,s[1]=o.tag,s[2]=n):n=s[2];let{status:l,data:c}=(0,ai.I)(n);return s[3]!==o?(a=(0,m.jsx)("div",{className:sX.toolbar,children:(0,m.jsx)(s0,{planningTask:o})}),s[3]=o,s[4]=a):a=s[4],s[5]!==c||s[6]!==t||s[7]!==l?(r="pending"===l?(0,m.jsx)("div",{className:sX.spinner,children:(0,m.jsx)(nJ.A,{size:"large",srText:"Loading task preview\u2026"})}):"error"===l?(0,m.jsx)(s1,{content:t}):(0,m.jsx)(sY.G,{className:sX.content,verifiedHTML:c.html}),s[5]=c,s[6]=t,s[7]=l,s[8]=r):r=s[8],s[9]!==a||s[10]!==r?(i=(0,m.jsxs)("div",{className:sX.container,children:[a,r]}),s[9]=a,s[10]=r,s[11]=i):i=s[11],i}function s0(e){let t,n,a,r=(0,p.c)(11),{planningTask:i}=e,{startTask:s}=function(e){let t,n,a=(0,p.c)(6),r=(0,H.b)(),i=(0,q.Pk)();a[0]!==r||a[1]!==e||a[2]!==i?(t=async()=>{let t=e.name||e.tag;(0,tn.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_START",mode:"immersive",threadId:(0,aE.W)(i)?.id});let n={type:"text",name:`timeline-event: {"type": "planning-task-started", "markdownContent": "Starting task '${t}'..."}`},a=`
Create a pull request to implement the ${e.tag} task.
If you don't know the repository to create the pull request in, ask the user.
Afterward, return the full tasklist again, but with the PR associated with the task.

Example:
  Suppose the PR created for a task-1 is owner/repo#123.

  Then this task:

    - tag: "task-1"
      dependencyTags: []
      title: "Task Title"
      description: "Task description"

  Becomes:

    - tag: "task-1"
      dependencyTags: []
      repository: "owner/repo"
      pullRequest: 123
      title: "Task Title"
      description: "Task description"
`;await r.sendChatMessage({thread:(0,aE.W)(i),content:a,references:[n],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model,intent:aI.wh.planningAgent})},a[0]=r,a[1]=e,a[2]=i,a[3]=t):t=a[3];let s=t;return a[4]!==s?(n={startTask:s},a[4]=s,a[5]=n):n=a[5],n}(i),{convertToDraftIssue:o}=function(e){let t,n,a=(0,p.c)(6),r=(0,H.b)(),i=(0,q.Pk)();a[0]!==r||a[1]!==e||a[2]!==i?(t=async()=>{let t=e.name||e.tag;(0,tn.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ISSUE",mode:"immersive",threadId:(0,aE.W)(i)?.id});let n={type:"text",name:`timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting task '${t}' as an issue..."}`},a=`
Create a draft issue using the content of the ${e.tag} task.
`;await r.sendChatMessage({thread:(0,aE.W)(i),content:a,references:[n],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model,intent:aI.wh.planningAgent})},a[0]=r,a[1]=e,a[2]=i,a[3]=t):t=a[3];let s=t;return a[4]!==s?(n={convertToDraftIssue:s},a[4]=s,a[5]=n):n=a[5],n}(i),l=null!=i.pullRequest&&null!=i.repository,c=l?"Task started":"Ready to start";return r[0]!==c?(t=(0,m.jsx)("div",{className:sX.toolbarLeft,children:(0,m.jsx)("span",{className:sX.toolbarStatus,children:c})}),r[0]=c,r[1]=t):t=r[1],r[2]!==o||r[3]!==l||r[4]!==i.pullRequest||r[5]!==i.repository||r[6]!==s?(n=(0,m.jsx)("div",{className:sX.toolbarActions,children:l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(eU.Q,{as:"a",href:`/${i.repository}/pull/${i.pullRequest}/agent-sessions`,variant:"primary",size:"small",children:"View sessions"}),(0,m.jsx)(eU.Q,{as:"a",href:`/${i.repository}/pull/${i.pullRequest}`,variant:"primary",size:"small",children:"View pull request"})]}):(0,m.jsxs)(tD.W,{children:[(0,m.jsx)(tD.W.Button,{variant:"primary",size:"small",children:"Start task"}),(0,m.jsx)(tD.W.Overlay,{children:(0,m.jsxs)(tM.l,{children:[(0,m.jsx)(tM.l.Item,{onSelect:s,children:"Start task"}),(0,m.jsx)(tM.l.Item,{onSelect:o,children:"Draft as issue"})]})})]})}),r[2]=o,r[3]=l,r[4]=i.pullRequest,r[5]=i.repository,r[6]=s,r[7]=n):n=r[7],r[8]!==t||r[9]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[t,n]}),r[8]=t,r[9]=n,r[10]=a):a=r[10],a}function s1(e){let t,n,a,r,i,s=(0,p.c)(9),{content:o}=e,l=(0,x.useId)();return s[0]===Symbol.for("react.memo_cache_sentinel")?(n={indentSize:2,indentUnit:2,indentWithTabs:!1,lineWrapping:!0},s[0]=n):n=s[0],t=n,s[1]!==l?(a=(0,m.jsx)("span",{id:l,className:"sr-only",children:"Planning task markdown content"}),s[1]=l,s[2]=a):a=s[2],s[3]!==o||s[4]!==l?(r=(0,m.jsx)(st.default,{ariaLabelledBy:l,isReadOnly:!0,spacing:t,value:o,fileName:"task.md",onChange:aF.l,hideHelp:!0}),s[3]=o,s[4]=l,s[5]=r):r=s[5],s[6]!==a||s[7]!==r?(i=(0,m.jsxs)(m.Fragment,{children:[a,r]}),s[6]=a,s[7]=r,s[8]=i):i=s[8],i}try{sZ.displayName||(sZ.displayName="PlanningTaskPreview")}catch{}try{s0.displayName||(s0.displayName="PlanningTaskToolbar")}catch{}try{s1.displayName||(s1.displayName="RawMarkdownViewer")}catch{}function s2(e){let t,n=(0,p.c)(26),{isOpening:a,onClose:r,previewItem:i}=e,s=null;switch(i.type){case"file":{let e;n[0]!==a||n[1]!==r||n[2]!==i?(e=(0,m.jsx)(sV,{isPreviewOpening:a,file:i,onClose:r}),n[0]=a,n[1]=r,n[2]=i,n[3]=e):e=n[3],s=e;break}case"issue":{let e;n[4]!==a||n[5]!==r||n[6]!==i?(e=(0,m.jsx)(sJ,{isPreviewOpening:a,issue:i,onClose:r}),n[4]=a,n[5]=r,n[6]=i,n[7]=e):e=n[7],s=e;break}case"new-issue":{let e;n[8]!==a||n[9]!==r||n[10]!==i?(e=(0,m.jsx)(i0,{isPreviewOpening:a,issue:i,onClose:r}),n[8]=a,n[9]=r,n[10]=i,n[11]=e):e=n[11],s=e;break}case"update-issue":{let e;n[12]!==a||n[13]!==r||n[14]!==i?(e=(0,m.jsx)(i9,{isPreviewOpening:a,issue:i,onClose:r}),n[12]=a,n[13]=r,n[14]=i,n[15]=e):e=n[15],s=e;break}case"existing-issue":{let e;n[16]!==a||n[17]!==r||n[18]!==i?(e=(0,m.jsx)(i4,{isPreviewOpening:a,issue:i,onClose:r}),n[16]=a,n[17]=r,n[18]=i,n[19]=e):e=n[19],s=e;break}case"image":{let e;n[20]!==i?(e=(0,m.jsx)(sQ,{image:i}),n[20]=i,n[21]=e):e=n[21],s=e;break}case"planning-task":{let e;n[22]!==i?(e=(0,m.jsx)(sZ,{planningTask:i}),n[22]=i,n[23]=e):e=n[23],s=e}}return n[24]!==s?(t=s?(0,m.jsx)(nw.t,{fallback:(0,m.jsx)(nD,{regionName:"This workbench item"}),children:s}):null,n[24]=s,n[25]=t):t=n[25],t}try{s2.displayName||(s2.displayName="ContentPreviewItem")}catch{}var s3=n(77999);let s4={tabContainer:"ContentPreviewTab-module__tabContainer--ApaB_",tabContent:"ContentPreviewTab-module__tabContent--xe28k",isActive:"ContentPreviewTab-module__isActive--Pi2gz",mainButton:"ContentPreviewTab-module__mainButton--vLx58",icon:"ContentPreviewTab-module__icon--lefqk",title:"ContentPreviewTab-module__title--l571P",closeButton:"ContentPreviewTab-module__closeButton--SByWv"};function s5(e){let t=(0,p.c)(3),{file:n}=e;if(n.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nJ.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===n.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.CodeIcon,{}),t[2]=e):e=t[2],e}}function s6(e){let t=(0,p.c)(9),{item:n}=e;switch(n.type){case"file":{let e;return t[0]!==n?(e=(0,m.jsx)(s5,{file:n}),t[0]=n,t[1]=e):e=t[1],e}case"file-diff":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.FileDiffIcon,{}),t[2]=e):e=t[2],e}case"image":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.ImageIcon,{}),t[3]=e):e=t[3],e}case"issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.IssueOpenedIcon,{}),t[4]=e):e=t[4],e}case"new-issue":{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.IssueDraftIcon,{}),t[5]=e):e=t[5],e}case"update-issue":{let e;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.IssueDraftIcon,{}),t[6]=e):e=t[6],e}case"existing-issue":{let e;return t[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.IssueOpenedIcon,{}),t[7]=e):e=t[7],e}case"planning-task":{let e;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.TasklistIcon,{}),t[8]=e):e=t[8],e}default:return null}}let s7=(0,x.forwardRef)(function(e,t){let n,a,r,i,s,o,l,c,d,u,h,f,g,y,v,b,S,C,j,N=(0,p.c)(47);N[0]!==e?({onClick:i,onClose:s,isActive:a,item:r,controlHintId:n,tabPanelId:l,...o}=e,N[0]=e,N[1]=n,N[2]=a,N[3]=r,N[4]=i,N[5]=s,N[6]=o,N[7]=l):(n=N[1],a=N[2],r=N[3],i=N[4],s=N[5],o=N[6],l=N[7]);let[w,I]=(0,x.useState)(!1),E=(0,x.useRef)(null);N[8]!==s?(c=()=>{s&&s(),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},N[8]=s,N[9]=c):c=N[9];let T=c,k=(0,x.useRef)(null),R=r.name;N[10]!==w?(d=()=>{let e=E.current;if(!e)return;let t=e.scrollWidth>e.clientWidth;t!==w&&I(t)},N[10]=w,N[11]=d):d=N[11];let A=d,L=`content-preview-tab-${r.id}`;N[12]!==A||N[13]!==L||N[14]!==R?(u=(0,m.jsx)("span",{className:s4.title,"data-title":R,"data-testid":L,ref:E,onMouseEnter:A,children:R}),N[12]=A,N[13]=L,N[14]=R,N[15]=u):u=N[15];let D=u;N[16]!==a?(h=(0,_.$)(s4.tabContent,{[s4.isActive]:a}),N[16]=a,N[17]=h):h=N[17];let P=a?"true":void 0;N[18]!==i?(f=e=>{i&&i(e),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},N[18]=i,N[19]=f):f=N[19],N[20]!==T?(g=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":T();break;case"tab":if(e.shiftKey)break;e.preventDefault(),k.current?.focus()}},y=e=>{1===e.button&&T()},N[20]=T,N[21]=g,N[22]=y):(g=N[21],y=N[22]),N[23]!==r?(v=(0,m.jsx)("span",{className:s4.icon,children:(0,m.jsx)(s6,{item:r})}),N[23]=r,N[24]=v):v=N[24],N[25]!==w||N[26]!==R||N[27]!==D?(b=w?(0,m.jsx)(s3.m,{text:R,position:"bottom",children:D}):D,N[25]=w,N[26]=R,N[27]=D,N[28]=b):b=N[28],N[29]!==n||N[30]!==t||N[31]!==o||N[32]!==v||N[33]!==b||N[34]!==P||N[35]!==f||N[36]!==g||N[37]!==y||N[38]!==l?(S=(0,m.jsxs)("button",{className:s4.mainButton,type:"button",role:"tab","aria-selected":P,"aria-describedby":n,"aria-controls":l,onClick:f,onKeyDown:g,onAuxClick:y,ref:t,...o,children:[v,b]}),N[29]=n,N[30]=t,N[31]=o,N[32]=v,N[33]=b,N[34]=P,N[35]=f,N[36]=g,N[37]=y,N[38]=l,N[39]=S):S=N[39];let O=`Close ${R}`;return N[40]!==T||N[41]!==O?(C=(0,m.jsx)("div",{className:s4.closeButton,children:(0,m.jsx)(tP.K,{icon:M.XIcon,size:"small",variant:"invisible","aria-label":O,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:T,ref:k})}),N[40]=T,N[41]=O,N[42]=C):C=N[42],N[43]!==S||N[44]!==C||N[45]!==h?(j=(0,m.jsx)("div",{className:s4.tabContainer,children:(0,m.jsxs)("div",{className:h,children:[S,C]})}),N[43]=S,N[44]=C,N[45]=h,N[46]=j):j=N[46],j});try{s5.displayName||(s5.displayName="CodeTabIcon")}catch{}try{s6.displayName||(s6.displayName="TabIcon")}catch{}try{s7.displayName||(s7.displayName="ContentPreviewTab")}catch{}function s8(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,m.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{s8.displayName||(s8.displayName="DiceIcon")}catch{}let s9={container:"EmptyState-module__container--LAYqE",icon:"EmptyState-module__icon--Ur91O",heading:"EmptyState-module__heading--fStvv",subtitle:"EmptyState-module__subtitle--tjaBc"};function oe(e){let t,n,a,r,i,s,o,l,c,d,u,h,f=(0,p.c)(23),{isOpening:g}=e,y=(0,H.b)(),_=(0,q.Pk)(),v=(0,ef.zy)(),b=(0,x.useRef)(null);f[0]!==_?(t=(0,aE.W)(_),f[0]=_,f[1]=t):t=f[1];let S=t,C=(0,$.X)();f[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],f[2]=n):n=f[2];let[j,N]=(0,x.useState)(n);f[3]!==C.icebreakers?(a=()=>{var e;if(Array.isArray(e=C.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=C.icebreakers.find(ot);e&&e.data.length>0&&N(e.data)}},f[3]=C.icebreakers,f[4]=a):a=f[4],f[5]!==v||f[6]!==C.icebreakers?(r=[C.icebreakers,v],f[5]=v,f[6]=C.icebreakers,f[7]=r):r=f[7],(0,x.useEffect)(a,r),f[8]!==g?(i=()=>{g&&b.current&&window.requestAnimationFrame(()=>{b.current?.focus({preventScroll:!0})})},s=[g],f[8]=g,f[9]=i,f[10]=s):(i=f[9],s=f[10]),(0,x.useEffect)(i,s),f[11]!==S||f[12]!==j||f[13]!==y||f[14]!==_?(o=()=>{if(0===j.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(j),t=0===_.messages.length?S:(0,aE.W)(_),n=_.currentUserLogin,a=e.message;y.sendChatMessage({thread:t,content:a.replaceAll("$$USERNAME$$",n),references:_.currentReferences,topic:_.currentTopic,context:_.context,customInstructions:_.customInstructions,model:_.model}),(0,tn.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:_.currentTopic?.name,mode:"immersive",suggestionId:e.id})},f[11]=S,f[12]=j,f[13]=y,f[14]=_,f[15]=o):o=f[15];let w=o;return f[16]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(M.BrowserIcon,{size:24,className:s9.icon}),u=(0,m.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),l=(0,m.jsx)("h2",{className:s9.heading,children:"View files directly within Copilot"}),c=(0,m.jsx)("p",{className:s9.subtitle,children:"Ask to generate a file or app, or use the button below to try it yourself."}),f[16]=l,f[17]=c,f[18]=d,f[19]=u):(l=f[16],c=f[17],d=f[18],u=f[19]),f[20]!==w||f[21]!==_.isWaitingOnCopilot?(h=(0,m.jsxs)("div",{className:s9.container,children:[d,u,l,c,(0,m.jsx)(eU.Q,{ref:b,leadingVisual:s8,onClick:w,disabled:_.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),f[20]=w,f[21]=_.isWaitingOnCopilot,f[22]=h):h=f[22],h}function ot(e){return"interactional"===e.type}try{oe.displayName||(oe.displayName="EmptyState")}catch{}let on={container:"LoadingState-module__container--dKvYJ"};function oa(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:on.container,children:(0,m.jsx)(nJ.A,{size:"large"})}),t[0]=e):e=t[0],e}try{oa.displayName||(oa.displayName="LoadingState")}catch{}function or(e,t,n={}){(0,tn.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function oi({returnFocusRef:e}){let t=(0,nu.tZ)(),{items:n,allOpenItems:a,selectedItem:r,openItem:i,closeItem:s,closeItems:o,closePreviewPane:l,showLoadingState:c}=(0,nu.xx)(),d=(0,nI.S)(t),u=t&&!d,p=d&&!t,h=a.map(e=>n.get(e)).filter(e=>e?.type==="file"),f=(0,x.useId)(),g=(0,x.useId)(),y=(0,x.useId)(),v=a.map(e=>n.get(e)).filter(e=>!!e);(0,x.useEffect)(()=>{p&&e.current?.focus()},[p,e]);let b=async()=>{let e=h.map(e=>new File([e.value],e.name));sC(new File([await (0,nk._6)(e).blob()],"files.zip"))},S=v.find(e=>e.id===r)??v[0],C=(0,x.useCallback)((e=!1)=>{if(S){let t=e&&1===v.length;s(S.id),t&&(l(),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},[s,l,v.length,S]),j=(0,x.useRef)([]),N=(0,x.useRef)(null);(0,nT.G)({containerRef:N,focusableElementFilter:e=>"tab"===e.role,bindKeys:nE.z0.ArrowHorizontal|nE.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},[v]);let w=!(0,nN.g)(N);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:nP.toolbar,children:[(0,m.jsx)("div",{className:(0,_.$)(nP.actions,nP.rightDivider),children:(0,m.jsx)(os,{})}),(0,m.jsx)("div",{className:nP.tabsContainer,children:(0,m.jsxs)("div",{className:nP.tabs,role:"tablist","aria-label":"Workbench items",ref:N,tabIndex:-1,onWheel:e=>{e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft+=e.deltaY)},children:[v.map((e,t)=>(0,m.jsx)(s7,{id:e.id===r?f:void 0,tabPanelId:e.id===r?g:void 0,controlHintId:y,isActive:e.id===r,onClick:()=>{i(e.id),or("filePreviewTab.click",e)},onClose:()=>(e=>{let t=v[e];if(!t)return;let n=j.current[e+1]??j.current[e-1]??N.current;n?.focus();let a=1===v.length;s(t.id),a&&l(),or("filePreviewTab.close",t)})(t),item:e,ref:e=>{j.current[t]=e}},e.id)),(0,m.jsx)("span",{id:y,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),(0,m.jsx)("span",{})]})}),a.length>0&&(0,m.jsx)("div",{className:(0,_.$)(nP.actions,w&&nP.leftDivider),children:(0,m.jsxs)(tD.W,{children:[(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(tP.K,{icon:M.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,m.jsx)(tD.W.Overlay,{children:(0,m.jsxs)(tM.l,{children:[h.length>0&&(0,m.jsxs)(tM.l.Item,{onSelect:b,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.FileZipIcon,{})}),"Download all files"]}),(0,m.jsxs)(tM.l.Item,{onSelect:()=>{o(),l(),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.XIcon,{})}),"Close all tabs"]})]})})]})})," "]}),(0,m.jsx)("div",{className:nP.content,role:"tabpanel",id:g,"aria-labelledby":f,children:c?(0,m.jsx)(oa,{}):S?(0,m.jsx)(s2,{isOpening:u,previewItem:S,onClose:C}):(0,m.jsx)(oe,{isOpening:u})})]})}function os(){let e,t=(0,p.c)(2),{closePreviewPane:n}=(0,nu.xx)();return t[0]!==n?(e=(0,m.jsx)(tP.K,{variant:"invisible",icon:M.SidebarCollapseIcon,"aria-label":"Close workbench",onClick:()=>{n(),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}}),t[0]=n,t[1]=e):e=t[1],e}function oo(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:nP.toolbar,children:(0,m.jsx)("div",{className:(0,_.$)(nP.actions,nP.rightDivider),children:(0,m.jsx)(os,{})})}),(0,m.jsx)("div",{className:(0,_.$)(nP.content),children:(0,m.jsx)(nD,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function ol(e){let t,n,a,r,i=(0,p.c)(10),s=(0,x.useId)(),o=na(),l=(0,nu.tZ)()?o:void 0;return i[0]!==s?(t=(0,m.jsx)("h2",{id:s,className:"sr-only",children:"Workbench"}),i[0]=s,i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(oo,{}),i[2]=n):n=i[2],i[3]!==e?(a=(0,m.jsx)(nw.t,{fallback:n,children:(0,m.jsx)(oi,{...e})}),i[3]=e,i[4]=a):a=i[4],i[5]!==s||i[6]!==l||i[7]!==t||i[8]!==a?(r=(0,m.jsxs)("div",{"aria-labelledby":s,className:nP.container,tabIndex:-1,"data-testid":"content-preview",role:"dialog",ref:l,children:[t,a]}),i[5]=s,i[6]=l,i[7]=t,i[8]=a,i[9]=r):r=i[9],r}try{oi.displayName||(oi.displayName="ContentPreviewInner")}catch{}try{os.displayName||(os.displayName="CloseContentPreviewButton")}catch{}try{oo.displayName||(oo.displayName="ContentPreviewFallback")}catch{}try{ol.displayName||(ol.displayName="ContentPreview")}catch{}var oc=n(65029),od=n(16567);let ou={traceDisplay:"TraceDisplay-module__traceDisplay--VYvzq",controls:"TraceDisplay-module__controls--lyXHb",rightControls:"TraceDisplay-module__rightControls--gnfUn"};var om=n(24815),op=n(43543),oh=n(56221),of=n(25460);let og={traceDetails:"TraceDetails-module__traceDetails--YxV3d",header:"TraceDetails-module__header--VCAIR",traceName:"TraceDetails-module__traceName--xfoOS",duration:"TraceDetails-module__duration--ZMf8H",section:"TraceDetails-module__section--fT33u",table:"TraceDetails-module__table--fbVjY",tableCell:"TraceDetails-module__tableCell--Ex8vT",tableRow:"TraceDetails-module__tableRow--Iu2v0",sectionTitle:"TraceDetails-module__sectionTitle--hPehc",expandable:"TraceDetails-module__expandable--PVL4N",expandableContent:"TraceDetails-module__expandableContent--KeW4Y",wrappedPre:"TraceDetails-module__wrappedPre--jbFNy"},oy=/^#{1,6}\s|^\*{1,2}[\s\S]*?\*{1,2}|^\[.*?\]\(.*?\)|```[\s\S]*?```|^\s*[-*+]\s|^\d+\.\s/m;function o_(e){return"string"==typeof e?oy.test(e)?(0,m.jsx)(of.o,{children:e}):(0,m.jsx)("pre",{className:og.wrappedPre,children:e}):(0,m.jsx)("pre",{className:og.wrappedPre,children:JSON.stringify(e,null,2)})}let ox={FORMATTED:0,JSON:1};function ov(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,v,b,S=(0,p.c)(41),{node:C}=e,[j,N]=(0,x.useState)(ox.FORMATTED);S[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{(e===ox.FORMATTED||e===ox.JSON)&&N(e)},S[0]=t):t=S[0];let w=t;S[1]!==C.name?(n=(0,m.jsx)("div",{className:og.traceName,children:C.name}),S[1]=C.name,S[2]=n):n=S[2],S[3]!==C.duration?(a=(0,m.jsxs)("div",{className:og.duration,children:["duration: ",C.duration,"ms"]}),S[3]=C.duration,S[4]=a):a=S[4],S[5]!==n||S[6]!==a?(r=(0,m.jsxs)("div",{className:og.header,children:[n,a]}),S[5]=n,S[6]=a,S[7]=r):r=S[7];let I=j===ox.FORMATTED;S[8]!==I?(i=(0,m.jsx)(sa.I.Button,{value:ox.FORMATTED,selected:I,children:"Formatted"}),S[8]=I,S[9]=i):i=S[9];let E=j===ox.JSON;return S[10]!==E?(s=(0,m.jsx)(sa.I.Button,{value:ox.JSON,selected:E,children:"JSON"}),S[10]=E,S[11]=s):s=S[11],S[12]!==i||S[13]!==s?(o=(0,m.jsxs)(sa.I,{"aria-label":"Trace formatted/JSON view",onChange:w,size:"small",children:[i,s]}),S[12]=i,S[13]=s,S[14]=o):o=S[14],S[15]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("td",{className:`${og.tableCell} ${og.sectionTitle}`,children:"Input"}),S[15]=l):l=S[15],S[16]!==C.input||S[17]!==j?(c=j===ox.FORMATTED?(0,m.jsx)(ob,{value:C.input}):o_(C.input),S[16]=C.input,S[17]=j,S[18]=c):c=S[18],S[19]!==c?(d=(0,m.jsxs)("tr",{className:og.tableRow,children:[l,(0,m.jsx)("td",{className:og.tableCell,children:c})]},"Input"),S[19]=c,S[20]=d):d=S[20],S[21]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)("td",{className:`${og.tableCell} ${og.sectionTitle}`,children:"Output"}),S[21]=u):u=S[21],S[22]!==C.output||S[23]!==j?(h=j===ox.FORMATTED?(0,m.jsx)(ob,{value:C.output}):o_(C.output),S[22]=C.output,S[23]=j,S[24]=h):h=S[24],S[25]!==h?(f=(0,m.jsxs)("tr",{className:og.tableRow,children:[u,(0,m.jsx)("td",{className:og.tableCell,children:h})]},"Output"),S[25]=h,S[26]=f):f=S[26],S[27]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsx)("td",{className:`${og.tableCell} ${og.sectionTitle}`,children:"Metadata"}),S[27]=g):g=S[27],S[28]!==C.metadata||S[29]!==j?(y=j===ox.FORMATTED?(0,m.jsx)(ob,{value:C.metadata}):o_(C.metadata),S[28]=C.metadata,S[29]=j,S[30]=y):y=S[30],S[31]!==y?(_=(0,m.jsxs)("tr",{className:og.tableRow,children:[g,(0,m.jsx)("td",{className:og.tableCell,children:y})]},"Metadata"),S[31]=y,S[32]=_):_=S[32],S[33]!==d||S[34]!==f||S[35]!==_?(v=(0,m.jsx)("div",{className:og.section,children:(0,m.jsx)("table",{className:og.table,children:(0,m.jsxs)("tbody",{children:[d,f,_]})})}),S[33]=d,S[34]=f,S[35]=_,S[36]=v):v=S[36],S[37]!==v||S[38]!==r||S[39]!==o?(b=(0,m.jsxs)("div",{className:og.traceDetails,children:[r,o,v]}),S[37]=v,S[38]=r,S[39]=o,S[40]=b):b=S[40],b}function ob(e){let t=(0,p.c)(12),{value:n,depth:a}=e,r=void 0===a?1:a;if(r>4){let e,a;return t[0]!==n?(e=JSON.stringify(n,null,2),t[0]=n,t[1]=e):e=t[1],t[2]!==e?(a=(0,m.jsx)(oS,{value:e}),t[2]=e,t[3]=a):a=t[3],a}if("string"==typeof n||"number"==typeof n||"boolean"==typeof n){let e,a=String(n);return t[4]!==a?(e=(0,m.jsx)(oS,{value:a}),t[4]=a,t[5]=e):e=t[5],e}if(Array.isArray(n)){let e;return t[6]!==r||t[7]!==n?(e=(0,m.jsx)(oC,{value:n,depth:r}),t[6]=r,t[7]=n,t[8]=e):e=t[8],e}if("object"!=typeof n||null===n)return"Unknown";{let e;return t[9]!==r||t[10]!==n?(e=(0,m.jsx)(oj,{value:n,depth:r}),t[9]=r,t[10]=n,t[11]=e):e=t[11],e}}function oS(e){let t,n,a,r=(0,p.c)(10),{value:i}=e,s=i.length>100,o=i.length>100?`${i.slice(0,100)}...`:i,[l,c]=(0,x.useState)(!1);return r[0]!==l||r[1]!==s?(t=s&&(0,m.jsx)(oN,{expanded:l,onClick:()=>c(!l)}),r[0]=l,r[1]=s,r[2]=t):t=r[2],r[3]!==l||r[4]!==o||r[5]!==i?(n=l?o_(i):o,r[3]=l,r[4]=o,r[5]=i,r[6]=n):n=r[6],r[7]!==t||r[8]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[t,n]}),r[7]=t,r[8]=n,r[9]=a):a=r[9],a}function oC(e){let t,n,a=(0,p.c)(7),{value:r,depth:i}=e;if(a[0]!==i||a[1]!==r){let e;a[3]!==i?(e=(e,t)=>(0,m.jsx)("li",{children:(0,m.jsx)(ob,{value:e,depth:i+1})},t),a[3]=i,a[4]=e):e=a[4],t=r.map(e),a[0]=i,a[1]=r,a[2]=t}else t=a[2];return a[5]!==t?(n=(0,m.jsx)("ul",{children:t}),a[5]=t,a[6]=n):n=a[6],n}function oj(e){let t,n,a,r,i,s=(0,p.c)(15),{value:o,depth:l}=e;s[0]!==o?(t=()=>Object.keys(o).length<=2,s[0]=o,s[1]=t):t=s[1];let[c,d]=(0,x.useState)(t);s[2]!==c?(n=()=>d(!c),s[2]=c,s[3]=n):n=s[3];let u=`{${Object.keys(o).length}}`;return s[4]!==c||s[5]!==n||s[6]!==u?(a=(0,m.jsx)(oN,{expanded:c,onClick:n,text:u}),s[4]=c,s[5]=n,s[6]=u,s[7]=a):a=s[7],s[8]!==l||s[9]!==c||s[10]!==o?(r=c&&(0,m.jsx)("div",{className:og.expandableContent,children:(0,m.jsx)("table",{className:og.table,children:(0,m.jsx)("tbody",{children:Object.entries(o).map(e=>{let[t,n]=e;return(0,m.jsxs)("tr",{className:og.tableRow,children:[(0,m.jsx)("td",{className:og.tableCell,children:t}),(0,m.jsx)("td",{className:og.tableCell,children:(0,m.jsx)(ob,{value:n,depth:l+1})})]},t)})})})}),s[8]=l,s[9]=c,s[10]=o,s[11]=r):r=s[11],s[12]!==a||s[13]!==r?(i=(0,m.jsxs)("div",{className:og.expandable,children:[a,r]}),s[12]=a,s[13]=r,s[14]=i):i=s[14],i}function oN(e){let t,n=(0,p.c)(4),{expanded:a,onClick:r,text:i}=e;return n[0]!==a||n[1]!==r||n[2]!==i?(t=i?(0,m.jsx)(eU.Q,{leadingVisual:a?M.ChevronDownIcon:M.ChevronRightIcon,onClick:r,size:"small",variant:"invisible",children:i}):(0,m.jsx)(tP.K,{icon:a?M.ChevronDownIcon:M.ChevronRightIcon,"aria-label":a?"Collapse":"Expand",onClick:r,size:"small",variant:"invisible"}),n[0]=a,n[1]=r,n[2]=i,n[3]=t):t=n[3],t}try{ov.displayName||(ov.displayName="TraceDetails")}catch{}try{ob.displayName||(ob.displayName="Value")}catch{}try{oS.displayName||(oS.displayName="StringValue")}catch{}try{oC.displayName||(oC.displayName="ArrayValue")}catch{}try{oj.displayName||(oj.displayName="ObjectValue")}catch{}try{oN.displayName||(oN.displayName="ExpandButton")}catch{}let ow={traceList:"TraceList-module__traceList--IrKZS",traceTable:"TraceList-module__traceTable--K4Ffk"};function oI({treeLists:e,verboseMode:t}){let[n,a]=(0,x.useState)(null),[r,i]=(0,x.useState)(""),s=n=>{let i=n.target.closest("tr");if(!i)return;let s=i.querySelector("td:first-child");if(!s)return;let l=s.textContent?.trim();if(!l)return;let c=(r?o:t?e.fullList:e.shortList).find(e=>e.id===l);c&&a(c)},o=(0,x.useMemo)(()=>{let n=r.toLowerCase();return(t?e.fullList:e.shortList).filter(e=>{var t,a;return t=e,a=n,!!(t.id.toLowerCase().includes(a)||t.name.toLowerCase().includes(a)||t.attributes?.some(e=>String(e.value).toLowerCase().includes(a)||e.key.toLowerCase().includes(a)))})},[e,r,t]);(0,x.useEffect)(()=>{for(let e of document.querySelectorAll('tr[data-active="true"]'))e.removeAttribute("data-active");if(n)for(let e of document.querySelectorAll(".traceTable"))for(let t of e.querySelectorAll("tbody tr")){let e=t.querySelector("td:first-child");if(e?.textContent?.trim()===n.id){t.setAttribute("data-active","true");break}}},[n]);let l=[{header:"Span ID",field:"id",sortBy:"alphanumeric"},{header:"Name",field:"name",sortBy:"alphanumeric"},{header:"Start Time",field:"startTime",sortBy:"alphanumeric"},{header:"End Time",field:"endTime",sortBy:"alphanumeric"},{header:"Duration",field:"duration",sortBy:"alphanumeric"},{header:"Has LLM Data?",field:"hasData",sortBy:"basic"}];return(0,m.jsxs)("div",{className:ow.traceList,children:[(0,m.jsxs)(oc.A,{children:[(0,m.jsx)(oc.A.Label,{children:"Search: "}),(0,m.jsx)(om.A,{type:"text",value:r,onChange:e=>i(e.target.value)})]}),e.fullList.length>0&&(0,m.jsxs)(op.X.Container,{className:`${ow.traceTable} traceTable`,onClick:s,style:{display:t?"block":"none"},children:[(0,m.jsx)(op.X.Title,{id:"trace-table-verbose",children:"Verbose Trace Table"}),(0,m.jsx)(oh.b,{data:r?o:e.fullList,columns:l,initialSortColumn:"startTime",initialSortDirection:"DESC"})]}),e.shortList.length>0?(0,m.jsxs)(op.X.Container,{className:`${ow.traceTable} traceTable`,onClick:s,style:{display:t?"none":"block"},children:[(0,m.jsx)(op.X.Title,{id:"trace-table-filtered",children:"Filtered Trace Table"}),(0,m.jsx)(oh.b,{data:r?o:e.shortList,columns:l,initialSortColumn:"startTime",initialSortDirection:"DESC"})]}):(0,m.jsx)("div",{style:{padding:"16px",textAlign:"center",color:"#666"},children:"No spans to display. Try enabling verbose mode to see all spans."}),n&&(0,m.jsx)(ov,{node:n})]})}try{oI.displayName||(oI.displayName="TraceList")}catch{}let oE={traceTable:"TraceTable-module__traceTable--O1Wib"};function oT(e,t,n){let a=e.children.map(e=>oT(e,t,n));return{...e,startTime:e.startTime-t,endTime:e.endTime-t,children:a}}function ok(e){return{...e,startTime:e.startTime.toString(),endTime:e.endTime.toString(),duration:e.duration.toString(),children:e.children.map(ok),hasData:oR(e)?"Yes":"No"}}function oR(e){return!!(e.sessionId||e.userId||e.input||e.output||e.metadata)}function oA(e,t){if(t)return e;let n=e.children.map(e=>oA(e,t)).filter(e=>null!==e);return oR(e)||n.length>0?{...e,children:n}:null}function oL(e){let t=[];return!function e(n){for(let a of(t.push({...n,id:n.spanId}),n.children))e(a)}(e),t}function oD(e){let t,n,a=(0,p.c)(9),{root:r,verboseMode:i}=e;e:{let e;if(a[0]!==r.maxTime||a[1]!==r.minTime||a[2]!==r.node||a[3]!==i){let n=oA(r.node,i);if(!n){let e;a[6]===Symbol.for("react.memo_cache_sentinel")?(e=[],a[6]=e):e=a[6],t=e;break e}e=function(e){let t=new Map;return!function e(n){let a=t.get(n.name);a||(a={id:n.name,count:0,avgDuration:0,totalDuration:0}),a.count+=1,a.totalDuration+=n.duration,a.avgDuration=a.totalDuration/a.count,t.set(n.name,a),n.children.forEach(e)}(e),Array.from(t.values()).sort((e,t)=>t.totalDuration-e.totalDuration)}(oT(n,r.minTime,r.maxTime)),a[0]=r.maxTime,a[1]=r.minTime,a[2]=r.node,a[3]=i,a[4]=e,a[5]=t}else e=a[4],t=a[5];t=e}let s=t;return a[7]!==s?(n=(0,m.jsx)("div",{className:oE.traceTable,children:s.length>0?(0,m.jsxs)(op.X.Container,{children:[(0,m.jsx)(op.X.Title,{id:"trace-table",children:"Trace Table"}),(0,m.jsx)(oh.b,{data:s,columns:[{header:"Name",field:"id",sortBy:"alphanumeric"},{header:"Count",field:"count",sortBy:"basic"},{header:"Average Duration",field:"avgDuration",sortBy:"basic",renderCell:oM},{header:"Total Duration",field:"totalDuration",sortBy:"basic",renderCell:oP}],initialSortColumn:"totalDuration",initialSortDirection:"DESC"})]}):(0,m.jsx)("div",{style:{padding:"16px",textAlign:"center",color:"#666"},children:"No spans to display. Try enabling verbose mode to see all spans."})}),a[7]=s,a[8]=n):n=a[8],n}function oP(e){return e.totalDuration.toFixed(2)}function oM(e){return e.avgDuration.toFixed(2)}try{oD.displayName||(oD.displayName="TraceTable")}catch{}let oO={settings:"TraceVisualizer-module__settings--tvIub",traceVisualizerContainer:"TraceVisualizer-module__traceVisualizerContainer--I9pVP",traceVisualizer:"TraceVisualizer-module__traceVisualizer--EyWw6",nodeContainer:"TraceVisualizer-module__nodeContainer--amFJh",nodeContainerWithData:"TraceVisualizer-module__nodeContainerWithData--DC4hi",active:"TraceVisualizer-module__active--abITk",node:"TraceVisualizer-module__node--mCIFJ",label:"TraceVisualizer-module__label--pY7tv"};function oB(e){let t,n,a,r=(0,p.c)(7),{settings:i,setSettings:s}=e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(oc.A.Label,{children:"Minimum Duration:"}),r[0]=t):t=r[0],r[1]!==s||r[2]!==i?(n=e=>s({...i,minimumDuration:Number(e.target.value)}),r[1]=s,r[2]=i,r[3]=n):n=r[3],r[4]!==i.minimumDuration||r[5]!==n?(a=(0,m.jsx)("div",{className:oO.settings,children:(0,m.jsxs)(oc.A,{children:[t,(0,m.jsx)(om.A,{type:"number",value:i.minimumDuration,onChange:n})]})}),r[4]=i.minimumDuration,r[5]=n,r[6]=a):a=r[6],a}function oF({root:e,verboseMode:t}){let[n,a]=(0,x.useState)({minimumDuration:0}),[r,i]=(0,x.useState)(1),[s,o]=(0,x.useState)(null),l=(0,x.useRef)(null);(0,x.useEffect)(()=>{o(null)},[e]);let{node:c,maxDepth:d,maxTime:u}=(0,x.useMemo)(()=>{var a,r;let i=oA(e.node,t);if(!i)return{node:null,maxDepth:0,maxTime:0};let s=oT(i,e.minTime,e.maxTime);return{node:(a=s,r=n.minimumDuration,a.children=a.children.map(e=>(function e(t,n){let a=t.children.map(t=>e(t,n)).flat();return t.duration<n?a:(t.children=a,[t])})(e,r)).flat(),s=a),maxDepth:e.maxDepth,maxTime:e.maxTime-e.minTime}},[e,t,n.minimumDuration]);return(0,m.jsxs)("div",{className:oO.traceVisualizerContainer,ref:l,children:[(0,m.jsx)(oB,{settings:n,setSettings:a}),c?(0,m.jsx)("div",{className:oO.traceVisualizer,style:{minHeight:`${(d+1)*30}px`,width:`${100*r}%`},onWheel:e=>{if(e.ctrlKey||e.metaKey){e.preventDefault();let t=Math.max(.5,1+-.01*e.deltaY),n=l.current;n&&(n.scrollLeft*=t),i(e=>e*t)}},children:(0,m.jsx)(o$,{node:c,maxTime:u,setActiveNode:o,activeNode:s})}):(0,m.jsx)("div",{style:{padding:"16px",textAlign:"center",color:"#666"},children:"No spans to display. Try enabling verbose mode to see all spans."}),s&&(0,m.jsx)(ov,{node:s})]})}function oU(e){var t,n;let a,r,i,s,o,l,c=(0,p.c)(26),{node:d,maxTime:u,setActiveNode:h,activeNode:f}=e,g=(t=d.startTime,t/u*100),y=`${g}%`,_=`${(n=d.duration,n/u*100)}%`,x=`${30*d.depth}px`,v=f?.spanId===d.spanId,b=oR(d)?oO.nodeContainerWithData:oO.nodeContainer,S=v?`${b} ${oO.active}`:b;if(c[0]!==y||c[1]!==x||c[2]!==_?(a={left:y,width:_,top:x},c[0]=y,c[1]=x,c[2]=_,c[3]=a):a=c[3],c[4]!==d||c[5]!==h?(r=()=>h(d),c[4]=d,c[5]=h,c[6]=r):r=c[6],c[7]!==d.name?(i=(0,m.jsx)("span",{className:oO.label,children:d.name}),c[7]=d.name,c[8]=i):i=c[8],c[9]!==a||c[10]!==r||c[11]!==i?(s=(0,m.jsx)("button",{className:oO.node,style:a,onClick:r,children:i}),c[9]=a,c[10]=r,c[11]=i,c[12]=s):s=c[12],c[13]!==f||c[14]!==u||c[15]!==d.children||c[16]!==h){let e;c[18]!==f||c[19]!==u||c[20]!==h?(e=e=>(0,m.jsx)(o$,{node:e,maxTime:u,setActiveNode:h,activeNode:f},e.spanId),c[18]=f,c[19]=u,c[20]=h,c[21]=e):e=c[21],o=d.children.map(e),c[13]=f,c[14]=u,c[15]=d.children,c[16]=h,c[17]=o}else o=c[17];return c[22]!==S||c[23]!==s||c[24]!==o?(l=(0,m.jsxs)("div",{className:S,children:[s,o]}),c[22]=S,c[23]=s,c[24]=o,c[25]=l):l=c[25],l}let o$=(0,x.memo)(oU);try{oB.displayName||(oB.displayName="TraceSettingsControls")}catch{}try{oF.displayName||(oF.displayName="TraceVisualizer")}catch{}try{oU.displayName||(oU.displayName="NodeImpl")}catch{}try{o$.displayName||(o$.displayName="Node")}catch{}function oV(){let e=(0,q.A3)("traceInfo"),t=(0,H.b)(),[n,a]=(0,x.useState)(0),[r,i]=(0,x.useState)(!1),s=e?.roots,o=s?Array.from(s.keys()).at(-1):null,l=o?s?.get(o):null,[c,d]=(0,x.useState)(o||""),u=(0,x.useMemo)(()=>c&&s?s.get(c):l,[c,s,l]),p=(0,x.useMemo)(()=>u?function e(t,n=0){let a=t.startTime,r=t.endTime,i=a,s=r,o=n,l=t.children.map(t=>{let a=e(t,n+1);return i=Math.min(i,a.minTime),s=Math.max(s,a.maxTime),o=Math.max(o,a.maxDepth),a.node});return{node:{...t,startTime:a,endTime:r,duration:r-a,depth:n,children:l},minTime:i,maxTime:s,maxDepth:o}}(u):null,[u]),h=(0,x.useMemo)(()=>{if(!p)return null;let e=oL(ok(oT(p.node,p.minTime,p.maxTime))),t=oA(p.node,!1),n=[];return t&&(n=oL(ok(oT(t,p.minTime,p.maxTime)))),{fullList:e,shortList:n}},[p]);return s&&0!==s.size&&u&&p&&h?(0,m.jsxs)("div",{className:ou.traceDisplay,children:[(0,m.jsxs)("div",{className:ou.controls,children:[(0,m.jsxs)(oc.A,{children:[(0,m.jsx)(oc.A.Label,{children:"Select trace"}),(0,m.jsx)(od.A,{value:c,onChange:e=>d(e.target.value),children:Array.from(s.entries()).map(([e])=>(0,m.jsx)(od.A.Option,{value:e,children:e},e))})]}),(0,m.jsxs)("div",{className:ou.rightControls,children:[(0,m.jsxs)(tD.W,{children:[(0,m.jsx)(tD.W.Button,{icon:M.KebabHorizontalIcon,"aria-label":"More options"}),(0,m.jsx)(tD.W.Overlay,{children:(0,m.jsx)(tM.l,{children:(0,m.jsx)(tM.l.Item,{onSelect:()=>void navigator.clipboard.writeText(JSON.stringify(u)),children:"Copy Trace JSON"})})})]}),(0,m.jsx)(tP.K,{icon:M.XIcon,"aria-label":"Close trace display",onClick:()=>t.showTraceDisplay(!1)})]})]}),(0,m.jsx)(tM.l.Divider,{}),(0,m.jsxs)("div",{className:ou.controls,children:[(0,m.jsx)("div",{children:(0,m.jsxs)(sa.I,{"aria-label":"Selected tab",onChange:a,children:[(0,m.jsx)(sa.I.Button,{selected:0===n,children:"Graph"}),(0,m.jsx)(sa.I.Button,{selected:1===n,children:"Table"}),(0,m.jsx)(sa.I.Button,{selected:2===n,children:"List"})]})}),(0,m.jsx)("div",{children:(0,m.jsxs)(sa.I,{"aria-label":"Verbose mode toggle",onChange:e=>i(1===e),children:[(0,m.jsx)(sa.I.Button,{selected:!r,children:"Filtered"}),(0,m.jsx)(sa.I.Button,{selected:r,children:"Verbose"})]})})]}),0===n&&(0,m.jsx)(oF,{root:p,verboseMode:r}),1===n&&(0,m.jsx)(oD,{root:p,verboseMode:r}),2===n&&(0,m.jsx)(oI,{treeLists:h,verboseMode:r})]}):null}try{oV.displayName||(oV.displayName="TraceDisplay")}catch{}var oq=n(14521),oW=n(17485);function oG(){let e=(0,ef.zy)(),t=eg.fV.pathname;return(!t||eE.W.improvedNavigation)&&(t=e.pathname),(0,x.useMemo)(()=>t.includes("/share/"),[t])}let oH=/\/copilot\/c\/([^/]+)/,oz=/\/copilot\/share\/([^/]+)/;function oQ(){let e,t=(0,p.c)(2),n=(0,ef.zy)(),a=eg.fV.pathname||n.pathname||"",{threadID:r}=(0,ef.g)();e:{let n;t[0]!==a?(n=a.match(oH)||a.match(oz),t[0]=a,t[1]=n):n=t[1];let r=n;if(!r){e=null;break e}let[,i]=r;e=i??null}let i=e;return eE.W.improvedNavigation?r??null:i}function oK(e,t){let n,a,r=(0,p.c)(17),i=(0,q.Pk)(),{currentReferences:s,context:o}=i,l=(0,H.b)(),{reloadQuota:c}=(0,ny.xR)();r[0]!==i?(n=(0,aE.W)(i),r[0]=i,r[1]=n):n=r[1];let d=n,{updateItem:u}=(0,nu.xx)(),m=oG(),h=oQ(),{activeCopilotSpaceId:f}=(0,oW.C)();return r[2]!==o||r[3]!==s||r[4]!==e||r[5]!==f||r[6]!==m||r[7]!==l||r[8]!==t||r[9]!==c||r[10]!==i.customInstructions||r[11]!==i.model||r[12]!==i.skillOptions||r[13]!==d||r[14]!==h||r[15]!==u?(a=async n=>{if(c("handle_message_submit"),""===n.trim())return;for(let e of s){let n=(0,nS.oR)({ref:e,messageIndex:t});null!=n&&u({...n,isUserEdited:!1})}let a={thread:d,content:n,references:s,topic:e.current,context:o,customInstructions:i.customInstructions,model:i.model,customCopilotId:f,skillOptions:i.skillOptions};if(m){let e=await l.continueSharedThread(h);if(e){let{thread:t,messages:n}=e,r=n.at(-1)?.id;await l.sendChatMessage({...a,thread:t,parentMessageId:r})}}else await l.sendChatMessage(a)},r[2]=o,r[3]=s,r[4]=e,r[5]=f,r[6]=m,r[7]=l,r[8]=t,r[9]=c,r[10]=i.customInstructions,r[11]=i.model,r[12]=i.skillOptions,r[13]=d,r[14]=h,r[15]=u,r[16]=a):a=r[16],a}var oJ=n(84802);function oY(){let e=(0,q.A3)("messagesLoading")?.missingOrgIds,t=(0,q.A3)("ssoOrganizations"),n=e?.map(e=>{let n=t?.find(t=>t.id===String(e));return n?.login})?.filter(e=>!!e);return{needsSsoAuthentication:!!(e&&e.length>0),ssoOrgNames:n||[]}}var oX=n(97315);let oZ={banner:"ChatInputBanners-module__banner--itq1j",gpt5:"ChatInputBanners-module__gpt5--FNScm"},o0={container:"QuotaExceededBanner-module__container--ETlPC"};function o1(){let e,t,n,a,r=(0,p.c)(12),{isLicensedLimited:i,chatQuotaRemaining:s,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,ny.xR)(),[d,u]=(0,x.useState)(o2);r[0]!==s||r[1]!==c||r[2]!==l?(e=()=>{if(eE.W.premiumRequestQuotasEnabled&&void 0!==s){let e=nx.Jt.getQuotaExceededBannerFlag();eE.W.premiumRequestQuotasEnabled&&!c&&l?null===e?(nx.Jt.setQuotaExceededBannerFlag(!0),u(!0)):u(e):(nx.Jt.removeQuotaExceededBannerFlag(),u(!1))}},r[0]=s,r[1]=c,r[2]=l,r[3]=e):e=r[3],r[4]!==s||r[5]!==c||r[6]!==o||r[7]!==l?(t=[s,o,c,l],r[4]=s,r[5]=c,r[6]=o,r[7]=l,r[8]=t):t=r[8],(0,x.useEffect)(e,t),r[9]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{nx.Jt.setQuotaExceededBannerFlag(!1),u(!1)},r[9]=n):n=r[9];let m=n,h=d&&!i&&void 0!==s&&eE.W.premiumRequestQuotasEnabled;return r[10]!==h?(a={visible:h,onDismiss:m},r[10]=h,r[11]=a):a=r[11],a}function o2(){return nx.Jt.getQuotaExceededBannerFlag()??!1}function o3(e){let t,n,a,r,i=(0,p.c)(13),{onDismiss:s}=e,{canUpgradePlan:o,canPurchaseAdditionalQuota:l,resetDate:c}=(0,ny.xR)(),d=`You have reached your monthly limit for premium requests. ${o?`Select an upgrade option or switch to the default model. Limit resets on ${c}.`:`Enable additional requests or switch to the default model. Limit resets on ${c}.`}`;i[0]!==l||i[1]!==o?(t=o?(0,m.jsx)(np.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:o6,children:"Upgrade"}):l?(0,m.jsx)(np.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:o5,children:"Enable additional requests"}):null,i[0]=l,i[1]=o,i[2]=t):t=i[2];let u=t;i[3]!==l||i[4]!==o?(n=o&&l?(0,m.jsx)(nR.A,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:o4,children:"Enable additional requests"}):null,i[3]=l,i[4]=o,i[5]=n):n=i[5];let h=n;return i[6]!==s?(a=()=>{s(),(0,tn.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_DISMISS",mode:"immersive"})},i[6]=s,i[7]=a):a=i[7],i[8]!==d||i[9]!==u||i[10]!==h||i[11]!==a?(r=(0,m.jsx)("div",{className:o0.container,children:(0,m.jsx)(Q.l,{variant:"upsell",title:"Limit reached",description:d,hideTitle:!0,primaryAction:u,secondaryAction:h,onDismiss:a})}),i[8]=d,i[9]=u,i[10]=h,i[11]=a,i[12]=r):r=i[12],r}function o4(){(0,tn.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function o5(){(0,tn.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function o6(){(0,tn.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{o3.displayName||(o3.displayName="QuotaExceededBanner")}catch{}let o7=eE.W.premiumRequestQuotasEnabled?eI.mF:10;function o8(){let e,t,n,a,r=(0,p.c)(10),{isLicensedLimited:i,chatQuotaRemaining:s,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,ny.xR)(),[d,u]=(0,x.useState)(o9);r[0]!==s||r[1]!==i||r[2]!==c||r[3]!==o||r[4]!==l?(e=()=>{if((i||eE.W.premiumRequestQuotasEnabled)&&void 0!==s){let e=nx.Jt.getMeterBannerFlag();s>0&&s<=o7||!i&&o>0&&o<=o7||!i&&l&&c?null===e?(nx.Jt.setMeterBannerFlag(!0),u(!0)):u(e):(nx.Jt.removeMeterBannerFlag(),u(!1))}},t=[i,s,o,c,l],r[0]=s,r[1]=i,r[2]=c,r[3]=o,r[4]=l,r[5]=e,r[6]=t):(e=r[5],t=r[6]),(0,x.useEffect)(e,t),r[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{nx.Jt.setMeterBannerFlag(!1),u(!1)},r[7]=n):n=r[7];let m=n,h=d&&void 0!==s&&(i||eE.W.premiumRequestQuotasEnabled);return r[8]!==h?(a={visible:h,onDismiss:m},r[8]=h,r[9]=a):a=r[9],a}function o9(){return nx.Jt.getMeterBannerFlag()??!1}function le(e){let t,n,a,r,i,s=(0,p.c)(18),{onDismiss:o,className:l}=e,{isLicensedLimited:c,canUpgradePlan:d,canPurchaseAdditionalQuota:u,premiumInteractionsQuotaExceeded:h,resetDate:f}=(0,ny.xR)(),g=c?`You have used ${100-o7}% of your free requests this month.`:h?`You have used all premium requests available this month. You will be charged per additional premium request until the limit resets on ${f}.`:`You have used ${100-o7}% of your premium responses this month. ${d?"Upgrade to increase your limit.":"Enable additional requests to get more usage after the limit is reached."}`;s[0]!==u||s[1]!==d||s[2]!==h?(t=d&&!h?(0,m.jsx)(np.z,{as:"a",href:eI.Zs,onClick:lr,children:"Upgrade"}):u&&!h?(0,m.jsx)(np.z,{as:"a",href:eI.pF,onClick:la,children:"Enable additional requests"}):u&&(0,m.jsx)(np.z,{as:"a",href:eI.MB,onClick:ln,children:"Manage billing"}),s[0]=u,s[1]=d,s[2]=h,s[3]=t):t=s[3];let y=t;s[4]!==u||s[5]!==d||s[6]!==h?(n=d&&u&&!h?(0,m.jsx)(nR.A,{as:"a",href:eI.Zs,onClick:lt,children:"Enable additional requests"}):null,s[4]=u,s[5]=d,s[6]=h,s[7]=n):n=s[7];let _=n;return s[8]!==o?(a=()=>{o(),(0,tn.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})},s[8]=o,s[9]=a):a=s[9],s[10]!==g||s[11]!==y||s[12]!==_||s[13]!==a?(r=(0,m.jsx)(Q.l,{variant:"info",title:"Limit reached soon",description:g,hideTitle:!0,primaryAction:y,secondaryAction:_,onDismiss:a}),s[10]=g,s[11]=y,s[12]=_,s[13]=a,s[14]=r):r=s[14],s[15]!==l||s[16]!==r?(i=(0,m.jsx)("div",{className:l,children:r}),s[15]=l,s[16]=r,s[17]=i):i=s[17],i}function lt(){(0,tn.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function ln(){(0,tn.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_MANAGE_BILLING",mode:"immersive"})}function la(){(0,tn.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function lr(){(0,tn.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{le.displayName||(le.displayName="QuotaMeterBanner")}catch{}function li(){let e,t,n,a,r=(0,p.c)(12),{ambientError:i}=(0,q.Pk)(),s=o8(),o=o1();return r[0]!==i?(e=i&&(0,m.jsx)(oX.P,{ambientError:i,useLargerBorderRadius:!0}),r[0]=i,r[1]=e):e=r[1],r[2]!==o.onDismiss||r[3]!==o.visible?(t=o.visible&&(0,m.jsx)(o3,{onDismiss:o.onDismiss}),r[2]=o.onDismiss,r[3]=o.visible,r[4]=t):t=r[4],r[5]!==s.onDismiss||r[6]!==s.visible?(n=s.visible&&(0,m.jsx)(le,{className:oZ.banner,onDismiss:s.onDismiss}),r[5]=s.onDismiss,r[6]=s.visible,r[7]=n):n=r[7],r[8]!==e||r[9]!==t||r[10]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[e,t,n]}),r[8]=e,r[9]=t,r[10]=n,r[11]=a):a=r[11],a}try{li.displayName||(li.displayName="ChatInputBanners")}catch{}let ls={container:"Layout-module__container--KbBzT",left:"Layout-module__left--CjdVP",main:"Layout-module__main--c35Ak",content:"Layout-module__content--d8Xqx",footer:"Layout-module__footer--rx1Md",spaceBannerContainer:"Layout-module__spaceBannerContainer--x7gEl",chatInputContainer:"Layout-module__chatInputContainer--ty1RG",previewPane:"Layout-module__previewPane--irgSg",active:"Layout-module__active--brMbd",viewer:"Layout-module__viewer--xYIsJ",fullscreenPreviewPane:"Layout-module__fullscreenPreviewPane--KXovb",fullscreenPluginPane:"Layout-module__fullscreenPluginPane--wdchU"},lo={notificationsSection:"NotificationsSection-module__notificationsSection--K0_2c",spaceBannerContainer:"NotificationsSection-module__spaceBannerContainer--G0_MH",banner:"NotificationsSection-module__banner--a4C8F"},ll={container:"FreeChatExceededBanner-module__container--iiSMU"};function lc(){let e,t,n=(0,p.c)(3),{resetDate:a}=(0,ny.xR)(),r=`You have reached your free plan limit. Limit resets on ${a}.`;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(np.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:ld,children:"Upgrade"}),n[0]=e):e=n[0];let i=e;return n[1]!==r?(t=(0,m.jsx)("div",{className:ll.container,children:(0,m.jsx)(Q.l,{variant:"upsell",title:"Limit reached",description:r,hideTitle:!0,primaryAction:i})}),n[1]=r,n[2]=t):t=n[2],t}function ld(){(0,tn.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{lc.displayName||(lc.displayName="FreeChatExceededBanner")}catch{}function lu(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(Q.l,{title:"Chat is disabled",variant:"warning",description:"Conversation unavailable. The linked space may have been deleted, or you might be signed out of your organization.",hideTitle:!0}),t[0]=e):e=t[0],e}function lm(e){let t,n=(0,p.c)(3),{customCopilot:a}=e,r=(0,ef.Zp)();return n[0]!==a||n[1]!==r?(t=a&&(0,m.jsx)(Q.l,{title:"Chat is disabled",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue chatting.",hideTitle:!0,primaryAction:(0,m.jsx)(np.z,{as:"a",href:(0,nv.Cb)(a),onClick:e=>{e.preventDefault(),r((0,nv.Cb)(a))},children:"Edit"})}),n[0]=a,n[1]=r,n[2]=t):t=n[2],t}function lp(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(Q.l,{title:"Reference size exceeded",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function lh(e){let t,n,a,r=(0,p.c)(8),{errorMessages:i,onDismiss:s,className:o}=e,l=void 0===o?"":o;if(0===i.length)return null;r[0]!==i?(t=Array.from(new Set(i)),r[0]=i,r[1]=t):t=r[1];let c=t;r[2]!==c?(n=1===c.length?c[0]:(0,m.jsxs)(m.Fragment,{children:["Errors during attachment upload:",(0,m.jsx)("ul",{style:{paddingLeft:"1.2em"},children:c.map(lf)})]}),r[2]=c,r[3]=n):n=r[3];let d=n;return r[4]!==l||r[5]!==d||r[6]!==s?(a=(0,m.jsx)(Q.l,{variant:"critical",description:d,title:"Error during attachment upload",hideTitle:!0,className:l,onDismiss:s}),r[4]=l,r[5]=d,r[6]=s,r[7]=a):a=r[7],a}function lf(e){return(0,m.jsx)("li",{children:e},e)}try{lu.displayName||(lu.displayName="SpaceDeletedBanner")}catch{}try{lm.displayName||(lm.displayName="SpaceSizeExceededBanner")}catch{}try{lp.displayName||(lp.displayName="ReferenceSizeExceededBanner")}catch{}try{(i=function(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(Q.l,{title:"Reference not found",variant:"critical",description:"We couldn't access that repository. Make sure it exists and that you have permission to use it.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}).displayName||(i.displayName="AssociatedRepositoryReferenceNotFoundBanner")}catch{}try{lh.displayName||(lh.displayName="UploadErrorBanner")}catch{}let lg={spaceHomepage:"spaceHomepage",customCopilotDisabled:"customCopilotDisabled",customCopilotSizeExceeded:"customCopilotSizeExceeded"};function ly(e){let t=(0,p.c)(4),{variant:n,customCopilot:a}=e;switch(n){case lg.customCopilotDisabled:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(lu,{}),t[0]=e):e=t[0],e}case lg.customCopilotSizeExceeded:{let e;return t[1]!==a?(e=(0,m.jsx)(lm,{customCopilot:a}),t[1]=a,t[2]=e):e=t[2],e}case lg.spaceHomepage:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(m.Fragment,{}),t[3]=e):e=t[3],e}default:return null}}function l_(e,t){let n,a,r=(0,p.c)(9),{isPending:i,data:s,error:o}=(0,nb.Ao)(e),l=o instanceof nb.i9,c=o instanceof nb.OW;if(o&&!l&&!c)throw o;let d=i||l||c||!s?void 0:s;r[0]!==d||r[1]!==e||r[2]!==i||r[3]!==t?(n=function(e,t,n,a){if(e&&!a)return lg.spaceHomepage;if(n)return null;let r=!!t;return e&&!r?lg.customCopilotDisabled:(0,nv.Hh)(t)?lg.customCopilotSizeExceeded:null}(e,d,i,t),r[0]=d,r[1]=e,r[2]=i,r[3]=t,r[4]=n):n=r[4];let u=n;return r[5]!==d||r[6]!==i||r[7]!==u?(a={variant:u,customCopilot:d,isLoading:i},r[5]=d,r[6]=i,r[7]=u,r[8]=a):a=r[8],a}try{ly.displayName||(ly.displayName="SpaceConversationBanner")}catch{}function lx(){let e,t,n=(0,p.c)(16),{ambientError:a,customCopilots:r,selectedThreadID:i}=(0,q.Pk)(),s=(0,oq.G)();n[0]!==s||n[1]!==r?(e=(0,nv.JB)(r,s),n[0]=s,n[1]=r,n[2]=e):e=n[2];let o=!!e,{chatQuotaExceeded:l,isLicensedLimited:c}=(0,ny.xR)(),{variant:d,customCopilot:u}=l_(s,i),h=(!d||o)&&!(c&&l),f=o8(),g=o1(),y=d===lg.customCopilotDisabled,_=d===lg.customCopilotSizeExceeded,x=h&&a,v=h&&g.visible,b=h&&f.visible,S=!h,C=y||_,j=y||_||x||v||b||S;return n[3]!==a||n[4]!==u||n[5]!==g||n[6]!==f||n[7]!==x||n[8]!==S||n[9]!==v||n[10]!==b||n[11]!==j||n[12]!==y||n[13]!==C||n[14]!==_?(t=j&&(0,m.jsxs)("section",{"aria-label":"Notifications",className:lo.notificationsSection,children:[C&&(0,m.jsxs)("div",{className:lo.spaceBannerContainer,children:[y&&(0,m.jsx)(lu,{}),_&&(0,m.jsx)(lm,{customCopilot:u})]}),x&&(0,m.jsx)(oX.P,{ambientError:a,useLargerBorderRadius:!0}),!C&&(0,m.jsxs)(m.Fragment,{children:[v&&(0,m.jsx)(o3,{onDismiss:g.onDismiss}),b&&(0,m.jsx)(le,{className:lo.banner,onDismiss:f.onDismiss}),S&&(0,m.jsx)(lc,{})]})]}),n[3]=a,n[4]=u,n[5]=g,n[6]=f,n[7]=x,n[8]=S,n[9]=v,n[10]=b,n[11]=j,n[12]=y,n[13]=C,n[14]=_,n[15]=t):t=n[15],t}try{lx.displayName||(lx.displayName="NotificationsSection")}catch{}function lv(e){let t,n,a,r,i,s=(0,p.c)(19),{textAreaRef:o,handleUserSubmit:l,nextMessageIndex:c}=e,d=(0,q.Pk)(),{chatQuotaExceeded:u,isLicensedLimited:h}=(0,ny.xR)(),{needsSsoAuthentication:f}=oY(),g=(0,oq.G)(),y=f&&g,_=(0,oJ.G)(),x=function(){let e,t=(0,p.c)(2),{figmaAuthUrl:n}=(0,$.X)();if(n){if(t[0]!==n){let a=new URL(n,location.origin);a.searchParams.set("return_url",location.pathname+location.search),e=a.toString(),t[0]=n,t[1]=e}else e=t[1];return e}}();s[0]!==c?(t={messageIndex:c},s[0]=c,s[1]=t):t=s[1];let v=nC(t),{versionedItems:b,items:S}=(0,nu.xx)();if(s[2]!==S){for(let[,e]of(a=new Set,S))"file"===e.type&&a.add(e.name);s[2]=S,s[3]=a}else a=s[3];n=a;let C=!(h&&u)&&!y;return s[4]!==C||s[5]!==n||s[6]!==x||s[7]!==l||s[8]!==y||s[9]!==_||s[10]!==c||s[11]!==v||s[12]!==g||s[13]!==d||s[14]!==o||s[15]!==b?(r=C?(0,m.jsxs)(m.Fragment,{children:[eE.W.groupNotifications&&(0,m.jsx)(lx,{}),!eE.W.groupNotifications&&(0,m.jsx)(li,{}),(0,m.jsx)(tT.V,{modes:[{name:"Chat",supportsMCP:!g,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0,icon:(0,m.jsx)(M.CommentIcon,{}),placeholder:"How can I help you?"}],onNewThreadSelected:_,textAreaRef:o,onSubmit:l,isStreaming:!!d.streamingMessage,size:"large",showPlanningToggle:!0,onSelectReference:v,getReferenceVersion:e=>(0,nS.wt)(e,c,b),existingFileNames:n,figmaAuthUrl:x})]}):!eE.W.groupNotifications&&!y&&(0,m.jsx)(lc,{}),s[4]=C,s[5]=n,s[6]=x,s[7]=l,s[8]=y,s[9]=_,s[10]=c,s[11]=v,s[12]=g,s[13]=d,s[14]=o,s[15]=b,s[16]=r):r=s[16],s[17]!==r?(i=(0,m.jsx)("div",{className:ls.chatInputContainer,children:r}),s[17]=r,s[18]=i):i=s[18],i}try{lv.displayName||(lv.displayName="ChatInputContainer")}catch{}var lb=n(3201),lS=n(16030),lC=n(66289),lj=n(87255),lN=n(37204),lw=n(11083),lI=n(93380),lE=n(79007),lT=n(4466),lk=n(40260),lR=n(3614),lA=n(83294);let lL={shareButton:"ManageSharedConversationButton-module__shareButton--JdEom",menuButton:"ManageSharedConversationButton-module__menuButton--Er75R",successState:"ManageSharedConversationButton-module__successState--MxDWR",hideOnMobile:"ManageSharedConversationButton-module__hideOnMobile--JMMnx"},lD=x.forwardRef(function(e,t){let n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,v,b,S,C=(0,p.c)(46),{openDialog:j}=e,{selectedThreadID:N,threads:w}=(0,q.Pk)(),[I,E]=(0,x.useState)(!1),[T,k]=(0,x.useState)(!1),[R,A]=(0,x.useState)(!1),[L,D]=(0,x.useState)("Copy link");C[0]!==N||C[1]!==w?(n=w.get(N)?.sharedID,C[0]=N,C[1]=w,C[2]=n):n=C[2];let P=n,O=`${eg.fV.origin}/copilot/share/${P||"\u2026"}`,{messages:B}=(0,q.Pk)(),F=(0,eI.Q7)(B).length>0;C[3]!==F?(a=()=>F?"Disabled for Copilot extensions":"Anyone with the link can view this conversation",C[3]=F,C[4]=a):a=C[4];let U=a;C[5]!==N||C[6]!==O||C[7]!==P?(r=async e=>{"preventDefault"in e&&(e.preventDefault(),e.stopPropagation());try{await (0,lk.D)(O),k(!0),D("Copied!"),setTimeout(()=>{k(!1),D("Copy link")},2e3),(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive",originalThreadId:N,sharedThreadId:P})}catch{}},C[5]=N,C[6]=O,C[7]=P,C[8]=r):r=C[8];let $=r;C[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{E(!0),(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_OPEN",mode:"immersive"})},C[9]=i):i=C[9];let V=i;C[10]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{E(!1),(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_DIALOG_CLOSE",mode:"immersive"})},C[10]=s):s=C[10];let W=s;C[11]!==F||C[12]!==j?(o=()=>{F||j()},C[11]=F,C[12]=j,C[13]=o):o=C[13];let G=o,H=U();C[14]!==F||C[15]!==G?(l=(0,m.jsx)(eU.Q,{leadingVisual:M.UnlockIcon,onClick:G,inactive:F,children:"Share"}),C[14]=F,C[15]=G,C[16]=l):l=C[16],C[17]!==t||C[18]!==H||C[19]!==l?(c=(0,m.jsx)(lR.m,{text:H,direction:"n",type:"label",ref:t,children:l}),C[17]=t,C[18]=H,C[19]=l,C[20]=c):c=C[20],C[21]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(tD.W.Button,{"aria-label":"Additional share options",icon:M.TriangleDownIcon,className:lL.menuButton}),C[21]=d):d=C[21],C[22]!==T?(u=(0,m.jsx)(tM.l.LeadingVisual,{children:T?(0,m.jsx)(M.CheckIcon,{className:lL.successState}):(0,m.jsx)(M.CopyIcon,{})}),C[22]=T,C[23]=u):u=C[23];let z=T?lL.successState:void 0;return C[24]!==L||C[25]!==z?(h=(0,m.jsx)("span",{className:z,children:L}),C[24]=L,C[25]=z,C[26]=h):h=C[26],C[27]!==$||C[28]!==u||C[29]!==h?(f=(0,m.jsxs)(tM.l.Item,{onSelect:$,children:[u,h]},"copy-link"),C[27]=$,C[28]=u,C[29]=h,C[30]=f):f=C[30],C[31]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsxs)(tM.l.Item,{variant:"danger",onSelect:V,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.UnlinkIcon,{})}),"Unshare"]},"Unshare-link"),C[31]=g):g=C[31],C[32]!==f?(y=(0,m.jsx)(tD.W.Overlay,{width:"small",children:(0,m.jsx)(tM.l,{children:(0,m.jsxs)(m.Fragment,{children:[f,g]})})}),C[32]=f,C[33]=y):y=C[33],C[34]!==R||C[35]!==y?(_=(0,m.jsxs)(tD.W,{open:R,onOpenChange:A,children:[d,y]}),C[34]=R,C[35]=y,C[36]=_):_=C[36],C[37]!==_||C[38]!==c?(v=(0,m.jsxs)(lA.A,{"data-testid":"manage-shared-conversations",className:`${lL.shareButton} ${lL.hideOnMobile}`,children:[c,_]}),C[37]=_,C[38]=c,C[39]=v):v=C[39],C[40]!==N||C[41]!==I?(b=I&&(0,m.jsx)(lT.Q,{threadId:N,closeDialog:W}),C[40]=N,C[41]=I,C[42]=b):b=C[42],C[43]!==v||C[44]!==b?(S=(0,m.jsxs)(m.Fragment,{children:[v,b]}),C[43]=v,C[44]=b,C[45]=S):S=C[45],S});try{lD.displayName||(lD.displayName="ManageSharedConversationButton")}catch{}try{(s=ManageSharedConversationButtonWithRef).displayName||(s.displayName="ManageSharedConversationButtonWithRef")}catch{}let lP={shareButton:"ShareConversationButton-module__shareButton--plW1B",hideOnMobile:"ShareConversationButton-module__hideOnMobile--TYLqr"},lM=x.forwardRef(function(e,t){let n,a,r,i,s,o=(0,p.c)(15),{openDialog:l}=e,{messages:c}=(0,q.Pk)(),d=(0,eI.Q7)(c).length>0;o[0]!==c?(n=(0,eI.UM)(c),o[0]=c,o[1]=n):n=o[1];let u=n,h=d||u;o[2]!==h||o[3]!==l?(a=()=>{h||l()},o[2]=h,o[3]=l,o[4]=a):a=o[4];let f=a;o[5]!==d||o[6]!==u?(r=()=>d?"Disabled for Copilot extensions":u?"Disabled for conversations that have third-party MCP tool calls":"This conversation has not yet been shared",o[5]=d,o[6]=u,o[7]=r):r=o[7];let g=r();return o[8]!==h||o[9]!==f?(i=(0,m.jsx)(eU.Q,{leadingVisual:M.LockIcon,inactive:h,onClick:f,className:`${lP.shareButton} ${lP.hideOnMobile}`,children:"Share"}),o[8]=h,o[9]=f,o[10]=i):i=o[10],o[11]!==t||o[12]!==g||o[13]!==i?(s=(0,m.jsx)(lR.m,{text:g,direction:"n",type:"label",ref:t,children:i}),o[11]=t,o[12]=g,o[13]=i,o[14]=s):s=o[14],s});try{lM.displayName||(lM.displayName="ShareConversationButton")}catch{}try{(o=ShareConversationButtonWithRef).displayName||(o.displayName="ShareConversationButtonWithRef")}catch{}let lO=()=>{let e,t,n,a,r,i,s,o,l=(0,p.c)(16),{selectedThreadID:c,threads:d}=(0,q.Pk)();l[0]!==c||l[1]!==d?(e=c&&d.get(c)?.sharedID,l[0]=c,l[1]=d,l[2]=e):e=l[2];let u=!!e,[h,f]=(0,x.useState)(!1),g=(0,x.useRef)(null),{service:y}=(0,H.b)();l[3]===Symbol.for("react.memo_cache_sentinel")?(t=["copilot-chat-mcps"],l[3]=t):t=l[3],l[4]!==y?(n={queryKey:t,queryFn:async()=>y.fetchMCPServers(),placeholderData:lB},l[4]=y,l[5]=n):n=l[5];let{data:_}=(0,ai.I)(n),v=eE.W.copilotThirdPartyMcp&&(_||[]).length>0;l[6]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{f(!0),(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_OPEN",mode:"immersive"})},l[6]=a):a=l[6];let b=a;l[7]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{f(!1),(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"})},l[7]=r):r=l[7];let S=r;return l[8]!==u?(i=u?(0,m.jsx)(lD,{openDialog:b,ref:g}):(0,m.jsx)(lM,{openDialog:b,ref:g}),l[8]=u,l[9]=i):i=l[9],l[10]!==h||l[11]!==v?(s=h&&(0,m.jsx)(lE.S,{closeDialog:S,returnFocusRef:g,showThirdPartyMcpWarning:v}),l[10]=h,l[11]=v,l[12]=s):s=l[12],l[13]!==i||l[14]!==s?(o=(0,m.jsxs)(m.Fragment,{children:[i,s]}),l[13]=i,l[14]=s,l[15]=o):o=l[15],o};try{lO.displayName||(lO.displayName="ConversationSharingButton")}catch{}function lB(e){return e}let lF={header:"Header-module__header--StOgZ",rightControls:"Header-module__rightControls--yQ1vI",editedPromptIndicator:"Header-module__editedPromptIndicator--x8V7s",leadingVisual:"Header-module__leadingVisual--CWuHu"};var lU=n(61767);let l$=()=>{let e=(0,q.Pk)(),t=(0,oq.G)(),n=(0,nv.JB)(e.customCopilots,t),a=(0,nv.mM)(),r=(0,nv.FQ)(),i=a||n,s=!r&&n;return{updateGlobalNavigationBreadcrumbs:()=>{let e=[{label:"Copilot",href:"/copilot"}];i&&e.push({label:"Spaces",href:eI.VR}),s&&n&&e.push({label:n.name,href:(0,nv.Cb)(n)}),(0,lU.FC)(e)}}},lV={dialog:"SystemPromptDialog-module__dialog--A9NLu",content:"SystemPromptDialog-module__content--ImZGE",description:"SystemPromptDialog-module__description--J1C4T",textareaContainer:"SystemPromptDialog-module__textareaContainer--h5Yu4",textarea:"SystemPromptDialog-module__textarea--olAam"},lq=(0,x.forwardRef)(function(e,t){let n,a,r,i,s,o,l,c=(0,p.c)(12),d=(0,H.b)(),[u,h]=(0,x.useState)(!1),[f,g]=(0,x.useState)(void 0);c[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:()=>h(!0)}),c[0]=n):n=c[0],(0,x.useImperativeHandle)(t,n),c[1]!==d?(a=()=>{(async()=>{g(await d.getSystemPrompt())})()},r=[d],c[1]=d,c[2]=a,c[3]=r):(a=c[2],r=c[3]),(0,x.useEffect)(a,r),c[4]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{h(!1),(0,tn.BI)("dotcom_chat.activate",{target:"SYSTEM_PROMPT_DIALOG_CLOSE",mode:"immersive"})},c[4]=i):i=c[4];let y=i;c[5]!==f?(s=()=>(0,m.jsxs)("div",{className:lV.content,children:[(0,m.jsxs)("p",{className:lV.description,children:["The system prompt for"," ",(0,m.jsx)(nR.A,{muted:!0,inline:!0,href:"https://github.com/copilot",children:"GitHub Copilot"})," ","is a set of instructions that guides the LLM to provide enhanced functionality and output quality based on user input."]}),(0,m.jsx)("div",{className:lV.textareaContainer,children:(0,m.jsx)("textarea",{className:lV.textarea,readOnly:!0,children:f})})]}),c[5]=f,c[6]=s):s=c[6];let _=s;return c[7]!==u||c[8]!==_?(o=u&&(0,m.jsx)(nK.l,{onClose:y,title:"System prompt",renderBody:_,className:lV.dialog}),c[7]=u,c[8]=_,c[9]=o):o=c[9],c[10]!==o?(l=(0,m.jsx)(m.Fragment,{children:o}),c[10]=o,c[11]=l):l=c[11],l});try{lq.displayName||(lq.displayName="SystemPromptDialog")}catch{}function lW(){let e,t,n,a,r,i,s=(0,p.c)(19),o=(0,H.b)(),{traceInfo:l}=(0,q.Pk)(),[c,d]=(0,nx.iI)("getTracingRequestedFlag","setTracingRequestedFlag");e=eE.W.requestTracing&&(0,lw.X)();let u=!!(l?.roots&&l.roots.size>0),h=!!l?.visible;s[0]!==h||s[1]!==o?(t=()=>{o.showTraceDisplay(!h)},s[0]=h,s[1]=o,s[2]=t):t=s[2];let f=t;s[3]!==d||s[4]!==c?(n=()=>{d(!c)},s[3]=d,s[4]=c,s[5]=n):n=s[5];let g=n;if(!e)return null;let y=h?"Close Trace":"Show Trace",_=h?"primary":"default",x=!u;s[6]!==f||s[7]!==h||s[8]!==y||s[9]!==_||s[10]!==x?(a=(0,m.jsx)(tP.K,{icon:M.QuoteIcon,size:"medium","aria-label":y,"aria-pressed":h,variant:_,onClick:f,disabled:x}),s[6]=f,s[7]=h,s[8]=y,s[9]=_,s[10]=x,s[11]=a):a=s[11];let v=c?"primary":"default";return s[12]!==g||s[13]!==v||s[14]!==c?(r=(0,m.jsx)(tP.K,{icon:M.BugIcon,size:"medium","aria-label":"Request Trace","aria-pressed":c,variant:v,onClick:g}),s[12]=g,s[13]=v,s[14]=c,s[15]=r):r=s[15],s[16]!==a||s[17]!==r?(i=(0,m.jsxs)(m.Fragment,{children:[a,r]}),s[16]=a,s[17]=r,s[18]=i):i=s[18],i}try{lW.displayName||(lW.displayName="TraceButton")}catch{}function lG(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,y,v,b,S,C,j,N,w,I,E,T,k,R,A,L,D,P,O,B,F,U,V,W,G,z,Q=(0,p.c)(79),{showPreviewPaneButton:K,conversationSpecificItems:Y,customButtons:X}=e,Z=void 0===K||K,ee=(0,H.b)(),et=(0,q.Pk)(),{repoCustomInstructionsEnabled:en,selectedThreadID:ea,threads:er,messagesLoading:ei,currentReferences:es}=et,eo=(0,q.pn)(lK);Q[0]!==eo?(t=(0,eI.CB)(eo),Q[0]=eo,Q[1]=t):t=Q[1];let el=t,ec=oG(),ed=(0,oq.G)(),eu=(0,nv.JB)(et.customCopilots,ed),{updateGlobalNavigationBreadcrumbs:em}=l$();Q[2]!==em?(n=()=>{em()},Q[2]=em,Q[3]=n):n=Q[3],Q[4]!==ed||Q[5]!==em?(a=[em,ed],Q[4]=ed,Q[5]=em,Q[6]=a):a=Q[6],(0,x.useEffect)(n,a);let ep=(0,x.useRef)(null),eh=(0,x.useRef)(null);Q[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,lw.X)(),Q[7]=i):i=Q[7],r=i,Q[8]===Symbol.for("react.memo_cache_sentinel")?(s=(0,J.G7)("copilot_staff_prompt_dialog")&&r,Q[8]=s):s=Q[8];let ef=s,[eg,ey]=(0,x.useState)(!1),[e_,ex]=(0,x.useState)(!1),ev=(0,x.useRef)(null),eb=!!nx.Jt.settings?.instructionPrompt,{isLicensedLimited:eC}=(0,ny.xR)(),ej=(0,x.useRef)(null),[eN,ew]=(0,x.useState)(null),eE=(0,eI.NJ)(es).length>0,[eT,ek,eR]=(0,lI.B)(!1),{canShareThread:eA}=(0,$.X)(),eL="loaded"===ei.state,[eD,eP]=(0,x.useState)(!1),eM=eA&&!ec&&ea&&!ed&&eL,eO=(0,nv.mM)(),eB=!!(ed||eO);return eu?eo?(0,g.D)(`${el} \xb7 ${eu.name} \xb7 GitHub Copilot Spaces`):(0,g.D)(`${eu.name} \xb7 GitHub Copilot Spaces`):eO?(0,g.D)("Spaces \xb7 GitHub Copilot"):ec?(0,g.D)("Shared conversation \xb7 GitHub Copilot"):(0,g.D)(`${el} \xb7 GitHub Copilot`),Q[9]!==eM?(o=eM&&(0,m.jsx)(lO,{}),Q[9]=eM,Q[10]=o):o=Q[10],Q[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(lW,{}),Q[11]=l):l=Q[11],Q[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,_.$)(eb&&lF.editedPromptIndicator),Q[12]=c):c=Q[12],Q[13]!==eT?(d=(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(tP.K,{icon:M.KebabHorizontalIcon,"aria-label":"Menu",onClick:lQ,className:c,loading:eT})}),Q[13]=eT,Q[14]=d):d=Q[14],Q[15]!==ec||Q[16]!==ed||Q[17]!==ea||Q[18]!==er?(u=ea&&!ec&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(tM.l.Group,{children:[(0,m.jsx)(tM.l.GroupHeading,{children:"Conversation"}),(0,m.jsx)(lb.V,{onOpenDialog:ew,isShared:!!er.get(ea)?.sharedID,showShare:!ed,hideShareOnDesktop:!0})]}),(0,m.jsx)(tM.l.Divider,{})]}),Q[15]=ec,Q[16]=ed,Q[17]=ea,Q[18]=er,Q[19]=u):u=Q[19],Q[20]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.jsx)(tM.l.GroupHeading,{children:"Prompt"}),Q[20]=h):h=Q[20],Q[21]!==ee||Q[22]!==en||Q[23]!==eE?(f=eE&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>{ee.toggleRepoCustomInstructions(!en)},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.RepoIcon,{})}),en?"Disable custom instructions":"Enable custom instructions"]}),Q[21]=ee,Q[22]=en,Q[23]=eE,Q[24]=f):f=Q[24],Q[25]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{ex(!0),(0,tn.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},Q[25]=y):y=Q[25],Q[26]===Symbol.for("react.memo_cache_sentinel")?(v=(0,m.jsxs)(tM.l.Item,{onSelect:y,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.NoteIcon,{})}),"Personal instructions"]}),Q[26]=v):v=Q[26],Q[27]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{eh.current?.openDialog(),(0,tn.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SYSTEM_PROMPT",mode:"immersive"})},Q[27]=b):b=Q[27],Q[28]===Symbol.for("react.memo_cache_sentinel")?(S=(0,m.jsxs)(tM.l.Item,{onSelect:b,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.CpuIcon,{})}),"System prompt"]}),C=ef&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>ey(!0),children:[(0,m.jsx)(tM.l.LeadingVisual,{children:eb?(0,m.jsx)("span",{className:(0,_.$)(lF.editedPromptIndicator,lF.leadingVisual),children:(0,m.jsx)(M.BeakerIcon,{})}):(0,m.jsx)(M.BeakerIcon,{})}),"Edit prompt",(0,m.jsx)(tM.l.TrailingVisual,{children:(0,m.jsx)(eS.A,{variant:"attention",children:"Staff"})})]}),Q[28]=S,Q[29]=C):(S=Q[28],C=Q[29]),Q[30]!==f?(j=(0,m.jsxs)(tM.l.Group,{children:[h,f,v,S,C]}),Q[30]=f,Q[31]=j):j=Q[31],Q[32]===Symbol.for("react.memo_cache_sentinel")?(N=(0,m.jsx)(tM.l.Divider,{}),Q[32]=N):N=Q[32],Q[33]!==eB?(w=!eB&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>{eP(!0)},children:["Manage shared conversations",(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.ListUnorderedIcon,{})})]}),Q[33]=eB,Q[34]=w):w=Q[34],Q[35]===Symbol.for("react.memo_cache_sentinel")?(I=()=>{ep.current?.openDialog(),(0,tn.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},Q[35]=I):I=Q[35],Q[36]===Symbol.for("react.memo_cache_sentinel")?(E=(0,m.jsxs)(tM.l.Item,{onSelect:I,children:["Give feedback",(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.CommentIcon,{})})]}),Q[36]=E):E=Q[36],Q[37]!==eC?(T=eC&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(tM.l.LinkItem,{href:"/github-copilot/signup/copilot_individual",onClick:lz,children:["Upgrade to Pro",(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.CopilotIcon,{})})]})}),Q[37]=eC,Q[38]=T):T=Q[38],Q[39]===Symbol.for("react.memo_cache_sentinel")?(k=(0,m.jsxs)(tM.l.LinkItem,{href:"/settings/copilot",onClick:lH,children:["Settings",(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.GearIcon,{})})]}),Q[39]=k):k=Q[39],Q[40]!==w||Q[41]!==T?(R=(0,m.jsxs)(tM.l.Group,{children:[w,E,T,k]}),Q[40]=w,Q[41]=T,Q[42]=R):R=Q[42],Q[43]===Symbol.for("react.memo_cache_sentinel")?(A=(0,m.jsx)(lC.k,{}),Q[43]=A):A=Q[43],Q[44]!==Y||Q[45]!==u||Q[46]!==j||Q[47]!==R?(L=(0,m.jsx)(tD.W.Overlay,{width:"small",children:(0,m.jsxs)(tM.l,{children:[Y,u,j,N,R,A]})}),Q[44]=Y,Q[45]=u,Q[46]=j,Q[47]=R,Q[48]=L):L=Q[48],Q[49]!==d||Q[50]!==L?(D=(0,m.jsxs)(tD.W,{anchorRef:ej,children:[d,L]}),Q[49]=d,Q[50]=L,Q[51]=D):D=Q[51],Q[52]!==Z?(P=Z&&(0,m.jsx)(lJ,{}),Q[52]=Z,Q[53]=P):P=Q[53],Q[54]===Symbol.for("react.memo_cache_sentinel")?(O=(0,m.jsx)(lq,{ref:eh}),B=(0,m.jsx)(tL.l,{ref:ep,mode:"immersive",returnFocusRef:ej}),Q[54]=O,Q[55]=B):(O=Q[54],B=Q[55]),Q[56]!==eN||Q[57]!==ea||Q[58]!==ek||Q[59]!==eR||Q[60]!==el?(F=ea&&(0,m.jsx)(lb.p,{visibleDialog:eN,onClose:()=>{(0,av.flushSync)(()=>ew(null)),ej.current?.focus()},threadName:el,threadId:ea,selectedThreadId:ea,onStartLoading:ek,onFinishLoading:eR,returnFocusRef:ej}),Q[56]=eN,Q[57]=ea,Q[58]=ek,Q[59]=eR,Q[60]=el,Q[61]=F):F=Q[61],Q[62]!==X||Q[63]!==D||Q[64]!==P||Q[65]!==F||Q[66]!==o?(U=(0,m.jsxs)("div",{className:lF.rightControls,children:[o,l,X,D,P,O,B,F]}),Q[62]=X,Q[63]=D,Q[64]=P,Q[65]=F,Q[66]=o,Q[67]=U):U=Q[67],Q[68]!==eg?(V=eg&&(0,m.jsx)(lN.X,{promptDialogRef:ev,onDismiss:()=>ey(!1)}),Q[68]=eg,Q[69]=V):V=Q[69],Q[70]!==e_?(W=e_&&(0,m.jsx)(lj.Y,{onDismiss:()=>ex(!1),returnFocusRef:ej}),Q[70]=e_,Q[71]=W):W=Q[71],Q[72]!==eD?(G=eD&&(0,m.jsx)(lS.b,{closeDialog:()=>{eP(!1)}}),Q[72]=eD,Q[73]=G):G=Q[73],Q[74]!==U||Q[75]!==V||Q[76]!==W||Q[77]!==G?(z=(0,m.jsxs)("div",{className:lF.header,children:[U,V,W,G]}),Q[74]=U,Q[75]=V,Q[76]=W,Q[77]=G,Q[78]=z):z=Q[78],z}function lH(){return(0,tn.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function lz(){return(0,tn.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_UPGRADE_PRO",mode:"immersive"})}function lQ(){return(0,tn.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}function lK(e){return(0,aE.W)(e)}function lJ(){let e,t=(0,p.c)(4),n=(0,nu.tZ)(),{openPreviewPane:a}=(0,nu.xx)(),r=na();return t[0]!==r||t[1]!==a||t[2]!==n?(e=!n&&(0,m.jsx)(tP.K,{icon:M.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),a()},ref:r}),t[0]=r,t[1]=a,t[2]=n,t[3]=e):e=t[3],e}try{lG.displayName||(lG.displayName="Header")}catch{}try{lJ.displayName||(lJ.displayName="PreviewPaneButton")}catch{}var lY=n(63262),lX=n(7104),lZ=n(87419),l0=n(88392),l1=n(88431),l2=n(59524),l3=n(32744),l4=n(82178),l5=n(94517),l6=n(34363),l7=n(11633),l8=n(31958),l9=n(42983),ce=n(95896),ct=n(82151),cn=n(45244),ca=n(52940),cr=n(42511),ci=n(72206),cs=n(31223),co=n(55009);let cl={imageAttachment:"ChatImageAttachment-module__imageAttachment--Kt80m"},cc=e=>{let t,n,a,r,i=(0,p.c)(18),{messageId:s,src:o,alt:l,name:c,mode:d,squareView:u}=e,{openPreviewPane:h,openItem:f,updateItem:g}=(0,nu.xx)(),y=`image:${o}`;i[0]!==y||i[1]!==f||i[2]!==h?(t=e=>{e.metaKey||e.ctrlKey||((0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),f(y),h(),e.preventDefault())},i[0]=y,i[1]=f,i[2]=h,i[3]=t):t=i[3];let _=t;return i[4]!==l||i[5]!==y||i[6]!==s||i[7]!==c||i[8]!==o||i[9]!==g?(n=()=>{g({altText:l,id:y,messageId:s,name:c,type:"image",url:o})},a=[y,l,s,c,o,g],i[4]=l,i[5]=y,i[6]=s,i[7]=c,i[8]=o,i[9]=g,i[10]=n,i[11]=a):(n=i[10],a=i[11]),(0,x.useEffect)(n,a),i[12]!==l||i[13]!==d||i[14]!==_||i[15]!==u||i[16]!==o?(r=(0,m.jsx)("div",{className:cl.imageAttachment,children:(0,m.jsx)(co.o,{src:o,alt:l,onClick:_,mode:d,useOverlay:!0,squareView:u})}),i[12]=l,i[13]=d,i[14]=_,i[15]=u,i[16]=o,i[17]=r):r=i[17],r},cd=(0,x.memo)(cc);try{cc.displayName||(cc.displayName="ChatImageAttachmentUnmemoized")}catch{}try{cd.displayName||(cd.displayName="ChatImageAttachment")}catch{}let cu={chatMessage:"ChatMessage-module__chatMessage--mrG0f",user:"ChatMessage-module__user--D7H_T",editing:"ChatMessage-module__editing--yOYer",content:"ChatMessage-module__content--sWQll",imageGrid:"ChatMessage-module__imageGrid--yEdjI",imageRow:"ChatMessage-module__imageRow--NNiyM",references:"ChatMessage-module__references--Pi5OH",messageArea:"ChatMessage-module__messageArea--gxJTG",userMessage:"ChatMessage-module__userMessage--K0oH6",messageSubthreadIndicator:"ChatMessage-module__messageSubthreadIndicator--fjOXe",actions:"ChatMessage-module__actions--CS2_w",ai:"ChatMessage-module__ai--l6YpD",latest:"ChatMessage-module__latest--AGxtS",actionsPlaceholder:"ChatMessage-module__actionsPlaceholder--gN7Zq",avatar:"ChatMessage-module__avatar--hKTWx",sharedThreadActions:"ChatMessage-module__sharedThreadActions--j7Y3f ChatMessage-module__actions--CS2_w",skillExecutionText:"ChatMessage-module__skillExecutionText--Jbpi1",errorFallback:"ChatMessage-module__errorFallback--h1kRS"},cm={container:"ChatPagingComponent-module__container--HQpDa",disabledButton:"ChatPagingComponent-module__disabledButton--qwjg3",pageIndicator:"ChatPagingComponent-module__pageIndicator--hEqlR"};function cp(e){let t,n,a,r,i,s,o=(0,p.c)(23),{currentPage:l,totalPages:c,onPrev:d,onNext:u,isUserMessage:h}=e,f=(0,q.A3)("isWaitingOnCopilot");if(l<1)throw Error("currentPage must be greater than or equal to 1");if(c<1)throw Error("totalPages must be greater than or equal to 1");if(l>c)throw Error("currentPage must be less than or equal to totalPages");let g=1===l||f,y=l===c||f,_=g?cm.disabledButton:"",x=y?cm.disabledButton:"";o[0]!==l||o[1]!==h||o[2]!==d||o[3]!==g?(t=()=>{if(g)return;let e=h?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE";(0,tn.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),d(l-1)},o[0]=l,o[1]=h,o[2]=d,o[3]=g,o[4]=t):t=o[4];let v=t;o[5]!==l||o[6]!==h||o[7]!==y||o[8]!==u?(n=()=>{if(y)return;let e=h?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE";(0,tn.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),u(l+1)},o[5]=l,o[6]=h,o[7]=y,o[8]=u,o[9]=n):n=o[9];let b=n;return o[10]!==v||o[11]!==_?(a=(0,m.jsx)(tP.K,{variant:"invisible","aria-label":"Previous response",onClick:v,icon:M.ChevronLeftIcon,className:_}),o[10]=v,o[11]=_,o[12]=a):a=o[12],o[13]!==l||o[14]!==c?(r=(0,m.jsxs)("span",{className:cm.pageIndicator,children:[l,"/",c]}),o[13]=l,o[14]=c,o[15]=r):r=o[15],o[16]!==b||o[17]!==x?(i=(0,m.jsx)(tP.K,{variant:"invisible","aria-label":"Next response",onClick:b,icon:M.ChevronRightIcon,className:x}),o[16]=b,o[17]=x,o[18]=i):i=o[18],o[19]!==a||o[20]!==r||o[21]!==i?(s=(0,m.jsxs)("div",{className:cm.container,"data-testid":"chat-paging-component",children:[a,r,i]}),o[19]=a,o[20]=r,o[21]=i,o[22]=s):s=o[22],s}try{cp.displayName||(cp.displayName="ChatPagingComponent")}catch{}let ch={container:"ClientConfirmations-module__container--rZT37",text:"ClientConfirmations-module__text--KBSlX"};function cf(e){let t,n,a,r=(0,p.c)(5),{authorName:i,clientConfirmations:s}=e,o=s?.[0],l=o?.state;return i=o?.userLogin||i,r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,_.$)("my-1",ch.container),r[0]=t):t=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(M.CheckIcon,{}),r[1]=n):n=r[1],r[2]!==i||r[3]!==l?(a=(0,m.jsx)("div",{className:t,children:(0,m.jsxs)("span",{className:ch.text,children:[n," ",i," ",l," the action"]})}),r[2]=i,r[3]=l,r[4]=a):a=r[4],a}try{cf.displayName||(cf.displayName="ClientConfirmations")}catch{}let cg={container:"UserMessageEdit-module__container--wVL0b",input:"UserMessageEdit-module__input--cgkv0",inputContainer:"UserMessageEdit-module__inputContainer--iXdUm",actions:"UserMessageEdit-module__actions--GxMb3"},cy=e=>{let t,n,a,r,i,s,o,l,c,d,u,h,f,g=(0,p.c)(25),{messageContent:y,onSubmit:_,onCancel:v}=e,b=(0,q.A3)("isWaitingOnCopilot"),[S,C]=(0,x.useState)(y),j=(0,x.useRef)(null);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{j.current&&(j.current.style.height="auto",j.current.style.height=`${j.current.scrollHeight}px`)},g[0]=t):t=g[0],g[1]!==S?(n=[S],g[1]=S,g[2]=n):n=g[2],(0,x.useEffect)(t,n),g[3]!==S||g[4]!==_?(a=()=>{(0,tn.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"}),_(S)},g[3]=S,g[4]=_,g[5]=a):a=g[5];let N=a;g[6]!==y||g[7]!==v?(r=()=>{v(),C(y),(0,tn.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})},g[6]=y,g[7]=v,g[8]=r):r=g[8];let w=r,I=b?void 0:N;return g[9]!==w||g[10]!==I?(i={"copilot-chat:send-message":I,"github:cancel":w},g[9]=w,g[10]=I,g[11]=i):i=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(s=(0,nF.G)("user-message-edit-box"),g[12]=s):s=g[12],g[13]===Symbol.for("react.memo_cache_sentinel")?(o=e=>C(e.target.value),g[13]=o):o=g[13],g[14]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{j.current&&(j.current.style.height="auto",j.current.style.height=`${j.current.scrollHeight}px`)},g[14]=l):l=g[14],g[15]!==S?(c=(0,m.jsx)("div",{className:cg.inputContainer,children:(0,m.jsx)("textarea",{ref:j,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,placeholder:"Ask Copilot",value:S,onChange:o,className:cg.input,autoFocus:!0,onInput:l,onFocus:c_})}),g[15]=S,g[16]=c):c=g[16],g[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(nQ.cQ,{commandId:"github:cancel",children:"Cancel"}),g[17]=d):d=g[17],g[18]===Symbol.for("react.memo_cache_sentinel")?(u=(0,nF.G)("user-message-edit-submit"),g[18]=u):u=g[18],g[19]!==b?(h=(0,m.jsxs)("div",{className:cg.actions,children:[d,(0,m.jsx)(nQ.cQ,{commandId:"copilot-chat:send-message",showKeybindingHint:!0,variant:"primary",...u,disabled:b,children:"Send"})]}),g[19]=b,g[20]=h):h=g[20],g[21]!==c||g[22]!==h||g[23]!==i?(f=(0,m.jsxs)(nQ.tL,{commands:i,className:cg.container,...s,children:[c,h]}),g[21]=c,g[22]=h,g[23]=i,g[24]=f):f=g[24],f};try{cy.displayName||(cy.displayName="UserMessageEdit")}catch{}function c_(e){return e.target.setSelectionRange(0,e.target.value.length)}let cx=({excludeFeedback:e,inputRef:t,isLatestMessage:n,isLatestUserMessage:a,isFirstReply:r,isStreaming:i,parentMessage:s,messageIndex:o,autoOpenPreviewPane:l,...c})=>{let{message:d}=(0,eM.V)(),u=(0,x.useMemo)(()=>(0,eI.H2)(d.references??[]),[d.references]),p=(0,H.b)(),h=(0,q.bP)("customCopilots","editingMessage","mode","wrapCodeLines"),f=(0,ci.tD)(),{items:g,versionedItems:y,openItem:v,removeItems:b,getOpenItems:S,openItemsBeforeSubthreadChange:C,setOpenItemsBeforeSubthreadChange:j,enableLoadingState:N,disableLoadingState:w}=(0,nu.xx)(),I=nC({messageIndex:o,messageId:d.id,messageTimestamp:d.createdAt}),E=(0,x.useCallback)(()=>{let e=f(),t=[],n=d;for(;null!=n;)t.push(n.id),n=void 0!==n.selectedChildIndex?e.messages[n.selectedChildIndex]:void 0;let a=new Map;for(let[e,t]of g){let n=a.get(t.messageId)||[];n.push(e),a.set(t.messageId,n)}let r=[];for(let e of t){let t=a.get(e);if(t)for(let e of t)r.push(e)}for(let[e,t]of g)t.messageId===aI.Wp&&r.push(e);let i=S();j([...i]),r.some(e=>i.includes(e))&&N(),b(r)},[g,N,f,d,S,b,j]),{author:T,handleConfirmationAction:k,handleRetryErrorMessage:R,handleRetryCopilotResponse:A,handleEditUserMessage:L,hasClientConfirmations:D,isAgentError:P,isAI:O,isCopilot:B,isError:F,isInterrupted:U,isUser:$,myRef:V,rendererConfig:W,renderFeedback:G,shouldShowMessageActions:z,skillExecutionToUseForRespondingText:Q,showRetryButton:K}=(0,ca.p)({excludeFeedback:e,inputRef:t,isLatestMessage:n,isStreaming:i,removeOutdatedContentPreviewItems:E}),J=oG(),Y=h.editingMessage===d.id,X=i&&!F&&!d.confirmations&&!z&&n&&(!e||O),Z=(s?.childMessageIndexes?.findIndex(e=>e===o)||0)+1||1,ee=s?.childMessageIndexes?.length||1,et=ee>=cr.L9,en=p.maxMessagesReached(),ea=ee>1,er=(0,x.useMemo)(()=>d.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[d.mediaContent]),ei=(0,x.useMemo)(()=>!!er?.length,[er]),es=z&&J&&(B||ea),eo=(0,x.useRef)(null),el=(0,cs.M)(e=>{let t=y.get((0,nS.oy)(e))?.at(-1);t&&v(t,!1)});(0,x.useEffect)(()=>{if(d.error?.type!=="publicCode")return;let e=[];for(let[t,n]of g)(n.messageId===d.id||n.messageId===eo.current)&&e.push(t);e.length>0&&b(e)},[d.error?.type,d.id,g,b]),(0,x.useEffect)(()=>{if(eo.current!==d.id&&n&&C.length>0){let e=setTimeout(()=>{for(let e of C)el.current(e);w(),j([])});return()=>clearTimeout(e)}eo.current=d.id},[w,d.id,C,n,j,el]);let ec=(0,x.useCallback)(()=>{let{messages:e}=f(),t=Z-1;p.setSelectedMessage(e[s.childMessageIndexes[t-1]]),E()},[Z,p,s,E,f]),ed=(0,x.useCallback)(()=>{let{messages:e}=f(),t=Z-1;p.setSelectedMessage(e[s.childMessageIndexes[t+1]]),E()},[Z,p,s,E,f]),eu=(0,oJ.G)(),{model:em,availableModels:ep}=(0,q.bP)("model","availableModels"),eh=em;d.model&&(eh=(ep??[eh]).find(e=>e.id===d.model)||eh);let ef=()=>p.startEditingMessage(d.id),eg=(0,oq.G)(),ey=!!(0,nv.JB)(h.customCopilots,eg),{selectedThreadID:e_}=(0,q.bP)("selectedThreadID"),{variant:ex}=l_(eg,e_),ev=ex===lg.customCopilotSizeExceeded,eb=et||en||!!eg&&!ey||ev,eS=B&&i&&n&&!d.content,eC=(0,x.useCallback)(e=>{p.setWrapCodeLines(e)},[p]),ej=i?rZ:r0;return(0,m.jsxs)("div",{className:(0,_.$)("message-container",cu.chatMessage,$&&cu.user,O&&cu.ai,Y?cu.editing:"",n&&cu.latest),ref:V,...(0,nF.G)(`message-${F?"error":i?"streaming":d.id}`),children:[O?(0,m.jsx)(l4.W,{isLoading:i&&n,isLoadingSkills:(d.skillExecutions??[]).length>0&&i&&""===d.content&&n,isError:F&&d.error?.type!=="agentUnauthorized",className:cu.avatar,mode:h.mode,isFirstMessage:r,message:d.content||"",createdAt:d.createdAt}):null,$&&ei&&(0,m.jsx)("div",{className:er?.length===4?cu.imageGrid:cu.imageRow,children:er?.map(e=>(0,m.jsx)(cd,{name:e?.name||"Uploaded image",messageId:d.id,src:e?.url||"",alt:`Uploaded image${e?.name?`: ${e.name}`:""}`,mode:h.mode,squareView:er?.length>=2},e?.url||""))}),$&&d.references&&d.references.length>0&&(0,m.jsx)(a$,{className:cu.references,messageId:d.id,messageTimestamp:d.createdAt,messageIndex:o,references:d.references,size:"medium"}),!Y&&(0,m.jsx)("div",{className:cu.content,children:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:(0,_.$)("js-snippet-clipboard-copy-unpositioned",cu.messageArea),children:[D?(0,m.jsx)(cf,{authorName:T.name,clientConfirmations:d.clientConfirmations??[]}):$?(0,m.jsx)(ct.R,{accessibleHeader:(0,eI.hV)("You",d.content??""),className:cu.userMessage}):(0,m.jsxs)(m.Fragment,{children:[eS&&(0,m.jsx)(cn.b,{className:(0,_.$)(cu.skillExecutionText,"mb-2"),children:`${(0,l7.WA)(Q)}...`}),d.references&&d.references.length>0&&d.content&&(0,m.jsx)(aU.s,{className:"mb-2",references:d.references,isImmersive:!0,onClick:(e,t)=>{"draft-issue"===e.type&&I(e,t)}}),"assistant"===d.role&&(u.length?(0,m.jsx)(l2.Q,{mcpToolResults:u}):null),!D&&d.content&&(0,m.jsx)(cv,{children:(0,m.jsx)(ej,{autoOpenPreviewPane:l,markdown:d.content,messageId:d.id,messageIndex:o,messageTimestamp:d.createdAt,accessibleHeader:(0,eI.hV)("Copilot",d.content??""),copilotAnnotations:d.copilotAnnotations,wrapCodeLines:h.wrapCodeLines,onWrapCodeLinesChange:eC,...W})}),F?(0,m.jsx)(l5.K,{manager:p}):null,P&&d.agentErrors&&(0,m.jsx)(l5.h,{errors:d.agentErrors}),U?(0,m.jsx)(l8.h,{messageHasContent:!!d.content||!!d.skillExecutions?.length}):null,O&&!eS&&(0,eI.Ye)(d.confirmations).map((e,t)=>"indexrepo"===e.confirmation.name?null:(0,m.jsx)(l3.m,{confirmation:e,handleConfirmation:k,isLatestMessage:n},t))]}),ea&&!n&&(0,m.jsxs)("div",{className:cu.messageSubthreadIndicator,"data-testid":"chat-paging-indicator",children:[Z,"/",ee]})]}),X&&(0,m.jsx)("div",{className:cu.actionsPlaceholder}),!z&&K&&(0,m.jsx)(l9.$,{handleRetryMessage:R,disabled:eb}),z&&!J&&(0,m.jsxs)(ce.M,{"aria-label":"Message tools",className:cu.actions,"data-testid":"nonshared-toolbar",children:[$&&(a?(0,m.jsx)(nQ.N5,{commandId:"copilot-chat:edit-last-message",variant:"invisible","aria-label":"Edit message",onClick:ef,icon:M.PencilIcon,disabled:eb,...(0,nF.G)("edit-message-button")}):(0,m.jsx)(tP.K,{variant:"invisible","aria-label":"Edit message",onClick:ef,icon:M.PencilIcon,disabled:eb,...(0,nF.G)("edit-message-button")})),B&&(0,m.jsxs)(m.Fragment,{children:[G&&(0,m.jsx)(l6.G,{iconSize:"medium"}),!!d.content&&!i&&(0,m.jsx)(sn.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,tn.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),K&&F?(0,m.jsx)(l9.$,{handleRetryMessage:R,disabled:eb}):O&&!F&&!d.clientSide&&(0,m.jsx)(l9.$,{handleRetryMessage:A,disabled:eb,showModelPicker:!!ep&&ep.length>1,model:eh,navigateToNewThread:eu}),ea&&(0,m.jsx)(cp,{currentPage:Z,totalPages:ee,onPrev:ec,onNext:ed,isUserMessage:$})]}),es&&(0,m.jsxs)(ce.M,{"aria-label":"Message tools",className:cu.sharedThreadActions,"data-testid":"shared-toolbar",children:[B&&(0,m.jsx)(m.Fragment,{children:!!d.content&&!i&&(0,m.jsx)(sn.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,tn.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})}),ea&&(0,m.jsx)(cp,{currentPage:Z,totalPages:ee,onPrev:ec,onNext:ed,isUserMessage:$})]})]})}),Y&&(0,m.jsx)(cy,{messageContent:d.content||"",onSubmit:L,onCancel:()=>p.cancelEditingMessage()})]})},cv=e=>{let t,n,a=(0,p.c)(3),{children:r}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(Q.l,{className:cu.errorFallback,variant:"warning",title:"Message cannot be displayed",description:"An unknown error occurred while attempting to display this message."}),a[0]=t):t=a[0],a[1]!==r?(n=(0,m.jsx)(nw.t,{fallback:t,children:r}),a[1]=r,a[2]=n):n=a[2],n},cb=e=>{let t,n,a,r,i,s,o,l,c=(0,p.c)(23);c[0]!==e?({message:a,messageIndex:r,isSharedMessage:n,isLatestMessage:t,...i}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=a,c[4]=r,c[5]=i):(t=c[1],n=c[2],a=c[3],r=c[4],i=c[5]);let d=oG();return c[6]!==t||c[7]!==n||c[8]!==d||c[9]!==a||c[10]!==r||c[11]!==i?(s=!r3(a)&&(0,m.jsx)(cx,{...i,messageIndex:r,isSharedMessage:n,isLatestMessage:t,isViewingSharedThread:d}),c[6]=t,c[7]=n,c[8]=d,c[9]=a,c[10]=r,c[11]=i,c[12]=s):s=c[12],c[13]!==t||c[14]!==n||c[15]!==d||c[16]!==a||c[17]!==r?(o=(0,m.jsx)(r4,{message:a,messageIndex:r,isViewingSharedThread:d,isSharedMessage:n,isLatestMessage:t}),c[13]=t,c[14]=n,c[15]=d,c[16]=a,c[17]=r,c[18]=o):o=c[18],c[19]!==a||c[20]!==s||c[21]!==o?(l=(0,m.jsxs)(eM.$,{message:a,children:[s,o]}),c[19]=a,c[20]=s,c[21]=o,c[22]=l):l=c[22],l},cS=(0,x.memo)(cb),cC=e=>{let t,n,a=(0,p.c)(7),{message:r}=e,i=(0,q.Pk)();a[0]!==r||a[1]!==i.messages?(t=(0,am.CX)(i.messages,r),a[0]=r,a[1]=i.messages,a[2]=t):t=a[2];let s=t,o="user"===r.role&&i.messages.findLast(cN)?.id===r.id;return a[3]!==o||a[4]!==s||a[5]!==e?(n=(0,m.jsx)(cS,{...e,parentMessage:s,isLatestUserMessage:o}),a[3]=o,a[4]=s,a[5]=e,a[6]=n):n=a[6],n},cj=e=>{let t,n=(0,p.c)(2);return n[0]!==e?(t=(0,m.jsx)(cv,{children:(0,m.jsx)(cC,{...e})}),n[0]=e,n[1]=t):t=n[1],t};try{cx.displayName||(cx.displayName="InnerChatMessage")}catch{}try{cv.displayName||(cv.displayName="MessageErrorBoundary")}catch{}try{cb.displayName||(cb.displayName="ChatMessageUnmemoized")}catch{}try{cS.displayName||(cS.displayName="ChatMessageMemoized")}catch{}try{cC.displayName||(cC.displayName="ChatMessageWrapped")}catch{}try{cj.displayName||(cj.displayName="ChatMessage")}catch{}function cN(e){return"user"===e.role}var cw=n(81945);let cI={ConversationLoader:"ConversationLoader-module__ConversationLoader--kdZTM",ConversationLoader__assistantGroup:"ConversationLoader-module__ConversationLoader__assistantGroup--sA3MD",ConversationLoader__userGroup:"ConversationLoader-module__ConversationLoader__userGroup--sBc4O",ConversationLoader__assistantAvatar:"ConversationLoader-module__ConversationLoader__assistantAvatar--Bt7IA",assistantAvatarSkeleton:"ConversationLoader-module__assistantAvatarSkeleton--f2f7n"};function cE(){let e,t,n=(0,p.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:cI.ConversationLoader__userGroup,children:(0,m.jsx)(cw.O,{variant:"rounded",height:"20px",width:"random"})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsxs)("div",{className:cI.ConversationLoader,"data-testid":"conversation-loader",children:[e,(0,m.jsxs)("div",{className:cI.ConversationLoader__assistantGroup,children:[(0,m.jsx)(cw.O,{className:(0,_.$)(cI.ConversationLoader__assistantAvatar,cI.assistantAvatarSkeleton),variant:"elliptical"}),Array.from({length:Math.floor(4*Math.random())+2}).map(cT)]})]}),n[1]=t):t=n[1],t}function cT(e,t){return(0,m.jsx)(cw.O,{variant:"rounded",height:"20px",width:"random"},t)}try{cE.displayName||(cE.displayName="ConversationLoader")}catch{}let ck={container:"ErrorState-module__container--FoMc5",icon:"ErrorState-module__icon--ykhTC",description:"ErrorState-module__description--zsnez",sso:"ErrorState-module__sso--Q4Ig1"};function cR(e){let t,n,a,r,i,s=(0,p.c)(11),{title:o,description:l,ssoOrgs:c}=e,d=c&&c.length>0&&!(0,J.G7)("global_sso_banner");return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(nA.E.Visual,{children:(0,m.jsx)(M.AlertIcon,{size:"medium",className:ck.icon})}),s[1]=n):n=s[1],s[2]!==o?(a=(0,m.jsx)(nA.E.Heading,{as:"h2",children:o}),s[2]=o,s[3]=a):a=s[3],s[4]!==l||s[5]!==d||s[6]!==c?(r=(void 0!==l||d)&&(0,m.jsxs)("div",{className:ck.description,children:[(0,m.jsx)(nA.E.Description,{children:(0,m.jsx)("span",{children:l})}),(0,m.jsx)("div",{className:ck.sso,children:d&&(0,m.jsx)(W.x,{protectedOrgs:c})})]}),s[4]=l,s[5]=d,s[6]=c,s[7]=r):r=s[7],s[8]!==a||s[9]!==r?(i=(0,m.jsxs)("div",{className:ck.container,children:[t,(0,m.jsxs)(nA.E,{border:!1,children:[n,a,r]})]}),s[8]=a,s[9]=r,s[10]=i):i=s[10],i}function cA(e){let t,n,a,r,i,s,o,l=(0,p.c)(9),{mode:c}=e,{helpUrl:d}=(0,$.X)();l[0]!==c?(t=()=>{c&&(0,tn.BI)("dotcom_chat.activate.error",{target:"ERROR_SHARED_THREAD_NO_ACCESS",mode:c,message:"Shared thread no access"})},n=[c],l[0]=c,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,x.useEffect)(t,n),l[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),l[3]=a):a=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(nA.E.Visual,{children:(0,m.jsx)(M.LockIcon,{size:"medium",className:ck.icon})}),i=(0,m.jsx)(nA.E.Heading,{as:"h2",children:"You don't have access to this shared conversation"}),l[4]=r,l[5]=i):(r=l[4],i=l[5]),l[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(nA.E.Description,{children:(0,m.jsx)("span",{children:"To view this shared link, you must have permissions to all resources referenced in the conversation."})}),l[6]=s):s=l[6];let u=`${d}/copilot/using-github-copilot/copilot-chat/asking-github-copilot-questions-in-github#sharing-copilot-chat-conversations`;return l[7]!==u?(o=(0,m.jsxs)("div",{className:ck.container,children:[a,(0,m.jsxs)(nA.E,{border:!1,children:[r,i,(0,m.jsxs)("div",{className:ck.description,children:[s,(0,m.jsx)(nR.A,{inline:!0,href:u,children:"Learn more"})]})]})]}),l[7]=u,l[8]=o):o=l[8],o}try{cR.displayName||(cR.displayName="ErrorState")}catch{}try{cA.displayName||(cA.displayName="SharedThreadForbidden")}catch{}let cL={container:"ImmersiveChat-module__container--h_Pmt",emptyContent:"ImmersiveChat-module__emptyContent--a_vXm",messageContent:"ImmersiveChat-module__messageContent--JE3f_",scrollToBottomButton:"ImmersiveChat-module__scrollToBottomButton--FbWSF",hidden:"ImmersiveChat-module__hidden--b_DNj"},cD=e=>{let t,n,a,r,i,s,o,l,c,d,u,h=(0,p.c)(42),{inputRef:f,isMobile:g}=e,{scrollToBottom:y}=(0,lX.b)(),_=(0,q.Pk)(),{isWaitingOnCopilot:v,messagesLoading:b,streamingMessage:S,messages:C}=_,{reloadQuota:j,premiumChatQuotaRemaining:N,isLicensedLimited:w}=(0,ny.xR)();h[0]!==_?(n=(0,aE.W)(_),t=(0,eI.CB)(n),h[0]=_,h[1]=t,h[2]=n):(t=h[1],n=h[2]);let I=t,E=n?.sharedMessageID,{messages:T,groupedMessages:k}=(0,l0.a)(_);h[3]!==T?(a=T.find(cU)?.id,h[3]=T,h[4]=a):a=h[4];let R=a;h[5]!==y?(r=()=>y("instant"),i=[y],h[5]=y,h[6]=r,h[7]=i):(r=h[6],i=h[7]),(0,l1.N)(r,i);let A=(0,nI.S)(_.streamingMessage);if(h[8]!==w||h[9]!==v||h[10]!==T.length||h[11]!==b.state||h[12]!==N||h[13]!==A||h[14]!==j||h[15]!==S?(s=()=>{T.length>0&&!w&&eE.W.premiumRequestQuotasEnabled&&N<=eI.aX&&!v&&"loaded"===b.state&&A&&!S&&j("quota_low_trigger")},o=[w,v,T.length,b.state,N,A,j,S],h[8]=w,h[9]=v,h[10]=T.length,h[11]=b.state,h[12]=N,h[13]=A,h[14]=j,h[15]=S,h[16]=s,h[17]=o):(s=h[16],o=h[17]),(0,x.useEffect)(s,o),h[18]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("h1",{children:"Copilot Chat"}),h[18]=l):l=h[18],h[19]!==I?(c=(0,m.jsxs)("div",{className:"sr-only",children:[l,(0,m.jsx)("h2",{children:I})]}),h[19]=I,h[20]=c):c=h[20],h[21]!==C||h[22]!==R||h[23]!==k||h[24]!==f||h[25]!==g||h[26]!==v||h[27]!==E||h[28]!==S?.id){let e;h[30]!==C||h[31]!==R||h[32]!==k.length||h[33]!==f||h[34]!==g||h[35]!==v||h[36]!==E||h[37]!==S?.id?(e=(e,t)=>(0,m.jsx)(lY.i,{isLastGroup:t===k.length-1,children:e.map((n,a)=>{let r=-1===n.messageIndex?C.length:n.messageIndex,i=t===k.length-1&&a===e.length-1;return(0,m.jsx)(cj,{isLatestMessage:i,isSharedMessage:n.id===E,isFirstReply:n.id===R,message:n,messageIndex:r,inputRef:f,isStreaming:n.id===S?.id||i&&v,autoOpenPreviewPane:!g},a)})},t),h[30]=C,h[31]=R,h[32]=k.length,h[33]=f,h[34]=g,h[35]=v,h[36]=E,h[37]=S?.id,h[38]=e):e=h[38],d=k.map(e),h[21]=C,h[22]=R,h[23]=k,h[24]=f,h[25]=g,h[26]=v,h[27]=E,h[28]=S?.id,h[29]=d}else d=h[29];return h[39]!==c||h[40]!==d?(u=(0,m.jsxs)("div",{children:[c,d]}),h[39]=c,h[40]=d,h[41]=u):u=h[41],u},cP=()=>{let e,t,n,a=(0,p.c)(4),{mode:r}=(0,q.Pk)();return a[0]!==r?(e=()=>{(0,tn.BI)("dotcom_chat.activate.error",{target:"ERROR_CONVERSATION_FAILED_TO_LOAD",mode:r,message:"Conversation failed to load"})},t=[r],a[0]=r,a[1]=e,a[2]=t):(e=a[1],t=a[2]),(0,x.useEffect)(e,t),a[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(cR,{title:"Conversation failed to load",description:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(nR.A,{href:"",onClick:c$,inline:!0,children:"Reload the page"})," ","to try again."]})}),a[3]=n):n=a[3],n},cM=()=>{let e,t,n,a=(0,p.c)(4),{mode:r}=(0,q.Pk)();return a[0]!==r?(e=()=>{(0,tn.BI)("dotcom_chat.activate.error",{target:"ERROR_ACCESS_DENIED",mode:r,message:"Access denied"})},t=[r],a[0]=r,a[1]=e,a[2]=t):(e=a[1],t=a[2]),(0,x.useEffect)(e,t),a[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(cR,{title:"Access denied",description:"You do not have permission to view this."}),a[3]=n):n=a[3],n},cO=e=>{let t,n,a,r=(0,p.c)(9),{isSharedThread:i}=e,{mode:s}=(0,q.Pk)(),{needsSsoAuthentication:o,ssoOrgNames:l}=oY(),c=(0,oq.G)(),d=i?"Shared conversation not found":"Conversation not found",u=o?`This URL may be incorrect, you may be signed out of your organization or the ${c?"space":"conversation"} may have been deleted.`:"This URL may be incorrect or the conversation may have been deleted.";return r[0]!==i||r[1]!==s||r[2]!==d?(t=()=>{(0,tn.BI)("dotcom_chat.activate.error",{target:i?"ERROR_SHARED_CONVERSATION_NOT_FOUND":"ERROR_CONVERSATION_NOT_FOUND",mode:s,message:d})},n=[s,i,d],r[0]=i,r[1]=s,r[2]=d,r[3]=t,r[4]=n):(t=r[3],n=r[4]),(0,x.useEffect)(t,n),r[5]!==u||r[6]!==l||r[7]!==d?(a=(0,m.jsx)(cR,{title:d,description:u,ssoOrgs:l}),r[5]=u,r[6]=l,r[7]=d,r[8]=a):a=r[8],a},cB=e=>{let t,n,a,r,i,s=(0,p.c)(20),{inputRef:o,isMobile:l}=e,c=(0,q.Pk)(),{messagesLoading:d,threadsLoading:u,messages:h,showTopicPicker:f,pendingFirstMessage:g}=c,y=(0,aE.W)(c),{textAreaRef:_}=(0,lZ.Y)(o),x=oG(),v=null,b=null;if((0,am.B)(h,g).length&&"loaded"===d.state){let e;s[0]!==l||s[1]!==_?(e=(0,m.jsx)(cD,{inputRef:_,isMobile:l}),s[0]=l,s[1]=_,s[2]=e):e=s[2],v=e}else if(("loading"===d.state||"pending"===d.state)&&c.selectedThreadID&&!f){let e;s[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(cE,{}),s[3]=e):e=s[3],v=e}else if("error"===d.state&&c.selectedThreadID&&(null===y||d.notFound))if(x&&c.fetchSharedThreads?.ok===!1&&(403===c.fetchSharedThreads.status||401===c.fetchSharedThreads.status)){let e;s[4]!==c.mode?(e=(0,m.jsx)(cA,{mode:c.mode}),s[4]=c.mode,s[5]=e):e=s[5],b=e}else{let e;s[6]!==x?(e=(0,m.jsx)(cO,{isSharedThread:x}),s[6]=x,s[7]=e):e=s[7],b=e}else if("error"===d.state||"error"===u.state){let e;s[8]!==u.status?(e=403===u.status?(0,m.jsx)(cM,{}):(0,m.jsx)(cP,{}),s[8]=u.status,s[9]=e):e=s[9],b=e}let S=na();return s[10]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(cF,{}),s[10]=t):t=s[10],s[11]!==b?(n=b&&(0,m.jsx)("div",{className:cL.emptyContent,children:b}),s[11]=b,s[12]=n):n=s[12],s[13]!==v?(a=v&&(0,m.jsxs)("div",{className:cL.messageContent,children:[v,(0,m.jsx)(rV.Cb,{})]}),s[13]=v,s[14]=a):a=s[14],s[15]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(rV.zc,{}),s[15]=r):r=s[15],s[16]!==S||s[17]!==n||s[18]!==a?(i=(0,m.jsxs)(lX.$,{className:cL.container,containerRef:S,children:[t,n,a,r]}),s[16]=S,s[17]=n,s[18]=a,s[19]=i):i=s[19],i},cF=()=>{let e,t,n,a=(0,p.c)(7),{isScrolledUp:r,scrollToBottom:i}=(0,lX.b)(),s=!r&&cL.hidden;return a[0]!==s?(e=(0,_.$)(cL.scrollToBottomButton,s),a[0]=s,a[1]=e):e=a[1],a[2]!==i?(t=()=>i("smooth"),a[2]=i,a[3]=t):t=a[3],a[4]!==e||a[5]!==t?(n=(0,m.jsx)(tP.K,{as:"a","aria-label":"Scroll to bottom",className:e,onClick:t,icon:M.ArrowDownIcon,tooltipDirection:"n",href:"#copilot-chat-textarea"}),a[4]=e,a[5]=t,a[6]=n):n=a[6],n};try{cD.displayName||(cD.displayName="Messages")}catch{}try{cP.displayName||(cP.displayName="FailedToLoadThreadError")}catch{}try{cM.displayName||(cM.displayName="AccessDeniedError")}catch{}try{cO.displayName||(cO.displayName="NotFoundError")}catch{}try{cB.displayName||(cB.displayName="ImmersiveChat")}catch{}try{cF.displayName||(cF.displayName="ScrollToBottomButton")}catch{}function cU(e){return"assistant"===e.role}function c$(e){e.preventDefault(),window.location.reload()}var cV=n(91747);let cq=JSON.parse('{"Create issues":{"id":"create-issues-group","name":"Create issue","color":"var(--display-gray-fgColor)","icon":"issue-draft","entries":[{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issues-pong-game","message":"Create a new issue for a Pong game and break it down into multiple subissues.","titleHtml":"Create issues for a Pong game"}]},"Files":{"id":"files-group","name":"Files","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}');var cW=n(65556);function cG(e){let t,n,a,r,i,s=(0,p.c)(12),{className:o}=e,[l,c]=(0,x.useState)(sN.L.Static),[d,u]=(0,x.useState)(!0),{safeSetTimeout:h}=(0,cW.A)();return s[0]!==h?(t=()=>{let e=h(()=>{nx.Jt.getProPlusAnimationFlag()?(c(sN.L.Activate),u(!1)):(c(sN.L.Idle),u(!0))},1e3);return()=>clearTimeout(e)},n=[h],s[0]=h,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,x.useEffect)(t,n),s[3]!==l?(a=()=>{l===sN.L.Activate&&(c(sN.L.Idle),u(!0),nx.Jt.removeProPlusAnimationFlag())},s[3]=l,s[4]=a):a=s[4],s[5]!==l||s[6]!==d||s[7]!==a?(r=(0,m.jsx)(sN.N,{animationType:l,onAnimationEnd:a,loopAnimation:d,size:48}),s[5]=l,s[6]=d,s[7]=a,s[8]=r):r=s[8],s[9]!==o||s[10]!==r?(i=(0,m.jsx)("div",{className:o,children:r}),s[9]=o,s[10]=r,s[11]=i):i=s[11],i}try{cG.displayName||(cG.displayName="CopilotEmptyStateAnimation")}catch{}let cH={container:"StarterPill-module__container--d2dFs",icon:"StarterPill-module__icon--GKvj8",title:"StarterPill-module__title--Nsp36",dropdown:"StarterPill-module__dropdown--NngRn"},cz=x.forwardRef((e,t)=>{let n,a,r,i,s=(0,p.c)(14),{name:o,icon:l,color:c,onClick:d,dropdown:u,open:h}=e;return s[0]!==c||s[1]!==l?(n=tR.I&&(0,m.jsx)("div",{className:cH.icon,children:(0,m.jsx)(tR.I,{icon:l,color:c})}),s[0]=c,s[1]=l,s[2]=n):n=s[2],s[3]!==u?(a=u&&(0,m.jsx)("div",{className:cH.dropdown,children:(0,m.jsx)(M.TriangleDownIcon,{})}),s[3]=u,s[4]=a):a=s[4],s[5]!==o||s[6]!==a?(r=(0,m.jsxs)("div",{className:cH.title,children:[o,a]}),s[5]=o,s[6]=a,s[7]=r):r=s[7],s[8]!==d||s[9]!==h||s[10]!==t||s[11]!==n||s[12]!==r?(i=(0,m.jsxs)("button",{ref:t,className:cH.container,onClick:d,"aria-expanded":h,children:[n,r]}),s[8]=d,s[9]=h,s[10]=t,s[11]=n,s[12]=r,s[13]=i):i=s[13],i});function cQ(){let e,t,n=(0,p.c)(5),a=(0,H.b)(),r=(0,q.Pk)();n[0]!==a||n[1]!==r?(e=()=>{let e=(0,aE.W)(r);a.sendChatMessage({thread:e,content:"First, create a new draft issue. Then ask for additional information to fill out the issue",references:r.currentReferences,topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model}),(0,tn.BI)("dotcom_chat.activate",{target:"STARTER_CUSTOM_CREATE_ISSUE",mode:"immersive"})},n[0]=a,n[1]=r,n[2]=e):e=n[2];let i=e;return n[3]!==i?(t=(0,m.jsx)("li",{children:(0,m.jsx)(cz,{name:"Create issue",icon:"issue-draft",color:"var(--fgColor-muted)",onClick:i})}),n[3]=i,n[4]=t):t=n[4],t}cz.displayName="StarterPill";try{cQ.displayName||(cQ.displayName="CreateIssue")}catch{}let cK={scrollContainer:"NewConversation-module__scrollContainer--pS_a1",container:"NewConversation-module__container--fMmET",banner:"NewConversation-module__banner--binRv",main:"NewConversation-module__main--P10kO",content:"NewConversation-module__content--cXGzS",alignTop:"NewConversation-module__alignTop--iiUdY",innerContainer:"NewConversation-module__innerContainer--u29kY",footer:"NewConversation-module__footer--HIKDz",starters:"NewConversation-module__starters--zi_Nb"};var cJ=n(95280),cY=n(56487),cX=n(60429);let cZ={container:"EditorUpsellBanner-module__container--uh3A5",banner:"EditorUpsellBanner-module__banner--_Z7mQ",title:"EditorUpsellBanner-module__title--CWcJI",description:"EditorUpsellBanner-module__description--LaCyW",actions:"EditorUpsellBanner-module__actions--BLcz6",editorButton:"EditorUpsellBanner-module__editorButton--_UqZv",closeButton:"EditorUpsellBanner-module__closeButton--MQTXP"};function c0(){let e,t,n,a,r,i=(0,p.c)(10),s=(0,q.A3)("isEditorUpsellBannerDismissed"),o=(0,H.b)(),{isLicensedLimited:l}=(0,ny.xR)(),c=(0,x.useId)(),d=c1;return s||!l?null:(i[0]!==c?(e=(0,m.jsx)("h2",{className:cZ.title,id:c,children:"Install Copilot in your favorite code editor"}),i[0]=c,i[1]=e):e=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("p",{className:cZ.description,children:"Copilot is available for a multitude of editors to fit your needs"}),n=eE.W.freeToPaidSettingsUpgrade?(0,m.jsx)(cJ.B,{menuLocation:"editor_upsell_banner",mode:"immersive"}):(0,m.jsxs)(lA.A,{className:cZ.actions,children:[(0,m.jsx)(np.z,{className:cZ.editorButton,href:cX.A.vscode.url,leadingVisual:(0,m.jsx)("img",{src:cX.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{d("vscode","ide_menu_primary_button_click")},children:cX.A.vscode.name}),(0,m.jsxs)(tD.W,{children:[(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(tP.K,{"aria-label":"More editors",icon:M.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{d("menu","ide_menu_open")}})}),(0,m.jsx)(tD.W.Overlay,{align:"end",children:(0,m.jsx)(tM.l,{children:(0,m.jsx)(cY.t,{menuLocation:"editor_upsell_banner",mode:"immersive"})})})]})]}),i[2]=t,i[3]=n):(t=i[2],n=i[3]),i[4]!==o?(a=(0,m.jsx)(tP.K,{variant:"invisible",className:cZ.closeButton,icon:M.XIcon,"aria-label":"Dismiss banner",onClick:()=>{o.dismissEditorUpsellBanner(),(0,tn.BI)("dotcom_chat.activate",{target:"EDITOR_UPSELL_BANNER_DISMISS",mode:"immersive"})}}),i[4]=o,i[5]=a):a=i[5],i[6]!==e||i[7]!==a||i[8]!==c?(r=(0,m.jsx)("div",{className:cZ.container,children:(0,m.jsxs)("section",{className:cZ.banner,"aria-labelledby":c,children:[e,t,n,a]})}),i[6]=e,i[7]=a,i[8]=c,i[9]=r):r=i[9],r)}function c1(e,t){eE.W.freeToPaidTelemetry?(0,cY.F)({eventName:e,menuLocation:"editor_upsell_banner",mode:"immersive",action:t}):(0,tn.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})}try{c0.displayName||(c0.displayName="EditorUpsellBanner")}catch{}function c2(){return nx.Jt.getGpt5PromotionBannerFlag()??!0}function c3(e){let t,n,a,r,i=(0,p.c)(7),{onDismiss:s,className:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],i[0]=t):t=i[0],(0,x.useEffect)(c4,t),i[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsxs)(m.Fragment,{children:["Start using OpenAI\u2019s ",(0,m.jsx)("strong",{children:"GPT-5"})," model today."]}),i[1]=n):n=i[1],i[2]!==s?(a=(0,m.jsx)(Q.l,{variant:"upsell",title:"GPT-5 Now Available",description:n,hideTitle:!0,onDismiss:()=>{s(),(0,tn.BI)("dotcom_chat.activate",{target:"GPT5_UPSELL_BANNER_DISMISS",mode:"immersive"})}}),i[2]=s,i[3]=a):a=i[3],i[4]!==o||i[5]!==a?(r=(0,m.jsx)("div",{className:o,children:a}),i[4]=o,i[5]=a,i[6]=r):r=i[6],r}function c4(){(0,tn.BI)("dotcom_chat.activate",{target:"GPT5_UPSELL_BANNER_SHOW",mode:"immersive"})}try{c3.displayName||(c3.displayName="Gpt5PromotionBanner")}catch{}function c5(){return nx.Jt.getProPlusSuccessBannerFlag()??!1}function c6(e){let t,n,a=(0,p.c)(5),{onDismiss:r,className:i}=e;return a[0]!==r?(t=(0,m.jsx)(Q.l,{variant:"success",title:"Copilot Pro+ activated",description:"Your Copilot Pro+ subscription is now active.",hideTitle:!0,onDismiss:()=>{r(),(0,tn.BI)("dotcom_chat.activate",{target:"PRO_PLUS_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),a[0]=r,a[1]=t):t=a[1],a[2]!==i||a[3]!==t?(n=(0,m.jsx)("div",{className:i,children:t}),a[2]=i,a[3]=t,a[4]=n):n=a[4],n}try{c6.displayName||(c6.displayName="ProPlusSuccessBanner")}catch{}function c7(){return(nx.Jt.getTrialSuccessBannerFlag()&&!nx.Jt.getProPlusSuccessBannerFlag())??!1}function c8(e){let t,n,a=(0,p.c)(5),{onDismiss:r,className:i}=e;return a[0]!==r?(t=(0,m.jsx)(Q.l,{variant:"success",title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",hideTitle:!0,onDismiss:()=>{r(),(0,tn.BI)("dotcom_chat.activate",{target:"TRIAL_SUCCESS_BANNER_DISMISS",mode:"immersive"})}}),a[0]=r,a[1]=t):t=a[1],a[2]!==i||a[3]!==t?(n=(0,m.jsx)("div",{className:i,children:t}),a[2]=i,a[3]=t,a[4]=n):n=a[4],n}try{c8.displayName||(c8.displayName="TrialSuccessBanner")}catch{}function c9(){let e,t,n,a,r,i=(0,p.c)(16),s=(0,ny.xR)(),o=s.licenseType,l=s.plan,c=function(){let e,t,n=(0,p.c)(3),[a,r]=(0,x.useState)(c2);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{nx.Jt.setGpt5PromotionBannerFlag(!1),r(!1)},n[0]=e):e=n[0];let i=e;return n[1]!==a?(t={visible:a,onDismiss:i},n[1]=a,n[2]=t):t=n[2],t}(),d=function(){let e,t,n=(0,p.c)(3),[a,r]=(0,x.useState)(c7);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{nx.Jt.removeTrialSuccessBannerFlag(),r(!1)},n[0]=e):e=n[0];let i=e;return n[1]!==a?(t={visible:a,onDismiss:i},n[1]=a,n[2]=t):t=n[2],t}(),u=function(){let e,t,n=(0,p.c)(3),[a,r]=(0,x.useState)(c5);n[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{nx.Jt.removeProPlusSuccessBannerFlag(),nx.Jt.removeTrialSuccessBannerFlag(),r(!1)},n[0]=e):e=n[0];let i=e;return n[1]!==a?(t={visible:a,onDismiss:i},n[1]=a,n[2]=t):t=n[2],t}(),h=(l===aI.UH.IndividualPro||l===aI.UH.IndividualProPlus||l===aI.UH.Enterprise)&&c.visible,f=!h&&u.visible,g=!h&&!f&&d.visible&&o===aI.mF.LicensedFull,y=!h&&!f&&!g;return i[0]!==c||i[1]!==h?(e=eE.W.gpt5PromotionBanner&&h&&(0,m.jsx)(c3,{className:(0,_.$)(oZ.banner,oZ.gpt5),onDismiss:c.onDismiss}),i[0]=c,i[1]=h,i[2]=e):e=i[2],i[3]!==y?(t=y&&(0,m.jsx)(c0,{}),i[3]=y,i[4]=t):t=i[4],i[5]!==g||i[6]!==d?(n=g&&(0,m.jsx)(c8,{className:oZ.banner,onDismiss:d.onDismiss}),i[5]=g,i[6]=d,i[7]=n):n=i[7],i[8]!==u||i[9]!==f?(a=f&&(0,m.jsx)(c6,{className:oZ.banner,onDismiss:u.onDismiss}),i[8]=u,i[9]=f,i[10]=a):a=i[10],i[11]!==e||i[12]!==t||i[13]!==n||i[14]!==a?(r=(0,m.jsxs)(m.Fragment,{children:[e,t,n,a]}),i[11]=e,i[12]=t,i[13]=n,i[14]=a,i[15]=r):r=i[15],r}try{c9.displayName||(c9.displayName="NewConversationBanners")}catch{}function de(e){let t,n,a,r,i,s,o=(0,p.c)(20),{group:l,onEntrySelect:c}=e,[d,u]=(0,x.useState)(!1),h=(0,x.useRef)(null);o[0]!==d?(t=()=>{u(!d)},o[0]=d,o[1]=t):t=o[1];let f=t;if(o[2]!==l.color||o[3]!==l.icon||o[4]!==l.name||o[5]!==f||o[6]!==d?(n=(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(cz,{ref:h,name:l.name,icon:l.icon,color:l.color,onClick:f,dropdown:!0,open:d})}),o[2]=l.color,o[3]=l.icon,o[4]=l.name,o[5]=f,o[6]=d,o[7]=n):n=o[7],o[8]===Symbol.for("react.memo_cache_sentinel")?(a={width:"260px"},o[8]=a):a=o[8],o[9]!==l.entries||o[10]!==c){let e;o[12]!==c?(e=e=>(0,m.jsx)(tM.l.Item,{onSelect:()=>c(e),children:(0,m.jsx)(sB.$6,{html:e.titleHtml})},e.id),o[12]=c,o[13]=e):e=o[13],r=l.entries.map(e),o[9]=l.entries,o[10]=c,o[11]=r}else r=o[11];return o[14]!==r?(i=(0,m.jsx)(tD.W.Overlay,{style:a,children:(0,m.jsx)(tM.l,{children:r})}),o[14]=r,o[15]=i):i=o[15],o[16]!==d||o[17]!==n||o[18]!==i?(s=(0,m.jsx)("li",{children:(0,m.jsxs)(tD.W,{open:d,onOpenChange:u,children:[n,i]})}),o[16]=d,o[17]=n,o[18]=i,o[19]=s):s=o[19],s}function dt(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,x=(0,p.c)(44),{textAreaRef:v,handleUserSubmit:b,nextMessageIndex:S}=e,C=(0,H.b)(),j=(0,q.Pk)();x[0]!==j?(t=(0,aE.W)(j),x[0]=j,x[1]=t):t=x[1];let N=t;x[2]!==N||x[3]!==C||x[4]!==j?(n=e=>{let t=0===j.messages.length?N:(0,aE.W)(j),n=j.currentUserLogin||"",a=e.message.replaceAll("$$USERNAME$$",n);C.sendChatMessage({thread:t,content:a,references:j.currentReferences,topic:j.currentTopic,context:j.context,customInstructions:j.customInstructions,model:j.model}),(0,tn.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_STARTER_MENU_ITEM",topic:j.currentTopic?.name,mode:"immersive",starterId:e.id})},x[2]=N,x[3]=C,x[4]=j,x[5]=n):n=x[5];let w=n,I=Object.values(cq).filter(dn);x[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("div",{className:cK.banner,children:(0,m.jsx)(c9,{})}),x[6]=a):a=x[6];let E=(0,cV.u)("copilot_pro_plus_animation")?(0,m.jsx)(cG,{}):(0,m.jsx)(nm.A,{hidden:!0});x[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),x[7]=r):r=x[7],x[8]!==b||x[9]!==S||x[10]!==v?(i=(0,m.jsx)(lv,{textAreaRef:v,handleUserSubmit:b,nextMessageIndex:S}),x[8]=b,x[9]=S,x[10]=v,x[11]=i):i=x[11],x[12]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),x[12]=s):s=x[12],x[13]===Symbol.for("react.memo_cache_sentinel")?(o=!eE.W.newCreateIssuesIcebreaker&&(0,m.jsx)(cQ,{}),x[13]=o):o=x[13],x[14]!==w?(l=e=>(0,m.jsx)(de,{group:e,onEntrySelect:w},e.id),x[14]=w,x[15]=l):l=x[15];let T=I.map(l);return x[16]!==cK.starters||x[17]!==o||x[18]!==T?(c=(0,m.jsxs)("ul",{className:cK.starters,children:[o,T]}),x[16]=cK.starters,x[17]=o,x[18]=T,x[19]=c):c=x[19],x[20]!==cK.innerContainer||x[21]!==r||x[22]!==i||x[23]!==s||x[24]!==c?(d=(0,m.jsxs)("div",{className:cK.innerContainer,children:[r,i,s,c]}),x[20]=cK.innerContainer,x[21]=r,x[22]=i,x[23]=s,x[24]=c,x[25]=d):d=x[25],x[26]!==d||x[27]!==cK.alignTop||x[28]!==E?(u=(0,m.jsxs)("div",{className:cK.alignTop,children:[E,d]}),x[26]=d,x[27]=cK.alignTop,x[28]=E,x[29]=u):u=x[29],x[30]!==u||x[31]!==cK.content?(h=(0,m.jsx)("div",{className:cK.content,children:u}),x[30]=u,x[31]=cK.content,x[32]=h):h=x[32],x[33]!==h||x[34]!==cK.main?(f=(0,m.jsx)("div",{className:cK.main,children:h}),x[33]=h,x[34]=cK.main,x[35]=f):f=x[35],x[36]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsx)("div",{className:cK.footer,children:(0,m.jsx)(tm.h,{})}),x[36]=g):g=x[36],x[37]!==f||x[38]!==cK.container||x[39]!==a?(y=(0,m.jsxs)("div",{className:cK.container,children:[a,f,g]}),x[37]=f,x[38]=cK.container,x[39]=a,x[40]=y):y=x[40],x[41]!==y||x[42]!==cK.scrollContainer?(_=(0,m.jsx)("div",{className:cK.scrollContainer,children:y}),x[41]=y,x[42]=cK.scrollContainer,x[43]=_):_=x[43],_}function dn(e){return"create-issues-group"!==e.id||!!eE.W.newCreateIssuesIcebreaker}try{de.displayName||(de.displayName="StarterGroupWithMenu")}catch{}try{dt.displayName||(dt.displayName="NewConversation")}catch{}let da={container:"QuotaExceededEmptyState-module__container--WOGM3",main:"QuotaExceededEmptyState-module__main--kc9CL",copy:"QuotaExceededEmptyState-module__copy--S4GE7",heading:"QuotaExceededEmptyState-module__heading--mfW4i",description:"QuotaExceededEmptyState-module__description--JR0Bv",footer:"QuotaExceededEmptyState-module__footer--ckJFW"};function dr(){let e,t,n,a,r,i,s,o,l,c,d,u,h=(0,p.c)(21),{resetDate:f,eligibleForTrial:g}=(0,ny.xR)(),[y,_]=(0,x.useState)(!1),[v,b]=(0,x.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{_(!0),b(!0)},h[0]=e):e=h[0];let S=e;h[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{_(!1)},h[1]=t):t=h[1];let C=t;h[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{b(!1)},h[2]=n):n=h[2];let j=n,N=y||v;h[3]!==y||h[4]!==N?(a=N?(0,m.jsx)(sN.N,{animationType:"jumpWiggle",loopAnimation:y,size:96,onAnimationEnd:j}):(0,m.jsx)(sN.N,{animationType:"static",loopAnimation:!1,size:96}),h[3]=y,h[4]=N,h[5]=a):a=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)("h2",{className:da.heading,children:"You\u2019ve reached your free plan limit"}),h[6]=r):r=h[6],h[7]!==f?(i=(0,m.jsxs)("p",{className:da.description,children:["Your limits will reset on ",f,"."]}),h[7]=f,h[8]=i):i=h[8];let w=g?"Try Copilot Pro free for 30 days":"Upgrade to Pro";return h[9]!==w?(s=(0,m.jsx)(np.z,{as:"a",variant:"primary",size:"large",href:"https://github.com/github-copilot/pro",onMouseEnter:S,onMouseLeave:C,onClick:di,children:w}),h[9]=w,h[10]=s):s=h[10],h[11]!==i||h[12]!==s?(o=(0,m.jsxs)("div",{className:da.copy,children:[r,i,s]}),h[11]=i,h[12]=s,h[13]=o):o=h[13],h[14]!==a||h[15]!==o?(l=(0,m.jsxs)("div",{className:da.main,children:[a,o]}),h[14]=a,h[15]=o,h[16]=l):l=h[16],h[17]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)("strong",{children:"Part of an organization?"}),h[17]=c):c=h[17],h[18]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsxs)("div",{className:da.footer,children:[c,(0,m.jsxs)("span",{children:["Upgrade to"," ",(0,m.jsx)(nR.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),h[18]=d):d=h[18],h[19]!==l?(u=(0,m.jsxs)("div",{className:da.container,children:[l,d]}),h[19]=l,h[20]=u):u=h[20],u}function di(){(0,tn.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"immersive"})}try{dr.displayName||(dr.displayName="QuotaExceededEmptyState")}catch{}function ds(e){let t,n,a,r,i,s,o,l,c,d=(0,p.c)(24),{isMobile:u,textAreaRef:h}=e,f=(0,q.Pk)(),{messages:g,messagesLoading:y,threadsLoading:_}=f,{chatQuotaExceeded:v}=(0,ny.xR)(),b=(0,oq.G)();d[0]!==b||d[1]!==f.customCopilots?(t=(0,nv.JB)(f.customCopilots,b),d[0]=b,d[1]=f.customCopilots,d[2]=t):t=d[2];let S=!!t,{variant:C,customCopilot:j}=l_(b,f.selectedThreadID),N=C===lg.customCopilotSizeExceeded,w=(!C||S)&&!N,I=(0,x.useRef)(f.currentTopic),E=oG();n=!f.selectedThreadID&&nx.Jt.getEntrypointMessage();e:{if(f.selectedThreadID||f.pendingFirstMessage||n||b||v||"error"===y.state||"error"===_.state){a=!1;break e}a=!0}let T=a,k=g.length,R=oK(I,k);return d[3]!==f.currentTopic?(r=()=>{I.current=f.currentTopic},i=[f.currentTopic],d[3]=f.currentTopic,d[4]=r,d[5]=i):(r=d[4],i=d[5]),(0,x.useEffect)(r,i),d[6]!==v||d[7]!==R?(s=()=>{let e=nx.Jt.getEntrypointMessage();e&&!v&&(nx.Jt.setEntrypointMessage(null),setTimeout(()=>{R(e)},100))},o=[R,v],d[6]=v,d[7]=R,d[8]=s,d[9]=o):(s=d[8],o=d[9]),(0,x.useEffect)(s,o),d[10]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(lG,{}),d[10]=l):l=d[10],d[11]!==v||d[12]!==j||d[13]!==R||d[14]!==u||d[15]!==E||d[16]!==k||d[17]!==T||d[18]!==w||d[19]!==C||d[20]!==f.selectedThreadID||d[21]!==f.traceInfo?.visible||d[22]!==h?(c=(0,m.jsxs)(m.Fragment,{children:[l,!f.selectedThreadID&&v?(0,m.jsx)(dr,{}):f.traceInfo?.visible?(0,m.jsx)(oV,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:ls.content,children:T?(0,m.jsx)(dt,{textAreaRef:h,handleUserSubmit:R,nextMessageIndex:k}):(0,m.jsx)(cB,{inputRef:h,isMobile:u})}),(!E||eE.W.copilotDuplicateThread)&&!T&&(0,m.jsxs)("div",{className:ls.footer,children:[eE.W.groupNotifications&&!w&&(0,m.jsx)(lx,{}),!eE.W.groupNotifications&&C&&(0,m.jsx)("div",{className:ls.spaceBannerContainer,children:(0,m.jsx)(ly,{variant:C,customCopilot:j})}),w&&(0,m.jsx)(lv,{textAreaRef:h,handleUserSubmit:R,nextMessageIndex:k})]})]})]}),d[11]=v,d[12]=j,d[13]=R,d[14]=u,d[15]=E,d[16]=k,d[17]=T,d[18]=w,d[19]=C,d[20]=f.selectedThreadID,d[21]=f.traceInfo?.visible,d[22]=h,d[23]=c):c=d[23],c}function dl(e){let t,n,a=(0,p.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(nD,{regionName:"This conversation"}),a[0]=t):t=a[0],a[1]!==e?(n=(0,m.jsx)(nw.t,{fallback:t,children:(0,m.jsx)(ds,{...e})}),a[1]=e,a[2]=n):n=a[2],n}try{ds.displayName||(ds.displayName="ConversationViewInner")}catch{}try{dl.displayName||(dl.displayName="ConversationView")}catch{}function dc(e){let t,n=(0,p.c)(4),{plugin:a}=e,r=(0,q.Pk)(),{PageComponent:i}=a;return n[0]!==i||n[1]!==a||n[2]!==r?(t=i?(0,m.jsx)(x.Suspense,{children:(0,m.jsx)(i,{chatState:r,plugin:a})}):null,n[0]=i,n[1]=a,n[2]=r,n[3]=t):t=n[3],t}try{dc.displayName||(dc.displayName="PluginPageContent")}catch{}function dd(e){let t,n=(0,p.c)(6),{plugin:a}=e,r=(0,q.Pk)(),{closePreviewPane:i,openPreviewPane:s}=(0,nu.xx)(),{ViewComponent:o}=a;return n[0]!==o||n[1]!==i||n[2]!==s||n[3]!==a||n[4]!==r?(t=o?(0,m.jsx)(o,{chatState:r,closePreviewPane:i,openPreviewPane:s,plugin:a}):null,n[0]=o,n[1]=i,n[2]=s,n[3]=a,n[4]=r,n[5]=t):t=n[5],t}try{dd.displayName||(dd.displayName="PluginViewContent")}catch{}var du=n(90495),dm=n(63557),dp=n(19342);let dh={ConversationList__container:"ConversationList-module__ConversationList__container--zV_GP",ConversationList__empty:"ConversationList-module__ConversationList__empty--HAGiQ",ConversationList:"ConversationList-module__ConversationList--YlJdS",ConversationList__section:"ConversationList-module__ConversationList__section--j5yC3",ConversationList__title:"ConversationList-module__ConversationList__title--vixaJ",ConversationList__item:"ConversationList-module__ConversationList__item--mOwbG",ConversationList__link:"ConversationList-module__ConversationList__link--kAb9u",ConversationList__text:"ConversationList-module__ConversationList__text--zRZVK",ConversationList__context:"ConversationList-module__ConversationList__context--kfB7w",emptyStateHeading:"ConversationList-module__emptyStateHeading--RZADJ",emptyStateText:"ConversationList-module__emptyStateText--fmBIu"};function df({selectedItemID:e,loadingState:t,onConversationSelect:n}){let a=(0,H.b)(),{threads:r}=(0,q.Pk)(),i=(0,x.useMemo)(()=>a.sortAndFilterThreads(r).map(e=>({id:e.id,text:(0,eI.CB)(e),href:`${eI.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,a]),s=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let a=new Date(t);a.setDate(t.getDate()-7);let r=new Date(t);r.setDate(t.getDate()-30);let i=[],s=[],o=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?i.push(c):c.date.toDateString()===n.toDateString()?s.push(c):c.date>a?o.push(c):c.date>r&&l.push(c);return{Today:i,Yesterday:s,"Last 7 days":o,"Last 30 days":l}}(i),o=0===i.length,l=(0,x.useId)();return(0,m.jsx)("nav",{"aria-labelledby":`${l}-conversations`,id:`${l}-conversation-list`,tabIndex:-1,className:dh.ConversationList__container,children:o&&("loading"===t||"pending"===t)?(0,m.jsx)(dp.r,{lines:5}):o?(0,m.jsx)(d_,{}):(0,m.jsxs)("div",{className:dh.ConversationList__section,children:[(0,m.jsx)("h3",{id:`${l}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(s).map(([t,a])=>a.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{id:`${l}_${t}`,className:dh.ConversationList__title,children:t}),(0,m.jsx)("ul",{className:dh.ConversationList,children:a.map(t=>(0,m.jsx)(dg,{item:t,selectedItemId:e??void 0,onSelect:n,threads:r},t.id))})]},t))]})})}function dg(e){let t,n,a,r=(0,p.c)(17),{item:i,selectedItemId:s,onSelect:o,threads:l}=e,c=i.id===s,[d,u]=(0,x.useState)(null),[h,f,g]=(0,lI.B)(!1);r[0]!==s||r[1]!==l?(t=l.get(s),r[0]=s,r[1]=l,r[2]=t):t=r[2];let y=t,_=!!y?.customCopilotID,v=(0,x.useRef)(null);r[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>u(null),r[3]=n):n=r[3];let b=n;return r[4]!==d||r[5]!==_||r[6]!==i.href||r[7]!==i.id||r[8]!==i.text||r[9]!==h||r[10]!==o||r[11]!==c||r[12]!==s||r[13]!==f||r[14]!==g||r[15]!==l?(a=i.href&&(0,m.jsxs)("li",{className:dh.ConversationList__item,children:[(0,m.jsx)(ef.N_,{className:dh.ConversationList__link,to:i.href,"aria-current":c?"page":void 0,onClick:()=>{o(),(0,tn.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:i.id,mode:"immersive"})},children:(0,m.jsx)("span",{className:dh.ConversationList__text,children:i.text})}),(0,m.jsx)("span",{className:dh.ConversationList__context,children:(0,m.jsxs)(tD.W,{anchorRef:v,children:[(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(tP.K,{loading:h,icon:M.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:dy})}),(0,m.jsx)(tD.W.Overlay,{children:(0,m.jsx)(tM.l,{children:(0,m.jsx)(lb.V,{onOpenDialog:u,isShared:!!l.get(i.id)?.sharedID,showShare:!_})})})]})}),(0,m.jsx)(lb.p,{visibleDialog:d,onClose:b,threadName:i.text,threadId:i.id,selectedThreadId:s,onStartLoading:f,onFinishLoading:g,returnFocusRef:v})]},i.id),r[4]=d,r[5]=_,r[6]=i.href,r[7]=i.id,r[8]=i.text,r[9]=h,r[10]=o,r[11]=c,r[12]=s,r[13]=f,r[14]=g,r[15]=l,r[16]=a):a=r[16],a}function dy(){return(0,tn.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})}function d_(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)("div",{className:dh.ConversationList__empty,children:[(0,m.jsx)(dm.A,{as:"h3",className:dh.emptyStateHeading,children:"No conversations yet"}),(0,m.jsx)("span",{className:dh.emptyStateText,children:"Ask Copilot anything on the right to start your first conversation."})]}),t[0]=e):e=t[0],e}try{df.displayName||(df.displayName="ConversationList")}catch{}try{dg.displayName||(dg.displayName="ConversationListEntry")}catch{}try{d_.displayName||(d_.displayName="EmptyState")}catch{}function dx(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,m.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.515.456a1.555 1.555 0 00-2.2 0L6.58 6.19a1.556 1.556 0 00-.396.673l-.825 2.89a.667.667 0 00.824.824l2.89-.826c.254-.072.485-.209.672-.396l5.735-5.734a1.556 1.556 0 000-2.2l-.965-.965zm-1.257.942a.222.222 0 01.314 0l.965.966a.222.222 0 010 .314L13.415 3.8l-1.28-1.28 1.123-1.122zm-2.065 2.066l1.279 1.279-3.67 3.67a.221.221 0 01-.096.056l-1.736.496.496-1.736c.01-.036.03-.07.057-.096l3.67-3.67zM1.639 4.778a2.25 2.25 0 012.25-2.25h3.154a.75.75 0 000-1.5H3.889a3.75 3.75 0 00-3.75 3.75v7.333a3.75 3.75 0 003.75 3.75h7.333a3.75 3.75 0 003.75-3.75V8.445a.75.75 0 00-1.5 0v3.666a2.25 2.25 0 01-2.25 2.25H3.889a2.25 2.25 0 01-2.25-2.25V4.778z",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{dx.displayName||(dx.displayName="ComposeIcon")}catch{}let dv={container:"FreeChatUpgradeBanner-module__container--qQ8bC",content:"FreeChatUpgradeBanner-module__content--J_UCF"};function db(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:dv.container,children:(0,m.jsxs)("p",{className:dv.content,children:[(0,m.jsx)(nR.A,{href:"https://github.com/github-copilot/pro",inline:!0,onClick:dS,children:"Upgrade to Pro"})," ","to access higher limits and premium models."]})}),t[0]=e):e=t[0],e}function dS(){(0,tn.BI)("dotcom_chat.activate",{target:"FREE_CHAT_UPGRADE_BANNER_LINK",mode:"immersive"})}try{db.displayName||(db.displayName="FreeChatUpgradeBanner")}catch{}let dC={list:"ServiceList-module__list--pcCcp"},dj=JSON.stringify({source:"ServiceList"});function dN(e){let t,n,a,r,i,s,o=(0,p.c)(22),{toggleFloatingSidebar:l}=e,c=(0,q.Pk)(),{selectedThreadID:d}=c,u=(0,n_.v)()?.id,h=(0,ew.qw)(),f=(0,H.b)(),g=(0,oJ.G)(),y=(0,nv.mM)();o[0]!==g||o[1]!==l?(t=async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),l(),await g({clearTopic:!0,includeThreads:!1}),(0,tn.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},o[0]=g,o[1]=l,o[2]=t):t=o[2];let _=t;o[3]!==l?(n=e=>{e.metaKey||e.ctrlKey||l()},o[3]=l,o[4]=n):n=o[4];let x=n;o[5]!==f||o[6]!==l?(a=(e,t)=>{e.metaKey||e.ctrlKey||(l(),f.selectPlugin(t))},o[5]=f,o[6]=l,o[7]=a):a=o[7];let v=a,b=d||u||y?void 0:"page";o[8]!==_||o[9]!==b?(r=(0,m.jsx)(eh,{"aria-current":b,"data-analytics-event":dj,displayName:"Home",href:eI.Jz,icon:M.HomeIcon,id:"home",onLinkClick:_}),o[8]=_,o[9]=b,o[10]=r):r=o[10];let S=(0,nb.BV)()&&(0,m.jsx)(eh,{"aria-current":y?"page":void 0,displayName:"Spaces","data-analytics-event":dj,href:eI.VR,iconOverride:(0,m.jsx)(tR.I,{icon:"spaces"}),id:"spaces",onLinkClick:x,label:(0,m.jsx)(eS.A,{variant:"success",children:"Preview"})});if(o[11]!==c||o[12]!==v||o[13]!==h){let e;o[15]!==c||o[16]!==v?(e=e=>void 0!==e.NavigationComponent?(0,m.jsx)(e.NavigationComponent,{chatState:c,onLinkClick:v,"data-analytics-event":dj},e.id):null,o[15]=c,o[16]=v,o[17]=e):e=o[17],i=h.map(e),o[11]=c,o[12]=v,o[13]=h,o[14]=i}else i=o[14];return o[18]!==r||o[19]!==S||o[20]!==i?(s=(0,m.jsxs)("ul",{className:dC.list,children:[r,S,i]}),o[18]=r,o[19]=S,o[20]=i,o[21]=s):s=o[21],s}try{dN.displayName||(dN.displayName="ServiceList")}catch{}let dw={container:"Sidebar-module__container--bIkcI",header:"Sidebar-module__header--AmAmK",sidebar:"Sidebar-module__sidebar--TXDQS",conversations:"Sidebar-module__conversations--jSBS0",quicklinks:"Sidebar-module__quicklinks--uI__6",blankslateContainer:"Sidebar-module__blankslateContainer--HXcOr",pinned:"Sidebar-module__pinned--y1gue",visible:"Sidebar-module__visible--INkIO"};function dI(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,v,b,S,C,j,N,w,I=(0,p.c)(72),{isVisible:E,isPinned:T,isFloating:k,onNewThread:R,onToggle:A}=e,L=(0,q.Pk)(),{threads:D,selectedThreadID:P}=L,O=k?E:T,B=(0,H.b)(),F=(0,x.useRef)(!1),U=(0,oJ.G)(),$=oG(),{closePreviewPane:V}=(0,nu.xx)(),W=(0,nb.BV)(),G=eE.W.immersiveServiceNavigation||W;I[0]!==B||I[1]!==D.size?(t=()=>{0!==D.size||F.current||(F.current=!0,B.fetchThreads())},I[0]=B,I[1]=D.size,I[2]=t):t=I[2],I[3]!==B||I[4]!==L||I[5]!==D?(n=[D,B,L],I[3]=B,I[4]=L,I[5]=D,I[6]=n):n=I[6],(0,x.useEffect)(t,n),I[7]!==k||I[8]!==E||I[9]!==A?(a=()=>{k&&E&&A()},I[7]=k,I[8]=E,I[9]=A,I[10]=a):a=I[10];let z=a;I[11]!==V||I[12]!==z?(r=()=>{z(),V()},I[11]=V,I[12]=z,I[13]=r):r=I[13];let Q=r,K=(0,x.useRef)(null),J=na(),Y=O?J:K,X=na();I[14]!==k||I[15]!==E||I[16]!==A||I[17]!==Y?(i=()=>{if(E&&k){let e=e=>{Y.current&&!Y.current.contains(e.target)&&A()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},s=[E,k,A,Y],I[14]=k,I[15]=E,I[16]=A,I[17]=Y,I[18]=i,I[19]=s):(i=I[18],s=I[19]),(0,x.useEffect)(i,s);let Z=(0,x.useId)(),ee=function(){let{isLicensedLimited:e}=(0,ny.xR)(),{visible:t}=o1();return!t&&e&&eE.W.freeToPaidHyperspaceUpgradePrompt}(),et=!(E&&k);I[20]!==Y||I[21]!==et?(o={disabled:et,containerRef:Y},I[20]=Y,I[21]=et,I[22]=o):o=I[22],(0,du.r)(o);let en=`${Z}-copilot-navigation`,ea=E&&dw.visible,er=T&&dw.pinned;I[23]!==ea||I[24]!==er?(l=(0,_.$)(dw.container,ea,er),I[23]=ea,I[24]=er,I[25]=l):l=I[25];let ei=`${Z}-copilot-navigation`;I[26]!==ei?(c=(0,m.jsx)("h2",{id:ei,className:"sr-only",children:"Copilot navigation"}),I[26]=ei,I[27]=c):c=I[27];let es=O?M.SidebarExpandIcon:M.SidebarCollapseIcon,eo=O?"Close conversations":"Open conversations";I[28]!==O||I[29]!==A?(d=()=>{A(),O?(0,tn.BI)("dotcom_chat.activate",{target:"SIDEBAR_EXPAND",mode:"immersive"}):(0,tn.BI)("dotcom_chat.activate",{target:"SIDEBAR_COLLAPSE",mode:"immersive"})},I[28]=O,I[29]=A,I[30]=d):d=I[30];let el=O?void 0:X;I[31]!==es||I[32]!==eo||I[33]!==d||I[34]!==el?(u=(0,m.jsx)(tP.K,{icon:es,"aria-label":eo,onClick:d,variant:"default",ref:el}),I[31]=es,I[32]=eo,I[33]=d,I[34]=el,I[35]=u):u=I[35],I[36]!==U||I[37]!==R||I[38]!==z?(h=(0,m.jsx)(tP.K,{as:ef.N_,to:eI.Jz,icon:dx,"aria-label":"New conversation",onClick:async e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),z(),await U({clearTopic:!0,includeThreads:!1}),R(),(0,tn.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},variant:"default"}),I[36]=U,I[37]=R,I[38]=z,I[39]=h):h=I[39],I[40]!==c||I[41]!==u||I[42]!==h?(f=(0,m.jsxs)("div",{className:dw.header,children:[c,u,h]}),I[40]=c,I[41]=u,I[42]=h,I[43]=f):f=I[43],I[44]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsx)(dE,{}),I[44]=g):g=I[44];let ec=`${Z}-quick-links`,ed=`${Z}-quick-links`;I[45]!==ed?(y=(0,m.jsx)("h3",{id:ed,className:"sr-only",children:"Quick links"}),I[45]=ed,I[46]=y):y=I[46],I[47]!==Q||I[48]!==G?(v=G&&(0,m.jsx)(dN,{toggleFloatingSidebar:Q}),I[47]=Q,I[48]=G,I[49]=v):v=I[49],I[50]!==ec||I[51]!==y||I[52]!==v?(b=(0,m.jsxs)("nav",{"aria-labelledby":ec,className:dw.quicklinks,children:[y,v]}),I[50]=ec,I[51]=y,I[52]=v,I[53]=b):b=I[53];let eu=$?null:P;return I[54]!==Q||I[55]!==L.threadsLoading.state||I[56]!==eu?(S=(0,m.jsx)(df,{selectedItemID:eu,loadingState:L.threadsLoading.state,onConversationSelect:Q}),I[54]=Q,I[55]=L.threadsLoading.state,I[56]=eu,I[57]=S):S=I[57],I[58]!==b||I[59]!==S?(C=(0,m.jsx)(nw.t,{fallback:g,children:(0,m.jsxs)("div",{className:dw.conversations,children:[b,S]})}),I[58]=b,I[59]=S,I[60]=C):C=I[60],I[61]!==ee?(j=ee?(0,m.jsx)(db,{}):null,I[61]=ee,I[62]=j):j=I[62],I[63]!==C||I[64]!==j?(N=(0,m.jsxs)("div",{className:dw.sidebar,children:[C,j]}),I[63]=C,I[64]=j,I[65]=N):N=I[65],I[66]!==Y||I[67]!==l||I[68]!==f||I[69]!==N||I[70]!==en?(w=(0,m.jsxs)("aside",{"aria-labelledby":en,ref:Y,className:l,children:[f,N]}),I[66]=Y,I[67]=l,I[68]=f,I[69]=N,I[70]=en,I[71]=w):w=I[71],w}function dE(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:dw.blankslateContainer,children:(0,m.jsx)(nD,{regionName:"The conversations menu"})}),t[0]=e):e=t[0],e}try{dI.displayName||(dI.displayName="Sidebar")}catch{}try{dE.displayName||(dE.displayName="SidebarContentsFallback")}catch{}var dT=n(81829),dk=n(75298);let dR={container:"InlineEditableText-module__container--aZo_B",textarea:"InlineEditableText-module__textarea--5ls6_",placeholder:"InlineEditableText-module__placeholder--e7Xf4",readModeContainer:"InlineEditableText-module__readModeContainer--ysnii",editIcon:"InlineEditableText-module__editIcon--UTuha",readModeText:"InlineEditableText-module__readModeText--MyHNO"},dA={circleProgressBar:"CircleProgressBar-module__circleProgressBar--LGSpA",exceeded:"CircleProgressBar-module__exceeded--duTAI"};function dL({value:e}){let t=e>100;return(0,m.jsx)("div",{className:(0,_.$)(dA.circleProgressBar,t?dA.exceeded:""),style:{"--progress":`${e}%`},children:(0,m.jsxs)("progress",{value:e,max:"100",style:{visibility:"hidden",height:0,width:0},children:[e,"%"]})})}try{dL.displayName||(dL.displayName="CircleProgressBar")}catch{}let dD={actionButtons:"InlineEditActions-module__actionButtons--yWSpe",cancelButton:"InlineEditActions-module__cancelButton--a0gzS",saveButton:"InlineEditActions-module__saveButton--pMcIj",line:"InlineEditActions-module__line--vKo7v",characterCountStatus:"InlineEditActions-module__characterCountStatus--wRiqc",characterCountText:"InlineEditActions-module__characterCountText--QcUxR"};function dP({value:e,maxLength:t,onSave:n,onCancel:a}){let r=!!(t&&t>0),i=r&&e.length>(t||0);return(0,m.jsxs)("div",{className:dD.actionButtons,children:[r&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(dO,{text:e,promptCharLimit:t||0}),(0,m.jsx)(dM,{})]}),(0,m.jsx)(tP.K,{className:dD.cancelButton,variant:"invisible",icon:M.XIcon,"aria-label":"Cancel",size:"small",onClick:a}),(0,m.jsx)(tP.K,{className:dD.saveButton,variant:"invisible",icon:M.CheckIcon,"aria-label":"Save",disabled:i,size:"small",onClick:n})]})}let dM=()=>(0,m.jsx)("div",{className:dD.line});function dO({text:e,promptCharLimit:t}){return(0,m.jsxs)("div",{className:dD.characterCountStatus,children:[(0,m.jsx)(dL,{value:e.length/t*100}),(0,m.jsx)("span",{className:dD.characterCountText,children:(t-e.length).toLocaleString()})]})}try{dP.displayName||(dP.displayName="InlineEditActions")}catch{}try{dM.displayName||(dM.displayName="Line")}catch{}try{dO.displayName||(dO.displayName="CharacterCountStatus")}catch{}function dB({value:e,onChange:t,maxLength:n=null,placeholder:a="",className:r="",defaultEditing:i=!1}){let[s,o]=(0,x.useState)(i),[l,c]=(0,x.useState)(e),[d,u]=(0,x.useState)(null),p=(0,x.useRef)(null),h=(0,x.useRef)(null),f=(0,x.useRef)(null);(0,x.useEffect)(()=>{let e=e=>{s&&f.current&&!f.current.contains(e.target)&&(o(!1),t(l.trim()))};return s&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s,l,f,t]),(0,x.useEffect)(()=>{p.current&&u(p.current.offsetHeight)},[e]),(0,x.useEffect)(()=>{s&&h.current&&(h.current.focus(),h.current.style.height=`${d}px`)},[s,d]);let g=()=>{o(!1),t(l.trim())};return(0,m.jsxs)("div",{ref:f,className:(0,_.$)(dR.container,r),children:[s?(0,m.jsx)(dk.Ay,{ref:h,value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:a,className:dR.textarea,style:{height:d||"auto"},resize:"none"}):(0,m.jsxs)("button",{ref:p,onClick:()=>o(!0),className:dR.readModeContainer,children:[(0,m.jsx)("span",{className:(0,_.$)(dR.readModeText,r),children:e?.trim()||(0,m.jsx)("span",{className:dR.placeholder,children:a})}),(0,m.jsx)(M.PencilIcon,{className:dR.editIcon,size:16})]}),s&&(0,m.jsx)(dP,{value:l,maxLength:n,onSave:g,onCancel:()=>{o(!1),c(e)}})]})}try{dB.displayName||(dB.displayName="InlineEditableText")}catch{}var dF=n(51563),dU=n(96459),d$=n(5420),dV=n(46798);let dq={container:"SpaceNotFoundComponent-module__container--IrGEt",description:"SpaceNotFoundComponent-module__description--klDGL",banner:"SpaceNotFoundComponent-module__banner--uHb2q",icon:"SpaceNotFoundComponent-module__icon--dQYtq"},dW=e=>{let t,n,a,r,i,s=(0,p.c)(7),{protectedOrganizations:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(M.AlertIcon,{className:dq.icon}),n=(0,m.jsx)("h3",{children:"Space not found"}),a=(0,m.jsx)("p",{className:dq.description,children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."}),s[0]=t,s[1]=n,s[2]=a):(t=s[0],n=s[1],a=s[2]),s[3]!==o?(r=o&&!(0,J.G7)("global_sso_banner")&&(0,m.jsx)(W.x,{protectedOrgs:o,redirectURI:dG}),s[3]=o,s[4]=r):r=s[4],s[5]!==r?(i=(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:dq.container,children:[t,n,a,(0,m.jsx)("div",{className:dq.banner,children:r})]})}),s[5]=r,s[6]=i):i=s[6],i};try{dW.displayName||(dW.displayName="SpaceNotFoundComponent")}catch{}function dG(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}var dH=n(6219),dz=n(60905),dQ=n(30456),dK=n(81075),dJ=n(75735),dY=n(72439);let UploadableFileExtensions=class UploadableFileExtensions{static get text(){if(null!=(0,dK._)(this,UploadableFileExtensions,dX))return(0,dK._)(this,UploadableFileExtensions,dX);let e=[...dY.E.getTextFileExtensions().split(","),".babelrc",".conf",".eslintrc",".lock",".log",".npmrc",".prettierrc",".sum",".yarnrc"];return(0,dJ._)(this,UploadableFileExtensions,dX,new Set(e.map(e=>e.toLowerCase()))),(0,dK._)(this,UploadableFileExtensions,dX)}static images(e){return new Set(dz.s.getFileExtensions(e).map(e=>e.toLowerCase()))}};var dX={writable:!0,value:void 0},dZ=n(31971);let d0=()=>{let e,t,n,a,r=(0,p.c)(7);r[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:d2},r[0]=e):e=r[0];let i=(0,ar.n)(e);return r[1]!==i?({mutateAsync:t,...n}=i,r[1]=i,r[2]=t,r[3]=n):(t=r[2],n=r[3]),r[4]!==t||r[5]!==n?(a={getCopilotSpaceResourceSizes:t,...n},r[4]=t,r[5]=n,r[6]=a):a=r[6],a};function d1(e){return{id:e.id,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,metadata:(0,dZ.M)(e)}}async function d2(e){let t={resources:e.resources?.map(d1)},n=await (0,tl.lS)("/copilot/spaces/resource_sizes",{method:"POST",body:t}),a=await n.json();if(!n.ok)throw a.errorMessages;return a}function d3({onResourcesAdded:e,onError:t,onUploadingChange:n}){let{availableModels:a}=(0,q.Pk)(),{hydrateResourcesWithSizePercentages:r}=function(){let e,t,n=(0,p.c)(4),{getCopilotSpaceResourceSizes:a}=d0();n[0]!==a?(e=async e=>{if(0===e.length)return;let t=await a({resources:e});for(let n of e)n.sizePercentage=t[n.id]??0},n[0]=a,n[1]=e):e=n[1];let r=e;return n[2]!==r?(t={hydrateResourcesWithSizePercentages:r},n[2]=r,n[3]=t):t=n[3],t}();return{processFiles:(0,x.useCallback)(async(i,{source:s})=>{if(i&&0!==i.length){(function(e,{source:t}){for(let n of((0,tn.BI)("copilot-spaces.selected_local_files",{fileCount:e.length,source:t}),Array.from(e))){let e=d4(n.name);(0,tn.BI)("copilot-spaces.selected_local_file",{fileExtension:e,contentType:n.type,fileSize:n.size,source:t})}})(i,{source:s}),n?.(!0),t?.([]);try{let{imageFiles:n,nonImageFiles:o}=function(e,t){let n=UploadableFileExtensions.images(t);return Array.from(e).reduce((e,t)=>(!function(e,t){if(e.type.startsWith("image/"))return!0;let n=d4(e.name);return t.has(n)}(t,n)?e.nonImageFiles.push(t):e.imageFiles.push(t),e),{imageFiles:[],nonImageFiles:[]})}(i,a),[l,c]=await Promise.all([d8(o),d6(n,a)]),d=[...l.resources,...c.resources];await r(d),d.length>0&&(e(d),(0,nv.Pg)(d,s));let u=[...l.errorMessages,...c.errorMessages];u.length>0&&t?.(u)}catch{t?.(["Something went wrong while trying to add the files. Please try again."])}finally{n?.(!1)}}},[a,e,t,r,n])}}function d4(e){let t=e.split(".");return t.length>1?`.${t.pop()?.toLowerCase()??""}`:""}function d5(e){let t=[],n=[];for(let a of e)"fulfilled"===a.status?"resource"in a.value?t.push(a.value.resource):n.push(a.value.error):n.push("An unexpected error occurred while processing a file.");return{errorMessages:n,resources:t}}async function d6(e,t){if(0===e.length)return{errorMessages:[],resources:[]};if(!eE.W.spacesImagesEnabled)return{errorMessages:["Images are not yet supported"],resources:[]};let n=e.map(e=>d7(e,dz.s.getMimeTypes(t)));return d5(await Promise.allSettled(n))}async function d7(e,t){try{if(e.size>dz.s.getAttachmentSizeLimit())return{error:un(e.name)};if(!t.includes(e.type))return{error:ut(e.name)};let{id:n,attachment:a}=dz.s.makeImageReference(e,""),r=await a.prefetch();return{resource:{id:n,type:"media_content",mediaType:e.type,name:e.name||"Image",url:r.href||"",copilotChatAttachmentId:r.id||0,height:a.height||0,width:a.width||0,markedForDestroy:!1}}}catch(t){var n,a;return n=t,a=e,n instanceof Error&&"FileSizeError"===n.name?{error:un(a.name)}:{error:ue(a.name)}}}async function d8(e){if(0===e.length)return{errorMessages:[],resources:[]};if(!eE.W.customCopilotsFileUploads)return{errorMessages:["Text file uploads are not yet supported."],resources:[]};let t=e.map(e=>d9(e));return d5(await Promise.allSettled(t))}async function d9(e){try{var t;if(!e.type.startsWith("text/")){let t=d4(e.name);if(!UploadableFileExtensions.text.has(t))return{error:ut(e.name)}}e=(t=e).type.startsWith("text/")?t:new File([t],t.name,{type:"text/plain"});let n=crypto.randomUUID(),a=await new dQ.N(n,e).prefetch();return{resource:{id:n,type:"uploaded_text_file",name:e.name,copilotChatAttachmentId:a.id,url:a.href,markedForDestroy:!1}}}catch(r){var n=r,a=e;if(!(n instanceof dH.ZK))return{error:ue(a.name)};let t=n.errors?.[0];return"string"==typeof t?{error:t}:{error:t?.message||ue(a.name)}}}function ue(e){return`An error occurred uploading "${e}".`}function ut(e){return`File "${e}" is not a supported file type.`}function un(e){let t=function(e){if(e<0)throw Error("File size cannot be negative");if(!Number.isInteger(e))throw Error("File size must be a whole number of bytes");let t=["B","KB","MB","GB","TB","PB"],n=e,a=0;for(;n>=1024&&a<t.length-1;)n/=1024,a++;let r=Math.round(100*n)/100;return`${r}${t[a]}`}(dz.s.getAttachmentSizeLimit());return`File "${e}" is too large. The maximum size for this file type is ${t}.`}let ua=(0,x.forwardRef)((e,t)=>{let n,a,r,i,s,o,l,c,d,u,h=(0,p.c)(18),{onResourcesAdded:f,onError:g,onUploadingChange:y}=e;h[0]!==g||h[1]!==f||h[2]!==y?(n={onResourcesAdded:f,onError:g,onUploadingChange:y},h[0]=g,h[1]=f,h[2]=y,h[3]=n):n=h[3];let{processFiles:_}=d3(n),{availableModels:v}=(0,q.Pk)();h[4]===Symbol.for("react.memo_cache_sentinel")?(r=Array.from(UploadableFileExtensions.text),h[4]=r):r=h[4];let b=r;h[5]!==v?(i=Array.from(UploadableFileExtensions.images(v)),h[5]=v,h[6]=i):i=h[6];let S=i;h[7]!==S?(s=[...b,...S],h[7]=S,h[8]=s):s=h[8];let C=s;h[9]!==C?(o=["text/*",...C],h[9]=C,h[10]=o):o=h[10],a=o.join(","),h[11]!==_?(l=e=>{e.target.files&&(_(e.target.files,{source:"file-upload"}),e.target.value="")},h[11]=_,h[12]=l):l=h[12];let j=l,N=(0,x.useRef)(null);return h[13]===Symbol.for("react.memo_cache_sentinel")?(c=()=>({addResources:()=>N.current?.click()}),h[13]=c):c=h[13],(0,x.useImperativeHandle)(t,c),h[14]===Symbol.for("react.memo_cache_sentinel")?(d={display:"none"},h[14]=d):d=h[14],h[15]!==a||h[16]!==j?(u=(0,m.jsx)("input",{"data-testid":"file-upload-input",ref:N,type:"file",accept:a,multiple:!0,style:d,onChange:j}),h[15]=a,h[16]=j,h[17]=u):u=h[17],u});ua.displayName="FileUploadInput";var ur=n(46747);let UrlDetails=class UrlDetails{constructor(e,t="",n="",a="",r=0,i="",s="",o="unknown"){(0,f._)(this,"url",void 0),(0,f._)(this,"owner",void 0),(0,f._)(this,"repo",void 0),(0,f._)(this,"number",void 0),(0,f._)(this,"type",void 0),(0,f._)(this,"id",void 0),(0,f._)(this,"file_path",void 0),(0,f._)(this,"errorMessage",void 0),(0,f._)(this,"sha",void 0),this.id=e,this.url=t,this.owner=n,this.repo=a,this.number=r,this.type=o,this.file_path=s,this.sha=i}};function ui(e){return{id:e.id,resource_type:e.type,metadata:function(e){switch(e.type){case"github_issue":case"github_pull_request":return{owner:e.owner,repo:e.repo,number:e.number};case"github_file":return{owner:e.owner,repo:e.repo,file_path:e.file_path,sha:e.sha};default:throw Error("Unsupported resource")}}(e)}}async function us(e){let{input:t,spaceOwner:n}=e,a={resources_attributes:t.map(ui),space_owner:n},r=await (0,tl.lS)("/copilot/spaces/validate_url_resources",{method:"POST",body:a}),i=await r.json();if(!r.ok)throw i;return i}function uo(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,v,b=(0,p.c)(62),{onClose:S,onSave:C,resourcesToSave:j,owner:N,resourceCounts:w}=e,[I,E]=(0,x.useState)(!1),[T,k]=(0,x.useState)(ul),[R,A]=(0,x.useState)(!1),[L,D]=(0,x.useState)(!1),P=eE.W.copilotSpacesFileUrls,{validateUrlResources:O}=(()=>{let e,t,n,a,r=(0,p.c)(7);r[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:us},r[0]=e):e=r[0];let i=(0,ar.n)(e);return r[1]!==i?({mutateAsync:n,...t}=i,r[1]=i,r[2]=t,r[3]=n):(t=r[2],n=r[3]),r[4]!==t||r[5]!==n?(a={validateUrlResources:n,...t},r[4]=t,r[5]=n,r[6]=a):a=r[6],a})();if(b[0]!==I||b[1]!==S||b[2]!==C||b[3]!==N||b[4]!==j||b[5]!==T||b[6]!==O){let e;t=e=>{e?.preventDefault(),e?.stopPropagation(),I||(E(!0),a().finally(()=>{E(!1)}))},b[8]===Symbol.for("react.memo_cache_sentinel")?(e=function(e){if("github_file"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,n=e.sha,a="filePath"in e?e.filePath:e.file_path;return`${t}/github_file/${n}/${a}`}if("github_issue"===e.type||"github_pull_request"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,n=e.number,a=e.type;return`${t}/${n}/${a}`}return""},b[8]=e):e=b[8];let n=e,a=async()=>{A(!1),D(!1);let e=(()=>{let e=new Set(j?.map(e=>n(e))??[]),t=new Set;return T.filter(a=>{let r=n(a);return!(t.has(r)||e.has(r))&&""!==a.url.trim()&&(t.add(r),!0)})})(),t=e.filter(e=>"unknown"===e.type||N&&e.owner!==N);if(t.length>0){k(T.map(e=>N&&e.owner&&e.owner!==N?{...e,errorMessage:`This doesn't belong to the ${N} organization.`}:t.some(t=>t.id===e.id)?{...e,errorMessage:"Invalid URL"}:e)),A(!0);return}if(0===e.length)return void S();try{let t=await O({input:e,spaceOwner:N});C(t),(0,nv.Pg)(t,"url-dialog"),S()}catch(e){if(Array.isArray(e)){for(let t of e){let e=T.find(e=>e.id===t.id);e&&(e.errorMessage="Resource not found")}A(!0)}}};b[0]=I,b[1]=S,b[2]=C,b[3]=N,b[4]=j,b[5]=T,b[6]=O,b[7]=t}else t=b[7];let B=!!w&&w.currentResourceCount+T.length+1>w.maxResourceCount;b[9]!==T||b[10]!==B?(n=()=>{if(B)return void D(!0);k([...T,new UrlDetails(crypto.randomUUID())])},b[9]=T,b[10]=B,b[11]=n):n=b[11];let F=n,U=L&&w?`You can select a maximum of ${w.maxResourceCount} sources.`:null;b[12]!==L||b[13]!==w?(a=e=>{L&&w&&(w.currentResourceCount+e.length>w.maxResourceCount||D(!1))},b[12]=L,b[13]=w,b[14]=a):a=b[14];let $=a;b[15]!==$||b[16]!==T?(r=e=>{let t=[...T];t.splice(e,1),k(t),$(t)},b[15]=$,b[16]=T,b[17]=r):r=b[17];let V=r;if(b[18]!==$||b[19]!==T){i=(t,n)=>{let a=[...T],r=e(n,a[t]||new UrlDetails(crypto.randomUUID()));a[t]=r,k(a),$(a)};let e=(e,t)=>{let n=e.match(/\/([^/]+)\/([^/]+)\/issues\/(\d+)/),a=e.match(/\/([^/]+)\/([^/]+)\/pull\/(\d+)/),r=e.match(/\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.+)$/);return t.url=e,n?(t.owner=n[1]??"",t.repo=n[2]??"",t.number=parseInt(n[3]??"0",10),t.type="github_issue"):a?(t.owner=a[1]??"",t.repo=a[2]??"",t.number=parseInt(a[3]??"0",10),t.type="github_pull_request"):r&&P&&(t.owner=r[1]??"",t.repo=r[2]??"",t.sha=r[3]??"",t.file_path=r[4]??"",t.type="github_file"),t};b[18]=$,b[19]=T,b[20]=i}else i=b[20];if(b[21]===Symbol.for("react.memo_cache_sentinel")?(s={narrow:"fullscreen"},b[21]=s):s=b[21],b[22]!==t||b[23]!==I||b[24]!==S||b[25]!==U?(o=()=>(0,m.jsxs)(nK.l.Footer,{children:[(0,m.jsx)("div",{className:"d-flex flex-items-center",children:U&&(0,m.jsx)(oc.A.Validation,{variant:"error",children:U})}),(0,m.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,m.jsx)(eU.Q,{onClick:S,children:"Cancel"}),(0,m.jsx)(eU.Q,{variant:"primary",onClick:t,loadingAnnouncement:"Saving resource",loading:I,children:"Add"})]})]}),b[22]=t,b[23]=I,b[24]=S,b[25]=U,b[26]=o):o=b[26],b[27]!==R?(l=R&&(0,m.jsx)(Q.l,{title:"Failed to save URL(s)",variant:"critical",className:"mb-2"}),b[27]=R,b[28]=l):l=b[28],b[29]!==N?(c=N&&(0,m.jsx)(sB.JR,{html:`from the <b>${N}</b> organization`}),b[29]=N,b[30]=c):c=b[30],b[31]!==c?(d=(0,m.jsxs)("p",{children:["Paste the URLs of the GitHub content"," ",c," you want to add. You can include issues and pull requests."]}),b[31]=c,b[32]=d):d=b[32],b[33]!==t?(u={"github:submit-form":()=>t()},b[33]=t,b[34]=u):u=b[34],b[35]!==R||b[36]!==i||b[37]!==V||b[38]!==T){let e;b[40]!==R||b[41]!==i||b[42]!==V||b[43]!==T.length?(e=(e,t)=>(0,m.jsxs)("div",{style:{width:"100%"},children:[(0,m.jsx)(uc,{index:t,removeUrlTextInputRow:V,inputCount:T.length,updateUrls:i,setIsUpdating:E,urlValue:e.url}),R&&void 0!==e.errorMessage&&(0,m.jsx)(oc.A.Validation,{className:"mt-1",variant:"error",children:e.errorMessage})]},e.id),b[40]=R,b[41]=i,b[42]=V,b[43]=T.length,b[44]=e):e=b[44],h=T.map(e),b[35]=R,b[36]=i,b[37]=V,b[38]=T,b[39]=h}else h=b[39];return b[45]!==h?(f=(0,m.jsx)(Y.B,{direction:"vertical",align:"center",children:h}),b[45]=h,b[46]=f):f=b[46],b[47]!==t||b[48]!==f?(g=(0,m.jsx)("form",{onSubmit:t,children:f}),b[47]=t,b[48]=f,b[49]=g):g=b[49],b[50]!==g||b[51]!==u?(y=(0,m.jsx)(nQ.tL,{commands:u,children:g}),b[50]=g,b[51]=u,b[52]=y):y=b[52],b[53]!==F?(_=(0,m.jsx)(eU.Q,{leadingVisual:M.PlusIcon,className:"mt-3",onClick:F,children:"Add another"}),b[53]=F,b[54]=_):_=b[54],b[55]!==S||b[56]!==y||b[57]!==_||b[58]!==o||b[59]!==l||b[60]!==d?(v=(0,m.jsxs)(nK.l,{position:s,width:"large",title:"Add via GitHub URL",onClose:S,renderFooter:o,children:[l,d,y,_]}),b[55]=S,b[56]=y,b[57]=_,b[58]=o,b[59]=l,b[60]=d,b[61]=v):v=b[61],v}function ul(){return[new UrlDetails(crypto.randomUUID())]}function uc(e){let t,n,a,r,i,s,o,l=(0,p.c)(18),{index:c,removeUrlTextInputRow:d,inputCount:u,updateUrls:h,setIsUpdating:f,urlValue:g}=e,[y,_]=(0,x.useState)(g),[v,b]=(0,x.useState)(!1);l[0]!==g?(t=()=>{_(g)},n=[g],l[0]=g,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,x.useEffect)(t,n);let S=e=>{let t=e.target.value;_(t),v||(b(!0),f(!0)),C(t)};l[3]!==c||l[4]!==f||l[5]!==h?(a=e=>{h(c,e),b(!1),f(!1)},l[3]=c,l[4]=f,l[5]=h,l[6]=a):a=l[6];let C=(0,ur.d)(a,400);return l[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(oc.A.Label,{visuallyHidden:!0,children:"URL"}),l[7]=r):r=l[7],l[8]!==S||l[9]!==y?(i=(0,m.jsx)(om.A,{placeholder:"https://github.com/mona/playground/issues/123",value:y,onChange:S,className:"width-full"}),l[8]=S,l[9]=y,l[10]=i):i=l[10],l[11]!==c||l[12]!==u||l[13]!==d?(s=u>1&&(0,m.jsx)(tP.K,{icon:M.TrashIcon,variant:"invisible","aria-label":"Remove url",className:"ml-2",onClick:()=>d(c)}),l[11]=c,l[12]=u,l[13]=d,l[14]=s):s=l[14],l[15]!==i||l[16]!==s?(o=(0,m.jsxs)(oc.A,{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[r,i,s]}),l[15]=i,l[16]=s,l[17]=o):o=l[17],o}try{uo.displayName||(uo.displayName="GitHubUrlDialog")}catch{}try{(l=AddUrlTextInputRow).displayName||(l.displayName="AddUrlTextInputRow")}catch{}try{uc.displayName||(uc.displayName="UrlTextInputRow")}catch{}var ud=n(19566);function uu(e){let t,n,a,r,i=(0,p.c)(18),{isOpen:s,onClose:o,onResourcesAdded:l,owner:c,resourceCounts:d,initialRepo:u,onRepoSelect:h,hideBackButton:f}=e,g=(0,x.useRef)(null),{getCopilotSpaceResourceSizes:y}=d0();i[0]!==o||i[1]!==l?(t=e=>{let t=[e];l(t),(0,nv.Pg)(t,"file-picker"),o()},i[0]=o,i[1]=l,i[2]=t):t=i[2];let _=t,{searchWorkerFilePath:v}=(0,$.X)();i[3]!==o||i[4]!==l||i[5]!==y?(n=async e=>{if(0===e.length)return void o();let t=await y({resources:e}),n=e.map(e=>{let n=t[e.id];return{...e,fileExists:!0,markedForDestroy:!1,sizePercentage:n}});l(n),(0,nv.Pg)(n,"file-picker"),o()},i[3]=o,i[4]=l,i[5]=y,i[6]=n):n=i[6];let b=n;return s?(i[7]===Symbol.for("react.memo_cache_sentinel")?(a=[],i[7]=a):a=i[7],i[8]!==f||i[9]!==u||i[10]!==o||i[11]!==h||i[12]!==c||i[13]!==d||i[14]!==b||i[15]!==_||i[16]!==v?(r=(0,m.jsx)(ud.Q,{formData:a,onCancel:o,onSaveFiles:b,onSaveRepository:_,findFileWorkerPath:v,attachmentButtonRef:g,owner:c,resourceCounts:d,initialRepo:u,onRepoSelect:h,hideBackButton:f}),i[8]=f,i[9]=u,i[10]=o,i[11]=h,i[12]=c,i[13]=d,i[14]=b,i[15]=_,i[16]=v,i[17]=r):r=i[17],r):null}try{uu.displayName||(uu.displayName="SpacesFilePicker")}catch{}let um={dialogBody:"TextFileDialog-module__dialogBody--e27Cv",grow:"TextFileDialog-module__grow--TUgOh",form:"TextFileDialog-module__form--BVMha",footerContainer:"TextFileDialog-module__footerContainer--A_bOn"};function up({sizePercentage:e,onClose:t,onSave:n,resource:a}){let{copilotSpacesConfig:{maxContentSize:r}}=(0,$.X)(),[i,s]=(0,x.useState)(a?.name||""),[o,l]=(0,x.useState)(a?.text||""),[c,d]=(0,x.useState)(!1),[u,p]=(0,x.useState)(""),[h,f]=(0,x.useState)(!1),g=a?.text??"",[y,_]=(0,x.useState)({}),{getCopilotSpaceResourceSizes:v}=d0(),b=async e=>{e?.preventDefault(),e?.stopPropagation();let r=!i.trim(),s=!o.trim();if(r||s)return void _(e=>({...e,"resources.name":r?"Name is required":"","resources.text":s?"Content is required":""}));d(!0),p("");try{let e={id:a?.id||Date.now().toString(),databaseId:a?.databaseId,type:"free_text",name:i,text:o,markedForDestroy:!1},r=await v({resources:[e]}),s={...e,sizePercentage:r[e.id]};n(s),(0,nv.Pg)([s],"text-file-dialog"),t()}catch{p("An unexpected error occurred while validating the text file")}finally{d(!1)}};return(0,m.jsx)(nK.l,{position:{narrow:"fullscreen"},title:"Add text content",onClose:t,width:"xlarge",height:"large",renderBody:()=>(0,m.jsxs)("div",{className:um.dialogBody,children:[u&&(0,m.jsx)(Q.l,{variant:"critical",className:"mb-2",title:u}),(0,m.jsx)(nQ.tL,{className:um.grow,commands:{"github:submit-form":()=>void b()},children:(0,m.jsxs)("form",{onSubmit:b,className:um.form,children:[(0,m.jsxs)(oc.A,{required:!0,children:[(0,m.jsx)(oc.A.Label,{children:"Name"}),(0,m.jsx)(om.A,{block:!0,placeholder:"Give the file a title",value:i,onChange:e=>{s(e.target.value),_(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:y["resources.name"]?"error":void 0,...(0,nF.G)("text-file-name-input")}),y["resources.name"]&&(0,m.jsx)(oc.A.Validation,{variant:"error",children:y["resources.name"]})]}),(0,m.jsxs)(oc.A,{required:!0,className:um.grow,children:[(0,m.jsx)(oc.A.Label,{children:"Content"}),(0,m.jsx)(dk.Ay,{block:!0,name:"content",value:o,placeholder:"Enter content here",resize:"none",className:um.grow,onChange:e=>{l(e.target.value),_(e=>({...e,"resources.text":""}))},...(0,nF.G)("text-file-content-input")}),y["resources.text"]?(0,m.jsx)(oc.A.Validation,{variant:"error",children:y["resources.text"]}):void 0!==e&&(0,m.jsx)(uh,{text:o,percentage:e,resourceContent:g,setOverSpaceLimit:f,maxContentSize:r})]})]})})]}),renderFooter:()=>(0,m.jsxs)("div",{className:um.footerContainer,children:[(0,m.jsx)(eU.Q,{onClick:t,children:"Cancel"}),(0,m.jsx)(eU.Q,{variant:"primary",onClickCapture:h?void 0:b,loadingAnnouncement:"Validating resource",inactive:h,loading:c,...(0,nF.G)("save-text-file-button"),children:"Add"})]})})}function uh(e){let t,n,a,r=(0,p.c)(8),{text:i,percentage:s,resourceContent:o,setOverSpaceLimit:l,maxContentSize:c}=e,d=s/100*c+(i.length>o.length?Math.abs(i.length-o.length):-Math.abs(i.length-o.length)),u=Math.floor(d/c*100),h=d>c;if(r[0]!==l||r[1]!==h?(t=()=>{l(h)},n=[h,l],r[0]=l,r[1]=h,r[2]=t,r[3]=n):(t=r[2],n=r[3]),(0,x.useEffect)(t,n),h){let e,t=`Total percent used: ${u}%`;return r[4]!==t?(e=(0,m.jsx)(oc.A.Validation,{variant:"error",children:t}),r[4]=t,r[5]=e):e=r[5],e}let f=`Total percent used: ${u}%`;return r[6]!==f?(a=(0,m.jsx)(oc.A.Caption,{children:f}),r[6]=f,r[7]=a):a=r[7],a}try{up.displayName||(up.displayName="TextFileDialog")}catch{}try{uh.displayName||(uh.displayName="CharacterCount")}catch{}let uf=e=>{let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,v,b,S,C=(0,p.c)(43),{children:j,onResourcesAdded:N,onError:w,owner:I,sizePercentage:E,resourcesToSave:T,resourceCounts:k,onUploadingChange:R,initialRepo:A,onRepoSelect:L}=e,[D,P]=(0,x.useState)(!1),[O,B]=(0,x.useState)(!1),[F,U]=(0,x.useState)(!1),$=(0,x.useRef)(null),V=(0,x.useRef)(null),q=eE.W.customCopilotsFileUploads,W=eE.W.spacesImagesEnabled,G=eE.W.copilotSpacesFileUrls;C[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,tn.BI)("copilot-spaces.click",{target:"ADD_GITHUB_FILES_BUTTON"}),B(!0)},C[0]=t):t=C[0];let H=t;C[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,tn.BI)("copilot-spaces.click",{target:"ADD_GITHUB_URL_BUTTON"}),U(!0)},C[1]=n):n=C[1];let z=n;C[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{(0,tn.BI)("copilot-spaces.click",{target:"ADD_TEXT_FILE_BUTTON"}),P(!0)},C[2]=a):a=C[2];let Q=a;return C[3]!==w||C[4]!==N||C[5]!==R?(r=(q||W)&&(0,m.jsx)(ua,{ref:$,onResourcesAdded:N,onError:w,onUploadingChange:R}),C[3]=w,C[4]=N,C[5]=R,C[6]=r):r=C[6],C[7]!==j?(i=(0,m.jsx)(tD.W.Anchor,{children:j}),C[7]=j,C[8]=i):i=C[8],C[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(tM.l.GroupHeading,{children:"Repository"}),C[9]=s):s=C[9],C[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.FileCodeIcon,{...(0,nF.G)("add-github-files-menu-item-icon")})}),C[10]=o):o=C[10],C[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsxs)(tM.l.Item,{onSelect:H,children:[o,eE.W.spacesRepoContext?"Add files and repositories":"Attach files and folders"]}),C[11]=l):l=C[11],C[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.LinkIcon,{})}),C[12]=c):c=C[12],C[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsxs)(tM.l.Group,{children:[s,l,(0,m.jsxs)(tM.l.Item,{onSelect:z,children:[c,G?"Link files, pull requests, and issues":"Link pull requests and issues"]})]}),u=(0,m.jsx)(tM.l.Divider,{}),C[13]=d,C[14]=u):(d=C[13],u=C[14]),C[15]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.jsx)(tM.l.GroupHeading,{children:"Local"}),f=(q||W)&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>{(0,tn.BI)("copilot-spaces.click",{target:"LOCAL_FILE_UPLOAD"}),$.current?.addResources()},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.UploadIcon,{})}),"Upload a file"]}),C[15]=h,C[16]=f):(h=C[15],f=C[16]),C[17]===Symbol.for("react.memo_cache_sentinel")?(g=(0,m.jsx)(tD.W.Overlay,{align:"end",width:"small",children:(0,m.jsxs)(tM.l,{children:[d,u,(0,m.jsxs)(tM.l.Group,{children:[h,f,(0,m.jsxs)(tM.l.Item,{onSelect:Q,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.PasteIcon,{...(0,nF.G)("add-text-file-menu-item-icon")})}),"Add text content"]})]})]})}),C[17]=g):g=C[17],C[18]!==i?(y=(0,m.jsxs)(tD.W,{anchorRef:V,children:[i,g]}),C[18]=i,C[19]=y):y=C[19],C[20]!==N||C[21]!==D||C[22]!==E?(_=D&&(0,m.jsx)(up,{sizePercentage:E,onClose:()=>P(!1),onSave:e=>N([e])}),C[20]=N,C[21]=D,C[22]=E,C[23]=_):_=C[23],C[24]!==A||C[25]!==L||C[26]!==N||C[27]!==I||C[28]!==k||C[29]!==O?(v=O&&(0,m.jsx)(uu,{isOpen:O,onClose:()=>B(!1),onResourcesAdded:N,owner:I,resourceCounts:k,initialRepo:A,onRepoSelect:L}),C[24]=A,C[25]=L,C[26]=N,C[27]=I,C[28]=k,C[29]=O,C[30]=v):v=C[30],C[31]!==N||C[32]!==I||C[33]!==k||C[34]!==T||C[35]!==F?(b=F&&(0,m.jsx)(uo,{onClose:()=>U(!1),onSave:e=>N(e),resourcesToSave:T,resourceCounts:k,owner:I}),C[31]=N,C[32]=I,C[33]=k,C[34]=T,C[35]=F,C[36]=b):b=C[36],C[37]!==y||C[38]!==_||C[39]!==v||C[40]!==b||C[41]!==r?(S=(0,m.jsxs)(m.Fragment,{children:[r,y,_,v,b]}),C[37]=y,C[38]=_,C[39]=v,C[40]=b,C[41]=r,C[42]=S):S=C[42],S};try{uf.displayName||(uf.displayName="AddAttachmentMenu")}catch{}var ug=n(72011),uy=n(97665);function u_(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:!0,metadata:(0,dZ.M)(e)}}var ux=n(97564),uv=n(87826),ub=n(59674);function uS(e){let t=(0,p.c)(14),{attachment:n,className:a}=e;switch(n.type){case"github_file":{let e;return t[0]!==a?(e=(0,m.jsx)(M.FileIcon,{className:a}),t[0]=a,t[1]=e):e=t[1],e}case"free_text":{let e;return t[2]!==a?(e=(0,m.jsx)(M.PasteIcon,{className:a}),t[2]=a,t[3]=e):e=t[3],e}case"uploaded_text_file":{let e;return t[4]!==a?(e=(0,m.jsx)(M.FileIcon,{className:a}),t[4]=a,t[5]=e):e=t[5],e}case"github_issue":{let e;return t[6]!==a?(e=(0,m.jsx)(M.IssueOpenedIcon,{className:a}),t[6]=a,t[7]=e):e=t[7],e}case"github_pull_request":{let e;return t[8]!==a?(e=(0,m.jsx)(M.GitPullRequestIcon,{className:a}),t[8]=a,t[9]=e):e=t[9],e}case"media_content":{let e;return t[10]!==a?(e=(0,m.jsx)(M.ImageIcon,{className:a}),t[10]=a,t[11]=e):e=t[11],e}case"repository":{let e;return t[12]!==a?(e=(0,m.jsx)(M.RepoIcon,{className:a}),t[12]=a,t[13]=e):e=t[13],e}default:return null}}try{uS.displayName||(uS.displayName="AttachmentIcon")}catch{}let uC={attachmentText:"AttachmentPreview-module__attachmentText--ELczx",attachmentPreviewImage:"AttachmentPreview-module__attachmentPreviewImage--hqleR"};function uj(e){let t=(0,p.c)(13),{attachment:n}=e;if(!n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("p",{className:uC.attachmentText,children:"No attachment selected."}),t[0]=e):e=t[0],e}switch(n.type){case"free_text":{let e;return t[1]!==n.text?(e=(0,m.jsx)("p",{className:uC.attachmentText,children:n.text}),t[1]=n.text,t[2]=e):e=t[2],e}case"media_content":{let e,a,r,i=`image: ${n.name}`;return t[3]!==n.url||t[4]!==i?(e=(0,m.jsx)("img",{alt:i,src:n.url}),t[3]=n.url,t[4]=i,t[5]=e):e=t[5],t[6]!==n.name||t[7]!==n.url?(a=(0,m.jsx)(eU.Q,{onClick:()=>(function(e,t,n="image"){let a=document.createElement("a");a.href=e,a.setAttribute("download",t||n),document.body.appendChild(a),a.click(),document.body.removeChild(a)})(n.url,n.name),children:"Download"}),t[6]=n.name,t[7]=n.url,t[8]=a):a=t[8],t[9]!==e||t[10]!==a?(r=(0,m.jsxs)("div",{className:uC.attachmentPreviewImage,children:[e,a]}),t[9]=e,t[10]=a,t[11]=r):r=t[11],r}default:{let e;return t[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("p",{children:"No preview available for this attachment."}),t[12]=e):e=t[12],e}}}try{uj.displayName||(uj.displayName="AttachmentPreview")}catch{}let uN={warningIcon:"ReferencesTable-module__warningIcon--ZQ8GD",referenceTitle:"ReferencesTable-module__referenceTitle--X4GB2",referenceSubtitle:"ReferencesTable-module__referenceSubtitle--cUDlc",referenceTitleLink:"ReferencesTable-module__referenceTitleLink--rezaS",headerText:"ReferencesTable-module__headerText--HR4t9"};function uw({resources:e,onDeleteResources:t,onUpdateResource:n,sizePercentage:a,onResourcesAdded:r,owner:i}){let s=(0,x.useMemo)(()=>Object.values(e.reduce((e,t)=>{let n=uT(t);return{...e,[n]:t}},{})),[e]),[o,l]=(0,x.useState)(!1),[c,d]=(0,x.useState)(null),u=(0,x.useRef)(null),[p,h]=(0,x.useState)([]),f=(0,x.useCallback)(()=>{p.length>0&&(t(p),h([]))},[t,p]),g=(0,x.useCallback)(()=>{p.length>0?h([]):h(s)},[p,s]),y=(0,x.useMemo)(()=>[{id:"select",header:()=>(0,m.jsx)(uv.A,{checked:p.length===s.length,indeterminate:p.length>0&&p.length<s.length,"aria-label":"Select all sources",value:"default",onChange:g}),width:"auto",renderCell:e=>(0,m.jsx)(uv.A,{checked:p.some(t=>t.id===e.id),"aria-label":"Select source",value:e.id,onChange:t=>{h(n=>t.target.checked?[...n,e]:n.filter(t=>t.id!==e.id))}})},{id:"id",header:()=>(0,m.jsx)("span",{className:uN.headerText,children:p.length>0?`${p.length} selected`:`${s.length} ${1===s.length?"source":"sources"}`}),rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let{filePath:t,fileName:n,fileUrl:a,sha:r}=(0,nv.q5)(e);return(0,m.jsxs)(Y.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(uS,{attachment:e,className:"fgColor-muted"}),(0,m.jsxs)(Y.B,{gap:"none",children:[(0,m.jsx)("div",{children:e.fileExists?(0,m.jsxs)(Y.B,{direction:"horizontal",wrap:"wrap",children:[(0,m.jsx)(rq.A,{title:n,className:uN.referenceTitle,children:(0,m.jsx)(nR.A,{rel:"noopener",target:"_blank",href:a,className:uN.referenceTitleLink,children:n})}),r&&(0,m.jsx)(eS.A,{className:"ml-1",children:r.substring(0,7)})]}):(0,m.jsx)(rq.A,{title:n,className:uN.referenceTitle,children:n})}),(0,m.jsx)("div",{children:(0,m.jsx)(rq.A,{title:t,className:(0,_.$)(uN.referenceSubtitle,"fgColor-muted"),children:t})})]})]})}case"free_text":return(0,m.jsxs)(Y.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(uS,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(rq.A,{title:e.name,maxWidth:300,className:uN.referenceTitle,children:e.name})})]});case"repository":return(0,m.jsxs)(Y.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(rI.r,{square:"Organization"===e.ownerType,src:e.ownerAvatarUrl}),(0,m.jsxs)(Y.B,{gap:"none",children:[(0,m.jsx)("div",{children:(0,m.jsx)(rq.A,{title:e.nwo,maxWidth:300,className:uN.referenceTitle,children:(0,m.jsx)(nR.A,{className:uN.referenceTitleLink,href:`/${e.nwo}`,rel:"noopener noreferrer",target:"_blank",children:e.nwo})})}),(0,m.jsx)("div",{className:(0,_.$)(uN.referenceSubtitle,"fgColor-attention"),children:"Attaching a large number of files may reduce response quality."})]})]});case"uploaded_text_file":return(0,m.jsxs)(Y.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)(uS,{attachment:e,className:"fgColor-muted"}),(0,m.jsx)("div",{children:(0,m.jsx)(rq.A,{title:e.name,maxWidth:300,className:uN.referenceTitle,children:(0,m.jsx)(nR.A,{className:uN.referenceTitleLink,href:e.url,download:e.name,children:e.name})})})]});case"github_pull_request":case"github_issue":return(0,m.jsxs)(Y.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)("span",{children:(0,m.jsx)(uS,{attachment:e,className:"fgColor-success"})}),(0,m.jsxs)(Y.B,{gap:"none",children:[(0,m.jsx)("div",{children:(0,m.jsx)(rq.A,{title:e.title||"",className:uN.referenceTitle,children:(0,m.jsxs)(nR.A,{rel:"noopener",target:"_blank",href:e.url,className:uN.referenceTitleLink,children:[e.title," ",(0,m.jsx)("span",{className:"fgColor-muted text-light",children:`#${e.number}`})]})})}),(0,m.jsx)("div",{children:(0,m.jsx)(rq.A,{title:e.nwo||"",className:(0,_.$)(uN.referenceSubtitle,"fgColor-muted"),children:e.nwo})})]})]});case"media_content":return(0,m.jsxs)(Y.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,m.jsx)("span",{className:"fgColor-muted",children:(0,m.jsx)(uS,{attachment:e,className:"fgColor-muted"})}),(0,m.jsx)(nR.A,{as:"button",className:uN.referenceTitleLink,ref:u,onClick:t=>{t.preventDefault(),d(e),l(!0)},"aria-haspopup":"dialog","aria-expanded":o,children:(0,m.jsx)(rq.A,{title:e.name,maxWidth:300,className:(0,_.$)(uN.referenceTitle),children:e.name})})]});default:return null}}},{id:"size",header:()=>(0,m.jsx)(ub.s,{children:"Size"}),align:"end",maxWidth:"auto",width:"growCollapse",renderCell:e=>(0,m.jsx)(uI,{row:e,onResourcesAdded:r,owner:i})},{id:"actions",header:()=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ub.s,{children:"Actions"}),(0,m.jsx)(eU.Q,{style:{visibility:p.length>0?"visible":"hidden"},size:"small","aria-label":"Remove selected resources",onClick:f,children:"Remove"})]}),maxWidth:"auto",align:"end",renderCell:e=>{let r="github_file"===e.type&&!e.fileExists;return(0,m.jsxs)(m.Fragment,{children:[r&&(0,m.jsx)(tP.K,{className:uN.warningIcon,icon:M.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),(0,m.jsx)(uE,{row:e,onEdit:n,onDelete:e=>t([e]),sizePercentage:a})]})}}],[p,s.length,g,o,f,n,a,r,i,t]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(op.X.Container,{children:(0,m.jsx)(oh.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:s,columns:y})}),o&&c&&"media_content"===c.type&&(0,m.jsx)(nK.l,{onClose:()=>{d(null),l(!1)},position:{narrow:"fullscreen"},returnFocusRef:u,title:c.name,children:(0,m.jsx)(uj,{attachment:c})})]})}let uI=({row:e,onResourcesAdded:t,owner:n})=>{let[a,r]=(0,x.useState)(!1),[i,s]=(0,x.useState)(null),[o,l]=(0,x.useState)(!1),c=(0,x.useRef)(null),d=async e=>{l(!0);try{let t=await (0,ux.V)(e);s(t),r(!0)}finally{l(!1)}};return"repository"!==e.type?(0,m.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(tP.K,{variant:"invisible",className:(0,_.$)(uN.warningIcon,"float-left"),ref:c,loading:o,"aria-label":"Copilot works best when working with fewer files. Click to choose specific files",onClick:async()=>{await d(e.repositoryId)},icon:M.AlertIcon}),a&&i&&(0,m.jsx)(uu,{isOpen:a,onClose:()=>r(!1),onResourcesAdded:t,owner:n,initialRepo:i,hideBackButton:!0})]})},uE=e=>{let t,n,a,r,i,s,o,l,c,d,u,h,f=(0,p.c)(33),{row:g,onDelete:y,onEdit:_,sizePercentage:v}=e,[b,S]=(0,x.useState)(null),C="";switch(g.type){case"github_pull_request":case"github_issue":C=g.title;break;case"github_file":C=g.filePath;break;case"repository":C=g.nwo;break;case"free_text":case"uploaded_text_file":case"media_content":C=g.name}let j=`Attachment actions: ${C}`;f[0]!==j?(t=(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(tP.K,{"aria-label":j,title:"Attachment actions",icon:M.KebabHorizontalIcon,variant:"invisible"})}),f[0]=j,f[1]=t):t=f[1],f[2]!==g?(n="free_text"===g.type&&(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(tM.l.Item,{"aria-label":`Edit attachment: ${g.id}`,onSelect:()=>S(g),children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.PencilIcon,{})}),"Edit"]})}),f[2]=g,f[3]=n):n=f[3];let N=`Delete attachment: ${g.id}`;return f[4]!==y||f[5]!==g?(a=()=>y(g),f[4]=y,f[5]=g,f[6]=a):a=f[6],f[7]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.TrashIcon,{})}),f[7]=r):r=f[7],f[8]!==N||f[9]!==a?(i=(0,m.jsxs)(tM.l.Item,{"aria-label":N,variant:"danger",onSelect:a,children:[r,"Delete"]}),f[8]=N,f[9]=a,f[10]=i):i=f[10],f[11]!==n||f[12]!==i?(s=(0,m.jsx)(tD.W.Overlay,{align:"end",children:(0,m.jsxs)(tM.l,{children:[n,i]})}),f[11]=n,f[12]=i,f[13]=s):s=f[13],f[14]!==t||f[15]!==s?(o=(0,m.jsx)("div",{className:"d-md-none",children:(0,m.jsxs)(tD.W,{children:[t,s]})}),f[14]=t,f[15]=s,f[16]=o):o=f[16],f[17]!==g?(l="free_text"===g.type&&(0,m.jsx)(tP.K,{onClick:()=>S(g),variant:"invisible","aria-label":"Edit",icon:M.PencilIcon}),f[17]=g,f[18]=l):l=f[18],f[19]!==y||f[20]!==g?(c=(0,m.jsx)(tP.K,{onClick:()=>y(g),variant:"invisible","aria-label":"Delete",icon:M.TrashIcon}),f[19]=y,f[20]=g,f[21]=c):c=f[21],f[22]!==l||f[23]!==c?(d=(0,m.jsxs)("div",{className:"d-none d-md-flex flex-md-row",children:[l,c]}),f[22]=l,f[23]=c,f[24]=d):d=f[24],f[25]!==_||f[26]!==b||f[27]!==v?(u=b&&(0,m.jsx)(up,{sizePercentage:v,resource:b,onSave:_,onClose:()=>S(null)}),f[25]=_,f[26]=b,f[27]=v,f[28]=u):u=f[28],f[29]!==d||f[30]!==u||f[31]!==o?(h=(0,m.jsxs)(m.Fragment,{children:[o,d,u]}),f[29]=d,f[30]=u,f[31]=o,f[32]=h):h=f[32],h},uT=e=>{switch(e.type){case"github_file":return`${e.repositoryId}@${e.filePath}@${e.sha}`;case"github_issue":case"github_pull_request":return e.url;default:return e.id}};try{uw.displayName||(uw.displayName="ReferencesTable")}catch{}try{uI.displayName||(uI.displayName="RowSize")}catch{}try{uE.displayName||(uE.displayName="RowActions")}catch{}var uk=n(69410),uR=n(79684),uA=n(11607);let uL={container:"HeaderV2-module__container--g3GnP",leftControls:"HeaderV2-module__leftControls--zItZp",rightControls:"HeaderV2-module__rightControls--gpJeG",hideOnMobile:"HeaderV2-module__hideOnMobile--bzXz8"};function uD(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,y,_=(0,p.c)(43),{showPreviewPaneButton:v,conversationSpecificItems:b,customButtons:S}=e,C=void 0===v||v,j=(0,q.Pk)(),{selectedThreadID:N,threads:w,messagesLoading:I,messages:E}=j,T=(0,q.pn)(uP);_[0]!==T?(t=(0,eI.CB)(T),_[0]=T,_[1]=t):t=_[1];let k=t,R=oG(),A=oQ(),L=(0,oq.G)(),D=(0,nv.JB)(j.customCopilots,L),P=(0,nb.BV)(),O=(0,nv.mM)(),B=(0,n_.v)(),[,F,U]=(0,lI.B)(!1);_[2]!==N||_[3]!==w?(n=w.get(N),_[2]=N,_[3]=w,_[4]=n):n=_[4];let V=n,W=!!(R?A:V?.sharedID),{updateGlobalNavigationBreadcrumbs:G}=l$();_[5]!==G?(a=()=>{G()},_[5]=G,_[6]=a):a=_[6],_[7]!==L||_[8]!==G?(r=[G,L],_[7]=L,_[8]=G,_[9]=r):r=_[9],(0,x.useEffect)(a,r),_[10]!==R||_[11]!==A||_[12]!==N?(i=()=>N?R&&A?`/copilot/share/${A}`:`/copilot/c/${N}`:eI.Jz,_[10]=R,_[11]=A,_[12]=N,_[13]=i):i=_[13];let H=i;B?.id,s=O&&!L||!N&&!B?.id&&!O;let z=(0,x.useRef)(null),[Q,K]=(0,x.useState)(null),{canShareThread:J}=(0,$.X)(),Y="loaded"===I.state,X=J&&!R&&N&&!L&&Y,Z=(0,eI.Q7)(E).length>0;_[14]!==E?(o=(0,eI.UM)(E),_[14]=E,_[15]=o):o=_[15];let ee=o,et=Z||ee;_[16]!==et||_[17]!==K?(l=()=>{et||K("share")},_[16]=et,_[17]=K,_[18]=l):l=_[18];let en=l;D?T?(0,g.D)(`${k} \xb7 ${D.name} \xb7 GitHub Copilot Spaces`):(0,g.D)(`${D.name} \xb7 GitHub Copilot Spaces`):O?(0,g.D)("Spaces \xb7 GitHub Copilot"):R?(0,g.D)("Shared conversation \xb7 GitHub Copilot"):(0,g.D)(`${k} \xb7 GitHub Copilot`);let ea=!s&&(0,m.jsx)("div",{className:uL.leftControls,children:(0,m.jsx)(uR.B,{children:P&&L?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(uR.B.Item,{href:eI.VR,children:"Spaces"}),N||!b?(0,m.jsx)(uR.B.Item,{href:D?(0,nv.Cb)(D):eI.VR,children:D?.name||""}):(0,m.jsx)(uR.B.ItemWithMenu,{menuOverlay:(0,m.jsx)(tD.W.Overlay,{children:(0,m.jsx)(tM.l,{children:b})}),children:D?.name||""}),N&&(0,m.jsx)(uR.B.ItemWithMenu,{menuOverlay:(0,m.jsx)(tD.W.Overlay,{children:(0,m.jsx)(tM.l,{children:(0,m.jsx)(lb.V,{onOpenDialog:K,isShared:W,showShare:!L,hideShareOnDesktop:!0})})}),children:k})]}):B?(0,m.jsx)(uR.B.Item,{href:`/copilot/${B.id}`,children:B.displayName||"Plugin"}):N&&!R?(0,m.jsx)(uR.B.ItemWithMenu,{menuOverlay:(0,m.jsx)(tD.W.Overlay,{children:(0,m.jsx)(tM.l,{children:(0,m.jsx)(lb.V,{onOpenDialog:K,isShared:W,showShare:!L,hideShareOnDesktop:!0})})}),children:k}):R?(0,m.jsx)(uR.B.Item,{href:H(),children:k}):null})});return _[19]!==W||_[20]!==et||_[21]!==en||_[22]!==X?(c=X&&(0,m.jsx)("div",{className:uL.hideOnMobile,children:(0,m.jsx)(uA.$,{icon:W?(0,m.jsx)(M.UnlockIcon,{}):(0,m.jsx)(M.LockIcon,{}),disabled:et,onClick:en,children:"Share"})}),_[19]=W,_[20]=et,_[21]=en,_[22]=X,_[23]=c):c=_[23],_[24]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)(lW,{}),_[24]=d):d=_[24],_[25]!==C?(u=C&&(0,m.jsx)(uM,{}),_[25]=C,_[26]=u):u=_[26],_[27]!==Q||_[28]!==N||_[29]!==K||_[30]!==F||_[31]!==U||_[32]!==k?(h=N&&(0,m.jsx)(lb.p,{visibleDialog:Q,onClose:()=>{(0,av.flushSync)(()=>K(null)),z.current?.focus()},threadName:k,threadId:N,selectedThreadId:N,onStartLoading:F,onFinishLoading:U,returnFocusRef:z}),_[27]=Q,_[28]=N,_[29]=K,_[30]=F,_[31]=U,_[32]=k,_[33]=h):h=_[33],_[34]!==S||_[35]!==c||_[36]!==u||_[37]!==h?(f=(0,m.jsxs)("div",{className:uL.rightControls,children:[c,d,S,u,h]}),_[34]=S,_[35]=c,_[36]=u,_[37]=h,_[38]=f):f=_[38],_[39]!==uL.container||_[40]!==ea||_[41]!==f?(y=(0,m.jsxs)("div",{className:uL.container,children:[ea,f]}),_[39]=uL.container,_[40]=ea,_[41]=f,_[42]=y):y=_[42],y}function uP(e){return(0,aE.W)(e)}function uM(){let e,t=(0,p.c)(4),n=(0,nu.tZ)(),{openPreviewPane:a}=(0,nu.xx)(),r=na();return t[0]!==r||t[1]!==a||t[2]!==n?(e=!n&&(0,m.jsx)(uA.$,{iconOnly:!0,icon:(0,m.jsx)(M.SidebarExpandIcon,{}),"aria-label":"Open workbench",onClick:()=>{(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),a()},ref:r}),t[0]=r,t[1]=a,t[2]=n,t[3]=e):e=t[3],e}try{uD.displayName||(uD.displayName="Header")}catch{}try{uM.displayName||(uM.displayName="PreviewPaneButton")}catch{}var uO=n(69948);let uB=(e,t)=>{let n,a,r,i,s,o,l,c,d,u,m,h,f,g,y,_,x,v=(0,p.c)(44),b=(0,uy.jE)(),S=(0,nv.Cb)({id:t,owner:e}),C=`${S}/permissions`;v[0]!==C?(n={queryKey:["copilotSpaceCollaborators",C],queryFn:async()=>{let e=await (0,tl.lS)(C),t=await e.json();if(!e.ok)throw t.errorMessages;return t}},v[0]=C,v[1]=n):n=v[1];let{data:j,isLoading:N}=(0,ai.I)(n);v[2]!==C?(a=async e=>{let t=await (0,tl.lS)(C,{method:"POST",body:{permission:e}}),n=await t.json();if(!t.ok)throw n.errorMessages;return n},v[2]=C,v[3]=a):a=v[3],v[4]!==C||v[5]!==b?(r=()=>b.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]}),v[4]=C,v[5]=b,v[6]=r):r=v[6],v[7]!==a||v[8]!==r?(i={mutationFn:a,onSuccess:r},v[7]=a,v[8]=r,v[9]=i):i=v[9];let w=(0,ar.n)(i);v[10]!==w?({mutateAsync:s,...o}=w,v[10]=w,v[11]=s,v[12]=o):(s=v[11],o=v[12]),v[13]!==C?(l=async e=>{let t=await (0,tl.lS)(C,{method:"PUT",body:{permission:e}}),n=await t.json();if(!t.ok)throw n.errorMessages;return n},v[13]=C,v[14]=l):l=v[14],v[15]!==C||v[16]!==b?(c=()=>b.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]}),v[15]=C,v[16]=b,v[17]=c):c=v[17],v[18]!==l||v[19]!==c?(d={mutationFn:l,onSuccess:c},v[18]=l,v[19]=c,v[20]=d):d=v[20];let I=(0,ar.n)(d);v[21]!==I?({mutateAsync:u,...m}=I,v[21]=I,v[22]=u,v[23]=m):(u=v[22],m=v[23]),v[24]!==C?(h=async e=>{let t=await (0,tl.lS)(C,{method:"DELETE",body:{permission:e}});if(!t.ok)throw(await t.json()).errorMessages},v[24]=C,v[25]=h):h=v[25],v[26]!==C||v[27]!==b?(f=()=>b.invalidateQueries({queryKey:["copilotSpaceCollaborators",C]}),v[26]=C,v[27]=b,v[28]=f):f=v[28],v[29]!==f||v[30]!==h?(g={mutationFn:h,onSuccess:f},v[29]=f,v[30]=h,v[31]=g):g=v[31];let E=(0,ar.n)(g);return v[32]!==E?({mutateAsync:y,..._}=E,v[32]=E,v[33]=y,v[34]=_):(y=v[33],_=v[34]),v[35]!==s||v[36]!==o||v[37]!==j||v[38]!==N||v[39]!==y||v[40]!==_||v[41]!==u||v[42]!==m?(x={collaborators:j,isLoading:N,addCollaborator:s,updateCollaborator:u,removeCollaborator:y,isAddPending:o.isPending,isUpdatePending:m.isPending,isRemovePending:_.isPending,...o,...m,..._},v[35]=s,v[36]=o,v[37]=j,v[38]=N,v[39]=y,v[40]=_,v[41]=u,v[42]=m,v[43]=x):x=v[43],x};function uF(e){if("user"in e)return{...e.user,actor_type:"user"};if("team"in e)return{...e.team,actor_type:"team"};throw Error("suggestion has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?")}let uU={copyLinkSection:"SpaceCollaborators-module__copyLinkSection--G8YCd",spacesSuggestionsList:"SpaceCollaborators-module__spacesSuggestionsList--oqwht"};function u$(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,_=(0,p.c)(41),{copilotSpace:v,onError:b}=e,[S,C]=(0,x.useState)(""),[j,N]=(0,x.useState)(!1),w=(0,x.useRef)(null),I=eE.W.copilotSpacesReadAccessToUserOwnedSpaces;_[0]!==S?(t=S.startsWith("@")?S.trim().slice(1):S.trim(),_[0]=S,_[1]=t):t=_[1];let E=(0,x.useDeferredValue)(t),T=I&&!v.ownerIsOrg;_[2]!==v.id||_[3]!==v.owner||_[4]!==E||_[5]!==T?(n={input:{query:E,spaceOwner:v.owner,spaceId:v.id,allUsers:T}},_[2]=v.id,_[3]=v.owner,_[4]=E,_[5]=T,_[6]=n):n=_[6];let{data:k,isLoading:R}=(e=>{let t,n,a,r,i,s,o=(0,p.c)(17),{input:l}=e;o[0]!==l?(t=["suggestedSpaceCollaborators",l],o[0]=l,o[1]=t):t=o[1],o[2]!==l.allUsers||o[3]!==l.query||o[4]!==l.spaceId||o[5]!==l.spaceOwner?(n=async()=>{let e=(0,nv.Cb)({id:l.spaceId,owner:l.spaceOwner}),t=l.allUsers?`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}&all_users=true`:`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}`,n=await (0,tl.lS)(t);if(!n.ok)throw Error("Failed to fetch suggested collaborators");return(await n.json()).suggestions.map(uF)},o[2]=l.allUsers,o[3]=l.query,o[4]=l.spaceId,o[5]=l.spaceOwner,o[6]=n):n=o[6];let c=!!l.query;o[7]!==t||o[8]!==n||o[9]!==c?(a={queryKey:t,queryFn:n,enabled:c},o[7]=t,o[8]=n,o[9]=c,o[10]=a):a=o[10];let d=(0,ai.I)(a);return o[11]!==d?({data:r,...i}=d,o[11]=d,o[12]=r,o[13]=i):(r=o[12],i=o[13]),o[14]!==r||o[15]!==i?(s={data:r,...i},o[14]=r,o[15]=i,o[16]=s):s=o[16],s})(n),{collaborators:A,addCollaborator:L,error:D,isLoading:P}=uB(v.owner,v.id);_[7]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{let e=function(e){w.current&&!w.current.contains(e.target)&&N(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},r=[],_[7]=a,_[8]=r):(a=_[7],r=_[8]),(0,x.useEffect)(a,r),_[9]!==S||_[10]!==k||_[11]!==R?(i=()=>{N(!!(S&&!R&&k&&k.length>0))},s=[S,k,R],_[9]=S,_[10]=k,_[11]=R,_[12]=i,_[13]=s):(i=_[12],s=_[13]),(0,x.useEffect)(i,s),_[14]!==L||_[15]!==A||_[16]!==b?(o=async function(e){if(A?.some(t=>t.actor_id===e.id&&t.actor_type===e.actor_type)){C(""),N(!1);return}try{await L({actor_id:e.id,role_name:"custom_copilot_reader",actor_type:e.actor_type}),C(""),N(!1)}catch{b({base:"An error occurred while adding a collaborator."})}},_[14]=L,_[15]=A,_[16]=b,_[17]=o):o=_[17];let M=o;_[18]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"People with access"}),_[18]=l):l=_[18],_[19]===Symbol.for("react.memo_cache_sentinel")?(c={position:"relative"},_[19]=c):c=_[19];let O=v.ownerIsOrg?`Search people within ${v.owner}`:"Search for any GitHub user";_[20]===Symbol.for("react.memo_cache_sentinel")?(d=e=>C(e.target.value),_[20]=d):d=_[20];let B=v.ownerIsOrg?"Search for users or teams to share this space with":"Search for any GitHub user to share this space with";return _[21]!==S||_[22]!==O||_[23]!==B?(u=(0,m.jsx)(om.A,{block:!0,placeholder:O,value:S,onChange:d,className:"color-fg-default","aria-label":B}),_[21]=S,_[22]=O,_[23]=B,_[24]=u):u=_[24],_[25]!==M||_[26]!==j||_[27]!==k?(h=j&&k&&(0,m.jsx)("div",{ref:w,children:(0,m.jsx)(uz,{items:k,onSelect:M})}),_[25]=M,_[26]=j,_[27]=k,_[28]=h):h=_[28],_[29]!==u||_[30]!==h?(f=(0,m.jsxs)(Y.B,{direction:"vertical",gap:"condensed",align:"start",children:[l,(0,m.jsxs)("div",{className:uU.copyLinkSection,style:c,children:[u,h]})]}),_[29]=u,_[30]=h,_[31]=f):f=_[31],_[32]!==A||_[33]!==D||_[34]!==P||_[35]!==v||_[36]!==b?(g=P?(0,m.jsx)("div",{className:"d-flex flex-justify-center p-2",children:(0,m.jsx)(nJ.A,{})}):D?(0,m.jsx)(Q.l,{variant:"critical",title:"There was a problem with loading this Space's collaborators."}):A&&A.length>0?(0,m.jsx)(Y.B,{direction:"vertical",gap:"condensed",align:"start",children:A.map(e=>(0,m.jsx)(uV,{actor:e,copilotSpace:v,onError:b},`${e.actor_type}-${e.actor_id}`))}):(0,m.jsx)("span",{className:"text-small color-fg-muted p-2",children:"This Space isn't shared with anyone yet"}),_[32]=A,_[33]=D,_[34]=P,_[35]=v,_[36]=b,_[37]=g):g=_[37],_[38]!==f||_[39]!==g?(y=(0,m.jsxs)(m.Fragment,{children:[f,g]}),_[38]=f,_[39]=g,_[40]=y):y=_[40],y}function uV(e){let t,n,a,r,i,s,o,l,c,d=(0,p.c)(26),{actor:u,copilotSpace:h,onError:f}=e,g="user"===u.actor_type?u.display_login:u.slug,y="team"===u.actor_type;return d[0]!==u.avatar_url||d[1]!==y?(t=(0,m.jsx)(rI.r,{src:u.avatar_url,className:"mr-2",square:y,size:32}),d[0]=u.avatar_url,d[1]=y,d[2]=t):t=d[2],d[3]!==g?(n=(0,m.jsx)("b",{children:g}),d[3]=g,d[4]=n):n=d[4],d[5]!==g||d[6]!==n?(a=(0,m.jsx)("span",{className:"ml-1",children:(0,m.jsx)(rq.A,{maxWidth:"230px",title:g,inline:!0,children:n})}),d[5]=g,d[6]=n,d[7]=a):a=d[7],d[8]!==u.name?(r=(0,m.jsx)("p",{children:u.name}),d[8]=u.name,d[9]=r):r=d[9],d[10]!==u.name||d[11]!==r?(i=(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:(0,m.jsx)(rq.A,{maxWidth:"230px",title:u.name,inline:!0,children:r})}),d[10]=u.name,d[11]=r,d[12]=i):i=d[12],d[13]!==a||d[14]!==i?(s=(0,m.jsxs)("div",{className:"d-flex flex-column mt-1",children:[a,i]}),d[13]=a,d[14]=i,d[15]=s):s=d[15],d[16]!==t||d[17]!==s?(o=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[t,s]}),d[16]=t,d[17]=s,d[18]=o):o=d[18],d[19]!==u||d[20]!==h||d[21]!==f?(l=(0,m.jsx)(uH,{actor:u,onError:f,copilotSpace:h}),d[19]=u,d[20]=h,d[21]=f,d[22]=l):l=d[22],d[23]!==o||d[24]!==l?(c=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[o,l]}),d[23]=o,d[24]=l,d[25]=c):c=d[25],c}let uq=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"}],uW=[{text:"Viewer",value:"custom_copilot_reader"}],uG={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view"};function uH({actor:e,onError:t,copilotSpace:n}){let[a,r]=(0,x.useState)(!1),i=(0,x.useRef)(null),s=uq.find(t=>t.value===e.role),{updateCollaborator:o,removeCollaborator:l,isUpdatePending:c,isRemovePending:d}=uB(n.owner,n.id);async function u(n){try{await o({actor_id:e.actor_id,role_name:n,actor_type:e.actor_type})}catch{t({base:"An error occurred while updating an actor's permission level."})}finally{r(!1)}}async function p(){try{await l({actor_id:e.actor_id,actor_type:e.actor_type})}catch{t({base:"An error occurred while removing an actor's permissions."})}finally{r(!1)}}let h=n.ownerIsOrg?uq:uW;return(0,m.jsxs)(tD.W,{onOpenChange:r,anchorRef:i,open:a,children:[(0,m.jsx)(tD.W.Button,{disabled:e.disabled,loading:c||d,variant:"invisible",className:"text-small",ref:i,onClick:()=>r(!0),"aria-label":`Change role for ${e.name}`,children:(0,m.jsx)(rq.A,{title:s?.text||"",inline:!0,children:s?.text})}),(0,m.jsx)(tD.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,m.jsxs)(tM.l,{selectionVariant:"single","aria-label":`Role options for ${e.name}`,children:[h.map(e=>(0,m.jsxs)(tM.l.Item,{selected:e.value===s?.value,onSelect:()=>u(e.value),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:e.text})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:uG[e.value]})})]},e.value)),(0,m.jsx)(tM.l.Divider,{}),(0,m.jsxs)(tM.l.Item,{variant:"danger",onSelect:()=>p(),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:"Remove"})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:"Loses access to this content"})})]},"remove")]})})]})}function uz(e){let t,n,a=(0,p.c)(7),{items:r,onSelect:i}=e;if(a[0]!==r||a[1]!==i){let e;a[3]!==i?(e=e=>{let t=`${e.actor_type}-${e.id}`,n="user"===e.actor_type?e.login:e.slug;return(0,m.jsxs)(tM.l.Item,{onSelect:()=>i(e),role:"option",children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(rI.r,{src:e.avatarUrl,square:"team"===e.actor_type,size:20})}),(0,m.jsx)("span",{className:"text-bold",children:n}),e.name&&(0,m.jsx)(tM.l.Description,{children:e.name})]},t)},a[3]=i,a[4]=e):e=a[4],t=r.map(e),a[0]=r,a[1]=i,a[2]=t}else t=a[2];return a[5]!==t?(n=(0,m.jsx)("div",{role:"dialog","aria-label":"Suggested collaborators",className:uU.spacesSuggestionsList,children:(0,m.jsx)(tM.l,{children:t})}),a[5]=t,a[6]=n):n=a[6],n}try{u$.displayName||(u$.displayName="SpaceCollaborators")}catch{}try{uV.displayName||(uV.displayName="SpaceCollaboratorRow")}catch{}try{uH.displayName||(uH.displayName="ActorRoleSelect")}catch{}try{uz.displayName||(uz.displayName="SpacesSuggestionsList")}catch{}let uQ={spaceVisibilityDialog:"SpaceSharingDialog-module__spaceVisibilityDialog--q8XMu",errorBanner:"SpaceSharingDialog-module__errorBanner--SkBp1",visibilityDropdown:"SpaceSharingDialog-module__visibilityDropdown--HMESi",visibilityChoice:"SpaceSharingDialog-module__visibilityChoice--Z75rm",visibilityIcon:"SpaceSharingDialog-module__visibilityIcon--KK57C",attentionIcon:"SpaceSharingDialog-module__attentionIcon--lZ9Sq",accentIcon:"SpaceSharingDialog-module__accentIcon--q8VZ5",footerText:"SpaceSharingDialog-module__footerText--TJavK"};function uK(e){let t,n,a,r,i,s,o,l,c,d,u,h=(0,p.c)(23),{closeDialog:f,customCopilotId:g,userOwned:y}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t={},h[0]=t):t=h[0];let[_,v]=(0,x.useState)(t),[b,S]=(0,x.useState)(!1),C=(0,x.useRef)(null),j=eE.W.copilotSpacesReadAccessToUserOwnedSpaces&&void 0!==y&&y,N=()=>(0,m.jsx)(u0,{copySharedLink:w,copied:b,isSpaceLoading:T,copilotSpace:k});h[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>()=>{C.current&&(clearTimeout(C.current),C.current=null)},a=[],h[1]=n,h[2]=a):(n=h[1],a=h[2]),(0,x.useEffect)(n,a),r=`${eg.fV.origin}${(0,nv.Cb)(e.customCopilotId)}`;let w=()=>{(0,lk.D)(r),S(!0),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{S(!1),C.current=null},2e3)},{isPending:I,data:E}=(0,nb.Ao)(g),T=I,k=E;return h[3]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"fullscreen"},h[3]=i):i=h[3],h[4]!==_.base||h[5]!==_.visibility?(s=_.base||_.visibility?(0,m.jsx)(Q.l,{hideTitle:!0,title:"Unable to update space",description:_.visibility||_.base,"aria-label":"Critical",variant:"critical",className:uQ.errorBanner}):null,h[4]=_.base,h[5]=_.visibility,h[6]=s):s=h[6],h[7]!==k?(o=k&&(0,m.jsx)(u$,{copilotSpace:k,onError:v}),h[7]=k,h[8]=o):o=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)(tM.l.Divider,{}),h[9]=l):l=h[9],h[10]!==k||h[11]!==T||h[12]!==e||h[13]!==j?(c=j?(0,m.jsx)(u3,{copilotSpace:k,isSpaceLoading:T,onError:v}):(0,m.jsxs)(Y.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"Settings"}),(0,m.jsx)(uJ,{onError:v,copilotSpace:k,isSpaceLoading:T,...e})]}),h[10]=k,h[11]=T,h[12]=e,h[13]=j,h[14]=c):c=h[14],h[15]!==c||h[16]!==o?(d=(0,m.jsxs)(Y.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[o,l,c]}),h[15]=c,h[16]=o,h[17]=d):d=h[17],h[18]!==f||h[19]!==N||h[20]!==d||h[21]!==s?(u=(0,m.jsxs)(nK.l,{position:i,title:"Share this space",renderFooter:N,onClose:f,className:uQ.spaceVisibilityDialog,width:"large","aria-label":"Share this space",children:[s,d]}),h[18]=f,h[19]=N,h[20]=d,h[21]=s,h[22]=u):u=h[22],u}function uJ(e){let t,n,a,r,i,s,o,l,c,d,u,h,f=(0,p.c)(36),{copilotSpace:g,isSpaceLoading:y,onError:_}=e,{data:v,isLoading:b,error:S}=(0,nb.Tx)(g?.owner||"",g?.id??-1);if(f[0]!==g||f[1]!==y||f[2]!==b||f[3]!==_||f[4]!==v?(t=()=>{y||b||g&&v||_({visibility:"Could not load your space's visibility settings"})},n=[y,b,g,v,_],f[0]=g,f[1]=y,f[2]=b,f[3]=_,f[4]=v,f[5]=t,f[6]=n):(t=f[5],n=f[6]),(0,x.useEffect)(t,n),y){let e;return f[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),f[7]=e):e=f[7],e}if(!g){let e;return f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),f[8]=e):e=f[8],e}let C=g.owner,j=v?.memberCount;return f[9]!==g.ownerAvatar?(a=(0,m.jsx)(rI.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),f[9]=g.ownerAvatar,f[10]=a):a=f[10],f[11]!==g.ownerDisplayName?(r=(0,m.jsx)("b",{children:g.ownerDisplayName}),f[11]=g.ownerDisplayName,f[12]=r):r=f[12],f[13]!==g.ownerDisplayName||f[14]!==r?(i=(0,m.jsx)(rq.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:r}),f[13]=g.ownerDisplayName,f[14]=r,f[15]=i):i=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),f[16]=s):s=f[16],f[17]!==i?(o=(0,m.jsxs)("span",{className:"ml-1",children:[i,s]}),f[17]=i,f[18]=o):o=f[18],f[19]!==S||f[20]!==b||f[21]!==j||f[22]!==C?(l=C&&(0,m.jsxs)(m.Fragment,{children:[!b&&null!==j&&(0,m.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[j," ",1===j?"person":"people"]}),(b||S||null===j)&&(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),f[19]=S,f[20]=b,f[21]=j,f[22]=C,f[23]=l):l=f[23],f[24]!==o||f[25]!==l?(c=(0,m.jsxs)("div",{className:"d-flex flex-column",children:[o,l]}),f[24]=o,f[25]=l,f[26]=c):c=f[26],f[27]!==a||f[28]!==c?(d=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[a,c]}),f[27]=a,f[28]=c,f[29]=d):d=f[29],f[30]!==g||f[31]!==_?(u=(0,m.jsx)(uZ,{onError:_,copilotSpace:g}),f[30]=g,f[31]=_,f[32]=u):u=f[32],f[33]!==d||f[34]!==u?(h=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[d,u]}),f[33]=d,f[34]=u,f[35]=h):h=f[35],h}let uY=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"},{text:"No access",value:"none"}],uX={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view",none:"Hidden from your organization"};function uZ({copilotSpace:e,onError:t}){let[n,a]=(0,x.useState)(!1),r=(0,x.useRef)(null),i=uY.find(t=>t.value===e.baseRole),{upsertCopilotSpace:s,isPending:o}=(0,dF.$)(e);async function l(e){if(!o)try{await s({baseRole:e})}catch{t({base:"An error occurred while updating your space's base role."})}finally{a(!1)}}return e.adminable?(0,m.jsxs)(tD.W,{onOpenChange:a,anchorRef:r,open:n,children:[(0,m.jsx)(tD.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:r,onClick:()=>a(!0),children:(0,m.jsx)(rq.A,{title:i?.text||"",inline:!0,children:i?.text})}),(0,m.jsx)(tD.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,m.jsx)(tM.l,{selectionVariant:"single",children:uY.map(e=>(0,m.jsxs)(tM.l.Item,{selected:e.value===i?.value,onSelect:()=>l(e.value),children:[(0,m.jsx)("span",{className:"text-medium",children:(0,m.jsx)("b",{children:e.text})}),(0,m.jsx)("span",{className:"text-small color-fg-muted",children:(0,m.jsx)("p",{className:"m-0",children:uX[e.value]})})]},e.value))})})]}):(0,m.jsx)("div",{children:(0,m.jsx)(rq.A,{title:i?.text||"",className:"text-small text-light",children:i?.text})})}function u0(e){let t,n,a,r,i,s=(0,p.c)(12),{copySharedLink:o,copied:l,isSpaceLoading:c,copilotSpace:d}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)",borderTop:"1px solid var(--borderColor-muted)",padding:"var(--base-size-12)"},s[0]=t):t=s[0],s[1]!==d?.ownerIsOrg?(n=!d?.ownerIsOrg&&(0,m.jsxs)("div",{className:uQ.footerText,children:[(0,m.jsx)(M.InfoIcon,{}),(0,m.jsx)("span",{children:"Viewers need content access to all content."})]}),s[1]=d?.ownerIsOrg,s[2]=n):n=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(a={minWidth:"90px"},s[3]=a):a=s[3],s[4]!==l||s[5]!==d||s[6]!==o||s[7]!==c?(r=(0,m.jsx)("div",{style:a,className:"d-flex flex-items-center gap-2",children:l?(0,m.jsx)(eU.Q,{className:"color-fg-success",disabled:c||!d,children:"Link copied"}):(0,m.jsx)(eU.Q,{onClick:o,leadingVisual:M.LinkIcon,disabled:c||!d,children:"Copy link"})}),s[4]=l,s[5]=d,s[6]=o,s[7]=c,s[8]=r):r=s[8],s[9]!==n||s[10]!==r?(i=(0,m.jsxs)(nK.l.Footer,{style:t,className:"color-fg-muted flex-items-center flex-justify-between text-small",children:[n,r]}),s[9]=n,s[10]=r,s[11]=i):i=s[11],i}let u1={text:"Restricted",value:"none",description:"Only people with access can open the link",icon:M.LockIcon,color:"attention"},u2=[u1,{text:"Anyone with link",value:"custom_copilot_reader",description:"Everyone with access to the resources can access the link",icon:M.GlobeIcon,color:"accent"}];function u3({copilotSpace:e,isSpaceLoading:t,onError:n}){let[a,r]=(0,x.useState)(!1),i=(0,x.useRef)(null),s=u2.find(t=>t.value===e?.baseRole)??u1,{upsertCopilotSpace:o,isPending:l}=(0,dF.$)(e);async function c(e){if(!l)try{await o({baseRole:e})}catch{n({base:"An error occurred while updating your space's visibility."})}finally{r(!1)}}let d=s.icon;return t?(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}):e?(0,m.jsxs)(Y.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"General access"}),(0,m.jsx)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:(0,m.jsxs)("div",{className:uQ.visibilityChoice,children:[(0,m.jsx)("div",{className:(0,_.$)(uQ.visibilityIcon,"accent"===s.color?uQ.accentIcon:uQ.attentionIcon),children:(0,m.jsx)(d,{size:16})}),(0,m.jsxs)("div",{className:"d-flex flex-column",children:[(0,m.jsxs)(tD.W,{onOpenChange:r,anchorRef:i,open:a,children:[(0,m.jsx)(tD.W.Button,{loading:l,variant:"invisible",className:uQ.visibilityDropdown,ref:i,onClick:()=>r(!0),disabled:!e.adminable,children:s.text}),(0,m.jsx)(tD.W.Overlay,{side:"outside-top",align:"start",width:"small",children:(0,m.jsx)(tM.l,{selectionVariant:"single",children:u2.map(t=>{let n=t.icon;return(0,m.jsxs)(tM.l.Item,{selected:t.value===e.baseRole,onSelect:()=>c(t.value),children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(n,{})}),(0,m.jsx)("div",{className:"d-flex flex-column",children:(0,m.jsx)("span",{className:"text-medium",children:t.text})})]},t.value)})})})]}),(0,m.jsx)("span",{className:"text-small color-fg-muted p-1",children:s.description})]})]})})]}):(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."})}try{uK.displayName||(uK.displayName="SpaceSharingDialog")}catch{}try{uJ.displayName||(uJ.displayName="VisibilitySettings")}catch{}try{uZ.displayName||(uZ.displayName="BaseRoleSelect")}catch{}try{u0.displayName||(u0.displayName="CopilotSpaceSharingDialogFooter")}catch{}try{u3.displayName||(u3.displayName="UserOwnedVisibilitySettings")}catch{}let u4={spaceVisibilityDialog:"SpaceVisibilityDialog-module__spaceVisibilityDialog--LEulL",copyLinkSection:"SpaceVisibilityDialog-module__copyLinkSection--kTNnZ",copyLinkButtonContainer:"SpaceVisibilityDialog-module__copyLinkButtonContainer--IanBL",copyLinkButton:"SpaceVisibilityDialog-module__copyLinkButton--hj8M_",copiedLinkButton:"SpaceVisibilityDialog-module__copiedLinkButton--SUG4S",dialogFooterText:"SpaceVisibilityDialog-module__dialogFooterText--PyVl_",errorBanner:"SpaceVisibilityDialog-module__errorBanner--qn9fS"};function u5(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,v,b,S,C=(0,p.c)(43),{closeDialog:j,customCopilotId:N}=e;C[0]===Symbol.for("react.memo_cache_sentinel")?(t={},C[0]=t):t=C[0];let[w,I]=(0,x.useState)(t),[E,T]=(0,x.useState)(!1),k=(0,x.useRef)(null);C[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>()=>{k.current&&(clearTimeout(k.current),k.current=null)},a=[],C[1]=n,C[2]=a):(n=C[1],a=C[2]),(0,x.useEffect)(n,a),r=`${eg.fV.origin}${(0,nv.Cb)(e.customCopilotId)}`,C[3]!==r?(i=()=>{(0,lk.D)(r),T(!0),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{T(!1),k.current=null},2e3)},C[3]=r,C[4]=i):i=C[4];let R=i,{data:A,isLoading:L}=(0,nb.jS)(!0);C[5]!==N||C[6]!==A?(s=A?.find(e=>(0,nv.UG)(e,N)),C[5]=N,C[6]=A,C[7]=s):s=C[7];let D=s;C[8]!==w.base||C[9]!==w.visibility?(o=w.base||w.visibility?(0,m.jsx)(Q.l,{hideTitle:!0,title:"Unable to update space visibility",description:w.visibility||w.base,"aria-label":"Critical",variant:"critical",className:u4.errorBanner}):null,C[8]=w.base,C[9]=w.visibility,C[10]=o):o=C[10],C[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"Link"}),C[11]=l):l=C[11],C[12]!==r?(c=(0,m.jsx)(om.A,{block:!0,value:r,readOnly:!0,className:"color-fg-muted"}),C[12]=r,C[13]=c):c=C[13],C[14]===Symbol.for("react.memo_cache_sentinel")?(d={position:"relative"},C[14]=d):d=C[14];let P=E?"hidden":"visible";C[15]!==P?(u={visibility:P},C[15]=P,C[16]=u):u=C[16];let O=E?-1:1,B=E?"true":"false",F=L||!D||D?.visibility==="private";return C[17]!==R||C[18]!==u||C[19]!==O||C[20]!==B||C[21]!==F?(h=(0,m.jsx)(eU.Q,{className:u4.copyLinkButton,leadingVisual:M.LinkIcon,variant:"default",onClick:R,style:u,tabIndex:O,"aria-hidden":B,disabled:F,children:"Copy link"}),C[17]=R,C[18]=u,C[19]=O,C[20]=B,C[21]=F,C[22]=h):h=C[22],C[23]!==E?(f=E&&(0,m.jsx)(eU.Q,{variant:"default",className:u4.copiedLinkButton,tabIndex:-1,"aria-hidden":"false",children:"Link copied"}),C[23]=E,C[24]=f):f=C[24],C[25]!==h||C[26]!==f?(g=(0,m.jsxs)("div",{style:d,className:u4.copyLinkButtonContainer,children:[h,f]}),C[25]=h,C[26]=f,C[27]=g):g=C[27],C[28]!==g||C[29]!==c?(y=(0,m.jsxs)(Y.B,{direction:"vertical",gap:"condensed",align:"start",children:[l,(0,m.jsxs)("div",{className:u4.copyLinkSection,children:[c,g]})]}),C[28]=g,C[29]=c,C[30]=y):y=C[30],C[31]===Symbol.for("react.memo_cache_sentinel")?(_=(0,m.jsx)("span",{className:"text-small text-bold color-fg-muted mt-2",children:"Base role"}),C[31]=_):_=C[31],C[32]!==D||C[33]!==L||C[34]!==e?(v=(0,m.jsxs)(Y.B,{direction:"vertical",gap:"condensed",align:"start",children:[_,(0,m.jsx)(u7,{onError:I,copilotSpace:D,isSpaceLoading:L,...e})]}),C[32]=D,C[33]=L,C[34]=e,C[35]=v):v=C[35],C[36]!==y||C[37]!==v?(b=(0,m.jsxs)(Y.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[y,v]}),C[36]=y,C[37]=v,C[38]=b):b=C[38],C[39]!==j||C[40]!==b||C[41]!==o?(S=(0,m.jsxs)(nK.l,{title:"Share this space",renderFooter:u6,onClose:j,className:u4.spaceVisibilityDialog,width:"large",children:[o,b]}),C[39]=j,C[40]=b,C[41]=o,C[42]=S):S=C[42],S}function u6(){return(0,m.jsx)(me,{})}function u7(e){let t,n,a,r,i,s,o,l,c,d,u,h,f=(0,p.c)(36),{copilotSpace:g,isSpaceLoading:y,onError:_}=e,{data:v,isLoading:b,error:S}=(0,nb.Tx)(g?.owner||"",g?.id??-1);if(f[0]!==g||f[1]!==y||f[2]!==b||f[3]!==_||f[4]!==v?(t=()=>{y||b||g&&v||_({visibility:"Could not load your space's visibility settings"})},n=[y,b,g,v,_],f[0]=g,f[1]=y,f[2]=b,f[3]=_,f[4]=v,f[5]=t,f[6]=n):(t=f[5],n=f[6]),(0,x.useEffect)(t,n),y){let e;return f[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),f[7]=e):e=f[7],e}if(!g){let e;return f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),f[8]=e):e=f[8],e}let C=g.owner,j=v?.memberCount;return f[9]!==g.ownerAvatar?(a=(0,m.jsx)(rI.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),f[9]=g.ownerAvatar,f[10]=a):a=f[10],f[11]!==g.ownerDisplayName?(r=(0,m.jsx)("b",{children:g.ownerDisplayName}),f[11]=g.ownerDisplayName,f[12]=r):r=f[12],f[13]!==g.ownerDisplayName||f[14]!==r?(i=(0,m.jsx)(rq.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:r}),f[13]=g.ownerDisplayName,f[14]=r,f[15]=i):i=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),f[16]=s):s=f[16],f[17]!==i?(o=(0,m.jsxs)("span",{className:"ml-1",children:[i,s]}),f[17]=i,f[18]=o):o=f[18],f[19]!==S||f[20]!==b||f[21]!==j||f[22]!==C?(l=C&&(0,m.jsxs)(m.Fragment,{children:[!b&&null!==j&&(0,m.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[j," ",1===j?"person":"people"]}),(b||S||null===j)&&(0,m.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),f[19]=S,f[20]=b,f[21]=j,f[22]=C,f[23]=l):l=f[23],f[24]!==o||f[25]!==l?(c=(0,m.jsxs)("div",{className:"d-flex flex-column",children:[o,l]}),f[24]=o,f[25]=l,f[26]=c):c=f[26],f[27]!==a||f[28]!==c?(d=(0,m.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[a,c]}),f[27]=a,f[28]=c,f[29]=d):d=f[29],f[30]!==g||f[31]!==_?(u=(0,m.jsx)(u9,{onError:_,copilotSpace:g}),f[30]=g,f[31]=_,f[32]=u):u=f[32],f[33]!==d||f[34]!==u?(h=(0,m.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[d,u]}),f[33]=d,f[34]=u,f[35]=h):h=f[35],h}let u8=[{text:"No access",value:"private"},{text:"Read",value:"org_public"}];function u9({copilotSpace:e,onError:t}){let[n,a]=(0,x.useState)(!1),r=(0,x.useRef)(null),i=u8.find(t=>t.value===e.visibility),{upsertCopilotSpace:s,isPending:o}=(0,dF.$)(e);async function l(e){if(!o)try{await s({visibility:e})}catch{t({base:"An error occurred while updating your space's visibility."})}finally{a(!1)}}return e.adminable?(0,m.jsxs)(tD.W,{onOpenChange:a,anchorRef:r,open:n,children:[(0,m.jsx)(tD.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:r,onClick:()=>a(!0),children:(0,m.jsx)(rq.A,{title:i?.text||"",inline:!0,className:"mr-1",children:i?.text})}),(0,m.jsx)(tD.W.Overlay,{side:"outside-bottom",align:"end",children:(0,m.jsx)(tM.l,{selectionVariant:"single",children:u8.map(e=>(0,m.jsx)(tM.l.Item,{selected:e.value===i?.value,onSelect:()=>l(e.value),children:(0,m.jsx)("span",{className:"text-small",children:e.text})},e.value))})})]}):(0,m.jsx)("div",{children:(0,m.jsx)(rq.A,{title:i?.text||"",className:"text-small text-light",children:i?.text})})}function me(){let e,t,n=(0,p.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e={backgroundColor:"var(--bgColor-muted)",borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)"},n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(nK.l.Footer,{style:e,className:"color-fg-muted flex-justify-center text-small p-2",children:(0,m.jsx)("span",{className:u4.dialogFooterText,children:"This space may include private content. Viewers need content access."})}),n[1]=t):t=n[1],t}try{u5.displayName||(u5.displayName="SpaceVisibilityDialog")}catch{}try{u7.displayName||(u7.displayName="VisibilitySettings")}catch{}try{u9.displayName||(u9.displayName="VisibilitySelect")}catch{}try{me.displayName||(me.displayName="CopilotSpaceVisibilityDialogFooter")}catch{}function mt(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y=(0,p.c)(32),{onDelete:_,copilot:v}=e,[b,S]=(0,x.useState)(null),[C,j]=(0,x.useState)(!1),N=(0,x.useRef)(null),w=(0,ef.Zp)(),I=eE.W.spacesPermissionsTabEnabled,E=I?v?.ownerIsOrg&&v?.adminable:v?.ownerIsOrg;y[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{(0,av.flushSync)(()=>S(null)),N.current?.focus()},y[0]=t):t=y[0];let T=t;y[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),T()},y[1]=n):n=y[1];let k=n;y[2]===Symbol.for("react.memo_cache_sentinel")?(a=async e=>{T(),j(!0),await e(),j(!1)},y[2]=a):a=y[2];let R=a;y[3]!==_?(r=async()=>{(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),await R(_)},y[3]=_,y[4]=r):r=y[4];let A=r;y[5]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),S("share")},y[5]=i):i=y[5];let L=i;return y[6]!==C?(s=(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(tP.K,{loading:C,icon:M.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:mn})}),y[6]=C,y[7]=s):s=y[7],y[8]!==v||y[9]!==w?(o=v.editable&&(0,m.jsxs)(tM.l.Item,{onSelect:()=>{(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),w((0,nv.Cb)(v))},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.PencilIcon,{})}),"Edit"]}),y[8]=v,y[9]=w,y[10]=o):o=y[10],y[11]!==E?(l=E&&(0,m.jsxs)(tM.l.Item,{onSelect:L,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.ShareIcon,{})}),"Share"]}),y[11]=E,y[12]=l):l=y[12],y[13]!==v.adminable?(c=v.adminable&&(0,m.jsxs)(tM.l.Item,{variant:"danger",onSelect:()=>{(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),S("delete")},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.TrashIcon,{})}),"Delete"]}),y[13]=v.adminable,y[14]=c):c=y[14],y[15]!==o||y[16]!==l||y[17]!==c?(d=(0,m.jsx)(tD.W.Overlay,{side:"outside-bottom",align:"end",children:(0,m.jsxs)(tM.l,{children:[o,l,c]})}),y[15]=o,y[16]=l,y[17]=c,y[18]=d):d=y[18],y[19]!==d||y[20]!==s?(u=(0,m.jsxs)(tD.W,{anchorRef:N,children:[s,d]}),y[19]=d,y[20]=s,y[21]=u):u=y[21],y[22]!==A||y[23]!==b?(h="delete"===b?(0,m.jsx)(ma,{onCancel:T,onConfirm:A}):null,y[22]=A,y[23]=b,y[24]=h):h=y[24],y[25]!==v||y[26]!==b?(f="share"===b?I?(0,m.jsx)(uK,{closeDialog:k,customCopilotId:v}):(0,m.jsx)(u5,{closeDialog:k,customCopilotId:v}):null,y[25]=v,y[26]=b,y[27]=f):f=y[27],y[28]!==u||y[29]!==h||y[30]!==f?(g=(0,m.jsxs)(m.Fragment,{children:[u,h,f]}),y[28]=u,y[29]=h,y[30]=f,y[31]=g):g=y[31],g}function mn(){return(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})}let ma=({onConfirm:e,onCancel:t})=>{let[n,a]=(0,x.useState)(!1),r=async()=>{a(!0),(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"});try{await e()}finally{a(!1)}};return(0,m.jsx)(uO.K,{title:"Delete space",onClose:async e=>{n||("confirm"===e?await r():((0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),t()))},confirmButtonContent:n?(0,m.jsx)(nJ.A,{size:"small"}):"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."})};try{mt.displayName||(mt.displayName="CopilotSpacesMenu")}catch{}try{ma.displayName||(ma.displayName="DeleteDialog")}catch{}let mr={starButton:"SpacesHeader-module__starButton--RT51O"};var mi=n(44956);function ms({copilotSpace:e,onClose:t,onSaved:n,returnFocusRef:a,maxDescriptionLength:r}){let{upsertCopilotSpace:i,isPending:s}=(0,dF.$)(e),[o,l]=(0,x.useState)(e.description??""),[c,d]=(0,x.useState)(null);async function u(){try{let e=await i({description:o});n?.(e),t()}catch(e){e instanceof Error?d(e.message):d("Failed to save description")}}function p(){l(e.description??""),t()}return(0,m.jsx)(nK.l,{title:"Description",onClose:p,returnFocusRef:a,position:{narrow:"fullscreen"},renderBody:()=>(0,m.jsxs)("div",{className:"p-3",children:[c&&(0,m.jsx)(Q.l,{variant:"critical",title:c,className:"mb-2"}),(0,m.jsxs)(oc.A,{children:[(0,m.jsx)(oc.A.Label,{visuallyHidden:!0,children:"Description"}),(0,m.jsx)(dk.Ay,{block:!0,value:o,onChange:e=>l(e.target.value),placeholder:"Describe what this space is for",resize:"vertical",rows:5}),(0,m.jsx)(mo,{text:o,promptCharLimit:r})]})]}),renderFooter:()=>(0,m.jsx)(mi.m,{onCancel:p,onSave:u,isLoading:s,loadingAnnouncement:"Saving description"})})}function mo(e){let t,n,a,r,i=(0,p.c)(10),{text:s,promptCharLimit:o}=e,l=s.length>o;i[0]!==s.length?(t=s.length.toLocaleString(),i[0]=s.length,i[1]=t):t=i[1],i[2]!==o?(n=o.toLocaleString(),i[2]=o,i[3]=n):n=i[3],i[4]!==t||i[5]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[t," / ",n," characters"]}),i[4]=t,i[5]=n,i[6]=a):a=i[6];let c=a;return i[7]!==c||i[8]!==l?(r=l?(0,m.jsx)(oc.A.Validation,{variant:"error",children:c}):(0,m.jsx)(oc.A.Caption,{children:c}),i[7]=c,i[8]=l,i[9]=r):r=i[9],r}try{ms.displayName||(ms.displayName="DescriptionDialog")}catch{}try{mo.displayName||(mo.displayName="CharacterCount")}catch{}function ml(){let e,t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,_,v,b,S,C,j=(0,p.c)(60),N=(0,q.Pk)(),w=(0,H.b)(),I=(0,ef.zy)(),E=(0,oq.G)(),{updateGlobalNavigationBreadcrumbs:T}=l$(),k=(0,dU.Z)(),[R,A]=(0,x.useState)(!1),[L,D]=(0,x.useState)(!1),[P,O]=(0,x.useState)(!1),[B,F]=(0,x.useState)(null),U=(0,x.useRef)(null),V=eE.W.improvedNavigation?I.pathname:eg.fV.pathname,W=E&&V!==eI.VR,G=eE.W.spacesPermissionsTabEnabled,{mutateAsync:z}=(0,nb.$7)(),{copilotSpacesConfig:Q}=(0,$.X)(),{maxDescriptionLength:K}=Q;e:{let t;if(!E){e=null;break e}j[0]!==E||j[1]!==N.customCopilots?(t=(0,nv.JB)(N.customCopilots,E),j[0]=E,j[1]=N.customCopilots,j[2]=t):t=j[2],e=t}let J=e,Y=G?J?.ownerIsOrg&&J?.adminable:J?.ownerIsOrg,X=eE.W.copilotSpacesReadAccessToUserOwnedSpaces&&!J?.ownerIsOrg&&E&&J?.adminable,Z=Y||X,{starCopilotSpace:ee,isLoading:et}=(e=>{let t,n,a,r,i,s,o,l=(0,p.c)(18),c=(0,H.b)(),{customCopilots:d}=(0,q.Pk)(),u=(0,uy.jE)();l[0]!==e||l[1]!==u?(t=async()=>(e&&await u.invalidateQueries({queryKey:(0,ug.dp)(e)}),u.invalidateQueries({queryKey:ug.O6})),l[0]=e,l[1]=u,l[2]=t):t=l[2],l[3]!==d||l[4]!==e||l[5]!==c?(n=async t=>{let n=(0,nv.JB)(d,e);if(!n)return;let a=`${(0,nv.Cb)(e)}/stars`,r=t.starred?"POST":"DELETE";if((await (0,tl.lS)(a,{method:r})).ok)return n.starred=t.starred,c.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:n}),n},l[3]=d,l[4]=e,l[5]=c,l[6]=n):n=l[6],l[7]!==t||l[8]!==n?(a={onSuccess:t,mutationFn:n},l[7]=t,l[8]=n,l[9]=a):a=l[9];let m=(0,ar.n)(a);return l[10]!==m?({mutateAsync:s,isPending:r,...i}=m,l[10]=m,l[11]=r,l[12]=i,l[13]=s):(r=l[11],i=l[12],s=l[13]),l[14]!==r||l[15]!==i||l[16]!==s?(o={starCopilotSpace:s,isLoading:r,...i},l[14]=r,l[15]=i,l[16]=s,l[17]=o):o=l[17],o})(E);j[3]!==T?(t=()=>{T()},n=[T],j[3]=T,j[4]=t,j[5]=n):(t=j[4],n=j[5]),(0,x.useEffect)(t,n),j[6]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),D(!1)},j[6]=a):a=j[6];let en=a;j[7]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),A(!1)},j[7]=r):r=j[7];let ea=r;j[8]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),D(!0)},j[8]=i):i=j[8];let er=i;j[9]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),A(!0)},j[9]=s):s=j[9];let ei=s;j[10]!==z||j[11]!==k||j[12]!==E?(o=async()=>{if(E)try{await z(E),A(!1),k(eI.VR)}catch(e){F(e instanceof Error?e:Error(String(e))),ea()}},j[10]=z,j[11]=k,j[12]=E,j[13]=o):o=j[13];let es=o;j[14]!==J||j[15]!==ee?(l=()=>{J&&ee&&((0,tn.BI)("dotcom_chat.activate",{target:J.starred?"SPACE_UNSTAR":"SPACE_STAR",mode:"immersive"}),ee({starred:!J.starred}))},j[14]=J,j[15]=ee,j[16]=l):l=j[16];let eo=l,el=J?.adminable;j[17]!==el?(c=el&&(0,m.jsxs)(tM.l.Item,{variant:"danger",onSelect:ei,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.TrashIcon,{})}),"Delete"]}),j[17]=el,j[18]=c):c=j[18];let ec=c;j[19]!==ec||j[20]!==W||j[21]!==N?(d=W&&!N.selectedThreadID&&ec?eE.W.immersiveAppShell?(0,m.jsx)(m.Fragment,{children:ec}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(tM.l.Group,{children:[(0,m.jsx)(tM.l.GroupHeading,{children:"Space"}),ec]}),(0,m.jsx)(tM.l.Divider,{})]}):null,j[19]=ec,j[20]=W,j[21]=N,j[22]=d):d=j[22];let ed=d;j[23]!==Z?(u=Z&&(0,m.jsx)(eU.Q,{onClick:er,leadingVisual:M.ShareIcon,children:"Share"}),j[23]=Z,j[24]=u):u=j[24];let eu=u;j[25]!==J||j[26]!==eo||j[27]!==et||j[28]!==E?(h=J&&E&&(0,m.jsx)(tP.K,{ref:U,onClick:eo,disabled:et,icon:J.starred?M.StarFillIcon:M.StarIcon,className:J.starred?mr.starButton:void 0,"aria-label":J.starred?"Unstar space":"Star space"}),j[25]=J,j[26]=eo,j[27]=et,j[28]=E,j[29]=h):h=j[29];let em=h;j[30]!==em||j[31]!==eu?(f=(0,m.jsxs)(m.Fragment,{children:[eu,em]}),j[30]=em,j[31]=eu,j[32]=f):f=j[32];let ep=f;j[33]!==w?(g=e=>{w.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})},j[33]=w,j[34]=g):g=j[34];let eh=g;return j[35]!==ep||j[36]!==ed?(y=eE.W.immersiveAppShell?(0,m.jsx)(uD,{showPreviewPaneButton:!1,conversationSpecificItems:ed,customButtons:ep}):(0,m.jsx)(lG,{showPreviewPaneButton:!1,conversationSpecificItems:ed,customButtons:ep}),j[35]=ep,j[36]=ed,j[37]=y):y=j[37],j[38]!==B?(_=B&&(0,m.jsxs)(uk.A,{variant:"danger",children:[(0,m.jsx)(M.AlertIcon,{}),"There was a problem deleting your space."]}),j[38]=B,j[39]=_):_=j[39],j[40]!==es||j[41]!==E||j[42]!==R?(v=R&&E?(0,m.jsx)(ma,{onCancel:ea,onConfirm:es}):null,j[40]=es,j[41]=E,j[42]=R,j[43]=v):v=j[43],j[44]!==Y||j[45]!==E||j[46]!==L||j[47]!==X?(b=L&&E?!Y&&X?(0,m.jsx)(uK,{closeDialog:en,customCopilotId:E,userOwned:!0}):G?(0,m.jsx)(uK,{closeDialog:en,customCopilotId:E}):(0,m.jsx)(u5,{closeDialog:en,customCopilotId:E}):null,j[44]=Y,j[45]=E,j[46]=L,j[47]=X,j[48]=b):b=j[48],j[49]!==J||j[50]!==eh||j[51]!==K||j[52]!==P?(S=P&&J?(0,m.jsx)(ms,{copilotSpace:J,onClose:()=>O(!1),returnFocusRef:U,maxDescriptionLength:K,onSaved:eh}):null,j[49]=J,j[50]=eh,j[51]=K,j[52]=P,j[53]=S):S=j[53],j[54]!==y||j[55]!==_||j[56]!==v||j[57]!==b||j[58]!==S?(C=(0,m.jsxs)(m.Fragment,{children:[y,_,v,b,S]}),j[54]=y,j[55]=_,j[56]=v,j[57]=b,j[58]=S,j[59]=C):C=j[59],C}try{ml.displayName||(ml.displayName="SpacesHeader")}catch{}let mc={instructionsContainer:"InstructionsDialog-module__instructionsContainer--tvd1E",grow:"InstructionsDialog-module__grow--mfJpQ"};function md({copilotSpace:e,onClose:t,onSaved:n,returnFocusRef:a}){let{upsertCopilotSpace:r,isPending:i}=(0,dF.$)(e),[s,o]=(0,x.useState)(e.generalInstructions??""),[l,c]=(0,x.useState)(null);async function d(){try{let e=await r({generalInstructions:s});n?.(e),t()}catch(e){e instanceof Error?c(e.message):c("Failed to save instructions")}}function u(){o(e.generalInstructions??""),t()}return(0,m.jsx)(nK.l,{width:"xlarge",height:"large",title:"Instructions",onClose:u,returnFocusRef:a,position:{narrow:"fullscreen"},renderBody:()=>(0,m.jsxs)("div",{className:mc.instructionsContainer,children:[l&&(0,m.jsx)(Q.l,{variant:"critical",title:l,className:"mb-2"}),(0,m.jsxs)(oc.A,{className:mc.grow,disabled:!e.editable,children:[(0,m.jsx)(oc.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,m.jsx)(dk.Ay,{block:!0,value:s,onChange:e=>o(e.target.value),placeholder:"Set up instructions for Copilot in this space",resize:"none",className:mc.grow}),(0,m.jsx)(mu,{text:s,promptCharLimit:4e3})]})]}),renderFooter:()=>e.editable&&(0,m.jsx)(mi.m,{onCancel:u,onSave:d,isLoading:i,loadingAnnouncement:"Saving instructions"})})}function mu(e){let t,n,a,r,i=(0,p.c)(10),{text:s,promptCharLimit:o}=e,l=s.length>o;i[0]!==s.length?(t=s.length.toLocaleString(),i[0]=s.length,i[1]=t):t=i[1],i[2]!==o?(n=o.toLocaleString(),i[2]=o,i[3]=n):n=i[3],i[4]!==t||i[5]!==n?(a=(0,m.jsxs)(m.Fragment,{children:[t," / ",n," characters"]}),i[4]=t,i[5]=n,i[6]=a):a=i[6];let c=a;return i[7]!==c||i[8]!==l?(r=l?(0,m.jsx)(oc.A.Validation,{variant:"error",children:c}):(0,m.jsx)(oc.A.Caption,{children:c}),i[7]=c,i[8]=l,i[9]=r):r=i[9],r}try{md.displayName||(md.displayName="InstructionsDialog")}catch{}try{mu.displayName||(mu.displayName="CharacterCount")}catch{}let mm={header:"SpacesConversation-module__header--GkfTQ",spaceDescription:"SpacesConversation-module__spaceDescription--nRmSr",chatInput:"SpacesConversation-module__chatInput--Nrvmc",instructions:"SpacesConversation-module__instructions--t36Ks",instructionsHeader:"SpacesConversation-module__instructionsHeader--ynDM7",instructionsIcon:"SpacesConversation-module__instructionsIcon--KKXjS",instructionsTitle:"SpacesConversation-module__instructionsTitle--xAAKT",instructionsContent:"SpacesConversation-module__instructionsContent--DYqhz",instructionsEmptyState:"SpacesConversation-module__instructionsEmptyState--wlbTe",content:"SpacesConversation-module__content--FPhr6",tabContainer:"SpacesConversation-module__tabContainer--rTZgf",underlineNav:"SpacesConversation-module__underlineNav--qjoAn",attachButton:"SpacesConversation-module__attachButton--Hr8sv",tabEmptyContainer:"SpacesConversation-module__tabEmptyContainer--dnmPR",tabEmptyTitle:"SpacesConversation-module__tabEmptyTitle--Pw6Ln",tabEmptyText:"SpacesConversation-module__tabEmptyText--SxP9A",tabContent:"SpacesConversation-module__tabContent--zCP1V",conversationsList:"SpacesConversation-module__conversationsList--KLG2n",conversationItem:"SpacesConversation-module__conversationItem--kxjxw",conversationItemMenuOpen:"SpacesConversation-module__conversationItemMenuOpen--Z1mQR",conversationItemLeftColumn:"SpacesConversation-module__conversationItemLeftColumn--YsHsM",conversationName:"SpacesConversation-module__conversationName--wbn54",conversationTimestamp:"SpacesConversation-module__conversationTimestamp--tcI92",text:"SpacesConversation-module__text--v551F",referencesSizeProgressBar:"SpacesConversation-module__referencesSizeProgressBar--pRjZw",referencesSizeText:"SpacesConversation-module__referencesSizeText--buwhH",descriptionText:"SpacesConversation-module__descriptionText--hYXsZ",titleText:"SpacesConversation-module__titleText--czjJm"};function mp({customCopilotId:e,selectedThreadID:t,textAreaRef:n}){let{currentTopic:a,messages:r,streamingMessage:i,ambientError:s,threads:o}=(0,q.Pk)(),l=(0,H.b)(),[c,d]=(0,ef.ok)(),u=(0,oJ.G)(),h=c.get("tab")||"attachments",[f,y]=(0,x.useState)(!1),[_,v]=(0,x.useState)(null),b=(0,x.useRef)(null),[S,C]=(0,x.useState)(null),[j,N]=(0,x.useState)([]),[w,I]=(0,x.useState)(null),[E,T]=(0,x.useState)(null),[k,R]=(0,x.useState)(!1),[A,L]=(0,x.useState)([]),[P,O]=(0,x.useState)(null),B=oK((0,x.useRef)(a),r.length),{isPending:F,data:U,error:V}=(0,nb.Ao)(e),{upsertCopilotSpace:W,error:G}=(0,dF.$)(S||void 0),{deleteCopilotSpaceResources:z,error:K}=(e=>{let t,n,a,r,i,s,o,l=(0,p.c)(15),c=(0,uy.jE)(),[d,u]=(0,x.useState)(!1);l[0]!==e?(t={mutationFn:async t=>{if(!e)return;u(!0);let n=(0,nv.fn)(e),a={custom_copilot:{resources_attributes:t.map(u_)}},r=await (0,tl.lS)(n,{method:"PUT",body:a}),i=await r.json();if(!r.ok&&404!==r.status)throw Error("Unable to delete resources.");return i}},l[0]=e,l[1]=t):t=l[1];let m=(0,ar.n)(t);return l[2]!==m?({mutateAsync:n,isPending:a,...r}=m,l[2]=m,l[3]=n,l[4]=a,l[5]=r):(n=l[3],a=l[4],r=l[5]),l[6]!==e||l[7]!==a||l[8]!==c||l[9]!==d?(i=()=>{e&&d&&!a&&(u(!1),c.invalidateQueries({queryKey:(0,ug.dp)(e)}))},s=[d,a,e,c],l[6]=e,l[7]=a,l[8]=c,l[9]=d,l[10]=i,l[11]=s):(i=l[10],s=l[11]),(0,x.useEffect)(i,s),l[12]!==n||l[13]!==r?(o={deleteCopilotSpaceResources:n,...r},l[12]=n,l[13]=r,l[14]=o):o=l[14],o})(S||void 0);(0,x.useEffect)(()=>{(0,g.D)(S?.name?`${S.name} \xb7 Spaces \xb7 GitHub Copilot`:"Spaces \xb7 GitHub Copilot")},[S?.name]);let{processFiles:J}=d3({onResourcesAdded:e=>void ed(e),onError:L,onUploadingChange:R}),{copilotSpacesConfig:{maxResourceCount:X,maxDescriptionLength:Z}}=(0,$.X)(),ee=G||V||E||K,et=(0,x.useRef)(!1),en=j.filter(e=>!e.markedForDestroy).length,ea=(0,x.useMemo)(()=>S?l.sortAndFilterThreads(o,t=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id).slice(0,10):[],[o,e,l,S]),er=(0,x.useMemo)(()=>S?S.resources.reduce((e,t)=>e+(t.sizePercentage||0),0):0,[S]);(0,x.useEffect)(()=>{U&&(C(U),N(e=>U.resources?.filter(t=>!e.find(e=>e.id===t.id&&e.markedForDestroy))||[]),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:U})),l.clearCurrentReferences(["image"])},[U,l]),(0,x.useEffect)(()=>()=>{et.current||(l.clearCurrentReferences(),et.current=!1)},[l,e]);let ei=(0,x.useCallback)(async e=>{et.current=!0,await B(e)},[B]),es=(0,x.useCallback)(e=>{d({tab:e},{replace:!0})},[d]),eo=(0,x.useCallback)(e=>{l.deleteThread(e)},[l]);async function el(e){let t=[];if(N(n=>{for(let a of(t=[...n],e))t=a.databaseId?t.map(e=>a.databaseId===e.databaseId?{...e,markedForDestroy:!0}:e):t.filter(e=>e.id!==a.id);return t}),S)try{await z(e),T(null)}catch{N(t=>[...t,...e])}}async function ec(e){let t=[];if(N(n=>t=n.map(t=>t.id===e.id?e:t)),S)try{await W({...S,resources:t}),T(null)}catch{N(S.resources)}}let ed=(0,x.useCallback)(async e=>{let t=function(e,t){let n=new Map(e.map(e=>[e.id,e]));for(let a of t){if("repository"===a.type){let t=e.find(e=>"repository"===e.type&&e.repositoryId===a.repositoryId);if(t){n.set(t.id,{...t,markedForDestroy:!1});continue}}n.set(a.id,a)}return Array.from(n.values())}(j,e);N(t);try{await W({...S,resources:t}),T(null)}catch{S&&N(S.resources)}},[S,W,j]),eu=(0,x.useCallback)(()=>{T(`You can select a maximum of ${X} sources`)},[X]),em=(0,x.useCallback)(e=>{J(e,{source:"drag-and-drop"})},[J]),ep=(0,x.useCallback)(async e=>{if(S&&e){I(e);try{let t=await W({name:e});C(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),I(null),T(null)}catch{C(S),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:S}),I(null)}}},[S,W,l]),eh=(0,x.useCallback)(async e=>{if(S){C({...S,description:e});try{let t=await W({description:e});C(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t})}catch{C(S),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:S})}}},[S,W,l]);if(V instanceof nb.i9)return(0,m.jsx)(dW,{});if(F||!S)return(0,m.jsx)(cE,{});let eg=S.ownerIsOrg?S.owner:void 0,ey=w??S.name,e_=(0,nv.Hh)(U);return(0,m.jsxs)(m.Fragment,{children:[!eE.W.immersiveAppShell&&(0,m.jsx)(ml,{}),(0,m.jsx)(nw.t,{fallback:(0,m.jsx)(nD,{regionName:"This space"}),children:(0,m.jsxs)(D.Container,{width:"small",children:[(0,m.jsxs)("div",{className:mm.header,children:[(0,m.jsx)("h1",{children:S.editable?(0,m.jsx)(dB,{className:mm.titleText,value:ey,onChange:ep}):(0,m.jsx)("span",{className:mm.text,children:ey})}),S.editable?(0,m.jsx)(dB,{className:mm.descriptionText,placeholder:"Enter a description...",value:S.description||"",maxLength:Z,onChange:eh}):S.description&&(0,m.jsx)("p",{className:mm.spaceDescription,children:S.description})]}),(0,m.jsxs)("div",{className:mm.chatInput,children:[s&&(0,m.jsx)(oX.P,{ambientError:s}),e_&&(0,m.jsx)(lp,{}),!e_&&(0,m.jsx)(tT.V,{textAreaRef:n,onSubmit:ei,isStreaming:!!i,size:"large",modes:[{name:"Chat",supportsMCP:!1,supportsAttachments:!0,supportsModelSwitching:!0,icon:(0,m.jsx)(M.SpaceIcon,{}),placeholder:"How can I help you?"}],onNewThreadSelected:u},t)]}),(0,m.jsxs)("button",{ref:b,className:mm.instructions,onClick:()=>y(!0),"aria-haspopup":"dialog","aria-expanded":f,children:[(0,m.jsxs)("div",{className:mm.instructionsHeader,children:[(0,m.jsx)(M.SlidersIcon,{size:16,className:mm.instructionsIcon}),(0,m.jsx)("h2",{className:mm.instructionsTitle,children:"Instructions"})]}),S.generalInstructions?(0,m.jsx)("p",{className:mm.instructionsContent,children:S.generalInstructions}):(0,m.jsx)("p",{className:mm.instructionsEmptyState,children:"Set up instructions for Copilot in this space"})]}),ee&&(0,m.jsx)(Q.l,{title:E?"Maximum source count reached":"Failed to save space",variant:"critical",description:"string"==typeof ee?ee:"object"==typeof ee&&null!==ee&&"base"in ee?String(ee.base):ee instanceof Error?ee.message:"An error occurred"}),A.length>0&&(0,m.jsx)(lh,{errorMessages:A,onDismiss:()=>L([])}),(0,m.jsxs)("div",{className:mm.content,children:[(0,m.jsxs)("div",{className:mm.tabContainer,children:[(0,m.jsx)("div",{className:mm.underlineNav,children:(0,m.jsxs)(d$.O,{"aria-label":"Space content",children:[(0,m.jsx)(d$.O.Item,{"aria-current":"attachments"===h?"page":void 0,onClick:()=>es("attachments"),counter:en,children:"Sources"}),(0,m.jsx)(d$.O.Item,{"aria-current":"conversations"===h?"page":void 0,onClick:()=>es("conversations"),counter:ea.length,children:"Conversations"})]})}),(0,m.jsxs)(Y.B,{direction:"horizontal",align:"center",gap:"none",children:[er>80&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(dV.z,{inline:!0,barSize:"small",progress:er,className:mm.referencesSizeProgressBar,"aria-hidden":"true"}),(0,m.jsx)("span",{className:"sr-only",children:`${Math.max(0,Math.round(100-er))}% remaining attachment capacity`}),(0,m.jsxs)("span",{className:mm.referencesSizeText,children:[er<1?"<1":Math.round(er),"%"]})]}),S.editable&&(0,m.jsx)("div",{className:mm.attachButton,children:en>=X?(0,m.jsx)(eU.Q,{leadingVisual:M.PlusIcon,onClick:eu,children:"Add sources"}):(0,m.jsx)(uf,{sizePercentage:er,owner:eg,onResourcesAdded:ed,resourcesToSave:j,resourceCounts:{currentResourceCount:en,maxResourceCount:X},onError:L,initialRepo:P,onRepoSelect:O,onUploadingChange:e=>{e&&L([]),R(e)},children:(0,m.jsx)(eU.Q,{leadingVisual:M.PlusIcon,children:"Add sources"})})})]})]}),(0,m.jsx)("div",{className:mm.tabContent,children:(()=>{if("attachments"===h){let e=j.filter(e=>!e.markedForDestroy);return e.length>0?(0,m.jsx)(uw,{resources:e,sizePercentage:er,onDeleteResources:el,onUpdateResource:ec,onResourcesAdded:ed}):(0,m.jsxs)("div",{className:mm.tabEmptyContainer,children:[(0,m.jsx)("h2",{className:mm.tabEmptyTitle,children:"Welcome"}),(0,m.jsx)("p",{className:mm.tabEmptyText,children:S?.editable?"Add sources to your space once and access them in every chat. Start adding your first source.":"This space doesn't have any sources yet. Someone with edit access can add them."})]})}if("conversations"===h)return ea.length>0?(0,m.jsx)("ul",{role:"menu",className:mm.conversationsList,children:ea.map(e=>(0,m.jsx)(mh,{conversation:e,activeMenuConversationId:_,setActiveMenuConversationId:v,onDelete:eo},e.id))}):(0,m.jsxs)("div",{className:mm.tabEmptyContainer,children:[(0,m.jsx)("h2",{className:mm.tabEmptyTitle,children:"No conversations yet"}),(0,m.jsx)("p",{className:mm.tabEmptyText,children:"Start a new conversation in this space by typing in the input box at the top."})]})})()}),f&&(0,m.jsx)(md,{copilotSpace:S,onClose:()=>y(!1),returnFocusRef:b,onSaved:e=>{C(e),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})}})]})]})}),(eE.W.customCopilotsFileUploads||eE.W.spacesImagesEnabled)&&(0,m.jsx)(dT.A,{onFilesDrop:em,isUploading:k})]})}function mh(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y,x,v=(0,p.c)(38),{conversation:b,activeMenuConversationId:S,setActiveMenuConversationId:C,onDelete:j}=e,N=(0,dU.Z)();v[0]!==b?(t=(0,eI.CB)(b),v[0]=b,v[1]=t):t=v[1];let w=t,I=`${eI.Jz}/c/${b.id}`;v[2]!==N||v[3]!==I?(n=()=>N(I),a=e=>{"Enter"===e.key&&N(I)},v[2]=N,v[3]=I,v[4]=n,v[5]=a):(n=v[4],a=v[5]);let E=null!==S&&mm.conversationItemMenuOpen;v[6]!==E?(r=(0,_.$)(mm.conversationItem,E),v[6]=E,v[7]=r):r=v[7],v[8]!==w?(i=(0,m.jsx)("div",{className:mm.conversationName,children:w}),v[8]=w,v[9]=i):i=v[9],v[10]===Symbol.for("react.memo_cache_sentinel")?(s=(0,m.jsx)(M.ClockIcon,{}),v[10]=s):s=v[10],v[11]!==b.updatedAt?(o=new Date(b.updatedAt),v[11]=b.updatedAt,v[12]=o):o=v[12],v[13]!==o?(l=(0,m.jsxs)("div",{className:mm.conversationTimestamp,children:[s," ",(0,m.jsx)(rE.A,{format:"relative",prefix:"",date:o})]}),v[13]=o,v[14]=l):l=v[14],v[15]!==i||v[16]!==l?(c=(0,m.jsxs)("div",{className:mm.conversationItemLeftColumn,children:[i,l]}),v[15]=i,v[16]=l,v[17]=c):c=v[17];let T=S===b.id;return v[18]!==b.id||v[19]!==C?(d=e=>{C(e?b.id:null)},v[18]=b.id,v[19]=C,v[20]=d):d=v[20],v[21]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(tP.K,{variant:"invisible","aria-label":"Conversation options",icon:M.KebabHorizontalIcon,onClick:mg})}),v[21]=u):u=v[21],v[22]!==b||v[23]!==j?(h=()=>j(b),v[22]=b,v[23]=j,v[24]=h):h=v[24],v[25]===Symbol.for("react.memo_cache_sentinel")?(f=(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.TrashIcon,{})}),v[25]=f):f=v[25],v[26]!==h?(g=(0,m.jsx)(tD.W.Overlay,{onClick:mf,align:"end",children:(0,m.jsx)(tM.l,{children:(0,m.jsxs)(tM.l.Item,{variant:"danger",onSelect:h,children:[f,"Delete"]})})}),v[26]=h,v[27]=g):g=v[27],v[28]!==T||v[29]!==d||v[30]!==g?(y=(0,m.jsxs)(tD.W,{open:T,onOpenChange:d,children:[u,g]}),v[28]=T,v[29]=d,v[30]=g,v[31]=y):y=v[31],v[32]!==c||v[33]!==y||v[34]!==n||v[35]!==a||v[36]!==r?(x=(0,m.jsxs)("li",{role:"menuitem",onClick:n,onKeyDown:a,className:r,children:[c,y]}),v[32]=c,v[33]=y,v[34]=n,v[35]=a,v[36]=r,v[37]=x):x=v[37],x}function mf(e){return e.stopPropagation()}function mg(e){e.stopPropagation()}try{mp.displayName||(mp.displayName="SpacesConversation")}catch{}try{mh.displayName||(mh.displayName="ConversationItem")}catch{}var my=n(40552);function m_({primary:e=!1}){let[t,n]=(0,x.useState)(!1);return(0,m.jsxs)(m.Fragment,{children:[t?(0,m.jsx)(my.D,{closeDialog:()=>{(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),n(!1)}}):null,(0,m.jsx)(eU.Q,{variant:e?"primary":"default",onClick:()=>{(0,tn.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_OPEN",mode:"immersive"}),n(!0)},children:"Create space"})]})}try{m_.displayName||(m_.displayName="CreateSpaceButton")}catch{}function mx(e,t){var n=["name","description","owner"],a=!1;if(!t.trim())return!0;let r=a?t.trim():t.toLowerCase().trim();return n.some(t=>{let n;return null!=(n="function"==typeof t?t(e):e[t])&&(a?String(n):String(n).toLowerCase()).includes(r)})}let mv={searchContainer:"SearchInput-module__searchContainer--r7MLn",searchInputWrapper:"SearchInput-module__searchInputWrapper--fhRw6",searchInput:"SearchInput-module__searchInput--PKKMu"};function mb(e){let t,n,a,r,i,s,o=(0,p.c)(20),{onSearch:l,placeholder:c,"aria-label":d,disabled:u,debounceDelay:h}=e,f=void 0===c?"Search...":c,g=void 0===d?"Search":d,y=void 0!==u&&u,[_,v]=(0,x.useState)(""),b=(0,ur.d)(l,void 0===h?200:h);o[0]!==b||o[1]!==l?(t=e=>{let t=e.currentTarget.value;v(t),""===t.trim()?l(""):b(t)},o[0]=b,o[1]=l,o[2]=t):t=o[2];let S=t;o[3]!==l?(n=()=>{v(""),l("")},o[3]=l,o[4]=n):n=o[4];let C=n;return o[5]!==g?(a=(0,m.jsx)(oc.A.Label,{visuallyHidden:!0,children:g}),o[5]=g,o[6]=a):a=o[6],o[7]!==C||o[8]!==y||o[9]!==_?(r=""!==_?(0,m.jsx)(tP.K,{icon:M.XCircleFillIcon,onClick:C,"aria-label":"Clear search",variant:"invisible",size:"small",disabled:y}):void 0,o[7]=C,o[8]=y,o[9]=_,o[10]=r):r=o[10],o[11]!==S||o[12]!==f||o[13]!==_||o[14]!==r?(i=(0,m.jsx)(om.A,{className:mv.searchInput,placeholder:f,value:_,onChange:S,leadingVisual:M.SearchIcon,trailingAction:r}),o[11]=S,o[12]=f,o[13]=_,o[14]=r,o[15]=i):i=o[15],o[16]!==y||o[17]!==a||o[18]!==i?(s=(0,m.jsx)("div",{className:mv.searchContainer,children:(0,m.jsxs)(oc.A,{className:mv.searchInputWrapper,disabled:y,children:[a,i]})}),o[16]=y,o[17]=a,o[18]=i,o[19]=s):s=o[19],s}try{mb.displayName||(mb.displayName="SearchInput")}catch{}let mS={banner:"SpacesView-module__banner--ZHxIa",button:"SpacesView-module__button--j38nS",counter:"SpacesView-module__counter--ZdDOv",disabledButton:"SpacesView-module__disabledButton--Ygunf",description:"SpacesView-module__description--IyY7g",filterButtons:"SpacesView-module__filterButtons--qTV2E",metadata:"SpacesView-module__metadata--Sw1rv",metadataItem:"SpacesView-module__metadataItem--rLi5j"};function mC(e){let t,n,a,r,i,s,o,l,c,d,u,h=(0,p.c)(33),{copilotSpace:f,onDelete:g,onClick:y}=e,_=f.ownerIsOrg?M.OrganizationIcon:M.PersonIcon;h[0]!==f.baseRole||h[1]!==f.visibility?(t=function(e,t){switch(t){case"custom_copilot_reader":case"custom_copilot_writer":case"custom_copilot_admin":return"Shared"}return"org_public"===e?"Shared":"Private"}(f.visibility,f.baseRole),h[0]=f.baseRole,h[1]=f.visibility,h[2]=t):t=h[2];let x=t,v="Shared"===x?M.PeopleIcon:M.LockIcon,b=!eE.W.spacesPermissionsTabEnabled||f.adminable||f.editable;return h[3]!==f?(n=(0,nv.Cb)(f),h[3]=f,h[4]=n):n=h[4],h[5]!==f.name?(a=(0,m.jsx)(P.qJ.Item.Title,{children:f.name}),h[5]=f.name,h[6]=a):a=h[6],h[7]!==f.description?(r=(0,m.jsx)(P.qJ.Item.Description,{children:(0,m.jsx)("div",{className:mS.description,children:f.description})}),h[7]=f.description,h[8]=r):r=h[8],h[9]!==_?(i=(0,m.jsx)(_,{size:16}),h[9]=_,h[10]=i):i=h[10],h[11]!==f.owner||h[12]!==i?(s=(0,m.jsxs)("span",{className:mS.metadataItem,children:[i,f.owner]}),h[11]=f.owner,h[12]=i,h[13]=s):s=h[13],h[14]!==v?(o=(0,m.jsx)(v,{size:16}),h[14]=v,h[15]=o):o=h[15],h[16]!==o||h[17]!==x?(l=(0,m.jsxs)("span",{className:mS.metadataItem,children:[o,x]}),h[16]=o,h[17]=x,h[18]=l):l=h[18],h[19]!==s||h[20]!==l?(c=(0,m.jsx)(P.qJ.Item.Metadata,{children:(0,m.jsxs)("div",{className:mS.metadata,children:[s,l]})}),h[19]=s,h[20]=l,h[21]=c):c=h[21],h[22]!==f||h[23]!==g||h[24]!==b?(d=b&&(0,m.jsx)(P.qJ.Item.Actions,{children:(0,m.jsx)(mt,{copilot:f,onDelete:g})}),h[22]=f,h[23]=g,h[24]=b,h[25]=d):d=h[25],h[26]!==y||h[27]!==d||h[28]!==n||h[29]!==a||h[30]!==r||h[31]!==c?(u=(0,m.jsxs)(P.qJ.Item,{href:n,onClick:y,children:[a,r,c,d]}),h[26]=y,h[27]=d,h[28]=n,h[29]=a,h[30]=r,h[31]=c,h[32]=u):u=h[32],u}function mj({spaces:e,starredSpaces:t,isLoading:n,onDelete:a,onSpaceClick:r,searchQuery:i}){let[s,o]=(0,x.useState)("personal"),l=t&&t.length>0,{copilotSpacesConfig:{userHasOrgs:c}}=(0,$.X)();(0,x.useEffect)(()=>{l&&o("starred")},[l]);let d=(0,x.useMemo)(()=>e?e.filter(e=>!!("starred"===s&&e.starred||"personal"===s&&!e.ownerIsOrg||"org"===s&&e.ownerIsOrg)&&mx(e,i)):[],[e,s,i]),{personalSpacesCount:u,orgSpacesCount:p,starredSpacesCount:h}=(0,x.useMemo)(()=>{if(!e)return{personalSpacesCount:0,orgSpacesCount:0,starredSpacesCount:0};let t=i.trim()?e.filter(e=>mx(e,i)):e;return{personalSpacesCount:t.filter(e=>!e.ownerIsOrg).length,orgSpacesCount:t.filter(e=>e.ownerIsOrg).length,starredSpacesCount:t.filter(e=>e.starred).length}},[e,i]),f=e?.length===0&&!n,g=e&&e.length>0&&d?.length===0&&!n;return(0,m.jsxs)(P.qJ,{children:[(0,m.jsx)(P.qJ.Header,{children:(0,m.jsxs)("div",{role:"tablist","aria-label":"Filter spaces",className:mS.filterButtons,children:[l&&(0,m.jsxs)("button",{onClick:()=>o("starred"),role:"tab","aria-selected":"starred"===s,"aria-controls":"spaces-list",id:"starred-tab",className:mS.button,children:["Starred ",(0,m.jsx)("span",{className:mS.counter,children:h})]}),c||l?(0,m.jsxs)("button",{onClick:()=>o("personal"),role:"tab","aria-selected":"personal"===s,"aria-controls":"spaces-list",id:"personal-tab",className:mS.button,children:["Yours ",(0,m.jsx)("span",{className:mS.counter,children:u})]}):(0,m.jsxs)("span",{id:"disabled-personal-tab",role:"tab",className:mS.disabledButton,children:["Yours ",(0,m.jsx)("span",{className:mS.counter,children:u})]}),c&&(0,m.jsxs)("button",{onClick:()=>o("org"),role:"tab","aria-selected":"org"===s,"aria-controls":"spaces-list",id:"org-tab",className:mS.button,children:["Organizations ",(0,m.jsx)("span",{className:mS.counter,children:p})]})]})}),(0,m.jsx)(P.qJ.List,{loading:n,id:"spaces-list","aria-labelledby":`${s}-tab`,children:f?(0,m.jsxs)(P.qJ.EmptyState,{children:[(0,m.jsx)("p",{children:"Set up once. Chat again and again."}),(0,m.jsx)(m_,{})]}):g?(0,m.jsxs)(P.qJ.EmptyState,{children:[(0,m.jsx)("p",{children:"Organize discussions with your team."}),(0,m.jsx)(m_,{})]}):d?.map(e=>(0,m.jsx)(mC,{copilotSpace:e,onDelete:()=>a(e),onClick:r},e.owner?`${e.owner}/${e.id}`:e.id))})]})}function mN(e){let t,n,a,r,i,s,o,l,c,d,u,h,f,g,y=(0,p.c)(29),{copilotSpaces:_}=e,{ssoOrganizations:v}=(0,q.Pk)();y[0]!==v?(t=v.map(mT),y[0]=v,y[1]=t):t=y[1];let b=t,[S,C]=(0,x.useState)(null),[j,N]=(0,x.useState)(""),w=void 0===_;y[2]!==_?(n=_?.filter(mE),y[2]=_,y[3]=n):n=y[3];let I=n,{mutateAsync:E}=(0,nb.$7)();y[4]!==E?(a=async e=>{try{await E(e),C(null)}catch(e){C(e instanceof Error?e:Error(String(e)))}},y[4]=E,y[5]=a):a=y[5];let T=a;return y[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(nD,{regionName:"Spaces"}),i=!eE.W.immersiveAppShell&&(0,m.jsx)(ml,{}),y[6]=r,y[7]=i):(r=y[6],i=y[7]),y[8]!==S?(s=S&&(0,m.jsxs)(uk.A,{variant:"danger",children:[(0,m.jsx)(M.AlertIcon,{}),"There was a problem deleting your space."]}),y[8]=S,y[9]=s):s=y[9],y[10]===Symbol.for("react.memo_cache_sentinel")?(o=(0,m.jsx)(D.Title,{children:"Spaces"}),l=(0,m.jsx)(D.Description,{children:"A persistent space that remembers your code, files, and preferences across conversations."}),y[10]=o,y[11]=l):(o=y[10],l=y[11]),y[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,m.jsxs)(D.Header,{children:[o,l,(0,m.jsx)(D.Actions,{children:(0,m.jsx)(m_,{primary:!0})})]}),y[12]=c):c=y[12],y[13]!==b||y[14]!==v.length?(d=v.length>0&&!(0,J.G7)("global_sso_banner")&&(0,m.jsx)("div",{className:mS.banner,children:(0,m.jsx)(W.x,{protectedOrgs:b,redirectURI:mw})}),y[13]=b,y[14]=v.length,y[15]=d):d=y[15],y[16]===Symbol.for("react.memo_cache_sentinel")?(u=(0,m.jsx)(mb,{onSearch:N}),y[16]=u):u=y[16],y[17]!==_||y[18]!==T||y[19]!==w||y[20]!==j||y[21]!==I?(h=(0,m.jsx)(D.Section,{children:(0,m.jsx)(mj,{spaces:_,starredSpaces:I,isLoading:w,onDelete:T,onSpaceClick:mI,searchQuery:j})}),y[17]=_,y[18]=T,y[19]=w,y[20]=j,y[21]=I,y[22]=h):h=y[22],y[23]!==d||y[24]!==h?(f=(0,m.jsxs)(D.Container,{width:"small",children:[c,d,u,h]}),y[23]=d,y[24]=h,y[25]=f):f=y[25],y[26]!==f||y[27]!==s?(g=(0,m.jsxs)(nw.t,{fallback:r,children:[i,s,f]}),y[26]=f,y[27]=s,y[28]=g):g=y[28],g}function mw(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}function mI(){(0,tn.BI)("dotcom_chat.activate",{target:"SPACES_VIEW_SPACE_SELECTED",mode:"immersive"})}function mE(e){return e.starred}function mT(e){return e.login}try{mC.displayName||(mC.displayName="SpacesListItem")}catch{}try{mj.displayName||(mj.displayName="SpacesList")}catch{}try{mN.displayName||(mN.displayName="SpacesView")}catch{}function mk(){let e,t,n,a,r,i,s,o,l,c,d,u,h,f=(0,p.c)(37),g=(0,q.Pk)(),{customCopilots:y}=g,{reloadQuota:v}=(0,ny.xR)(),b=na(),S=(0,nu.tZ)(),C=(0,n_.v)(),j=(0,ef.zy)(),N=(0,nb.BV)(),w=(0,nv.y_)(),I=N&&w,E=(0,nv.iI)();(0,nb.e9)(N),f[0]!==v||f[1]!==b?(e=()=>{window.setTimeout(()=>{b.current?.focus()},1),v("new_thread_focus")},f[0]=v,f[1]=b,f[2]=e):e=f[2];let T=e,k=(0,x.useRef)(null);f[3]===Symbol.for("react.memo_cache_sentinel")?(t=()=>!!k.current&&k.current.clientWidth<=1024,f[3]=t):t=f[3];let[R,A]=(0,x.useState)(t);f[4]===Symbol.for("react.memo_cache_sentinel")?(n=()=>k.current?k.current.clientWidth>1024&&(nx.Jt.getImmersiveSidebarCollapsedState()??!0):nx.Jt.getImmersiveSidebarCollapsedState()??!0,f[4]=n):n=f[4];let[L,D]=(0,x.useState)(n),[P,M]=(0,x.useState)(!1);f[5]!==R||f[6]!==L||f[7]!==P?(a=()=>{if(R)M(!P);else{let e=!L;D(e),nx.Jt.setImmersiveSidebarCollapsedState(e)}},f[5]=R,f[6]=L,f[7]=P,f[8]=a):a=f[8];let O=a;f[9]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{if(!k.current)return;let e=()=>{let e=k.current?.clientWidth;void 0!==e&&(e<=1024?A(!0):(A(!1),M(!1)))},t=new ResizeObserver(()=>{e()});return t.observe(k.current),e(),()=>{t.disconnect()}},f[9]=r):r=f[9],f[10]!==P?(i=[P],f[10]=P,f[11]=i):i=f[11],(0,x.useEffect)(r,i);let B=!R&&L,F=!!R&&P,U=(0,x.useRef)(null);f[12]===Symbol.for("react.memo_cache_sentinel")?(s=()=>!!U.current&&U.current.clientWidth<=1280,f[12]=s):s=f[12];let[$,V]=(0,x.useState)(s);f[13]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{if(!U.current)return;let e=()=>{let e=U.current?.clientWidth;void 0!==e&&e>0&&V(e<=1280)},t=new ResizeObserver(e);return t.observe(U.current),e(),()=>t.disconnect()},l=[],f[13]=o,f[14]=l):(o=f[13],l=f[14]),(0,x.useEffect)(o,l),nj();let W=!C&&$&&ls.fullscreenPreviewPane,G=C?.fullscreenPreviewArea&&ls.fullscreenPluginPane;return f[15]!==G||f[16]!==W?(c=(0,_.$)(ls.container,W,G),f[15]=G,f[16]=W,f[17]=c):c=f[17],f[18]===Symbol.for("react.memo_cache_sentinel")?(d=(0,m.jsx)("span",{"data-favicon-override":"/favicons/favicon-copilot.svg"}),f[18]=d):d=f[18],f[19]!==C||f[20]!==E||f[21]!==y||f[22]!==B||f[23]!==F||f[24]!==T||f[25]!==O||f[26]!==$||f[27]!==R||f[28]!==I||f[29]!==j||f[30]!==S||f[31]!==g.selectedThreadID||f[32]!==b?(u=C?.PageComponent&&C?.matchPage?.(j.pathname)?(0,m.jsx)("div",{className:ls.main,children:(0,m.jsx)(dc,{plugin:C})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:ls.left,ref:k,hidden:$&&S,children:[(0,m.jsx)(dI,{isVisible:F,isPinned:B,isFloating:R,onNewThread:T,onToggle:O}),(0,m.jsx)("div",{className:ls.main,children:I?(0,m.jsx)(mN,{copilotSpaces:y}):E?(0,m.jsx)(mp,{customCopilotId:E,selectedThreadID:g.selectedThreadID,textAreaRef:b}):C?.ViewComponent&&C?.matchView?.(j.pathname)?(0,m.jsx)(dd,{plugin:C}):(0,m.jsx)(dl,{isMobile:$,textAreaRef:b},g.selectedThreadID)})]}),(0,m.jsx)("div",{className:(0,_.$)(ls.previewPane,S&&ls.active),children:(0,m.jsx)("div",{className:(0,_.$)(ls.viewer),children:(0,m.jsx)(ol,{returnFocusRef:b})})})]}),f[19]=C,f[20]=E,f[21]=y,f[22]=B,f[23]=F,f[24]=T,f[25]=O,f[26]=$,f[27]=R,f[28]=I,f[29]=j,f[30]=S,f[31]=g.selectedThreadID,f[32]=b,f[33]=u):u=f[33],f[34]!==c||f[35]!==u?(h=(0,m.jsxs)("div",{className:c,"data-testid":"chat-layout","data-hpc":!0,ref:U,children:[d,u]}),f[34]=c,f[35]=u,f[36]=h):h=f[36],h}try{mk.displayName||(mk.displayName="Layout")}catch{}var mR=n(5156),mA=n(27912);let mL={container:"ContentPreviewV2-module__container--ny3FC",toolbar:"ContentPreviewV2-module__toolbar--D0o3r",actions:"ContentPreviewV2-module__actions--rxmj7",tabsContainer:"ContentPreviewV2-module__tabsContainer--m3Uyx",tabs:"ContentPreviewV2-module__tabs--zdyPt",rightDivider:"ContentPreviewV2-module__rightDivider--RsJeM",leftDivider:"ContentPreviewV2-module__leftDivider--et2Ns",content:"ContentPreviewV2-module__content--hmLDj"};function mD({returnFocusRef:e}){let t=(0,nu.tZ)(),{items:n,allOpenItems:a,selectedItem:r,openItem:i,closeItem:s,closeItems:o,closePreviewPane:l,showLoadingState:c}=(0,nu.xx)(),d=(0,nI.S)(t),u=t&&!d,p=d&&!t,h=a.map(e=>n.get(e)).filter(e=>e?.type==="file"),f=(0,x.useId)(),g=(0,x.useId)(),y=(0,x.useId)(),v=a.map(e=>n.get(e)).filter(e=>!!e);(0,x.useEffect)(()=>{p&&e.current?.focus()},[p,e]);let b=async()=>{let e=h.map(e=>new File([e.value],e.name));sC(new File([await (0,nk._6)(e).blob()],"files.zip"))},S=v.find(e=>e.id===r)??v[0],C=(0,x.useCallback)((e=!1)=>{if(S){let t=e&&1===v.length;s(S.id),t&&(l(),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},[s,l,v.length,S]),j=(0,x.useRef)([]),N=(0,x.useRef)(null);(0,nT.G)({containerRef:N,focusableElementFilter:e=>"tab"===e.role,bindKeys:nE.z0.ArrowHorizontal|nE.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},[v]);let w=!(0,nN.g)(N);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:mL.toolbar,children:[(0,m.jsx)("div",{className:(0,_.$)(mL.actions,mL.rightDivider),children:(0,m.jsx)(mP,{})}),(0,m.jsx)("div",{className:mL.tabsContainer,children:(0,m.jsxs)("div",{className:mL.tabs,role:"tablist","aria-label":"Workbench items",ref:N,tabIndex:-1,onWheel:e=>{e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft+=e.deltaY)},children:[v.map((e,t)=>(0,m.jsx)(s7,{id:e.id===r?f:void 0,tabPanelId:e.id===r?g:void 0,controlHintId:y,isActive:e.id===r,onClick:()=>{i(e.id),or("filePreviewTab.click",e)},onClose:()=>(e=>{let t=v[e];if(!t)return;let n=j.current[e+1]??j.current[e-1]??N.current;n?.focus();let a=1===v.length;s(t.id),a&&l(),or("filePreviewTab.close",t)})(t),item:e,ref:e=>{j.current[t]=e}},e.id)),(0,m.jsx)("span",{id:y,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),(0,m.jsx)("span",{})]})}),a.length>0&&(0,m.jsx)("div",{className:(0,_.$)(mL.actions,w&&mL.leftDivider),children:(0,m.jsxs)(tD.W,{children:[(0,m.jsx)(tD.W.Anchor,{children:(0,m.jsx)(tP.K,{icon:M.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,m.jsx)(tD.W.Overlay,{children:(0,m.jsxs)(tM.l,{children:[h.length>0&&(0,m.jsxs)(tM.l.Item,{onSelect:b,children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.FileZipIcon,{})}),"Download all files"]}),(0,m.jsxs)(tM.l.Item,{onSelect:()=>{o(),l(),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},children:[(0,m.jsx)(tM.l.LeadingVisual,{children:(0,m.jsx)(M.XIcon,{})}),"Close all tabs"]})]})})]})})," "]}),(0,m.jsx)("div",{className:mL.content,role:"tabpanel",id:g,"aria-labelledby":f,children:c?(0,m.jsx)(oa,{}):S?(0,m.jsx)(s2,{isOpening:u,previewItem:S,onClose:C}):(0,m.jsx)(oe,{isOpening:u})})]})}function mP(){let e,t,n=(0,p.c)(3),{closePreviewPane:a}=(0,nu.xx)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(M.SidebarCollapseIcon,{}),n[0]=e):e=n[0],n[1]!==a?(t=(0,m.jsx)(uA.$,{iconOnly:!0,icon:e,"aria-label":"Close workbench",onClick:()=>{a(),(0,tn.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}}),n[1]=a,n[2]=t):t=n[2],t}function mM(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:mL.toolbar,children:(0,m.jsx)("div",{className:(0,_.$)(mL.actions,mL.rightDivider),children:(0,m.jsx)(mP,{})})}),(0,m.jsx)("div",{className:(0,_.$)(mL.content),children:(0,m.jsx)(nD,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function mO(e){let t,n,a,r,i=(0,p.c)(10),s=(0,x.useId)(),o=na(),l=(0,nu.tZ)()?o:void 0;return i[0]!==s?(t=(0,m.jsx)("h2",{id:s,className:"sr-only",children:"Workbench"}),i[0]=s,i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.jsx)(mM,{}),i[2]=n):n=i[2],i[3]!==e?(a=(0,m.jsx)(nw.t,{fallback:n,children:(0,m.jsx)(mD,{...e})}),i[3]=e,i[4]=a):a=i[4],i[5]!==s||i[6]!==l||i[7]!==t||i[8]!==a?(r=(0,m.jsxs)("div",{"aria-labelledby":s,className:mL.container,tabIndex:-1,"data-testid":"content-preview",role:"dialog",ref:l,children:[t,a]}),i[5]=s,i[6]=l,i[7]=t,i[8]=a,i[9]=r):r=i[9],r}try{mD.displayName||(mD.displayName="ContentPreviewInner")}catch{}try{mP.displayName||(mP.displayName="CloseContentPreviewButton")}catch{}try{mM.displayName||(mM.displayName="ContentPreviewFallback")}catch{}try{mO.displayName||(mO.displayName="ContentPreview")}catch{}let mB={root:"ConversationViewV2-module__root--ZLnV4",container:"ConversationViewV2-module__container--QttZ8",footer:"ConversationViewV2-module__footer--Ku9Sf",spaceBannerContainer:"ConversationViewV2-module__spaceBannerContainer--IR7j6"};function mF(e){let t,n,a,r,i,s,o,l,c,d=(0,p.c)(24),{isMobile:u,textAreaRef:h}=e,f=(0,q.Pk)(),{messages:g,messagesLoading:y,threadsLoading:_}=f,{chatQuotaExceeded:v}=(0,ny.xR)(),b=(0,oq.G)();d[0]!==b||d[1]!==f.customCopilots?(t=(0,nv.JB)(f.customCopilots,b),d[0]=b,d[1]=f.customCopilots,d[2]=t):t=d[2];let S=!!t,{variant:C,customCopilot:j}=l_(b,f.selectedThreadID),N=C===lg.customCopilotSizeExceeded,w=(!C||S)&&!N,I=(0,x.useRef)(f.currentTopic),E=oG();n=!f.selectedThreadID&&nx.Jt.getEntrypointMessage();e:{if(f.selectedThreadID||f.pendingFirstMessage||n||b||v||"error"===y.state||"error"===_.state){a=!1;break e}a=!0}let T=a,k=g.length,R=oK(I,k);return d[3]!==f.currentTopic?(r=()=>{I.current=f.currentTopic},i=[f.currentTopic],d[3]=f.currentTopic,d[4]=r,d[5]=i):(r=d[4],i=d[5]),(0,x.useEffect)(r,i),d[6]!==v||d[7]!==R?(s=()=>{let e=nx.Jt.getEntrypointMessage();e&&!v&&(nx.Jt.setEntrypointMessage(null),setTimeout(()=>{R(e)},100))},o=[R,v],d[6]=v,d[7]=R,d[8]=s,d[9]=o):(s=d[8],o=d[9]),(0,x.useEffect)(s,o),d[10]===Symbol.for("react.memo_cache_sentinel")?(l=!eE.W.immersiveAppShell&&(0,m.jsx)(lG,{}),d[10]=l):l=d[10],d[11]!==v||d[12]!==j||d[13]!==R||d[14]!==u||d[15]!==E||d[16]!==k||d[17]!==T||d[18]!==w||d[19]!==C||d[20]!==f.selectedThreadID||d[21]!==f.traceInfo?.visible||d[22]!==h?(c=(0,m.jsxs)("div",{className:mB.root,children:[l,!f.selectedThreadID&&v?(0,m.jsx)(dr,{}):f.traceInfo?.visible?(0,m.jsx)(oV,{}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:mB.container,children:T?(0,m.jsx)(dt,{textAreaRef:h,handleUserSubmit:R,nextMessageIndex:k}):(0,m.jsx)(cB,{inputRef:h,isMobile:u})}),(!E||eE.W.copilotDuplicateThread)&&!T&&(0,m.jsxs)("div",{className:mB.footer,children:[eE.W.groupNotifications&&!w&&(0,m.jsx)(lx,{}),!eE.W.groupNotifications&&C&&(0,m.jsx)("div",{className:mB.spaceBannerContainer,children:(0,m.jsx)(ly,{variant:C,customCopilot:j})}),w&&(0,m.jsx)(lv,{textAreaRef:h,handleUserSubmit:R,nextMessageIndex:k})]})]})]}),d[11]=v,d[12]=j,d[13]=R,d[14]=u,d[15]=E,d[16]=k,d[17]=T,d[18]=w,d[19]=C,d[20]=f.selectedThreadID,d[21]=f.traceInfo?.visible,d[22]=h,d[23]=c):c=d[23],c}function mU(e){let t,n,a=(0,p.c)(3);return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(nD,{regionName:"This conversation"}),a[0]=t):t=a[0],a[1]!==e?(n=(0,m.jsx)(nw.t,{fallback:t,children:(0,m.jsx)(mF,{...e})}),a[1]=e,a[2]=n):n=a[2],n}try{mF.displayName||(mF.displayName="ConversationViewInner")}catch{}try{mU.displayName||(mU.displayName="ConversationView")}catch{}function m$(){let e,t,n,a,r,i,s,o,l,c=(0,p.c)(36),d=(0,q.Pk)(),{customCopilots:u}=d,h=na(),f=(0,n_.v)(),g=(0,ef.zy)(),y=(0,nb.BV)(),_=(0,nv.y_)(),v=y&&_,b=(0,nv.iI)(),{isNarrowViewport:S}=function(e){let t,n=(0,p.c)(2),a=function(e){let t,n,a,r=(0,p.c)(5);r[0]!==e?(t=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,r[0]=e,r[1]=t):t=r[1];let[i,s]=(0,x.useState)(t);return r[2]!==e?(n=()=>{let t=window.matchMedia(e),n=e=>{s(e.matches)};return s(t.matches),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},a=[e],r[2]=e,r[3]=n,r[4]=a):(n=r[3],a=r[4]),(0,x.useEffect)(n,a),i}(mA.X);return n[0]!==a?(t={isNarrowViewport:a},n[0]=a,n[1]=t):t=n[1],t}();(0,nb.e9)(y),nj();let C=(0,nu.tZ)(),{closePreviewPane:j,openPreviewPane:N}=(0,nu.xx)();c[0]!==j||c[1]!==N?(e=e=>{e?N():j()},c[0]=j,c[1]=N,c[2]=e):e=c[2];let w=e;if(f?.PageComponent&&f?.matchPage?.(g.pathname)){let e,t;return c[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("span",{"data-favicon-override":nU}),c[3]=e):e=c[3],c[4]!==f?(t=(0,m.jsxs)(m.Fragment,{children:[e,(0,m.jsx)(dc,{plugin:f})]}),c[4]=f,c[5]=t):t=c[5],t}if(f?.ViewComponent&&f?.matchView?.(g.pathname)){let e,t;return c[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(mA.P.Sidebar,{children:(0,m.jsx)(mR.U,{})}),c[6]=e):e=c[6],c[7]!==f?(t=(0,m.jsxs)(mA.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:nU,children:[e,(0,m.jsx)(mA.P.ColumnLeft,{children:(0,m.jsx)(dd,{plugin:f})})]}),c[7]=f,c[8]=t):t=c[8],t}c[9]!==b||c[10]!==u||c[11]!==v||c[12]!==d.selectedThreadID||c[13]!==h?(t=()=>v?(0,m.jsx)(mN,{copilotSpaces:u}):b?(0,m.jsx)(mp,{customCopilotId:b,selectedThreadID:d.selectedThreadID,textAreaRef:h}):null,c[9]=b,c[10]=u,c[11]=v,c[12]=d.selectedThreadID,c[13]=h,c[14]=t):t=c[14];let I=t;c[15]!==I?(n=I(),c[15]=I,c[16]=n):n=c[16];let E=n;if(E){let e,t,n;return c[17]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(mA.P.Header,{children:(0,m.jsx)(ml,{})}),c[17]=e):e=c[17],c[18]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(mA.P.Sidebar,{children:(0,m.jsx)(mR.U,{})}),c[18]=t):t=c[18],c[19]!==E?(n=(0,m.jsxs)(mA.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:nU,children:[e,t,(0,m.jsx)(mA.P.ColumnLeft,{children:E})]}),c[19]=E,c[20]=n):n=c[20],n}return c[21]!==C||c[22]!==w?(a=[C,w],c[21]=C,c[22]=w,c[23]=a):a=c[23],c[24]===Symbol.for("react.memo_cache_sentinel")?(r=(0,m.jsx)(mA.P.Sidebar,{children:(0,m.jsx)(mR.U,{})}),c[24]=r):r=c[24],c[25]===Symbol.for("react.memo_cache_sentinel")?(i=(0,m.jsx)(mA.P.Header,{children:(0,m.jsx)(uD,{})}),c[25]=i):i=c[25],c[26]!==S||c[27]!==d.selectedThreadID||c[28]!==h?(s=(0,m.jsx)(mA.P.ColumnLeft,{children:(0,m.jsx)(mU,{isMobile:S,textAreaRef:h},d.selectedThreadID)}),c[26]=S,c[27]=d.selectedThreadID,c[28]=h,c[29]=s):s=c[29],c[30]!==h?(o=(0,m.jsx)(mA.P.ColumnRight,{children:(0,m.jsx)(mO,{returnFocusRef:h})}),c[30]=h,c[31]=o):o=c[31],c[32]!==a||c[33]!==s||c[34]!==o?(l=(0,m.jsxs)(mA.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:nU,secondaryColumnState:a,children:[r,i,s,o]}),c[32]=a,c[33]=s,c[34]=o,c[35]=l):l=c[35],l}try{m$.displayName||(m$.displayName="Layout")}catch{}function mV(e){let t=(0,ef.zy)(),n=eg.fV.pathname;return(!n||eE.W.improvedNavigation)&&(n=t.pathname),(0,x.useMemo)(()=>{let t=e.find(e=>e.routes?.some(e=>e.test(n)));return t?t.id:null},[n,e])}var mq=n(40235);let mW=(0,nr.E7)();function mG(){let e,t=(0,p.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(nd.RelayEnvironmentProvider,{environment:mW,children:(0,m.jsx)(mH,{})}),t[0]=e):e=t[0],e}function mH(){let e=(0,p.c)(2),t=(0,$.X)();if(t?.copilotChatSettingEnabled){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(mz,{children:(0,m.jsx)(mK,{})}),e[0]=t):t=e[0],t}{let t;return e[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)(nf,{}),e[1]=t):t=e[1],t}}function mz(e){let t,n,a,r,i,s,o=(0,p.c)(42),{children:l}=e,c=(0,$.X)(),d=oQ(),u=c.requestedTopic;if((0,eI.P)(u)){let e,n;o[0]!==u?(e=(0,eI.UU)(u),o[0]=u,o[1]=e):e=o[1],o[2]!==e?(n={refs:[e],topic:void 0},o[2]=e,o[3]=n):n=o[3],t=n}else if(c.reference){let e,n;o[4]!==c.reference?(e=[c.reference],o[4]=c.reference,o[5]=e):e=o[5],o[6]!==u||o[7]!==e?(n={refs:e,topic:u},o[6]=u,o[7]=e,o[8]=n):n=o[8],t=n}else{let e,n;o[9]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[9]=e):e=o[9],o[10]!==u?(n={refs:e,topic:u},o[10]=u,o[11]=n):n=o[11],t=n}let{refs:h,topic:f}=t;if(o[12]!==c.agentsEnabled||o[13]!==c.apiURL||o[14]!==c.graphqlApiUrl||o[15]!==c.loopsClientUrl||o[16]!==c.previewUrl||o[17]!==c.realIp||o[18]!==c.sparkEnabled||o[19]!==c.ssoOrganizations){if(a=[],eE.W.loopsPlugin){let e;o[21]!==c.apiURL||o[22]!==c.graphqlApiUrl||o[23]!==c.loopsClientUrl||o[24]!==c.previewUrl||o[25]!==c.realIp||o[26]!==c.ssoOrganizations?(e=new LoopsPlugin(c.apiURL,c.graphqlApiUrl,c.loopsClientUrl,c.ssoOrganizations.map(mQ),c.previewUrl,c.realIp),o[21]=c.apiURL,o[22]=c.graphqlApiUrl,o[23]=c.loopsClientUrl,o[24]=c.previewUrl,o[25]=c.realIp,o[26]=c.ssoOrganizations,o[27]=e):e=o[27],a.push(e)}if(c.sparkEnabled){let e;o[28]===Symbol.for("react.memo_cache_sentinel")?(e=new SparkPlugin,o[28]=e):e=o[28],a.push(e)}if(c.agentsEnabled){let e;o[29]===Symbol.for("react.memo_cache_sentinel")?(e=new AgentsPlugin,o[29]=e):e=o[29],a.push(e)}o[12]=c.agentsEnabled,o[13]=c.apiURL,o[14]=c.graphqlApiUrl,o[15]=c.loopsClientUrl,o[16]=c.previewUrl,o[17]=c.realIp,o[18]=c.sparkEnabled,o[19]=c.ssoOrganizations,o[20]=a}else a=o[20];let g=mV(n=a);return o[30]!==l?(r=(0,m.jsx)(nu.BH,{children:l}),o[30]=l,o[31]=r):r=o[31],o[32]!==c||o[33]!==g||o[34]!==h||o[35]!==r||o[36]!==d||o[37]!==f?(i=(0,m.jsx)(q.Mj,{workerPath:c.searchWorkerFilePath,threadId:d,pluginId:g,refs:h,mode:"immersive",topic:f,ssoOrganizations:c.ssoOrganizations,copilotUpsellBannerDismissed:c.copilotUpsellBannerDismissed,copilotChatPayload:c,children:r}),o[32]=c,o[33]=g,o[34]=h,o[35]=r,o[36]=d,o[37]=f,o[38]=i):i=o[38],o[39]!==n||o[40]!==i?(s=(0,m.jsx)(t9,{children:(0,m.jsx)(ni.LB,{children:(0,m.jsx)(ew.Hb,{plugins:n,children:i})})}),o[39]=n,o[40]=i,o[41]=s):s=o[41],s}function mQ(e){return e.id}function mK(){let e,t,n=(0,p.c)(2);!function(){let e,t,n=(0,p.c)(7),a=oQ(),r=(0,x.useRef)(!0),i=(0,x.useRef)(null),s=(0,H.b)(),{threads:o,selectedThreadID:l}=(0,q.Pk)(),c=oG(),{selectedThreadID:d,sharedThreadChannel:u}=(0,q.Pk)(),m=(0,H.b)();(0,mq.x)(u,()=>{m.fetchSharedThreadMessages(d)}),n[0]!==c||n[1]!==s||n[2]!==l||n[3]!==a||n[4]!==o?(e=()=>{if(r.current){r.current=!1,i.current=a,c?s.fetchSharedThreadMessages(l):s.fetchMessages(l);return}if(i.current!==a){if(i.current=a,a===l)return;let e=a&&o?.get(a);s.selectThread(e||null,{includeThreads:!1,clearTopic:!0})}},t=[s,a,o,l,c],n[0]=c,n[1]=s,n[2]=l,n[3]=a,n[4]=o,n[5]=e,n[6]=t):(e=n[5],t=n[6]),(0,x.useEffect)(e,t)}(),function(){let e,t,n=(0,p.c)(8),{selectedThreadID:a}=(0,q.Pk)(),r=(0,n_.v)(),i=(0,cs.M)((0,ef.Zp)());n[0]!==i||n[1]!==r?.skipSyncRouteToThread||n[2]!==a?(e=()=>{if(!a||r?.skipSyncRouteToThread)return;let e=`${eI.Jz}/c/${a}`,t=`${eI.Jz}/share/${a}`,n=window.location.pathname;n.startsWith(e)||n.startsWith(t)||i.current(e)},n[0]=i,n[1]=r?.skipSyncRouteToThread,n[2]=a,n[3]=e):e=n[3];let s=r?.skipSyncRouteToThread;n[4]!==i||n[5]!==a||n[6]!==s?(t=[i,s,a],n[4]=i,n[5]=a,n[6]=s,n[7]=t):t=n[7],(0,x.useEffect)(e,t)}();let a=(0,p.c)(3),r=(0,H.b)();if(a[0]!==r?(e=()=>{let e=()=>{window.location.href.includes("/r/")?(r.showTopicPicker(!1),r.selectThread(null)):window.location.href.includes("/c/")||(r.showTopicPicker(!0),r.selectThread(null))};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},t=[r],a[0]=r,a[1]=e,a[2]=t):(e=a[1],t=a[2]),(0,x.useEffect)(e,t),!function(){let e,t,n=(0,p.c)(6),a=mV((0,ew.qw)()),r=oQ(),{activePlugin:i}=(0,q.bP)("activePlugin"),s=(0,H.b)();n[0]!==i||n[1]!==s||n[2]!==a||n[3]!==r?(e=()=>{r||(i??null)!==a&&s.selectPlugin(a)},t=[i,s,a,r],n[0]=i,n[1]=s,n[2]=a,n[3]=r,n[4]=e,n[5]=t):(e=n[4],t=n[5]),(0,x.useEffect)(e,t)}(),eE.W.immersiveAppShell){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(m$,{}),n[0]=e):e=n[0],e}{let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(mk,{}),n[1]=e):e=n[1],e}}try{mG.displayName||(mG.displayName="CopilotImmersive")}catch{}try{mH.displayName||(mH.displayName="CopilotImmersiveNoRelay")}catch{}try{mz.displayName||(mz.displayName="CopilotImmersiveProviders")}catch{}try{mK.displayName||(mK.displayName="Immersive")}catch{}(0,u.o)("copilot-immersive-v1",()=>({App:h,routes:[(0,d.a)({path:"/copilot",Component:mG,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/c/:threadID",Component:mG,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/d/:docsetName",Component:mG}),(0,d.a)({path:"/copilot/r/:owner/:repository",Component:mG}),(0,d.a)({path:"/copilot/share/:threadID",Component:mG}),(0,d.a)({path:"/copilot/loop/share",Component:mG,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/loops/share/:shareID",Component:mG,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/loops",Component:mG,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/l/:loopID",Component:mG,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/workbench",Component:mG,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/spark",Component:mG,transitionType:c.E.TRANSITION_WITHOUT_FETCH}),(0,d.a)({path:"/copilot/spaces",Component:mG}),(0,d.a)({path:"/copilot/spaces/:spaceID",Component:mG}),(0,d.a)({path:"/copilot/spaces/:owner/:spaceNumber",Component:mG}),(0,d.a)({path:"/copilot/spaces/:owner/:spaceNumber/edit",Component:mG}),(0,d.a)({path:"/copilot/spaces/:spaceID/edit",Component:mG}),(0,d.a)({path:"/copilot/spaces/new",Component:mG}),(0,d.a)({path:"/copilot/agents",Component:mG})]}))},93380:(e,t,n)=>{n.d(t,{B:()=>i});var a=n(21728),r=n(96540);function i(e){let t,n,i,s=(0,a.c)(4),[o,l]=(0,r.useState)(e);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>l(!0),s[0]=t):t=s[0];let c=t;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>l(!1),s[1]=n):n=s[1];let d=n;return s[2]!==o?(i=[o,c,d],s[2]=o,s[3]=i):i=s[3],i}},41649:(e,t,n)=>{n.d(t,{K:()=>s});var a=n(21728),r=n(88431),i=n(96540);let s=e=>{let t,n,s,o=(0,a.c)(4),l=(0,i.useRef)(e);return o[0]!==e?(t=()=>{l.current=e},n=[e],o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,r.N)(t,n),o[3]===Symbol.for("react.memo_cache_sentinel")?(s=(...e)=>l.current?.(...e),o[3]=s):s=o[3],s}},78456:(e,t,n)=>{n.d(t,{Io:()=>a});let a=[{id:"dummy-1",dummy:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:0x19814ddb7a4,nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",metadata:{inputType:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",metadata:{inputType:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",description:"Document this function so it's easy to understand",updatedAt:0x19814ddb7a4,nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",metadata:{inputType:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",metadata:{inputType:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",description:"Generate a course teaching me how this code works",updatedAt:0x19814ddb7a4,nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",description:"Generate and validate potential names for your app",updatedAt:0x19814ddb7a4,nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",metadata:{inputType:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",description:"Generate a wiki article on a topic or question",updatedAt:0x19814ddb7a4,nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",metadata:{inputType:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",metadata:{inputType:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",description:"Compare the performance of two prompts",updatedAt:0x19814ddb7a4,nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",metadata:{inputType:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]},{id:"dummy-7",dummy:!0,title:"testing node with offset",description:"Test the edge render behavior for diagram with node offset",updatedAt:0x19814ddb7a4,nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"lichin-lin",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-7d",metadata:{inputType:"date"}},{id:"repos",type:"text",title:"Repositories",description:"List of repositories to include in the report (one per line, e.g. primer/react)",content:`primer/react
primer/css
primer/components`,metadata:{inputType:"text"}},{id:"repo_query",type:"prompt",title:"Repository Query Builder",description:"Builds the repository query string for GitHub search",content:`Convert this list of repositories into a GitHub search query format. For each repository on a new line in {{repos}}, add 'repo:' prefix and combine with OR operators.

For example:
- If input is 'primer/react\\nprimer/css'
- Output should be 'repo:primer/react OR repo:primer/css'

Only return the query string, nothing else.`},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) author:{{1}} is:issue created:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          repository {
            nameWithOwner
          }
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) is:pr reviewed-by:{{1}} updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          repository {
            nameWithOwner
          }
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) involves:{{1}} is:issue updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          repository {
            nameWithOwner
          }
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Combined Activity Summary",description:"Summary report of the first responder's activity across all repositories",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity across multiple repositories over the past week. The repositories included are: {{repos}}

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers across all repositories)
2. Repository Breakdown (activity summary per repository)
3. Issue Activity
   - Created Issues (grouped by repository)
   - Issue Involvement (comments, assignments, grouped by repository)
4. PR Review Activity (highlight significant reviews, grouped by repository)
5. Key Observations (patterns across repositories, areas needing attention)

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift. Pay special attention to cross-repository patterns and any repositories that may need extra attention.`}]}]},295:(e,t,n)=>{n.d(t,{h:()=>c});var a=n(21728),r=n(97665),i=n(94747),s=n(99519),o=n(80770),l=n(99993);function c(){let e,t,n,c=(0,a.c)(7),d=(0,r.jE)(),u=(0,s.EY)();return c[0]!==u?(e=async e=>await u.deleteLoop(e),c[0]=u,c[1]=e):e=c[1],c[2]!==d?(t=(e,t)=>{e.success&&(d.removeQueries({queryKey:[l.M1,t]}),d.invalidateQueries({queryKey:[o.n]}))},c[2]=d,c[3]=t):t=c[3],c[4]!==e||c[5]!==t?(n={mutationFn:e,onSuccess:t},c[4]=e,c[5]=t,c[6]=n):n=c[6],(0,i.n)(n)}},12465:(e,t,n)=>{n.d(t,{P:()=>u,W:()=>m});var a=n(21728),r=n(94747),i=n(97665),s=n(46747),o=n(99519),l=n(99993),c=n(33026);function d(e){let t,n,i=(0,a.c)(5),s=(0,o.EY)();return i[0]!==s?(t=async e=>{let{loopID:t,updateFn:n}=e;return await s.updateLoop(t,n)},i[0]=s,i[1]=t):t=i[1],i[2]!==e||i[3]!==t?(n={mutationFn:t,...e},i[2]=e,i[3]=t,i[4]=n):n=i[4],(0,r.n)(n)}function u(){let e,t=(0,a.c)(3),n=(0,i.jE)(),{getLoopQueryKey:r}=(0,l.Nw)();return t[0]!==r||t[1]!==n?(e={onMutate:async e=>{let{loopID:t,updateFn:a}=e;await n.cancelQueries({queryKey:r(t,c.kj)});let i=n.getQueryData(r(t,c.kj)),s=i?.version?n.getQueryData(r(t,i.version)):null;if(i){let e=a(i);n.setQueryData(r(t,c.kj),e),e.version&&n.setQueryData(r(t,e.version),e)}return{previousDraftLoop:i,previousVersionedLoop:s,loopID:t}},onError:(e,t,a)=>{a?.previousDraftLoop&&(n.setQueryData(r(a.loopID,c.kj),a.previousDraftLoop),a.previousVersionedLoop&&a.previousDraftLoop.version&&n.setQueryData(r(a.loopID,a.previousDraftLoop.version),a.previousVersionedLoop))}},t[0]=r,t[1]=n,t[2]=e):e=t[2],d(e)}function m(){let e,t,n=(0,a.c)(7),r=(0,i.jE)(),{getLoopQueryKey:o}=(0,l.Nw)(),u=d(),m=(0,s.d)(u.mutate,500);n[0]!==m||n[1]!==o||n[2]!==r?(e=async(e,t)=>{let{loopID:n,updateFn:a}=e;await r.cancelQueries({queryKey:o(n,c.kj)});let i=a(r.getQueryData(o(n,c.kj))??null);return r.setQueryData(o(n,c.kj),i),m({loopID:n,updateFn:a}),t?.onSuccess?.(),i},n[0]=m,n[1]=o,n[2]=r,n[3]=e):e=n[3];let p=e;return n[4]!==p||n[5]!==u?(t={...u,mutate:p},n[4]=p,n[5]=u,n[6]=t):t=n[6],t}},80770:(e,t,n)=>{n.d(t,{C:()=>o,n:()=>s});var a=n(21728),r=n(97286),i=n(99519);let s="all-loops";function o(){let e,t,n=(0,a.c)(3),o=(0,i.EY)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[s],n[0]=e):e=n[0],n[1]!==o?(t={queryKey:e,queryFn:async()=>{let e=await o.getAllLoops();if(!e.success)throw Error(e.error);return e.data},refetchOnMount:!0},n[1]=o,n[2]=t):t=n[2],(0,r.I)(t)}},48057:(e,t,n)=>{n.d(t,{Cv:()=>u,Qk:()=>y,vx:()=>f,wu:()=>h});var a=n(21728),r=n(97286),i=n(99519),s=n(5533),o=n(33026),l=n(64917),c=n(50050),d=n(99993);function u(){let e=(0,l.I)(p),t=(0,c.Ud)(m);return t===o.qD||t===o.kj?e:t}function m(e){return e.version}function p(e){return e?.version}function h(e,t){return["execution",e,t]}function f(){let e,t=(0,a.c)(3),{data:n}=(0,d._N)(g),r=u(),i=n??"",s=r??"";return t[0]!==i||t[1]!==s?(e=h(i,s),t[0]=i,t[1]=s,t[2]=e):e=t[2],e}function g(e){return e?.id}function y(e){let t,n,l,c,m=(0,a.c)(14),{data:p}=(0,d._N)(_),f=u(),g=(0,i.EY)(),y=p??"",x=f??"";m[0]!==y||m[1]!==x?(t=h(y,x),m[0]=y,m[1]=x,m[2]=t):t=m[2],m[3]!==p||m[4]!==g||m[5]!==f?(n=async()=>{if(!p||!f)return null;let e=await g.getExecution(p,f,o.qD);if(!e.success)return null;let t=e.data;return g.isExecutionRunning(t.id)!==(0,s.y)(t)?null:t},m[3]=p,m[4]=g,m[5]=f,m[6]=n):n=m[6];let v=!!p&&!!f;return m[7]!==e?(l=e&&{select:e},m[7]=e,m[8]=l):l=m[8],m[9]!==t||m[10]!==n||m[11]!==v||m[12]!==l?(c={queryKey:t,queryFn:n,enabled:v,...l,staleTime:3e5},m[9]=t,m[10]=n,m[11]=v,m[12]=l,m[13]=c):c=m[13],(0,r.I)(c)}function _(e){return e?.id}},99993:(e,t,n)=>{n.d(t,{M1:()=>u,Nw:()=>p,_N:()=>h});var a=n(21728),r=n(97665),i=n(97286),s=n(13017),o=n(99519),l=n(78456),c=n(33026),d=n(50050);let u="loop",m="shared-loop";function p(){let e,t,n=(0,a.c)(4),{shareID:r}=(0,s.g)();n[0]!==r?(e=(e,t)=>r?[m,r]:[u,e,t],n[0]=r,n[1]=e):e=n[1];let i=e;return n[2]!==i?(t={getLoopQueryKey:i},n[2]=i,n[3]=t):t=n[3],t}function h(e,t){let n,h,y,_,x=(0,a.c)(18),{loopID:v,shareID:b}=(0,s.g)(),S=(0,o.EY)(),C=(0,r.jE)(),{getLoopQueryKey:j}=p(),N=(0,d.Ud)(g),w=t||N||c.kj;x[0]!==v||x[1]!==b||x[2]!==w?(n=b?[m,b]:[u,v,w],x[0]=v,x[1]=b,x[2]=w,x[3]=n):n=x[3];let I=n;x[4]!==j||x[5]!==v||x[6]!==C||x[7]!==S||x[8]!==b||x[9]!==w?(h=async()=>{if(!v&&!b)return null;let e=l.Io.find(e=>e.id===v)??null;if(e)return e;let t=b?await S.getSharedLoop(b):v?await S.getLoop(v,w):null;return t&&t.success?(t.data.version&&t.data.version!==w&&C.setQueryData(j(t.data.id,t.data.version),t.data),t.data):null},x[4]=j,x[5]=v,x[6]=C,x[7]=S,x[8]=b,x[9]=w,x[10]=h):h=x[10];let E=!!v||!!b;return x[11]!==e?(y=e&&{select:e},x[11]=e,x[12]=y):y=x[12],x[13]!==I||x[14]!==h||x[15]!==E||x[16]!==y?(_={placeholderData:f,queryKey:I,queryFn:h,enabled:E,...y,staleTime:3e5},x[13]=I,x[14]=h,x[15]=E,x[16]=y,x[17]=_):_=x[17],(0,i.I)(_)}function f(e){return e}function g(e){return e?.version}},64917:(e,t,n)=>{n.d(t,{I:()=>i});var a=n(21728),r=n(99993);function i(e,t){let n=(0,a.c)(2),{data:i}=(0,r._N)(e,t);if(void 0===i){let t;return n[0]!==e?(t=e(void 0),n[0]=e,n[1]=t):t=n[1],t}return i}},96989:(e,t,n)=>{n.d(t,{ag:()=>s,kn:()=>o,yc:()=>c});var a=n(21728),r=n(76746),i=n(99993);function s(){let e,t=(0,a.c)(3),{data:n}=(0,i._N)();e:{let a;if(!n){let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],t[0]=n):n=t[0],e=n;break e}t[1]!==n?(a=(0,r.v)(n),t[1]=n,t[2]=a):a=t[2],e=a}return e}function o(e){let t,n=(0,a.c)(5),r=s();if(n[0]!==e||n[1]!==r){let a;n[3]!==e?(a=t=>t.involvedNodes.includes(e),n[3]=e,n[4]=a):a=n[4],t=r.filter(a).map(l),n[0]=e,n[1]=r,n[2]=t}else t=n[2];return t}function l(e){return e.error}function c(e){let t,n=(0,a.c)(5),r=s();if(n[0]!==e||n[1]!==r){let a;n[3]!==e?(a=t=>!e||t.involvedNodes.includes(e),n[3]=e,n[4]=a):a=n[4],t=r.some(a),n[0]=e,n[1]=r,n[2]=t}else t=n[2];return t}},54908:(e,t,n)=>{n.d(t,{J:()=>LoopsService});var a=n(35750),r=n(18150),i=n(85242),s=n(88243),o=n(16213),l=n(91348),c=n(45363),d=n(21046),u=n(90122),m=new WeakMap,p=new WeakMap,h=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t,n){let r={graphQLClient:(0,a._)(this,p),chatClient:(0,a._)(this,h),signal:e,onPartialResult:t,execution:n};return c.C.executeNode((0,a._)(this,m),r)}constructor(e,t,n){(0,r._)(this,m,{writable:!0,value:void 0}),(0,r._)(this,p,{writable:!0,value:void 0}),(0,r._)(this,h,{writable:!0,value:void 0}),(0,i._)(this,m,e),(0,i._)(this,p,t),(0,i._)(this,h,n)}};var f=n(33026),g=new WeakMap,y=new WeakMap,_=new WeakMap,x=new WeakMap,v=new WeakMap,b=new WeakMap,S=new WeakMap,C=new WeakSet,j=new WeakSet,N=new WeakSet;let LoopRunner=class LoopRunner{async run(e,t){let n=(0,l.FT)((0,a._)(this,_));if(0===n.length)throw Error("No output node");await Promise.all(n.map(n=>(0,s._)(this,j,I).call(this,n,e,t)))}stop(e){(0,a._)(this,S).abort(),e((0,a._)(this,x))}constructor(e,t,n,a){(0,o._)(this,C),(0,o._)(this,j),(0,o._)(this,N),(0,r._)(this,g,{writable:!0,value:void 0}),(0,r._)(this,y,{writable:!0,value:void 0}),(0,r._)(this,_,{writable:!0,value:void 0}),(0,r._)(this,x,{writable:!0,value:void 0}),(0,r._)(this,v,{writable:!0,value:void 0}),(0,r._)(this,b,{writable:!0,value:void 0}),(0,r._)(this,S,{writable:!0,value:void 0}),(0,i._)(this,g,n),(0,i._)(this,y,a),(0,i._)(this,_,e),(0,i._)(this,x,t),(0,i._)(this,v,(0,l.f0)(e.nodes)),(0,i._)(this,b,new Map),(0,i._)(this,S,new AbortController)}};function w(){return(0,a._)(this,S).signal.aborted}async function I(e,t,n){let r=(0,a._)(this,b).get(e.id);if(r)return r;let i=(0,s._)(this,N,E).call(this,e,t,n);return(0,a._)(this,b).set(e.id,i),i}async function E(e,t,n){if((0,s._)(this,C,w).call(this))return null;let r=await n((0,a._)(this,_).id,(0,a._)(this,_).version||f.kj,(0,a._)(this,x));if(!r.success)throw Error("Unable to load execution");let i=r.data,o=i.nodes[e.id]?.value;if(o)return o;let l=[...new Set((0,a._)(this,v).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>(0,a._)(this,_).nodes.find(t=>t.id===e)).filter(e=>!!e),m=await Promise.all(l.map(async e=>[e.id,await (0,s._)(this,j,I).call(this,e,t,n)]));if(m.some(([e,t])=>null===t)||(0,s._)(this,C,w).call(this))return null;let p=Object.fromEntries(m);try{let n=((e,t)=>{let n={...e},a=n.content;return"string"==typeof a&&(n.content=function(e,t,n=!1){let a=(0,u.ZP)();return e.replace(a,(e,a,r,i)=>{let s=t[a];if(void 0===s)return(0,d.vV)(`Node with ID "${a}" not found in node map`),e;let o=s;if(r)if(s&&"object"==typeof s&&!Array.isArray(s)){let e=function(e,t){if(!t||!e)return null;let n=t.split("."),a=e;for(let e of n){if(null==a||"object"!=typeof a||null===a)return null;a=a[e]}return a}(s,r);if(null!==e)o=e;else throw Error(`Path "${r}" on node with ID "${a}" does not have a value`)}else throw Error(`Cannot access path "${r}" on non-object node with ID "${a}"`);return String(("string"!=typeof o||n?JSON.stringify(o):o)??e)})}(a,t,c.C.requiresCodeEvaluation(e.type))),n})(e,p),r=new NodeRunner(n,(0,a._)(this,g),(0,a._)(this,y));t({type:"SET_RUNNING",nodeID:e.id});let o=n=>{(0,s._)(this,C,w).call(this)||t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:n})},l=await r.run((0,a._)(this,S).signal,o,i);return(0,s._)(this,C,w).call(this)||t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:l}),l}catch(n){var h;return(0,s._)(this,C,w).call(this)||t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(h=n)instanceof Error?h.message:"string"==typeof h?h:"object"==typeof h?JSON.stringify(h):""}),null}}var T=n(43134),k=n(69599),R=n(93364),A=n(76746),L=new WeakMap,D=new WeakMap,P=new WeakMap,M=new WeakMap,O=new WeakMap,B=new WeakSet,F=new WeakSet,U=new WeakSet,$=new WeakSet,V=new WeakSet,q=new WeakSet;let LoopsService=class LoopsService{async getGraphQLResponse(e){return(0,a._)(this,P).getGraphQLResponse(e)}async getLoop(e,t=f.kj){let n=await (0,a._)(this,L).getLoop(e,t),r=n?.success?n.data:null,i=(0,s._)(this,q,K).call(this)?await (0,a._)(this,D).getLoop(e,t):null,o=i?.success?i.data:null;if(o&&"draft"===t&&!n?.success&&n?.httpStatus===404){let e=await (0,a._)(this,L).createLoop({...o,version:"0.0.0"});e.success&&(r=e.data)}let l=r??o;return l?(0,R.$j)(l):(0,R.YD)("loop not found")}async getAllLoops(){let e=(0,s._)(this,q,K).call(this)?await (0,a._)(this,D).getAllLoops(f.qD):null,t=e?.success?e.data:[],n=await (0,a._)(this,L).listLoops(),r=n?.success?n.data:[],i=await this.reconcileLoops(t,r);return(0,R.$j)(i.sort((e,t)=>t.updatedAt-e.updatedAt))}async getLoopVersions(e){let t=await (0,a._)(this,L).listLoopVersions(e);return t?.success?t:(0,R.$j)([])}async reconcileLoops(e,t){let n=[];for(let r of e){let e=t.find(e=>e.id===r.id);e?e.updatedAt>r.updatedAt?n.push(e):(await (0,s._)(this,B,W).call(this,e.id,()=>r),n.push(r)):(await (0,a._)(this,L).createLoop(r),n.push(r))}for(let a of t)e.find(e=>e.id===a.id)||n.push(a);return n}async createLoop(e){let t=await (0,a._)(this,L).createLoop("string"==typeof e?{id:e}:e),n=(0,s._)(this,q,K).call(this)?await (0,a._)(this,D).createLoop(e):null;return(0,s._)(this,V,Q).call(this,t,n,(0,R.YD)("failed to create loop"))}async updateLoop(e,t){let n=await (0,s._)(this,B,W).call(this,e,t),r=(0,s._)(this,q,K).call(this)?await (0,a._)(this,D).updateLoop(e,t):null;return(0,s._)(this,V,Q).call(this,n,r,(0,R.YD)("failed to update loop"))}async deleteLoop(e){(0,T._T)(e);let t=await (0,a._)(this,L).deleteLoop(e),n=(0,s._)(this,q,K).call(this)?await (0,a._)(this,D).deleteLoop(e):null;return(0,s._)(this,V,Q).call(this,t,n,(0,R.YD)("failed to delete loop"))}async saveLoop(e){let t="object"==typeof e,n=t?e.id:e,r=t?e:void 0,i=await (0,s._)(this,F,G).call(this,n,r),o=(0,s._)(this,q,K).call(this)?await (0,a._)(this,D).saveLoop(n):null;return(0,s._)(this,V,Q).call(this,i,o,(0,R.YD)("failed to save loop"))}async revertLoop(e){let t=await (0,s._)(this,U,H).call(this,e),n=(0,s._)(this,q,K).call(this)?await (0,a._)(this,D).revertLoop(e):null;return(0,s._)(this,V,Q).call(this,t,n,(0,R.YD)("failed to revert loop"))}async restoreLoopVersion(e){return await (0,a._)(this,L).updateLoop(e.id,f.qD,e)}async getExecution(e,t,n){let r=await (0,a._)(this,L).getExecution(e,t,n),i=(0,s._)(this,q,K).call(this)?await (0,a._)(this,D).getExecution(e,t,n):null;return(0,s._)(this,V,Q).call(this,r,i,(0,R.YD)("failed to get execution"))}async createExecution(e,t,n,r){let i=Object.fromEntries(Object.entries(n?.nodes??{}).map(([e,t])=>[e,t.value]).filter(([e,t])=>!!t)),o=(0,s._)(this,q,K).call(this)?await (0,a._)(this,D).createExecution(e,t,n):null,l=await (0,a._)(this,L).createExecution(e,t,i,n?.inputValues,r);return(0,s._)(this,V,Q).call(this,l,o,(0,R.YD)("failed to create execution"))}async updateExecution(e,t,n,r,i){let o=await (0,s._)(this,$,z).call(this,e,t,n,r,i),l=(0,s._)(this,q,K).call(this)?await (0,a._)(this,D).updateExecution(e,t,n,r):null;return(0,s._)(this,V,Q).call(this,o,l,(0,R.YD)("failed to update execution"))}isExecutionRunning(e){return!!(0,a._)(this,O).get(e)}async runPipeline(e,t,n,r){if((0,A.v)(e).length>0)return;let i=new LoopRunner(e,t,(0,a._)(this,P),(0,a._)(this,M));(0,a._)(this,O).set(t,i);try{return await i.run(n,r)}finally{(0,a._)(this,O).delete(t)}}stopPipeline(e,t){let n=(0,a._)(this,O).get(e);n&&(n.stop(t),(0,a._)(this,O).delete(e))}async shareLoop(e){return await (0,a._)(this,L).shareLoop(e)}async unshareLoop(e){return await (0,a._)(this,L).unshareLoop(e)}async getSharedLoop(e){return await (0,a._)(this,L).getSharedLoop(e)}async duplicateSharedLoop(e){return await (0,a._)(this,L).duplicateSharedLoop(e)}constructor(e,t,n,a){(0,o._)(this,B),(0,o._)(this,F),(0,o._)(this,U),(0,o._)(this,$),(0,o._)(this,V),(0,o._)(this,q),(0,r._)(this,L,{writable:!0,value:void 0}),(0,r._)(this,D,{writable:!0,value:void 0}),(0,r._)(this,P,{writable:!0,value:void 0}),(0,r._)(this,M,{writable:!0,value:void 0}),(0,r._)(this,O,{writable:!0,value:new Map}),(0,i._)(this,L,e),(0,i._)(this,D,t),(0,i._)(this,P,n),(0,i._)(this,M,a)}};async function W(e,t){let n=await (0,a._)(this,L).getLoop(e,f.kj);if(!n.success){if(404!==n.httpStatus)return(0,R.YD)("error fetching existing loop");if(!(0,s._)(this,q,K).call(this))return n;let t=await (0,a._)(this,D).getLoop(e,f.kj);if(!t.success)return(0,R.YD)(`loop ${e} not found`);if(!(n=await (0,a._)(this,L).createLoop(t.data)).success)return n}let r=t(n.data);return await (0,a._)(this,L).updateLoop(e,f.kj,r)}async function G(e,t){let n=await (0,a._)(this,L).getLoop(e,"draft");if(!n.success){if(404!==n.httpStatus)return(0,R.YD)("error fetching existing loop");if(!(0,s._)(this,q,K).call(this))return n;let t=await (0,a._)(this,D).getLoop(e,"draft");if(!t.success)return(0,R.YD)(`loop ${e} not found`);if(!(n=await (0,a._)(this,L).createLoop(t.data)).success)return n}return await (0,a._)(this,L).updateLoop(e,f.qD,t??n.data)}async function H(e){let t=await (0,a._)(this,L).getLoop(e,f.qD);if(!t.success){if(404!==t.httpStatus)return(0,R.YD)("error fetching existing loop");if(!(0,s._)(this,q,K).call(this))return t;let n=await (0,a._)(this,D).getLoop(e,f.qD);return n.success?(0,a._)(this,L).createLoop(n.data):(0,R.YD)(`no restorable version for loop ${e}`)}return(0,a._)(this,L).updateLoop(e,"draft",t.data)}async function z(e,t,n,r,i){let s=await (0,a._)(this,L).getExecution(e,t,n);if(!s.success)return s;let o=s.data;for(let[s,l]of Object.entries(r.nodes))o.nodes[s]&&o.nodes[s].value===l.value&&o.nodes[s].error===l.error||await (0,a._)(this,L).updateNodeExecution(e,t,n,s,l,i);return await (0,a._)(this,L).getExecution(e,t,n)}function Q(...e){for(let t of e)if(t?.success)return t;for(let t of e)if(t)return t;return(0,R.YD)("no results to combine")}function K(){return!(0,k.G7)("loops_remove_browser_storage")}},45363:(e,t,n)=>{n.d(t,{C:()=>d});var a=n(50467),r=n(38621);function i(e){return e.content}var s=n(90122),o=n(31629),l=n(39087),c=n(59370);let PromptNodeHandler=class PromptNodeHandler{async execute(e,t){let n=await (0,s.Vq)(e),a="";for await(let r of t.chatClient.getChatCompletion(n,e.metadata?.model,t.signal))a+=r,t.onPartialResult?.(a);return a}constructor(){(0,a._)(this,"type","prompt"),(0,a._)(this,"metadata",{contentFields:["content"],icon:()=>r.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let n=await t.graphQLClient.getGraphQLResponse(e.content,t.signal);return n?{data:n.data??null,resources:n.resources??null}:null}constructor(){(0,a._)(this,"type","github-graphql"),(0,a._)(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>r.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",featureFlag:"copilot_pipes_github_graphql_nodes",outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){return i(e)}constructor(){(0,a._)(this,"type","code"),(0,a._)(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>r.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",featureFlag:"copilot_pipes_react_nodes",outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return i(e)}constructor(){(0,a._)(this,"type","visualize"),(0,a._)(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>r.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",featureFlag:"copilot_pipes_react_nodes"})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){let n=t.execution?.inputValues?.[e.id],a=void 0!==n?n:i(e);if("date"===e.metadata.inputType&&"string"==typeof a&&(0,c.nS)(a)){let e=(0,c.Qf)(a);if(e)return(0,c.O2)(e)}return a}constructor(){(0,a._)(this,"type","text"),(0,a._)(this,"metadata",{type:"text",contentFields:["content"],icon:e=>e&&(0,o.ir)(e)?(0,l.J)(e,"icon"):r.TypographyIcon,description:e=>e&&(0,o.ir)(e)?(0,l.J)(e,"description"):"Input for nodes",label:e=>e&&(0,o.ir)(e)?(0,l.J)(e,"name"):"Input",color:"blue"})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return i(e)}constructor(){(0,a._)(this,"type","loop"),(0,a._)(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>r.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",featureFlag:"copilot_pipes_pipeline_nodes",outputLabel:"Pipeline output",isExecutable:!0})}};let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){this.handlers.set(e.type,e)}async executeNode(e,t){let n=this.handlers.get(e.type);if(!n)throw Error(`No handler registered for node type: ${e.type}`);return n.execute(e,t)}getMetadata(e){let t=this.handlers.get(e);return t?.metadata}getAllMetadata(){return Array.from(this.handlers.values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from(this.handlers.keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){(0,a._)(this,"handlers",new Map),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let d=new NodeHandlerRegistry},93364:(e,t,n)=>{function a(e){return{success:!0,data:e}}function r(e,t){var n,a;return{success:!1,error:(n=e)?"string"==typeof n?n:"object"!=typeof n?(void 0)??i:"message"in n&&"string"==typeof n.message?n.message:"error"in n&&"string"===n.error?n.error:a??i:a??i,httpStatus:t?.status}}n.d(t,{$j:()=>a,YD:()=>r});let i="Unknown error"},76746:(e,t,n)=>{n.d(t,{v:()=>i});var a=n(61872);n(39087);var r=n(91348);function i(e){let t=function(e){let t=[];for(let n of("string"!=typeof e.title&&t.push({error:"Pipeline is missing a title",errorType:a.T.MissingProperty,involvedNodes:[]}),Array.isArray(e.nodes)&&0!==e.nodes.length||t.push({error:"Pipeline has no nodes",errorType:a.T.MissingProperty,involvedNodes:[]}),e.nodes))t=t.concat(function(e){let t=[];return("string"!=typeof e.title||0===e.title.length)&&t.push({error:"Node is missing a title",errorType:a.T.MissingProperty,involvedNodes:[e.id]}),"text"===e.type&&(t=t.concat(function(e){let t=[],n=e.metadata;if("object"!=typeof n||!n)return t.push({error:"metadata is required for text nodes",errorType:a.T.MissingProperty,involvedNodes:[e.id]}),t;switch(n.inputType){case"boolean":["true","false"].includes(e.content)||t.push({error:'A boolean input must have a value of either "true" or "false"',errorType:a.T.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof n.min&&t.push({error:"A range input must have a min",errorType:a.T.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof n.max&&t.push({error:"A range input must have a max",errorType:a.T.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(n.options)&&0!==n.options.length?n.options.includes(e.content)||t.push({error:"A select node must have content equal to one of its options",errorType:a.T.InvalidSelectValue,involvedNodes:[e.id]}):t.push({error:"A select input must have options",errorType:a.T.InvalidSelectValue,involvedNodes:[e.id]});break;case"text":e.content||t.push({error:"Input needs a value",errorType:a.T.EmptyInputValue,involvedNodes:[e.id]})}return t}(e))),t}(n));return t}(e),n=(0,r.f0)(e.nodes);for(let r of n.edges){let n=e.nodes.find(e=>e.id===r.from),i=e.nodes.find(e=>e.id===r.to);n&&i||t.push({error:`Node ${r.to} references a nonexistent node {{${r.from}}}`,errorType:a.T.NonexistentNode,involvedNodes:[r.to]})}let i=function(e){let t=new Set,n=new Set,a=[],r=i=>{if(n.has(i)){let e=a.indexOf(i);return a.slice(e)}if(t.has(i))return null;for(let s of(t.add(i),n.add(i),a.push(i),e.edges))if(s.from===i){let e=r(s.to);if(e)return e}return n.delete(i),a.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=r(n.id);if(e)return e}return null}(n);if(i&&i.length>0){let e=[...i,i[0]];t.push({error:`Pipeline contains a cycle: ${e.join(" \u2192 ")}`,errorType:a.T.CycleDetected,involvedNodes:i})}let s=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],a=new Set,r=(t,n)=>{for(let i of(a.add(t),n.add(t),e.edges))i.from!==t||a.has(i.to)||r(i.to,n),i.to!==t||a.has(i.from)||r(i.from,n)};for(let e of t)if(!a.has(e.id)){let t=new Set;r(e.id,t),n.push(t)}if(n.length<=1)return[];let i=n.reduce((e,t)=>t.size>e.size?t:e,new Set),s=[];for(let e of t)i.has(e.id)||s.push(e.id);return s}(n);return s.length>0&&t.push({error:`Pipeline contains unreachable nodes: ${s.join(", ")}`,errorType:a.T.DisconnectedNode,involvedNodes:s}),t}n(45363)},8283:(e,t,n)=>{n.d(t,{A7:()=>S,EV:()=>c,H_:()=>b,Hi:()=>v,IO:()=>h,TR:()=>d,TV:()=>g,Z5:()=>_,gg:()=>x,jw:()=>f,oB:()=>m,sP:()=>u,xY:()=>p});var a=n(64917),r=n(96989),i=n(48057),s=n(91348),o=n(5533),l=n(99993);let c=(e,t)=>t?.nodes.find(t=>t.id===e);function d(e){return(0,a.I)(t=>c(e,t)?.content??"")}function u(e){return(0,a.I)(t=>c(e,t)?.type??"text")}function m(e){return(0,a.I)(t=>c(e,t))}function p(e){let{data:t}=(0,i.Qk)(t=>t?.nodes[e]?.value??null);return t??null}function h(e){let{data:t}=(0,i.Qk)(t=>t?.nodes[e]?.error);return t}function f(e){let{data:t}=(0,i.Qk)(t=>(0,o.f)(t?.nodes[e]));return t??!1}function g(){let{data:e}=(0,i.Qk)(o.y);return e??!1}function y(e,t,n){if(!e||!t)return"IDLE";let a=t.nodes[e],r=(0,o.f)(a),i=!!a?.value,s=!!a?.error,l=n.some(t=>t.involvedNodes.includes(e));return s||l?"ERROR":r?"PROCESSING":i?"COMPLETED":"IDLE"}function _(e){let t=(0,r.ag)(),{data:n}=(0,i.Qk)(n=>y(e,n,t));return n?.toUpperCase()??"IDLE"}function x(){let e=(0,r.ag)(),{data:t}=(0,l._N)(),{data:n}=(0,i.Qk)(n=>{if(!n||!t)return"IDLE";let a=(0,s.FT)(t);if(0===a.length)return"IDLE";let r=a.map(t=>y(t.id,n,e));return r.some(e=>"ERROR"===e)?"ERROR":r.some(e=>"PROCESSING"===e)?"PROCESSING":r.every(e=>"COMPLETED"===e)?"COMPLETED":"IDLE"});return n?.toUpperCase()??"IDLE"}function v(e,t){let n=(0,r.ag)(),{data:a}=(0,i.Qk)(a=>{if(!e||!t||!a)return"IDLE";let r=a.nodes[e],i=a.nodes[t],s=(0,o.f)(i),l=!!i?.value,c=!!r?.value,d=(0,o.f)(r),u=!!r?.error,m=n.some(t=>t.involvedNodes.includes(e));return u||m?"ERROR":s?"PROCESSING":l&&c&&!d?"COMPLETED":"IDLE"});return a?.toUpperCase()??"IDLE"}function b(){return(0,a.I)(e=>e?.id)}function S(){return(0,a.I)(e=>e?.shareID)}},96868:(e,t,n)=>{n.d(t,{Fj:()=>i,Kh:()=>r,qB:()=>s});var a=n(33026);let r={CANVAS:"canvas",OUTPUT:"output"},i={CHAT:"chat",NODE:"node",CONFIGURE:"configure"},s={focusedNodeId:null,hoveredNodeId:null,view:r.CANVAS,sidePanelView:i.NODE,version:a.U8}},61872:(e,t,n)=>{n.d(t,{T:()=>a});let a={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue"}},39087:(e,t,n)=>{n.d(t,{J:()=>i,j:()=>r});var a=n(38621);let r={range:{name:"Range",description:"A numeric value within a specified range",icon:a.NumberIcon},text:{name:"Text",description:"Free form text input",icon:a.TypographyIcon},boolean:{name:"Boolean",description:"True or false value",icon:a.CheckIcon},select:{name:"Select",description:"Choose from a list of predefined options",icon:a.ListUnorderedIcon},date:{name:"Date",description:"Date or macro",icon:a.CalendarIcon}};function i(e,t){return(r[e.metadata.inputType]??r.text)[t]}},46857:(e,t,n)=>{n.d(t,{I:()=>s,O:()=>i});var a=n(91348),r=n(82590);function i(e){for(let n of e.references??[]){var t;if(n.type===r.km&&(t=n)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t={description:n.description,id:n.id,title:n.title,nodes:n.nodes,updatedAt:new Date(e.createdAt).getTime()},r=(0,a.cZ)(t,[]);return{messageId:e.id,pipeline:r}}}}function s(e,t=!1){for(let n of[...e].reverse()){if("assistant"!==n.role&&!t)continue;let e=i(n);if(e)return e}}},17616:(e,t,n)=>{function a(e,t){let n=function(e){let t=0;for(let n=0;n<e.length;n++)t=(31*t+e.charCodeAt(n))%0x3b9aca07;return t}(e)%t.length;return t[n]}n.d(t,{S:()=>a,u:()=>r});let r=["auburn","blue","brown","coral","cyan","gray","green","indigo","lemon","lime","olive","orange","pine","pink","plum","purple","red","teal","yellow"]},21046:(e,t,n)=>{function a(){}function r(){}n.d(t,{FF:()=>a,vV:()=>r})},82590:(e,t,n)=>{n.d(t,{J1:()=>c,Os:()=>o,QK:()=>l,S$:()=>r,ZS:()=>p,bW:()=>u,km:()=>s,lN:()=>m,lh:()=>i,qe:()=>d});var a=n(25641);let r="loops",i="loops",s="loop",o="Loops",l=`${a.Jz}/loops`,c=`${a.Jz}/l`,d=/\/copilot\/loops/,u=/\/copilot\/l\/([a-zA-Z0-9-]+)/,m=/\/copilot\/loop\/share/,p=/\/copilot\/loops\/share\/([a-zA-Z0-9-]+)/},59370:(e,t,n)=>{function a(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function r(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||o(t)===e)}function i(e){return a(e)||r(e)}function s(e){return e.startsWith("@")&&!a(e)?null:a(e)?function(e){if(!a(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let n=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!n)return{date:null,error:`Invalid macro format: ${e}`};let[,r,i,s]=n;if(!r||!i||!s)return{date:null,error:`Invalid macro format: ${e}`};let o=parseInt(i,10),l="+"===r,c=new Date(t);switch(s){case"d":c.setDate(c.getDate()+(l?o:-o));break;case"w":c.setDate(c.getDate()+(l?7*o:-(7*o)));break;case"m":c.setMonth(c.getMonth()+(l?o:-o));break;case"y":c.setFullYear(c.getFullYear()+(l?o:-o));break;default:return{date:null,error:`Invalid unit: ${s}`}}return{date:c}}(e).date:r(e)?new Date(e):null}function o(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}n.d(t,{O2:()=>o,Qf:()=>s,Yj:()=>i,nS:()=>a})},5533:(e,t,n)=>{function a(e){return!!e?.startedAt&&!e?.completedAt}function r(e){return!!e&&Object.values(e.nodes).some(a)}n.d(t,{f:()=>a,y:()=>r})},43134:(e,t,n)=>{n.d(t,{_T:()=>c,aq:()=>l,qU:()=>o});var a=n(82075),r=n(21046);let i=(0,a.A)("localStorage"),s="copilot-loops-thread-";function o(e){try{let t=`${s}${e}`;return i.getItem(t)}catch(e){return(0,r.FF)("Failed to read loop thread ID from localStorage:",e),null}}function l(e,t){if(null!==t)try{let n=`${s}${e}`;i.setItem(n,t)}catch(e){(0,r.FF)("Failed to store loop thread ID in localStorage:",e)}}function c(e){try{let t=`${s}${e}`;i.removeItem(t)}catch(e){(0,r.FF)("Failed to remove loop thread ID from localStorage:",e)}}},91348:(e,t,n)=>{n.d(t,{FT:()=>f,Gx:()=>m,Hx:()=>y,NZ:()=>g,cZ:()=>p,f0:()=>l,nT:()=>d});var a=n(31629),r=n(21046),i=n(90122),s=n(39087),o=n(45363);function l(e){let t={nodes:new Map,edges:[],layers:[]};if(!e)return t;for(let n of e){if(!n?.id)continue;let e=u(n.id);t.nodes.set(e,n)}for(let n of e)for(let e of c(n)){let a=u(e);n?.id&&a&&t.edges.push({from:a,to:n.id})}let n=function(e){let t={},n=new Set,a=(i,s=0)=>{try{if(n.has(i))throw Error(`Potential cycle detected at node ${i}`);if(n.add(i),s>100)return(0,r.FF)(`Maximum recursion depth reached for node ${i}`),0;if(void 0!==t[i])return t[i];let o=e.nodes.get(i);if(!o)return t[i]=0,0;let l=c(o);if(l&&0!==l.size){let e=[...l].map(e=>{let t=u(e);return a(t,s+1)});t[i]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===i).map(e=>e.to);0===n.length?t[i]=-1:t[i]=1}return t[i]}finally{n.delete(i)}};for(let[n]of e.nodes)if(!t[n])try{a(n)}catch(e){(0,r.vV)(`Error computing layer for node ${n}:`,e),t[n]=0}let i=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=i);let s=[];for(let[n,a]of Object.entries(t)){let t=e.nodes.get(n);t&&(s[a]||(s[a]=[]),s[a].push(t))}return s.filter(Boolean)}(t);return t.layers=n,t}function c(e){let t=(0,i.ZP)();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function d(e){return new Set([...c(e)].map(u))}function u(e){return e.match(/^[^|.]+/)?.[0]??e}let m=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:o.C.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===n.type&&(n.metadata=function(e){if((0,a.ir)(e))return s.j[e.metadata.inputType]?e.metadata:{inputType:"text"}}(e)||{inputType:"text"}),"string"!=typeof n.content&&(n.content=""),(0,a.jq)(n)){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>(0,a.ir)(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},p=(e,t)=>{let n=function(e){return{...e,nodes:e.nodes.map(h)}}(e);return{...n,nodes:(n.nodes||[]).map(e=>m(e,t)).filter(e=>null!==e)}};function h(e){return"prompt"===e.type&&"model"in e&&"string"==typeof e.model?{...e,metadata:{model:e.model}}:"text"===e.type&&"inputType"in e?{...e,metadata:function(e){if("type"in e&&"string"==typeof e.type){let t="file"===e.type?"text":e.type;return{...e,inputType:t}}return e}(e.inputType)}:e}function f(e){let t=l(e.nodes);return e.nodes.filter(e=>_(e,t))}function g(e){let t={nodes:new Map,edges:[...e.edges],layers:[...e.layers]};for(let[n,a]of e.nodes)t.nodes.set(n,a);let n=[...e.nodes].filter(([,t])=>_(t,e));if(n.length>0){let e="virtual-output";for(let[,a]of(t.nodes.set(e,{type:"output",id:e}),n))t.edges.push({from:a.id,to:e})}return t}function y(e){return"virtual-output"===e}function _(e,t){return!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id)}},31629:(e,t,n)=>{function a(e){return"github-graphql"===e.type}function r(e){return"loop"===e.type}function i(e){return"text"===e.type}n.d(t,{Tm:()=>a,ir:()=>i,jq:()=>r})},49912:(e,t,n)=>{n.d(t,{j:()=>i});var a=n(54908),r=n(82590);function i(e){return e.id===r.S$&&"service"in e&&e.service instanceof a.J}},53380:(e,t,n)=>{n.d(t,{Ts:()=>i,_A:()=>r,hW:()=>s});var a=n(96868);function r(e){let t={},n=e.get("focusedNode");n&&(t.focusedNodeId=n);let r=e.get("view");r&&Object.values(a.Kh).includes(r)&&(t.view=r);let i=e.get("sidePanel");i&&Object.values(a.Fj).includes(i)&&(t.sidePanelView=i);let s=e.get("version");return s&&(t.version=s),t}function i(e){let t=new URLSearchParams;return e.focusedNodeId&&t.set("focusedNode",e.focusedNodeId),e.view!==a.qB.view&&t.set("view",e.view),e.sidePanelView!==a.qB.sidePanelView&&t.set("sidePanel",e.sidePanelView),e.version!==a.qB.version&&t.set("version",e.version),t}function s(e){return{...a.qB,...r(e)}}},90122:(e,t,n)=>{n.d(t,{DO:()=>s,Vq:()=>i,ZP:()=>a});let a=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,r=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function i(e){return[{role:"system",content:r},{role:"user",content:e.content}]}function s(e){return null==e?"":"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):Array.isArray(e)?e.map(s).join(`
`):String(e)}},33026:(e,t,n)=>{n.d(t,{U8:()=>i,kj:()=>a,qD:()=>r});let a="draft",r="latest",i=a},72931:(e,t,n)=>{function a(){return{favicon:document.querySelector('.js-site-favicon[type="image/svg+xml"]'),faviconFallback:document.querySelector('.js-site-favicon[type="image/png"]')}}function r(e){let{favicon:t,faviconFallback:n}=a();if(!t||!n)return;let r=l();e=e.substr(0,e.lastIndexOf(".")),t.href=e=`${e}${r}.svg`;let i=t.href.substr(0,t.href.lastIndexOf("."));n.href=`${i}.png`}function i(){let{favicon:e,faviconFallback:t}=a();if(!e||!t)return;let n=l(),r=e.href.indexOf("-dark.svg"),i=e.href.substr(0,-1!==r?r:e.href.lastIndexOf("."));e.href=`${i}${n}.svg`,t.href=`${i}${n}.png`}function s(e){let{favicon:t,faviconFallback:n}=a();if(!t||!n)return;let r=t.getAttribute("data-base-href"),i="default"===e?"":`-${e}`,s=l();r&&(t.href=`${r}${i}${s}.svg`,n.href=`${r}${i}${s}.png`)}function o(){s("default")}function l(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"-dark":""}n.d(t,{Ow:()=>r,gd:()=>o,iD:()=>s,uQ:()=>i})},30923:(e,t,n)=>{n.d(t,{Ee:()=>l,b4:()=>c,Ts:()=>o});var a=n(50467);let r=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),(0,a._)(this,"response",void 0),this.response=t,this.name="ResponseError"}};var i=n(69759),s=n(51987);async function o(e,t,n){let a=new Request(t,n);(0,s.tV)(a.headers);let o=await self.fetch(a);if(o.status<200||o.status>=300)throw Error(`HTTP ${o.status}${o.statusText||""}`);return!function(e,t,n=!1){let a=t.headers.get("content-type")||"";if(!n&&!a.startsWith("text/html"))throw new r(`expected response with text/html, but was ${a}`,t);if(n&&!(a.startsWith("text/html")||a.startsWith("application/json")))throw new r(`expected response with text/html or application/json, but was ${a}`,t);let i=t.headers.get("x-html-safe");if(i){if(!e.includes(i))throw new r("response X-HTML-Safe nonce did not match",t)}else throw new r("missing X-HTML-Safe nonce",t)}(function(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}(e),o),(0,i.B)(e,await o.text())}function l(e,t,n=1e3,a=[200],r=[202]){return async function n(i){let o=new Request(e,t);(0,s.tV)(o.headers);let l=await self.fetch(o);if(r.includes(l.status))return await new Promise(e=>setTimeout(e,i)),n(1.5*i);if(a.includes(l.status))return l;if(l.status<200||l.status>=300)throw Error(`HTTP ${l.status}${l.statusText||""}`);throw Error(`Unexpected ${l.status} response status from poll endpoint`)}(n)}async function c(e,t,n){let{wait:a=500,acceptedStatusCodes:r=[200],max:i=3,attempt:o=0}=n||{},l=async()=>new Promise((n,l)=>{setTimeout(async()=>{try{let a=new Request(e,t);(0,s.tV)(a.headers);let l=await self.fetch(a);if(r.includes(l.status)||o+1===i)return n(l);n("retry")}catch(e){l(e)}},a*o)}),d=await l();return"retry"!==d?d:c(e,t,{wait:a,acceptedStatusCodes:r,max:i,attempt:o+1})}},84363:(e,t,n)=>{n.d(t,{t:()=>r});var a=n(59403);let r=({items:e,filter:t,key:n,secondaryKey:r})=>{let i=e.map(e=>[(0,a.dt)(t,n(e)),e]);return r&&(i=i.map(([e,n])=>[Math.max(e,(0,a.dt)(t,r(n))),n])),i.filter(([e])=>e>a.IP).sort(([e,t],[a,r])=>a===e?n(t).localeCompare(n(r)):a-e).map(([,e])=>e)}},59403:(e,t,n)=>{n.d(t,{Dx:()=>s,IP:()=>i,M4:()=>r,dt:()=>o});var a=n(91385);let r=1/0,i=-1/0,s=1,o=(e,t,n=s)=>{let o=e.trim().toLowerCase(),l=t.trim().toLowerCase();if(o===l)return r;if(0===l.length||0===o.length)return i;let c=(0,a.fN)(o,l);return c===1/0&&o!==l?i:l.startsWith(o)||l.endsWith(o)?c+n:c}},60429:(e,t,n)=>{n.d(t,{A:()=>s});let a=n.p+"jetbrains-e16495e63a33.png",r=n.p+"neovim-3301f23c4307.png",i=n.p+"vscode-380056900de8.png",s={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:i,name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:n.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:n.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:a,name:"JetBrains",eventName:"JETBRAINS"},neovim:{url:"https://github.com/github/copilot.vim",icon:r,name:"Neovim",eventName:"NEOVIM"}}},61767:(e,t,n)=>{n.d(t,{FC:()=>l,I0:()=>s,dV:()=>o,h$:()=>d,jK:()=>c});let a=null,r=!1;function i(e){let t=function(){let e=document.querySelector("context-region");return e&&e.isConnected&&e.pushCrumb&&"function"==typeof e.pushCrumb?e:null}();if(t)return void e(t);a=e,function(){if(r)return;r=!0;let e=document.querySelector("context-region-controller");e&&e.addEventListener("context-region-connected",()=>{a&&(a(e.contextRegion),a=null)},{once:!0})}()}function s(e){i(t=>t.pushCrumb(e))}function o(){i(e=>e.popCrumb())}function l(e){i(t=>t.replaceCrumbs(e))}function c(e){i(t=>t.renameCurrentCrumb(e))}function d(e){i(t=>t.replaceCurrentCrumb(e))}},65820:(e,t,n)=>{n.d(t,{H:()=>i});var a=n(37285),r=n(48845);async function i(e,t,n){let i=await (0,r.q$)(e);if(401===i.status){let e=n.getQueryData(t);if(!e)throw new r.ol;return e}let s=await (0,r.hp)(i);return(0,a.Av)(s),(0,r.R)(i),s}},80679:(e,t,n)=>{n.d(t,{gX:()=>t7,S4:()=>as,OC:()=>b,Uz:()=>au});var a,r=n(74848),i=n(21728);function s(e){if(null==e)throw Error("Failed to load page data.")}var o=n(75202),l=n(38621),c=n(12004),d=n(34164),u=n(96540),m=n(17645),p=n(20622),h=n(53885),f=n(50129),g=n(65820),y=n(97665),_=n(97286);function x(){let e,t=(0,i.c)(2),{basePageDataUrl:n}=(0,f.Yu)(),a=`basePageDataURL:${n}`;return t[0]!==a?(e=[p.u.mergeBox,a],t[0]=a,t[1]=e):e=t[1],e}let v=(0,u.createContext)({mergeMethod:m.q$.MERGE,setMergeMethod:()=>{}});function b({children:e,defaultMergeMethod:t}){let[n,a]=(0,u.useState)(t),i=x(),s=(0,y.jE)();(0,u.useEffect)(()=>{s.invalidateQueries({queryKey:i})},[n]);let o=(0,u.useMemo)(()=>({mergeMethod:n,setMergeMethod:a}),[n]);return(0,r.jsx)(v.Provider,{value:o,children:e})}function S(){return(0,u.useContext)(v)}try{v.displayName||(v.displayName="MergeMethodContext")}catch{}try{b.displayName||(b.displayName="MergeMethodContextProvider")}catch{}function C(e){let t=e&&e.conditions.find(e=>m.nw.includes(e.type));if(t&&"conflicts"in t&&"isConflictResolvableInWeb"in t)return t}function j(e){return e?.conditions.filter(e=>m.iG.includes(e.type)&&"FAILED"===e.result)??[]}var N=n(35750),w=n(18150),I=n(85242),E=n(88243),T=n(16213),k=n(50467);let BaseSectionStatus=class BaseSectionStatus{get shouldRender(){return!1}get shouldConsiderStatus(){return this.shouldRender}get sectionStatus(){return"UNKNOWN"}get mergeBoxStatus(){return"UNKNOWN"}constructor(e,t,n){(0,k._)(this,"pullRequest",void 0),(0,k._)(this,"mergeRequirements",void 0),(0,k._)(this,"statusChecks",void 0),this.pullRequest=e,this.mergeRequirements=t,this.statusChecks=n}};let R=["MERGE_QUEUE","REQUIRED_STATUS_CHECKS"],A=["PULL_REQUEST_REPO_STATE","PULL_REQUEST_STATE"],L=["USER_CANNOT_PUSH"];var D=new WeakMap,P=new WeakMap,M=new WeakMap,O=new WeakMap;let BlockedSectionStatus=class BlockedSectionStatus extends BaseSectionStatus{get shouldRender(){return this.mergeRequirements?.state==="UNMERGEABLE"&&!this.pullRequest.isDraft&&0!==this.failingConditionsAndRules.length&&this.pullRequest.viewerCanUpdate}get sectionStatus(){return this.mergeRequirements?.state==="UNMERGEABLE"?"FAILED":"PASSED"}get mergeBoxStatus(){return this.sectionStatus}get failingConditionsAndRules(){return(0,N._)(this,D)||(0,I._)(this,D,[...(0,N._)(this,M),...(0,N._)(this,P),...(0,N._)(this,O)]),(0,N._)(this,D)}constructor(...e){super(...e),(0,w._)(this,P,{get:B,set:void 0}),(0,w._)(this,M,{get:F,set:void 0}),(0,w._)(this,O,{get:U,set:void 0}),(0,w._)(this,D,{writable:!0,value:void 0})}};function B(){return j(this.mergeRequirements).flatMap(e=>"ruleRollups"in e?e.ruleRollups:[]).filter(e=>e?.result==="FAILED"&&!R.includes(e.ruleType))}function F(){var e;return(e=this.mergeRequirements,e?.conditions.filter(e=>m.jw.includes(e.type)&&"FAILED"===e.result)??[]).filter(e=>!A.includes(e.type))}function U(){var e;return(e=this.mergeRequirements,e?.conditions.filter(e=>m.TW.includes(e.type)&&"FAILED"===e.result)??[]).flatMap(e=>"failedSubConditions"in e?e.failedSubConditions:[]).filter(e=>!L.includes(e.displayName))}let $={AwaitingReview:"AwaitingReview",ChangesRequested:"ChangesRequested",ChecksFailing:"ChecksFailing",ChecksPending:"ChecksPending",DraftReadyForReview:"DraftReadyForReview",DraftNotReadyForReview:"DraftNotReadyForReview",InMergeQueue:"InMergeQueue",MergeConflicts:"MergeConflicts",Mergeable:"Mergeable",NonactionableFailure:"NonactionableFailure",NonRequiredChecksUnsuccessful:"NonRequiredChecksUnsuccessful",UnableToMerge:"UnableToMerge",Unknown:"Unknown",Merged:"Merged",Closed:"Closed"};function V(e){return(e?.conditions.filter(e=>"FAILED"===e.result)??[]).map(e=>e.type)}function q(e){return!!e?.statusChecks.some(e=>e.isRequired&&function(e){switch(e){case"WAITING":case"PENDING":case"IN_PROGRESS":case"QUEUED":case"EXPECTED":return!0;case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"CANCELLED":case"STALE":case"TIMED_OUT":case"SUCCESS":case"COMPLETED":case"NEUTRAL":case"REQUESTED":case"SKIPPED":case"_UNKNOWN_VALUE":return!1}}(e.state))}function W(e){return!!e?.statusChecks.some(e=>e.isRequired&&function(e){switch(e){case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"_UNKNOWN_VALUE":case"CANCELLED":case"STALE":case"TIMED_OUT":return!0;case"SUCCESS":case"COMPLETED":case"EXPECTED":case"IN_PROGRESS":case"NEUTRAL":case"PENDING":case"QUEUED":case"REQUESTED":case"SKIPPED":case"WAITING":return!1}}(e.state))}function G(e){return void 0!==e&&e?.statusChecks.length!==0&&(!W(e)||!q(e))}function H(e,t){return e?.state!=="UNMERGEABLE"&&!!t?.statusChecks.some(e=>!e.isRequired&&!function(e){switch(e){case"NEUTRAL":case"SUCCESS":case"SKIPPED":return!0;case"WAITING":case"PENDING":case"IN_PROGRESS":case"QUEUED":case"EXPECTED":case"ACTION_REQUIRED":case"FAILURE":case"ERROR":case"STARTUP_FAILURE":case"CANCELLED":case"STALE":case"TIMED_OUT":case"COMPLETED":case"REQUESTED":case"_UNKNOWN_VALUE":return!1}}(e.state))||t?.statusRollup.combinedState==="PENDING_APPROVAL"}function z(e){let t=e?.conditions.find(e=>"PULL_REQUEST_RULES"===e.type),n=t?.ruleRollups?.find(e=>"PULL_REQUEST"===e.ruleType);if(!n||"FAILED"!==n.result)return[];let a=n.metadata;return a&&"failureReasons"in a&&a.failureReasons.map(e=>e.toUpperCase())||[]}function Q(e){return V(e).includes("PULL_REQUEST_MERGE_CONFLICT_STATE")}let ChecksSectionStatus=class ChecksSectionStatus extends BaseSectionStatus{get shouldRender(){let e=this.statusChecks?.statusRollup;return(e?.summary.length??0)>0||e?.combinedState==="PENDING_APPROVAL"}get sectionStatus(){let e=C(this.mergeRequirements);return"DIRTY"===this.pullRequest.mergeStateStatus&&e?.result==="FAILED"?"PENDING_CONFLICTS":this.statusChecks?.statusRollup.combinedState??"UNKNOWN"}get mergeBoxStatus(){if("PENDING_APPROVAL"===this.sectionStatus)return"PENDING_USER_ACTION";let e=W(this.statusChecks),t=q(this.statusChecks),n=G(this.statusChecks),a=H(this.mergeRequirements,this.statusChecks);return t||"PENDING"===this.sectionStatus||"PENDING_CONFLICTS"===this.sectionStatus?"PENDING":e?"FAILED":a?"NEUTRAL":n?"PASSED":"NEUTRAL"}};let ClosedOrMergedStateSectionStatus=class ClosedOrMergedStateSectionStatus extends BaseSectionStatus{get shouldRender(){return"OPEN"!==this.pullRequest.state}get sectionStatus(){return"OPEN"!==this.pullRequest.state?this.pullRequest.state:"UNKNOWN"}get mergeBoxStatus(){return"MERGED"===this.sectionStatus?"MERGED":"NEUTRAL"}};var K=new WeakMap,J=new WeakMap,Y=new WeakMap;let ConflictsSectionStatus=class ConflictsSectionStatus extends BaseSectionStatus{get shouldRender(){return("BLOCKED"!==this.pullRequest.mergeStateStatus||!!this.pullRequest.viewerCanUpdateBranch)&&!!this.conflictsCondition}get sectionStatus(){return this.conflictsCondition?(0,N._)(this,Y).call(this,this.pullRequest.advisoryWorkspace,this.pullRequest.mergeStateStatus,this.conflictsCondition,(0,N._)(this,J)):"PENDING"}get mergeBoxStatus(){switch(this.sectionStatus){case"NO_CONFLICTS":case"HAS_ADVISORY_WORKSPACE":return"PASSED";case"HAS_CONFLICTS":case"HAS_REBASE_CONFLICTS":case"OUT_OF_DATE":return"NEUTRAL";default:return"PENDING"}}get conflictsCondition(){return(0,N._)(this,K)||(0,I._)(this,K,C(this.mergeRequirements)),(0,N._)(this,K)}constructor(...e){super(...e),(0,w._)(this,J,{get:X,set:void 0}),(0,w._)(this,K,{writable:!0,value:void 0}),(0,w._)(this,Y,{writable:!0,value:(e,t,n,a)=>{if("BEHIND"===t)return"OUT_OF_DATE";if("UNKNOWN"===t)return"PENDING";if("FAILED"===n.result&&0===a.length)return"HAS_REBASE_CONFLICTS";if(!e&&("CLEAN"===t||"UNSTABLE"===t||"HAS_HOOKS"===t))return"NO_CONFLICTS";if(e&&("CLEAN"===t||"UNSTABLE"===t||"HAS_HOOKS"===t))return"HAS_ADVISORY_WORKSPACE";else if("DIRTY"===t&&"FAILED"===n.result)return"HAS_CONFLICTS";else if("BLOCKED"===t)return"OUT_OF_DATE";else return"PENDING"}})}};function X(){return this.conflictsCondition?.conflicts??[]}let DraftStateSectionStatus=class DraftStateSectionStatus extends BaseSectionStatus{get shouldRender(){return"OPEN"===this.pullRequest.state&&this.pullRequest.isDraft}get sectionStatus(){return"IS_DRAFT"}get mergeBoxStatus(){return"NEUTRAL"}};let MergeQueueSectionStatus=class MergeQueueSectionStatus extends BaseSectionStatus{get shouldRender(){return this.pullRequest.isInMergeQueue}get sectionStatus(){return"QUEUED"}get mergeBoxStatus(){return this.sectionStatus}};var Z=n(30459),ee=n(81246),et=n(92265),en=n(63557);let ea={wrapper:"MergeBoxSectionHeader-module__wrapper--zMA1Y",wrapperCanExpand:"MergeBoxSectionHeader-module__wrapperCanExpand--AoekL",button:"MergeBoxSectionHeader-module__button--mkkJX",MergeBoxSectionHeading:"MergeBoxSectionHeader-module__MergeBoxSectionHeading--miHzz"},er=e=>{let t,n,a,s=(0,i.c)(5),{isExpanded:o}=e,c=o?"":"rotate(180deg)";return s[0]!==c?(t={transition:"transform 0.15s ease-in-out",transform:c},s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(l.ChevronUpIcon,{}),s[2]=n):n=s[2],s[3]!==t?(a=(0,r.jsx)("div",{style:t,children:n}),s[3]=t,s[4]=a):a=s[4],a};try{er.displayName||(er.displayName="ExpandableSectionIcon")}catch{}let ei=e=>{let t,n,a,s,o,l,c,u,m,p,h=(0,i.c)(31),{title:f,subtitle:g,headerId:y,icon:_,expandableProps:x,children:v,rightSideContent:b}=e;if(x&&b)throw Error("MergeBoxSectionHeader: rightSideContent is not supported when expandableProps exist");h[0]!==x?(t=x||{},h[0]=x,h[1]=t):t=h[1];let{isExpanded:S,ariaLabel:C,onToggle:j}=t,N=x&&ea.wrapperCanExpand,w=!x&&"flex-column flex-sm-row flex-items-center flex-sm-items-start flex-justify-between";return h[2]!==N||h[3]!==w?(n=(0,d.$)(ea.wrapper,N,w),h[2]=N,h[3]=w,h[4]=n):n=h[4],h[5]!==_?(a=_&&(0,r.jsx)("div",{className:"mr-2 flex-shrink-0",children:_}),h[5]=_,h[6]=a):a=h[6],h[7]!==y||h[8]!==f?(s=(0,r.jsx)(en.A,{as:"h3",id:y,className:ea.MergeBoxSectionHeading,children:f}),h[7]=y,h[8]=f,h[9]=s):s=h[9],h[10]!==g?(o=(0,r.jsx)("p",{className:"fgColor-muted mb-0 ",children:g}),h[10]=g,h[11]=o):o=h[11],h[12]!==v||h[13]!==s||h[14]!==o?(l=(0,r.jsxs)("div",{className:"flex-1",children:[s,o,v]}),h[12]=v,h[13]=s,h[14]=o,h[15]=l):l=h[15],h[16]!==b||h[17]!==l?(c=(0,r.jsxs)("div",{className:"d-flex flex-1 flex-column flex-sm-row gap-2",children:[l,b]}),h[16]=b,h[17]=l,h[18]=c):c=h[18],h[19]!==a||h[20]!==c?(u=(0,r.jsxs)("div",{className:"d-flex width-full",children:[a,c]}),h[19]=a,h[20]=c,h[21]=u):u=h[21],h[22]!==C||h[23]!==x||h[24]!==S||h[25]!==j?(m=x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{"aria-label":C,type:"button",className:ea.button,onClick:j,"aria-expanded":S}),(0,r.jsx)("div",{className:"fgColor-muted pr-2 pt-2",children:(0,r.jsx)(er,{isExpanded:!!S})})]}),h[22]=C,h[23]=x,h[24]=S,h[25]=j,h[26]=m):m=h[26],h[27]!==u||h[28]!==m||h[29]!==n?(p=(0,r.jsxs)("div",{className:n,children:[u,m]}),h[27]=u,h[28]=m,h[29]=n,h[30]=p):p=h[30],p};try{ei.displayName||(ei.displayName="MergeBoxSectionHeader")}catch{}let es={reviewAuthor:"ReviewerSection-module__reviewAuthor--ieHt5",reviewAuthorAnchor:"ReviewerSection-module__reviewAuthorAnchor--UMy9c",leadingVisual:"ReviewerSection-module__leadingVisual--_bMPf",reviewedIcon:"ReviewerSection-module__reviewedIcon--KucH5",reviewerGroupsContainer:"ReviewerSection-module__reviewerGroupsContainer--pZhlf",reviewText:"ReviewerSection-module__reviewText--JiCKY",reviewerActionBar:"ReviewerSection-module__reviewerActionBar--iT6ez",subtitleLink:"ReviewerSection-module__subtitleLink--J58lv"},eo={expandableContent:"MergeBoxExpandable-module__expandableContent--li_O1",expandableWrapper:"MergeBoxExpandable-module__expandableWrapper--Ejab0",isExpanded:"MergeBoxExpandable-module__isExpanded--PaOkp"},el=e=>{let t,n,a,s,o,l=(0,i.c)(13),{isExpanded:c,children:u}=e,m=void 0!==c&&c,p=m&&eo.isExpanded;l[0]!==p?(t=(0,d.$)(eo.expandableWrapper,p),l[0]=p,l[1]=t):t=l[1];let h=m?"visible":"hidden";l[2]!==h?(n={visibility:h},l[2]=h,l[3]=n):n=l[3];let f=m&&eo.isExpanded;l[4]!==f?(a=(0,d.$)(eo.expandableContent,f),l[4]=f,l[5]=a):a=l[5];let g=m&&u;return l[6]!==a||l[7]!==g?(s=(0,r.jsx)("div",{className:a,children:g}),l[6]=a,l[7]=g,l[8]=s):s=l[8],l[9]!==t||l[10]!==n||l[11]!==s?(o=(0,r.jsx)("div",{className:t,style:n,children:s}),l[9]=t,l[10]=n,l[11]=s,l[12]=o):o=l[12],o};try{el.displayName||(el.displayName="MergeBoxExpandable")}catch{}var ec=n(97174),ed=n(55847);let eu={groupHeadingButton:"ReviewGroupExpander-module__groupHeadingButton--S7IXP",expandableWrapper:"ReviewGroupExpander-module__expandableWrapper--Xlmef",expandableListView:"ReviewGroupExpander-module__expandableListView--hoVAr",isExpanded:"ReviewGroupExpander-module__isExpanded--SHz1f"};var em=n(40104);let ep=e=>{let t,n,a,s=(0,i.c)(5),{isExpanded:o}=e,c=o?"rotate(90deg)":"";return s[0]!==c?(t={transform:c},s[0]=c,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(l.ChevronRightIcon,{size:12}),s[2]=n):n=s[2],s[3]!==t?(a=(0,r.jsx)("div",{style:t,children:n}),s[3]=t,s[4]=a):a=s[4],a};try{ep.displayName||(ep.displayName="ExpandableGroupIcon")}catch{}let eh={[m.Qv.Approvals]:(0,r.jsx)(l.CheckIcon,{className:"fgColor-success",size:16}),[m.Qv.RequestedChanges]:(0,r.jsx)(l.FileDiffIcon,{className:"fgColor-danger",size:16}),[m.Qv.PendingReviewRequest]:(0,r.jsx)(l.PersonIcon,{size:16})};function ef(e){let t,n,a,s,o,l,c,m,p=(0,i.c)(29),{children:h,count:f,pullRequestId:g,reviewGroup:y}=e,{sendAnalyticsEvent:_}=(0,Z.s)(),[x,v]=(0,em.Fo)(`${g}:reviewersGroup:${y}Expanded`,!1),b=(0,u.useId)(),S=eh[y],C=`${f} ${f>1?y:y.substring(0,y.length-1)}`,j=x?`Collapse ${C} group`:`Expand ${C} group`;p[0]!==x?(t=()=>(0,r.jsx)(ep,{isExpanded:x}),p[0]=x,p[1]=t):t=p[1],p[2]!==x||p[3]!==y||p[4]!==_||p[5]!==v?(n=()=>{_(x?"reviewers_group.collapse":"reviewers_group.expand","MERGEBOX_REVIEWERS_GROUP_TOGGLE_BUTTON",{group:y}),v(!x)},p[2]=x,p[3]=y,p[4]=_,p[5]=v,p[6]=n):n=p[6],p[7]!==C?(a=(0,r.jsx)("span",{className:"ml-1",children:C}),p[7]=C,p[8]=a):a=p[8],p[9]!==b||p[10]!==x||p[11]!==S||p[12]!==j||p[13]!==t||p[14]!==n||p[15]!==a?(s=(0,r.jsxs)(ed.Q,{"aria-controls":b,"aria-expanded":x,"aria-label":j,className:eu.groupHeadingButton,variant:"invisible",size:"small",trailingVisual:t,onClick:n,children:[S," ",a]}),p[9]=b,p[10]=x,p[11]=S,p[12]=j,p[13]=t,p[14]=n,p[15]=a,p[16]=s):s=p[16];let N=x&&eu.isExpanded;p[17]!==N?(o=(0,d.$)(eu.expandableWrapper,N),p[17]=N,p[18]=o):o=p[18];let w=x&&h;return p[19]!==w?(l=(0,r.jsx)("div",{className:eu.expandableListView,children:w}),p[19]=w,p[20]=l):l=p[20],p[21]!==b||p[22]!==C||p[23]!==o||p[24]!==l?(c=(0,r.jsx)("div",{className:o,id:b,"aria-label":C,role:"group",children:l}),p[21]=b,p[22]=C,p[23]=o,p[24]=l,p[25]=c):c=p[25],p[26]!==c||p[27]!==s?(m=(0,r.jsxs)(r.Fragment,{children:[s,c]}),p[26]=c,p[27]=s,p[28]=m):m=p[28],m}try{ef.displayName||(ef.displayName="ReviewGroupExpander")}catch{}var eg=n(2970),ey=n(95378),e_=n(65964),ex=n(77430);let ev={listItem:"SectionListItem-module__listItem--cGdcZ"};var eb=n(52446),eS=n(69410),eC=n(65029),ej=n(75298),eN=n(96665),ew=n(94747),eI=n(48845),eE=n(9214),eT=n(30729);function ek({reviewer:e,reviewStatusText:t,hovercardUrl:n,reviewId:a,viewerCanDismissReviews:s,viewerCanReRequestReviews:o=!1}){let c=(0,u.useRef)(null),m=(0,u.useRef)(null),[f,g]=(0,u.useState)(!1),[_,v]=(0,u.useState)(null),[b,S]=(0,u.useState)(""),C=b.trim().length<1,[j,N]=(0,u.useState)(!1),w=[s?{key:"dismiss-review",render:()=>(0,r.jsx)(eb.l.Item,{onSelect:()=>{g(!0)},children:"Dismiss review"})}:null,o?{key:"re-request-review",render:()=>(0,r.jsx)(eb.l.Item,{onSelect:()=>T({reviewerLogin:e.login}),children:"Re-request review"})}:null].filter(e=>!!e),I=!!a&&w.length>0,E=async()=>{v(null),g(!1),N(!1),m.current?.focus()},{mutate:T}=function(e){let t,n,a,r,s,o=(0,i.c)(13);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{onError:l}=t,c=x(),d=(0,h.e)(p.u.reRequestReviewFromUser),u=(0,y.jE)();return o[2]!==d?(n=async e=>{let t=await (0,eI.q$)(d,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eI.hp)(t);return(0,eI.R)(t,n),n},o[2]=d,o[3]=n):n=o[3],o[4]!==c||o[5]!==u?(a=()=>u.invalidateQueries({queryKey:c},{cancelRefetch:!1}),o[4]=c,o[5]=u,o[6]=a):a=o[6],o[7]!==l?(r=e=>{l?.(e)},o[7]=l,o[8]=r):r=o[8],o[9]!==n||o[10]!==a||o[11]!==r?(s={mutationFn:n,onSuccess:a,onError:r},o[9]=n,o[10]=a,o[11]=r,o[12]=s):s=o[12],(0,ew.n)(s)}({onError:()=>{}}),{mutate:k,isPending:R}=function(){let e,t,n,a=(0,i.c)(8),r=(0,h.e)(p.u.dismissReview),s=x(),o=(0,y.jE)();return a[0]!==r?(e=async e=>{let t=await (0,eI.q$)(r,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eI.hp)(t);return(0,eI.R)(t,n),n},a[0]=r,a[1]=e):e=a[1],a[2]!==s||a[3]!==o?(t=()=>o.invalidateQueries({queryKey:s},{cancelRefetch:!1}),a[2]=s,a[3]=o,a[4]=t):t=a[4],a[5]!==e||a[6]!==t?(n={mutationFn:e,onSuccess:t},a[5]=e,a[6]=t,a[7]=n):n=a[7],(0,ew.n)(n)}(),A=(0,u.useCallback)(()=>{R||(C&&N(!0),a&&!C&&k({reviewId:a,message:b},{onSuccess:()=>{E()},onError:e=>{v(e.message)}}))},[k,b,C,R,a]);if((0,u.useEffect)(()=>{function e(e){e.metaKey&&"Enter"===e.key&&f&&(e.preventDefault(),A())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[f,A]),!e)return null;let L=`${e.login} ${t.charAt(0).toLowerCase()+t.slice(1)}`;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eg.c,{className:ev.listItem,"aria-label":L,title:(0,r.jsx)(ey.ao,{href:e.url,value:e.login,containerClassName:"d-flex flex-items-center pt-0",headingClassName:es.reviewAuthor,anchorClassName:es.reviewAuthorAnchor,leadingBadge:(0,r.jsx)(e_.e,{className:(0,d.$)(es.leadingVisual,"mt-1"),children:(0,r.jsx)(ex.r,{alt:`${e.login}'s avatar image`,size:20,src:e.avatarUrl,"data-hovercard-url":n,className:"flex-shrink-0 ml-2"})}),children:(0,r.jsx)("span",{className:es.reviewText,children:t})}),secondaryActions:I?(0,r.jsx)(eE.L,{anchorRef:m,label:"review options",staticMenuActions:w,className:es.reviewerActionBar}):void 0}),f&&(0,r.jsxs)(eN.l,{title:"Dismiss review",onClose:E,role:"dialog",initialFocusRef:c,returnFocusRef:m,footerButtons:[{buttonType:"default",content:"Cancel",onClick:E},{buttonType:"danger",loading:R,loadingAnnouncement:"Dismissing review",content:"Dismiss review",onClick:A}],children:[_&&(0,r.jsxs)(eS.A,{className:"mb-2",variant:"danger",children:[(0,r.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),_]}),(0,r.jsxs)(eC.A,{required:!0,className:"mb-2",children:[(0,r.jsx)(eC.A.Label,{children:(0,r.jsxs)("h4",{className:"f5",children:["Reason for dismissing ",e.login,"'s review"]})}),(0,r.jsx)(ej.Ay,{ref:c,onChange:e=>{N(!1),S(e.target.value)},value:b,className:"width-full height-full"}),C&&j&&(0,r.jsx)(eC.A.Validation,{variant:"error",children:"Please provide a reason for dismissing the review"}),(0,r.jsx)(eC.A.Caption,{children:"This reason will appear in the timeline so other users will know why the review was dismissed."})]})]})]})}try{ek.displayName||(ek.displayName="ReviewListItem")}catch{}var eR=n(25407);function eA(e){let t,n,a,s=(0,i.c)(13),{review:o,viewerCanDismissReviews:l,viewerCanReRequestReviews:c}=e,{author:d}=o;if(!d)return null;let u=o.id,m=!o.authorCanPushToRepository;return s[0]!==o.onBehalfOf||s[1]!==o.state||s[2]!==m?(t=((e,t,n)=>{let a="";switch(e){case"APPROVED":a+="Approved these changes";break;case"CHANGES_REQUESTED":a+="Requested changes";break;case"COMMENTED":a+="Commented"}return n&&(a+=" with read-only permissions"),"APPROVED"===e&&t.length>0&&(a+=` for ${(e=>{if(0===e.length)return"";{if(1===e.length)return e[0];if(2===e.length)return e.join(" and ");let t=e.pop();return`${e.join(", ")}, and ${t}`}})(t)}`),a})(o.state,o.onBehalfOf,m),s[0]=o.onBehalfOf,s[1]=o.state,s[2]=m,s[3]=t):t=s[3],s[4]!==d.login?(n=(0,eR.dCN)({owner:d.login}),s[4]=d.login,s[5]=n):n=s[5],s[6]!==d||s[7]!==o.id||s[8]!==t||s[9]!==n||s[10]!==l||s[11]!==c?(a=(0,r.jsx)(ek,{reviewer:d,reviewId:u,reviewStatusText:t,hovercardUrl:n,viewerCanDismissReviews:l,viewerCanReRequestReviews:c}),s[6]=d,s[7]=o.id,s[8]=t,s[9]=n,s[10]=l,s[11]=c,s[12]=a):a=s[12],a}try{eA.displayName||(eA.displayName="OpinionatedReviewRow")}catch{}function eL(e){let t,n,a,s=(0,i.c)(15),{opinionatedReviews:o,pullRequestId:l,reviewGroup:c,viewerCanDismissReviews:d,viewerCanReRequestReviews:u}=e;if(0===o.length)return null;let m=o.length,p=`list of ${c}`;if(s[0]!==o||s[1]!==d||s[2]!==u){let e;s[4]!==d||s[5]!==u?(e=e=>(0,r.jsx)(eA,{review:e,viewerCanDismissReviews:d,viewerCanReRequestReviews:u},`opinionated-review-from-${e?.author?.name}`),s[4]=d,s[5]=u,s[6]=e):e=s[6],t=o.map(e),s[0]=o,s[1]=d,s[2]=u,s[3]=t}else t=s[3];return s[7]!==p||s[8]!==t?(n=(0,r.jsx)(ec.u,{title:p,titleHeaderTag:"h3",children:t}),s[7]=p,s[8]=t,s[9]=n):n=s[9],s[10]!==o.length||s[11]!==l||s[12]!==c||s[13]!==n?(a=(0,r.jsx)(ef,{count:m,reviewGroup:c,pullRequestId:l,children:n}),s[10]=o.length,s[11]=l,s[12]=c,s[13]=n,s[14]=a):a=s[14],a}try{eL.displayName||(eL.displayName="OpinionatedReviewsGroup")}catch{}function eD(e){let t,n,a=(0,i.c)(9),{reviewRequest:s}=e,{reviewer:o}=s;if(!o)return null;if("TEAM"===o.type){let e;if(a[0]!==o.login||a[1]!==o.name){let t=o.login.split("/")[0]??"";e=(0,eR.Pmq)({owner:t,team:o.name}),a[0]=o.login,a[1]=o.name,a[2]=e}else e=a[2];t=e}else{let e;a[3]!==o.login?(e=(0,eR.dCN)({owner:o.login}),a[3]=o.login,a[4]=e):e=a[4],t=e}let l="was requested for review";return s.isCodeOwner&&(l="was requested for review as a codeowner"),a[5]!==t||a[6]!==o||a[7]!==l?(n=(0,r.jsx)(ek,{reviewer:o,reviewStatusText:l,hovercardUrl:t}),a[5]=t,a[6]=o,a[7]=l,a[8]=n):n=a[8],n}try{eD.displayName||(eD.displayName="RequestedReviewRow")}catch{}function eP(e){let t,n,a,s=(0,i.c)(10),{pendingRequestedReviews:o,pullRequestId:l,reviewGroup:c}=e;if(0===o.length)return null;let d=o.length,u=`list of ${c}`;return s[0]!==o?(t=o.map(eM),s[0]=o,s[1]=t):t=s[1],s[2]!==u||s[3]!==t?(n=(0,r.jsx)(ec.u,{title:u,titleHeaderTag:"h3",children:t}),s[2]=u,s[3]=t,s[4]=n):n=s[4],s[5]!==o.length||s[6]!==l||s[7]!==c||s[8]!==n?(a=(0,r.jsx)(ef,{count:d,reviewGroup:c,pullRequestId:l,children:n}),s[5]=o.length,s[6]=l,s[7]=c,s[8]=n,s[9]=a):a=s[9],a}function eM(e){return(0,r.jsx)(eD,{reviewRequest:e},`requested-review-from-${e?.reviewer?.name}`)}try{eP.displayName||(eP.displayName="PendingRequestedReviewsGroup")}catch{}let eO={APPROVED:"APPROVED",CHANGES_REQUESTED:"CHANGES_REQUESTED",REVIEW_REQUIRED:"REVIEW_REQUIRED",REVIEWED:"REVIEWED",REVIEW_REQUESTED:"REVIEW_REQUESTED"};function eB(e){let t,n,a,s,o,l,c,p,h,f,g,y,_,x,v,b,S,C,j,N,w,I,E,T,k,R,A=(0,i.c)(75),{consolidatedFailureReasons:L,helpUrl:D,latestOpinionatedReviews:P,numReviewsRequired:M,pendingRequestedReviews:O,pullRequestId:B,reviewsState:F,viewerCanDismissReviews:U,viewerCanReRequestReviews:$}=e,V=[...P,...O].length>0,[q,W]=(0,u.useState)(V),{sendAnalyticsEvent:G}=(0,Z.s)(),H=(0,u.useId)();A[0]!==P?(t=function(e){let t=[],n=[];for(let a of e)"APPROVED"===a.state&&t.push(a),"CHANGES_REQUESTED"===a.state&&n.push(a);return{approvedReviews:t,requestedChangesReviews:n}}(P),A[0]=P,A[1]=t):t=A[1];let{approvedReviews:z,requestedChangesReviews:Q}=t,K=`${D}/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/requesting-a-pull-request-review`;A[2]!==K||A[3]!==L||A[4]!==P||A[5]!==M?(n=e=>{switch(e){case eO.REVIEW_REQUIRED:return`${((e,t)=>{if(t.includes("MORE_REVIEWS_REQUIRED"))if(1===e)return"At least 1 approving review is required";else if(0===e&&t.includes("LAST_PUSH_APPROVAL_REQUIRED"))return"An approval on the most recent push is required";else return`At least ${e} approving reviews are required`;return t.includes("CODE_OWNER_REVIEW_REQUIRED")?"Code owner review required":t.includes("SOC2_APPROVAL_PROCESS_REQUIRED")?"A review from a compliance team is required":""})(M,L)} by reviewers with write access.`;case eO.REVIEW_REQUESTED:return(0,r.jsxs)(r.Fragment,{children:["Review has been requested on this pull request. It is not required to merge."," ",(0,r.jsx)(ee.A,{inline:!0,href:K,className:(0,d.$)(es.subtitleLink,"position-relative"),children:"Learn more about requesting a pull request review."})]});default:return`${function(e){let t=e.filter(e=>e&&"CHANGES_REQUESTED"===e.state&&e.authorCanPushToRepository).length,n=e.filter(e=>e&&"APPROVED"===e.state&&e.authorCanPushToRepository).length;return 0===t&&0===n?"No applicable reviews submitted":[t>0?`${t} change${1===t?"":"s"} requested`:void 0,n>0?`${n} approving review${1===n?"":"s"}`:void 0].filter(Boolean).join(", ")}(P)} by reviewers with write access.`}},A[2]=K,A[3]=L,A[4]=P,A[5]=M,A[6]=n):n=A[6];let J=n;A[7]!==J?(a=J(eO.APPROVED),A[7]=J,A[8]=a):a=A[8],A[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(et.A,{className:"bgColor-success-emphasis fgColor-onEmphasis",icon:eq,size:32}),A[9]=s):s=A[9],A[10]!==a?(o={heading:"Changes approved",subtitle:a,icon:s},A[10]=a,A[11]=o):o=A[11],A[12]!==J?(l=J(eO.CHANGES_REQUESTED),A[12]=J,A[13]=l):l=A[13],A[14]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(et.A,{className:"bgColor-danger-emphasis fgColor-onEmphasis",icon:eV,size:32}),A[14]=c):c=A[14],A[15]!==l?(p={heading:"Changes requested",subtitle:l,icon:c},A[15]=l,A[16]=p):p=A[16],A[17]!==J?(h=J(eO.REVIEW_REQUIRED),A[17]=J,A[18]=h):h=A[18],A[19]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)(et.A,{className:"bgColor-danger-emphasis fgColor-onEmphasis",icon:e$,size:32}),A[19]=f):f=A[19],A[20]!==h?(g={heading:"Review required",subtitle:h,icon:f},A[20]=h,A[21]=g):g=A[21],A[22]!==J?(y=J(eO.REVIEWED),A[22]=J,A[23]=y):y=A[23],A[24]===Symbol.for("react.memo_cache_sentinel")?(_=(0,r.jsx)(et.A,{className:(0,d.$)(es.reviewedIcon,"fgColor-onEmphasis"),icon:eU,size:32}),A[24]=_):_=A[24],A[25]!==y?(x={heading:"Changes reviewed",subtitle:y,icon:_},A[25]=y,A[26]=x):x=A[26],A[27]!==J?(v=J(eO.REVIEW_REQUESTED),A[27]=J,A[28]=v):v=A[28],A[29]===Symbol.for("react.memo_cache_sentinel")?(b=(0,r.jsx)(et.A,{className:"bgColor-success-emphasis fgColor-onEmphasis",icon:eF,size:32}),A[29]=b):b=A[29],A[30]!==v?(S={heading:"Review requested",subtitle:v,icon:b},A[30]=v,A[31]=S):S=A[31],A[32]!==g||A[33]!==x||A[34]!==S||A[35]!==o||A[36]!==p?(C={APPROVED:o,CHANGES_REQUESTED:p,REVIEW_REQUIRED:g,REVIEWED:x,REVIEW_REQUESTED:S},A[32]=g,A[33]=x,A[34]=S,A[35]=o,A[36]=p,A[37]=C):C=A[37];let Y=C,X=Y[F],en=Y[F],ea=Y[F];return A[38]!==Y||A[39]!==q||A[40]!==F||A[41]!==G||A[42]!==V?(j=V?{ariaLabel:Y[F].heading,isExpanded:q,onToggle:()=>{G(q?"reviewers_section.collapse":"reviewers_section.expand","MERGEBOX_REVIEWERS_SECTION_TOGGLE_BUTTON"),W(!q)}}:void 0,A[38]=Y,A[39]=q,A[40]=F,A[41]=G,A[42]=V,A[43]=j):j=A[43],A[44]!==H||A[45]!==X.heading||A[46]!==en.subtitle||A[47]!==ea.icon||A[48]!==j?(N=(0,r.jsx)(ei,{headerId:H,title:X.heading,subtitle:en.subtitle,icon:ea.icon,expandableProps:j}),A[44]=H,A[45]=X.heading,A[46]=en.subtitle,A[47]=ea.icon,A[48]=j,A[49]=N):N=A[49],A[50]!==z||A[51]!==B||A[52]!==U||A[53]!==$?(w=(0,r.jsx)(eL,{viewerCanDismissReviews:U,reviewGroup:m.Qv.Approvals,opinionatedReviews:z,pullRequestId:B,viewerCanReRequestReviews:$}),A[50]=z,A[51]=B,A[52]=U,A[53]=$,A[54]=w):w=A[54],A[55]!==B||A[56]!==Q||A[57]!==U||A[58]!==$?(I=(0,r.jsx)(eL,{viewerCanDismissReviews:U,reviewGroup:m.Qv.RequestedChanges,opinionatedReviews:Q,pullRequestId:B,viewerCanReRequestReviews:$}),A[55]=B,A[56]=Q,A[57]=U,A[58]=$,A[59]=I):I=A[59],A[60]!==O||A[61]!==B||A[62]!==U?(E=(0,r.jsx)(eP,{reviewGroup:m.Qv.PendingReviewRequest,viewerCanDismissReviews:U,pendingRequestedReviews:O,pullRequestId:B}),A[60]=O,A[61]=B,A[62]=U,A[63]=E):E=A[63],A[64]!==w||A[65]!==I||A[66]!==E?(T=(0,r.jsxs)("div",{className:es.reviewerGroupsContainer,children:[w,I,E]}),A[64]=w,A[65]=I,A[66]=E,A[67]=T):T=A[67],A[68]!==q||A[69]!==T?(k=(0,r.jsx)(el,{isExpanded:q,children:T}),A[68]=q,A[69]=T,A[70]=k):k=A[70],A[71]!==H||A[72]!==N||A[73]!==k?(R=(0,r.jsxs)("section",{"aria-label":"Reviews","aria-describedby":H,className:"border-bottom color-border-subtle",children:[N,k]}),A[71]=H,A[72]=N,A[73]=k,A[74]=R):R=A[74],R}function eF(){return(0,r.jsx)(l.CheckIcon,{size:16})}function eU(){return(0,r.jsx)(l.CodeReviewIcon,{size:16})}function e$(){return(0,r.jsx)(l.XIcon,{size:16})}function eV(){return(0,r.jsx)(l.FileDiffIcon,{size:16})}function eq(){return(0,r.jsx)(l.CheckIcon,{size:16})}try{eB.displayName||(eB.displayName="ReviewerSection")}catch{}var eW=new WeakMap,eG=new WeakMap,eH=new WeakMap,ez=new WeakMap,eQ=new WeakMap,eK=new WeakMap;let ReviewerSectionStatus=class ReviewerSectionStatus extends BaseSectionStatus{get shouldRender(){return"DIRTY"!==this.pullRequest.mergeStateStatus&&"UNKNOWN"!==this.pullRequest.mergeStateStatus&&((0,N._)(this,eQ).length>0||(0,N._)(this,eK).length>0||this.consolidatedFailureReasons.length>0)}get sectionStatus(){return e1(this.numReviewsRequired,(0,N._)(this,ez),(0,N._)(this,eQ),this.consolidatedFailureReasons,(0,N._)(this,eK))}get mergeBoxStatus(){switch(this.sectionStatus){case eO.APPROVED:case eO.REVIEW_REQUESTED:case eO.REVIEWED:return"PASSED";case eO.CHANGES_REQUESTED:return"FAILED";case eO.REVIEW_REQUIRED:default:return"NEUTRAL"}}get numReviewsRequired(){let e=(0,N._)(this,eH)?.flatMap(e=>e.requiredReviewers||[])||[];return e.length?Math.max(...e):0}get consolidatedFailureReasons(){if(!(0,N._)(this,eG)){let e=(0,N._)(this,eH)?.flatMap(e=>e.failureReasons||[])||[];(0,I._)(this,eG,[...new Set(e)].filter(e0))}return(0,N._)(this,eG)}constructor(...e){super(...e),(0,w._)(this,eH,{get:eJ,set:void 0}),(0,w._)(this,ez,{get:eY,set:void 0}),(0,w._)(this,eQ,{get:eX,set:void 0}),(0,w._)(this,eK,{get:eZ,set:void 0}),(0,w._)(this,eW,{writable:!0,value:void 0}),(0,w._)(this,eG,{writable:!0,value:void 0})}};function eJ(){return(0,N._)(this,eW)||(0,I._)(this,eW,function(e){let t=e&&e.conditions.find(e=>"PULL_REQUEST_RULES"===e.type);return(t?.ruleRollups?.filter(e=>"PULL_REQUEST"===e.ruleType).map(e=>e.metadata)??[]).filter(e=>null!==e).filter(e=>"requiredReviewers"in e&&"requiresCodeowners"in e&&"failureReasons"in e).map(e=>{let t=e.failureReasons.map(e=>e.toUpperCase());return{requiredReviewers:e.requiredReviewers,requiresCodeowners:e.requiresCodeowners,failureReasons:t}})??[]}(this.mergeRequirements)),(0,N._)(this,eW)}function eY(){return((0,N._)(this,eH)?.filter(e=>e.requiresCodeowners)||[]).length>0}function eX(){return this.pullRequest.latestOpinionatedReviews}function eZ(){return this.pullRequest.pendingReviewRequests}let e0=e=>"CODE_OWNER_REVIEW_REQUIRED"===e||"SOC2_APPROVAL_PROCESS_REQUIRED"===e||"CHANGES_REQUESTED"===e||"MORE_REVIEWS_REQUIRED"===e||"LAST_PUSH_APPROVAL_REQUIRED"===e,e1=(e,t,n,a,r)=>0===a.length&&n.length>0&&(e>0||t)?eO.APPROVED:a.includes("CODE_OWNER_REVIEW_REQUIRED")||a.includes("SOC2_APPROVAL_PROCESS_REQUIRED")||a.includes("MORE_REVIEWS_REQUIRED")||a.includes("LAST_PUSH_APPROVAL_REQUIRED")?eO.REVIEW_REQUIRED:a.includes("CHANGES_REQUESTED")?eO.CHANGES_REQUESTED:0===e&&r.length>0&&0===n.length?eO.REVIEW_REQUESTED:eO.REVIEWED;var e2=new WeakMap,e3=new WeakMap,e4=new WeakMap,e5=new WeakMap,e6=new WeakSet;let MergeBoxStatusCalculator=class MergeBoxStatusCalculator{get overallStatus(){if("MERGED"===(0,N._)(this,e2).state)return"MERGED";if("CLOSED"===(0,N._)(this,e2).state)return"NEUTRAL";if((0,N._)(this,e2).isInMergeQueue)return"QUEUED";if((0,N._)(this,e2).isDraft)return"NEUTRAL";let e=Object.values(this.sections??[]).filter(e=>e.shouldConsiderStatus),t=e.some(e=>"FAILED"===e.mergeBoxStatus),n=e.every(e=>"PASSED"===e.mergeBoxStatus);return t&&(0,N._)(this,e2).viewerCanUpdate?"SOME_FAILED":n?"ALL_PASSED":"NEUTRAL"}get sections(){return(0,N._)(this,e5)}constructor(e,t,n){(0,T._)(this,e6),(0,w._)(this,e2,{writable:!0,value:void 0}),(0,w._)(this,e3,{writable:!0,value:void 0}),(0,w._)(this,e4,{writable:!0,value:void 0}),(0,w._)(this,e5,{writable:!0,value:void 0}),(0,I._)(this,e2,e),(0,I._)(this,e3,t),(0,I._)(this,e4,n),(0,I._)(this,e5,(0,E._)(this,e6,e7).call(this))}};function e7(){return{BlockedSection:new BlockedSectionStatus((0,N._)(this,e2),(0,N._)(this,e3),(0,N._)(this,e4)),ClosedOrMergedStateMergeBox:new ClosedOrMergedStateSectionStatus((0,N._)(this,e2),(0,N._)(this,e3),(0,N._)(this,e4)),ChecksSection:new ChecksSectionStatus((0,N._)(this,e2),(0,N._)(this,e3),(0,N._)(this,e4)),ConflictsSection:new ConflictsSectionStatus((0,N._)(this,e2),(0,N._)(this,e3),(0,N._)(this,e4)),DraftStateSection:new DraftStateSectionStatus((0,N._)(this,e2),(0,N._)(this,e3),(0,N._)(this,e4)),MergeQueueSection:new MergeQueueSectionStatus((0,N._)(this,e2),(0,N._)(this,e3),(0,N._)(this,e4)),ReviewerSection:new ReviewerSectionStatus((0,N._)(this,e2),(0,N._)(this,e3),(0,N._)(this,e4))}}var e8=n(70170),e9=n(40235),te=n(70263);function tt(e){return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}function tn(){return!document.hidden}function ta(){return!0}let tr=()=>(0,u.useSyncExternalStore)(tt,tn,ta);var ti=n(65510);function ts(e){let t,n=(0,i.c)(3),{pullRequestHeadSha:a}=e,{basePageDataUrl:r}=(0,f.Yu)(),s=`headSha:${a}`,o=`basePageDataURL:${r}`;return n[0]!==s||n[1]!==o?(t=[p.u.statusChecks,s,o],n[0]=s,n[1]=o,n[2]=t):t=n[2],t}function to(e){let t,n,a,r=(0,i.c)(9),{pullRequestHeadSha:s}=e,o=(0,h.e)(p.u.statusChecks);r[0]!==s?(t={pullRequestHeadSha:s},r[0]=s,r[1]=t):t=r[1];let l=ts(t),c=(0,y.jE)();return r[2]!==o||r[3]!==c||r[4]!==l?(n=async()=>(0,g.H)(o,l,c),r[2]=o,r[3]=c,r[4]=l,r[5]=n):n=r[5],r[6]!==l||r[7]!==n?(a={queryKey:l,queryFn:n,staleTime:1e4},r[6]=l,r[7]=n,r[8]=a):a=r[8],(0,ti.U)(a)}var tl=n(42255),tc=n(10396),td=n(97519);let tu={branchName:"ClosedOrMergedStateMergeBox-module__branchName--YOSfM"};var tm=n(4559);function tp(e){let t,n,a,s,o,c,m,f,g,_,v,b,S,C,j=(0,i.c)(62),{state:N,isCrossRepo:w,headRefName:I,headRepository:E,baseRepository:T,viewerCanDeleteHeadRef:k,viewerCanRestoreHeadRef:R,deprovisionableCodespaces:A}=e,[L,D]=(0,tl.A)(),P=(0,u.useRef)(null),[M,O]=(0,tl.A)(!1),B=A?A.count:0,F=R&&A&&B>0,U=B>1?"codespaces":"codespace";j[0]!==D?(t={onError:e=>{D(e)}},j[0]=D,j[1]=t):t=j[1];let{mutate:$,isPending:V}=function(e){let t,n,a,r,s=(0,i.c)(11),{onError:o}=e,l=(0,h.e)(p.u.deleteHeadRef),c=x(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eI.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eI.hp)(e);return(0,eI.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>{let e=new CustomEvent("head-ref-deleted");return document.dispatchEvent(e),d.invalidateQueries({queryKey:c},{cancelRefetch:!1})},s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(a=e=>{o(e)},s[5]=o,s[6]=a):a=s[6],s[7]!==t||s[8]!==n||s[9]!==a?(r={mutationFn:t,onSuccess:n,onError:a},s[7]=t,s[8]=n,s[9]=a,s[10]=r):r=s[10],(0,ew.n)(r)}(t);j[2]!==$||j[3]!==D?(n=()=>{D(void 0),$(void 0)},j[2]=$,j[3]=D,j[4]=n):n=j[4];let q=n;j[5]!==D||j[6]!==O?(a={onError:e=>{O(!1),D(e),P.current?.focus()}},j[5]=D,j[6]=O,j[7]=a):a=j[7];let{mutate:W,isPending:G}=function(e){let t,n,a,r,s=(0,i.c)(11),{onError:o}=e,l=(0,h.e)(p.u.cleanupCodespaces),c=x(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eI.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eI.hp)(e);return(0,eI.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(a=e=>{o(e)},s[5]=o,s[6]=a):a=s[6],s[7]!==t||s[8]!==n||s[9]!==a?(r={mutationFn:t,onSuccess:n,onError:a},s[7]=t,s[8]=n,s[9]=a,s[10]=r):r=s[10],(0,ew.n)(r)}(a);j[8]!==U||j[9]!==W||j[10]!==D||j[11]!==O?(s=()=>{D(void 0),W(void 0,{onSuccess:()=>{O(!1),setTimeout(()=>(0,tm.i)(`Deleting ${U}.`),1e3)}})},j[8]=U,j[9]=W,j[10]=D,j[11]=O,j[12]=s):s=j[12];let H=s;j[13]!==D||j[14]!==O?(o=()=>{D(void 0),O(!0)},j[13]=D,j[14]=O,j[15]=o):o=j[15];let z=o;j[16]!==I||j[17]!==E?(c=()=>E&&E.name?(0,eR.WJ9)({owner:E.ownerLogin,repo:E.name,branch:I}):"",j[16]=I,j[17]=E,j[18]=c):c=j[18];let Q=c;j[19]!==F||j[20]!==N?(m=()=>F?"Branch successfully deleted":"MERGED"===N?"Pull request successfully merged and closed":"Closed with unmerged commits",j[19]=F,j[20]=N,j[21]=m):m=j[21];let K=m;j[22]!==V||j[23]!==q?(f=(0,r.jsx)(ed.Q,{loading:V,loadingAnnouncement:"Deleting branch",onClick:q,children:"Delete branch"}),j[22]=V,j[23]=q,j[24]=f):f=j[24];let J=f;j[25]!==U||j[26]!==z?(g=(0,r.jsxs)(ed.Q,{ref:P,onClick:z,children:["Delete ",U]}),j[25]=U,j[26]=z,j[27]=g):g=j[27];let Y=g;j[28]===Symbol.for("react.memo_cache_sentinel")?(_=(0,r.jsx)("span",{id:"js-pull-restorable",className:"d-none"}),j[28]=_):_=j[28];let X=_,Z=`${E?.url}/settings`;j[29]!==J||j[30]!==Y||j[31]!==F||j[32]!==k?(v=()=>k?J:F?Y:X,j[29]=J,j[30]=Y,j[31]=F,j[32]=k,j[33]=v):v=j[33];let et=v;j[34]!==T?.name||j[35]!==T?.ownerLogin||j[36]!==B||j[37]!==U||j[38]!==A||j[39]!==Q||j[40]!==I||j[41]!==w||j[42]!==Z||j[43]!==F||j[44]!==N||j[45]!==k?(b=()=>{if("MERGED"===N)if(k)return(0,r.jsxs)(r.Fragment,{children:["You're all set \u2014 the"," ",(0,r.jsx)(tc.A,{className:(0,d.$)(tu.branchName,"d-inline wb-break-all"),href:Q(),children:I})," ","branch can be safely deleted.",w&&(0,r.jsxs)(r.Fragment,{children:[" ","If you wish, you can also delete this fork of"," ",(0,r.jsx)("strong",{children:`${T?.ownerLogin}/${T?.name}`})," in the"," ",(0,r.jsx)(ee.A,{href:Z,inline:!0,children:"settings"}),"."]})]});else if(F)return(0,r.jsxs)(r.Fragment,{children:["You're all set \u2014 the ",B," ",U," for head branch can be safely deleted. You can also manage your codespaces in"," ",(0,r.jsx)(ee.A,{inline:!0,href:A.repositoryCodespacePath||"",children:"settings."})," "]});else return(0,r.jsx)(r.Fragment,{children:"You're all set \u2014 the branch has been merged."});return k?(0,r.jsxs)(r.Fragment,{children:["This pull request is closed, but the ",(0,r.jsx)(tc.A,{href:Q(),children:I})," ","branch has unmerged commits."]}):(0,r.jsx)(r.Fragment,{children:"This pull request is closed."})},j[34]=T?.name,j[35]=T?.ownerLogin,j[36]=B,j[37]=U,j[38]=A,j[39]=Q,j[40]=I,j[41]=w,j[42]=Z,j[43]=F,j[44]=N,j[45]=k,j[46]=b):b=j[46];let en=b;j[47]!==B||j[48]!==U||j[49]!==G||j[50]!==V||j[51]!==L||j[52]!==et||j[53]!==H||j[54]!==K||j[55]!==M||j[56]!==D||j[57]!==O||j[58]!==en?(S=()=>{if(!L)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(td.A,{"aria-labelledby":"delete-codespaces-dialog-title",isOpen:M,returnFocusRef:P,onDismiss:()=>O(!1),children:[(0,r.jsx)(td.A.Header,{id:"delete-codespaces-dialog-title",children:"Delete Codespace?"}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsxs)("span",{children:["Are you sure you want to delete ",B," ",U," for the head branch?"]}),(0,r.jsxs)("div",{className:"d-flex flex-justify-end mt-3",children:[(0,r.jsx)(ed.Q,{className:"mr-1",inactive:G,onClick:()=>{G||(O(!1),P.current?.focus())},children:"Cancel"}),(0,r.jsx)(ed.Q,{className:"mr-1",variant:"danger",loading:G,loadingAnnouncement:`Deleting ${U}.`,onClick:H,children:`Delete ${U}`})]})]})]}),(0,r.jsx)(ei,{title:K(),subtitle:en(),rightSideContent:et()})]});{let e=404!==L.cause;return(0,r.jsx)(ei,{title:"Some codespaces could not be deleted."===L.message?`Couldn't delete ${U} `:"Couldn't update branch",subtitle:L.message,rightSideContent:e?(0,r.jsx)(ed.Q,{disabled:V,leadingVisual:l.SyncIcon,onClick:()=>D(void 0),children:"Try again"}):void 0})}},j[47]=B,j[48]=U,j[49]=G,j[50]=V,j[51]=L,j[52]=et,j[53]=H,j[54]=K,j[55]=M,j[56]=D,j[57]=O,j[58]=en,j[59]=S):S=j[59];let ea=S;return j[60]!==ea?(C=ea(),j[60]=ea,j[61]=C):C=j[61],C}try{tp.displayName||(tp.displayName="ClosedOrMergedStateMergeBox")}catch{}var th=n(75177);let tf={mergeabilityIcon:"MergeabilityIcon-module__mergeabilityIcon--CV3kc"};function tg(e){let t,n,a,s,o=(0,i.c)(9),{icon:l,ariaLabel:c,iconBackgroundColor:u}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,d.$)("d-flex flex-justify-center flex-items-center mr-2 rounded-2 height-2 width-2 position-absolute",tf.mergeabilityIcon),o[0]=t):t=o[0],o[1]!==u?(n={backgroundColor:u},o[1]=u,o[2]=n):n=o[2],o[3]!==c||o[4]!==l?(a=(0,r.jsx)(eT.A,{className:"fgColor-onEmphasis",icon:l,size:24,"aria-label":c}),o[3]=c,o[4]=l,o[5]=a):a=o[5],o[6]!==n||o[7]!==a?(s=(0,r.jsx)(th.A,{className:t,sx:n,children:a}),o[6]=n,o[7]=a,o[8]=s):s=o[8],s}try{tg.displayName||(tg.displayName="MergeabilityIcon")}catch{}let ty={mergeboxLoading:"MergeBox-module__mergeboxLoading--OhnXd",mergePartialContainer:"MergeBox-module__mergePartialContainer--psYdf",mergeBoxAdjustBorders:"MergeBox-module__mergeBoxAdjustBorders--vMX1B"};var t_=n(88657);let tx={boundaryContainer:"MergeBoxErrorState-module__boundaryContainer--QgJ7i"};function tv(e){let t,n,a,s,o,c=(0,i.c)(7),{hideIcon:d}=e;return c[0]!==d?(t=!d&&(0,r.jsx)(tg,{icon:l.GitMergeIcon,ariaLabel:"Merge status cannot be loaded",iconBackgroundColor:"neutral.emphasis"}),c[0]=d,c[1]=t):t=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(t_.E.Visual,{children:(0,r.jsx)(l.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),c[2]=n):n=c[2],c[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(t_.E.Heading,{children:(0,r.jsx)("strong",{children:"Merge status cannot be loaded"})}),c[3]=a):a=c[3],c[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsxs)(t_.E,{border:!0,children:[n,a,(0,r.jsx)("div",{className:"mb-n2",children:(0,r.jsxs)(t_.E.Description,{children:["Try reloading the page, or if the problem persists"," ",(0,r.jsxs)("a",{className:"fgColor-muted",href:"https://support.github.com/",children:[(0,r.jsx)("u",{children:"contact support"}),"."]})]})}),(0,r.jsx)(t_.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status "})]}),c[4]=s):s=c[4],c[5]!==t?(o=(0,r.jsxs)("div",{className:`position-relative ${tx.boundaryContainer}`,children:[t,s]}),c[5]=t,c[6]=o):o=c[6],o}try{tv.displayName||(tv.displayName="MergeBoxErrorState")}catch{}function tb(e){let t,n=(0,i.c)(3),{bgColor:a,color:s}=e,o=void 0===a?"neutral.emphasis":a,l=void 0===s?"fg.onEmphasis":s;return n[0]!==o||n[1]!==l?(t=(0,r.jsx)(et.A,{icon:tS,size:32,sx:{bg:o,color:l}}),n[0]=o,n[1]=l,n[2]=t):t=n[2],t}function tS(){return(0,r.jsx)(l.AlertFillIcon,{size:16})}try{tb.displayName||(tb.displayName="AlertIcon")}catch{}var tC=n(73017);let tj={BlockedSectionMessage:"BlockedSection-module__BlockedSectionMessage--kuN11"};function tN(e){let t,n,a,s=(0,i.c)(5),{failingConditionsAndRules:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(tb,{bgColor:"danger.emphasis"}),s[0]=t):t=s[0],s[1]!==o?(n=o.map(tw),s[1]=o,s[2]=n):n=s[2],s[3]!==n?(a=(0,r.jsx)("section",{"aria-label":"Merging is blocked",className:"border-bottom borderColor-muted",children:(0,r.jsx)(ei,{title:"Merging is blocked",icon:t,children:(0,r.jsx)("ul",{className:"list-style-none",children:n})})}),s[3]=n,s[4]=a):a=s[4],a}function tw(e){return e&&"message"in e&&(0,r.jsxs)("li",{className:tj.BlockedSectionMessage,children:[(0,r.jsx)(tC.JR,{html:e.message||""})," ",(0,r.jsx)(tI,{ruleName:e.displayName})]},e.displayName)}function tI(e){let t=(0,i.c)(1),{ruleName:n}=e;if("UNVERIFIED_EMAIL"===n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:["You will be able to merge this pull request after you"," ",(0,r.jsx)(ee.A,{href:"/settings/emails",inline:!0,children:"verify your email address"}),"."]}),t[0]=e):e=t[0],e}return null}try{tN.displayName||(tN.displayName="BlockedSection")}catch{}try{tI.displayName||(tI.displayName="AdditionalMessaging")}catch{}let tE={ACTION_REQUIRED:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},CANCELLED:{icon:l.StopIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},COMPLETED:{icon:l.CheckIcon,iconColor:"var(--fgColor-success, var(--color-success-fg))",isSuccess:!0,isPending:!1},ERROR:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},EXPECTED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},FAILURE:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},IN_PROGRESS:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},NEUTRAL:{icon:l.SquareFillIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},PENDING:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},QUEUED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},REQUESTED:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",backgroundColor:"none",isPending:!1,isSuccess:!1},SKIPPED:{icon:l.SkipIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},STALE:{icon:l.MoonIcon,iconColor:"var(--fgColor-muted, var(--color-fg-muted))",isPending:!1,isSuccess:!1},STARTUP_FAILURE:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},SUCCESS:{icon:l.CheckIcon,iconColor:"var(--fgColor-success, var(--color-success-fg))",isSuccess:!0,isPending:!1},TIMED_OUT:{icon:l.XCircleFillIcon,iconColor:"var(--fgColor-danger, var(--color-danger-fg))",isPending:!1,isSuccess:!1},WAITING:{icon:l.ClockIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1},_UNKNOWN_VALUE:{icon:l.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",isPending:!0,isSuccess:!1}},tT={FAILURE:"failing",NEUTRAL:"neutral",TIMED_OUT:"timed out",CANCELLED:"cancelled",STALE:"stale",PENDING:"pending",IN_PROGRESS:"in progress",REQUESTED:"requested",QUEUED:"queued",SKIPPED:"skipped",EXPECTED:"expected",SUCCESS:"successful",ALL:"all"};Object.keys(tE);let tk=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function tR(e,t){return tk.compare(e.displayName,t.displayName)}function tA(e,t,n,a){if(a?.statusChecksGrouping==="ungrouped")return{ALL:e};let r={};for(let e of Object.keys(t))r[e]=[];return e.reduce((e,a)=>{let r=n(a),i=Object.keys(t).find(e=>t[e].includes(r));if(i){let t=e[i];t&&t.push(a)}return e},r)}function tL(e,t,n){if(n?.statusChecksGrouping==="ungrouped")return{ALL:e.reduce((e,t)=>e+t.count,0)};let a=tA(e,t,e=>e.state,n);return Object.fromEntries(Object.keys(a).map(e=>{let t;return[e,(t=a[e],t?.reduce((e,t)=>e+t.count,0)??0)]}))}function tD(e){let t={};for(let n of e)t[n.state]=n.count;return{statusCheckCounts:JSON.stringify(t)}}var tP=n(72931);let tM={PASSED:"success",PENDING:"pending",PENDING_APPROVAL:"pending",PENDING_FAILED:"failure",PENDING_CONFLICTS:"pending",SOME_FAILED:"failure",FAILED:"failure"};function tO(){(0,tP.gd)()}function tB(){return(0,tP.iD)("merge-queue"),tF}function tF(){(0,tP.gd)()}var tU=n(91747),t$=n(5945),tV=n(87330);let tq={status_checks_grouping_preference:["grouped_by_status","ungrouped"]},tW={checksGroupHeadingButton:"ExpandedChecks-module__checksGroupHeadingButton--PCfYf",checksContainer:"ExpandedChecks-module__checksContainer--ZfNYB",containPaint:"ExpandedChecks-module__containPaint--TRfkR",expandableWrapper:"ExpandedChecks-module__expandableWrapper--aGEIv",expandableListView:"ExpandedChecks-module__expandableListView--QDJPW",isExpanded:"ExpandedChecks-module__isExpanded--pq8Vj",groupHeader:"ExpandedChecks-module__groupHeader--jZHKD",totalChecksCountText:"ExpandedChecks-module__totalChecksCountText--buDCm",checkSettingsButton:"ExpandedChecks-module__checkSettingsButton--MONZT"},tG={ErrorFlash:"ChecksGroup-module__ErrorFlash--WJCJc",ErrorOcticon:"ChecksGroup-module__ErrorOcticon--JPT2T"};function tH(e){let t,n,a,s,o,c,m=(0,i.c)(30),{children:f,count:g,groupStatus:_,isToggleVisible:v,analyticsMetadata:b,showSettingsIcon:S,setUserPreferences:C,pullRequestId:j,userPreferences:N}=e;m[0]!==g||m[1]!==N?.statusChecksGrouping?(t=function(e){return N?.statusChecksGrouping==="ungrouped"?g>1?`${g} checks`:`${g} check`:`${g} ${e} check${g>1?"s":""}`},m[0]=g,m[1]=N?.statusChecksGrouping,m[2]=t):t=m[2];let w=t,[I,E]=(0,em.Fo)(`${j}:checksGroup:${_}Expanded`,!0),{sendAnalyticsEvent:T}=(0,Z.s)(),k=tT[_],R=(0,u.useId)(),A=I||!v,L=w(k),D=!v||I,[P,M]=(0,tl.A)(null);m[3]!==M?(n={onError:e=>{M(e.message)}},m[3]=M,m[4]=n):n=m[4];let{mutate:O}=function(e){let t,n,a,r,s=(0,i.c)(11),{onError:o}=e,l=(0,h.e)(p.u.updateMergeBoxUserPreference),c=x(),d=(0,y.jE)();return s[0]!==l?(t=async e=>{if(!e.preferenceName||!e.preference)throw Error("Preference name and value must be provided.");if(!(e.preferenceName in tq))throw Error("Invalid preference name.");if(!tq[e.preferenceName].includes(e.preference))throw Error("Invalid preference value.");let t=await (0,eI.q$)(l,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eI.hp)(t);return(0,eI.R)(t,n),n},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(a=e=>{o(e)},s[5]=o,s[6]=a):a=s[6],s[7]!==t||s[8]!==n||s[9]!==a?(r={mutationFn:t,onSuccess:n,onError:a},s[7]=t,s[8]=n,s[9]=a,s[10]=r):r=s[10],(0,ew.n)(r)}(n);return m[5]!==b||m[6]!==R||m[7]!==_||m[8]!==L||m[9]!==I||m[10]!==T||m[11]!==E||m[12]!==C||m[13]!==v||m[14]!==S||m[15]!==O||m[16]!==N?(a=v&&(0,r.jsxs)("div",{className:tW.groupHeader,children:[N?.statusChecksGrouping==="ungrouped"?(0,r.jsxs)("span",{className:(0,d.$)(tW.totalChecksCountText,"pl-2 text-semibold f6"),children:[" ",L," "]}):(0,r.jsx)(ed.Q,{"aria-controls":R,"aria-expanded":I,"aria-label":I?`Collapse ${L} group`:`Expand ${L} group`,className:tW.checksGroupHeadingButton,variant:"invisible",size:"small",trailingVisual:()=>(0,r.jsx)(ep,{isExpanded:I}),onClick:()=>{T(I?"checks_group.collapse":"checks_group.expand","MERGEBOX_CHECKS_GROUP_TOGGLE_BUTTON",{...b,group:_}),E(!I)},children:L}),S&&C&&(0,r.jsxs)(t$.W,{children:[(0,r.jsx)(t$.W.Anchor,{children:(0,r.jsx)(tV.K,{icon:l.GearIcon,variant:"invisible","aria-label":"Checks settings",className:tW.checkSettingsButton})}),(0,r.jsx)(t$.W.Overlay,{width:"auto",children:(0,r.jsxs)(eb.l,{selectionVariant:"single",children:[(0,r.jsx)(eb.l.Item,{onSelect:()=>{N?.statusChecksGrouping!=="grouped_by_status"&&(O({preferenceName:"status_checks_grouping_preference",preference:"grouped_by_status"}),C({...N,statusChecksGrouping:"grouped_by_status"}))},selected:N?.statusChecksGrouping==="grouped_by_status",children:"Group by status"}),(0,r.jsx)(eb.l.Item,{onSelect:()=>{N?.statusChecksGrouping!=="ungrouped"&&(O({preferenceName:"status_checks_grouping_preference",preference:"ungrouped"}),C({...N,statusChecksGrouping:"ungrouped"}))},selected:N?.statusChecksGrouping==="ungrouped",children:"No grouping"})]})})]})]}),m[5]=b,m[6]=R,m[7]=_,m[8]=L,m[9]=I,m[10]=T,m[11]=E,m[12]=C,m[13]=v,m[14]=S,m[15]=O,m[16]=N,m[17]=a):a=m[17],m[18]!==P?(s=P&&(0,r.jsxs)(eS.A,{variant:"danger",className:tG.ErrorFlash,children:[(0,r.jsx)(eT.A,{icon:l.StopIcon,className:tG.ErrorOcticon}),P]}),m[18]=P,m[19]=s):s=m[19],m[20]!==f||m[21]!==R||m[22]!==k||m[23]!==D||m[24]!==A?(o=D&&(0,r.jsx)("div",{className:(0,d.$)(tW.expandableWrapper,A&&tW.isExpanded),id:R,"aria-label":`${k} checks`,role:"group",children:(0,r.jsx)("div",{className:tW.expandableListView,children:(0,r.jsx)(ec.u,{title:`${k} checks`,titleHeaderTag:"h3",strictFocusZone:!1,children:f})})}),m[20]=f,m[21]=R,m[22]=k,m[23]=D,m[24]=A,m[25]=o):o=m[25],m[26]!==a||m[27]!==s||m[28]!==o?(c=(0,r.jsxs)("div",{children:[a,s,o]}),m[26]=a,m[27]=s,m[28]=o,m[29]=c):c=m[29],c}try{tH.displayName||(tH.displayName="ChecksGroup")}catch{}var tz=n(89169),tQ=n(21654),tK=n(12908),tJ=n(51880),tY=n(4929);let tX={spinnerWrapper:"StatusCheckRow-module__spinnerWrapper--AjdFv",spinnerInner:"StatusCheckRow-module__spinnerInner--KITho",staticSpinner:"StatusCheckRow-module__staticSpinner--zUcDB",checksSpinnerWrapper:"StatusCheckRow-module__checksSpinnerWrapper--HgboO",title:"StatusCheckRow-module__title--KooFt",titleHeader:"StatusCheckRow-module__titleHeader--Qx8JS",titleDescription:"StatusCheckRow-module__titleDescription--sgUXB",leadingVisual:"StatusCheckRow-module__leadingVisual--JETy5",requiredLabel:"StatusCheckRow-module__requiredLabel--cYbp_"};var tZ=n(39619),t0=n(51213);let t1={statusCheckActionBar:"StatusCheckRowActionBar-module__statusCheckActionBar--Ipu3V"};var t2=n(68637);function t3(e){let t,n,a,s=(0,i.c)(5),{failureContext:o}=e;s[0]!==o.jobId?(t=()=>(0,tZ.qR)({id:"copilot-explain-error-action",intent:t0.wh.actionsAgent,content:(0,t2.oo)(o.jobId),references:[]}),s[0]=o.jobId,s[1]=t):t=s[1];let c=t;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(eb.l.LeadingVisual,{children:(0,r.jsx)(l.CopilotIcon,{})}),s[2]=n):n=s[2],s[3]!==c?(a=(0,r.jsxs)(eb.l.Item,{onSelect:c,children:["Explain error",n]}),s[3]=c,s[4]=a):a=s[4],a}function t4(e){let t,n,a,s=(0,i.c)(6),{targetUrl:o}=e,{sendAnalyticsEvent:c}=(0,Z.s)();s[0]!==c?(t=()=>{c("status_check_row_action_bar.view_details_click","VIEW_DETAILS_MENU_ITEM")},s[0]=c,s[1]=t):t=s[1];let d=t;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(eb.l.LeadingVisual,{children:(0,r.jsx)(l.ArrowRightIcon,{})}),s[2]=n):n=s[2],s[3]!==d||s[4]!==o?(a=(0,r.jsxs)(eb.l.LinkItem,{href:o,onClick:d,children:["View details",n]}),s[3]=d,s[4]=o,s[5]=a):a=s[5],a}function t5(e){let t,n=(0,i.c)(7),{copilotCheckRunFailureContext:a,targetUrl:s}=e;if(n[0]!==a||n[1]!==s){let e=[];if(null!=a){let t;n[3]!==a?(t={key:"copilot-explain-error",render:()=>(0,r.jsx)(t3,{failureContext:a})},n[3]=a,n[4]=t):t=n[4],e.push(t)}if(s){let t;n[5]!==s?(t={key:"view-details",render:()=>(0,r.jsx)(t4,{targetUrl:s})},n[5]=s,n[6]=t):t=n[6],e.push(t)}t=(0,r.jsx)(eE.L,{label:"actions",staticMenuActions:e,className:t1.statusCheckActionBar}),n[0]=a,n[1]=s,n[2]=t}else t=n[2];return t}try{t3.displayName||(t3.displayName="CopilotExplainErrorMenuItem")}catch{}try{t4.displayName||(t4.displayName="ViewDetailsMenuItem")}catch{}try{t5.displayName||(t5.displayName="StatusCheckRowActionBar")}catch{}function t6(e){let t,n,a=(0,i.c)(5),{iconColor:s,icon:o}=e;return a[0]!==s?(t={color:s},a[0]=s,a[1]=t):t=a[1],a[2]!==o||a[3]!==t?(n=(0,r.jsx)(eT.A,{icon:o,sx:t}),a[2]=o,a[3]=t,a[4]=n):n=a[4],n}function t7(e){let t,n,a,s=(0,i.c)(5),{animated:o}=e,d=void 0===o||o;return s[0]!==d?(t=d?(0,r.jsx)(c.A,{size:"small"}):(0,r.jsx)(l.CircleIcon,{size:"small",className:tX.staticSpinner}),s[0]=d,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("div",{className:tX.spinnerWrapper,children:(0,r.jsx)("div",{className:tX.spinnerInner})}),s[2]=n):n=s[2],s[3]!==t?(a=(0,r.jsxs)("div",{className:tX.checksSpinnerWrapper,children:[t,n]}),s[3]=t,s[4]=a):a=s[4],a}let t8=(0,u.memo)(function(e){let t,n,a,s,o,l,c,m,p,h,f,g,y,_,x,v,b=(0,i.c)(48),{additionalContext:S,avatarUrl:C,avatarBackgroundColor:j,copilotCheckRunFailureContext:N,description:w,displayName:I,state:E,stateChangedAt:T,targetUrl:k,isRequired:R,reserveSpaceForRequiredBadge:A,reserveSpaceForActionBar:L,shouldAnimate:D}=e,P=void 0===D||D,M=tE[E],O=`${I} ${S?S.charAt(0).toLowerCase()+S.slice(1):""}`,B=A&&!L,[F,U]=(0,u.useState)(!1),$=(0,u.useRef)(null),V=(0,u.useRef)(null);b[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{let e=new ResizeObserver(()=>{if($.current&&V.current){let e=V.current.offsetWidth;U($.current.offsetWidth+31>e)}});return V.current&&e.observe(V.current),()=>{e.disconnect()}},b[0]=t):t=b[0],b[1]!==I?(n=[I],b[1]=I,b[2]=n):n=b[2],(0,u.useEffect)(t,n),b[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)("div",{}),b[3]=a):a=b[3],b[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,d.$)(ev.listItem),b[4]=s):s=b[4],b[5]!==N||b[6]!==L||b[7]!==k?(o=L?(0,r.jsx)(t5,{copilotCheckRunFailureContext:N,targetUrl:k}):(0,r.jsx)(r.Fragment,{}),b[5]=N,b[6]=L,b[7]=k,b[8]=o):o=b[8],b[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,d.$)(tX.leadingVisual,"mt-2"),b[9]=l):l=b[9],b[10]!==P||b[11]!==E||b[12]!==M?(c="IN_PROGRESS"===E?(0,r.jsx)(t7,{animated:P}):(0,r.jsx)(t6,{icon:M.icon,iconColor:M.iconColor}),b[10]=P,b[11]=E,b[12]=M,b[13]=c):c=b[13],b[14]!==j||b[15]!==C||b[16]!==I?(m=C?(0,r.jsx)(ex.r,{alt:I,size:20,square:!0,src:C,className:"flex-shrink-0 ml-2 mr-2",style:j?{backgroundColor:j}:void 0}):(0,r.jsx)(tK.N,{size:20,square:!0,className:"flex-shrink-0 ml-2 mr-2"}),b[14]=j,b[15]=C,b[16]=I,b[17]=m):m=b[17],b[18]!==c||b[19]!==m?(p=(0,r.jsx)(tJ.B,{children:(0,r.jsxs)(e_.e,{className:l,children:[c,m]})}),b[18]=c,b[19]=m,b[20]=p):p=b[20];let q=I??"",W=k??void 0,G=F?`${I} ${S} ${w}`:void 0;b[21]!==G?(h={title:G},b[21]=G,b[22]=h):h=b[22];let H=("IN_PROGRESS"===E||"QUEUED"===E)&&"text-italic";b[23]!==H?(f=(0,d.$)(tX.titleDescription,H),b[23]=H,b[24]=f):f=b[24],b[25]!==S||b[26]!==E||b[27]!==T?(g=function({state:e,stateChangedAt:t,additionalContext:n}){switch(e){case"IN_PROGRESS":return(0,r.jsxs)("span",{children:["Started ",(0,r.jsx)(tz.A,{datetime:t})]});case"SKIPPED":return(0,r.jsxs)("span",{children:["Skipped ",(0,r.jsx)(tz.A,{datetime:t})]});case"QUEUED":return(0,r.jsx)("span",{children:"Queued"});default:return(0,r.jsx)("span",{children:n})}}({state:E,stateChangedAt:T,additionalContext:S}),b[25]=S,b[26]=E,b[27]=T,b[28]=g):g=b[28];let z=w&&`\u{2014} ${w}`;return b[29]!==f||b[30]!==g||b[31]!==z?(y=(0,r.jsxs)("span",{className:f,children:[g," ",z]}),b[29]=f,b[30]=g,b[31]=z,b[32]=y):y=b[32],b[33]!==q||b[34]!==W||b[35]!==h||b[36]!==y?(_=(0,r.jsx)(ey.ao,{containerClassName:tX.title,headingClassName:tX.titleHeader,value:q,href:W,linkProps:h,headingRef:$,headerContainerRef:V,children:y}),b[33]=q,b[34]=W,b[35]=h,b[36]=y,b[37]=_):_=b[37],b[38]!==R||b[39]!==B||b[40]!==A?(x=A?(0,r.jsx)(tY.V,{children:R&&(0,r.jsx)("div",{className:(0,d.$)(tX.requiredLabel,"flex-shrink-0 fgColor-default",B&&"pr-3"),children:(0,r.jsx)(tQ.A,{children:"Required"})})}):(0,r.jsx)("div",{className:"px-5"}),b[38]=R,b[39]=B,b[40]=A,b[41]=x):x=b[41],b[42]!==O||b[43]!==p||b[44]!==_||b[45]!==x||b[46]!==o?(v=(0,r.jsxs)(eg.c,{title:a,"aria-label":O,className:s,secondaryActions:o,children:[p,_,x]}),b[42]=O,b[43]=p,b[44]=_,b[45]=x,b[46]=o,b[47]=v):v=b[47],v});try{t6.displayName||(t6.displayName="StatusIcon")}catch{}try{t7.displayName||(t7.displayName="CheckSpinner")}catch{}try{t8.displayName||(t8.displayName="StatusCheckRow")}catch{}let t9={FAILURE:["CANCELLED","ERROR","FAILURE","STALE","STARTUP_FAILURE","TIMED_OUT"],PENDING:["ACTION_REQUIRED","EXPECTED","PENDING","QUEUED","REQUESTED","WAITING","_UNKNOWN_VALUE"],IN_PROGRESS:["IN_PROGRESS"],SKIPPED:["SKIPPED"],NEUTRAL:["NEUTRAL"],SUCCESS:["SUCCESS","COMPLETED"]};function ne({pullRequestId:e,statusChecks:t,statusRollupSummary:n,mergeBoxUserPreferences:a}){let[i,s]=(0,u.useState)(a||null),o=(0,u.useMemo)(()=>t.sort(tR),[t]),l=tL(n,t9,i),c=tA(o,t9,e=>e.state,i),m=(0,tU.u)("mergebox_smarter_checks_keys"),p=(0,tU.u)("mergebox_paint_containment"),h=t.some(e=>e.isRequired),f=t.some(e=>e.copilotCheckRunFailureContext||!!e.targetUrl),g=Object.entries(l).reduce((e,[,t])=>t>0?e+1:e,0),y=t.length>0&&t.every(e=>e.state===t[0]?.state),_=g>1||i?.statusChecksGrouping==="ungrouped"&&!y;return(0,r.jsx)("div",{className:(0,d.$)(tW.checksContainer,{[tW.containPaint]:p}),children:Object.entries(l).filter(([,e])=>e>0).map(([t,a],o)=>{let l=a<50;return(0,r.jsx)(tH,{count:a,groupStatus:t,isToggleVisible:_,pullRequestId:e,analyticsMetadata:tD(n),setUserPreferences:s,userPreferences:i,showSettingsIcon:i&&0===o,children:c[t]?.map(e=>{if(!e)return null;let t=m?`${e.displayName}-${e.state}-${e.targetUrl}-${e.stateChangedAt}`:crypto.randomUUID();return(0,r.jsx)(t8,{...e,shouldAnimate:l,reserveSpaceForActionBar:f,reserveSpaceForRequiredBadge:h},t)})},t)})})}try{ne.displayName||(ne.displayName="ExpandedChecksList")}catch{}let nt={iconWrapper:"StatusCheckStatesIcon-module__iconWrapper--LPiWu",icon:"StatusCheckStatesIcon-module__icon--trJdb","icon-animate":"StatusCheckStatesIcon-module__icon-animate--U9a0b"},nn={PASSING:(0,r.jsx)(et.A,{icon:()=>(0,r.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32}),FAILING:(0,r.jsx)(et.A,{icon:()=>(0,r.jsx)(l.XIcon,{size:16}),className:"bgColor-danger-emphasis fgColor-onEmphasis",size:32})},na={FAILURE:["CANCELLED","ERROR","FAILURE","STALE","STARTUP_FAILURE","TIMED_OUT"],PENDING:["_UNKNOWN_VALUE","EXPECTED","QUEUED","PENDING","WAITING","REQUESTED","ACTION_REQUIRED","IN_PROGRESS"],SKIPPED:["SKIPPED","NEUTRAL"],SUCCESS:["SUCCESS","COMPLETED"]},nr={length:1e3,delay:0},ni={FAILURE:"var(--fgColor-danger)",SUCCESS:"var(--fgColor-success)",PENDING:"var(--fgColor-attention)",SKIPPED:"var(--fgColor-neutral)"},ns=2*Math.PI*44,no={gapPercent:5,strokeWidth:12,size:32,circleSize:100,circumference:ns,percentToDegree:3.6,percentToPx:ns/100};function nl({statusRollupSummary:e}){let[t,n]=(0,u.useState)(!1),a=(0,u.useRef)(void 0),i=(0,u.useMemo)(()=>(function(e){let t,n=tL(e,na),a=[{name:"SUCCESS",count:n.SUCCESS??0},{name:"SKIPPED",count:n.SKIPPED??0},{name:"PENDING",count:n.PENDING??0},{name:"FAILURE",count:n.FAILURE??0}].flatMap(e=>e?[e]:[]).filter(e=>!!e.count&&e.count>0),r=a.reduce((e,t)=>e+t.count,0),i=[],s=a.length??0,o=a.filter(({count:e})=>e/r*100<6).map(e=>e.name),l=(t=0,3===o.length?t=15/(s-3):2===o.length?t=10/(s-2):1===o.length&&(t=5/(s-1)),t);return a.map((e,t)=>{var n,a;let c;if(n=e.name,!Object.keys(na).includes(n))return null;let d=e.count;if(!d)return null;let u=(a=e.name,c=d/r*100,(s>1&&(c-=no.gapPercent),o.includes(a))?c+5:c-l),m={name:e.name,percentage:u,dashArray:`${Math.max(u*no.percentToPx,0)} ${no.circumference}`,transform:function(e,t,n,a){let r=0;((0!==n||n!==a-1)&&a>1||2===a)&&(r=2.5);let i=((e,t)=>{if(0===e)return e;let n=0;for(let e=0;e<t.length;e++){let a=t[e];a&&(n+=a+no.gapPercent)}return n})(e,t);return`rotate(${-90+(i+r)*no.percentToDegree}deg)`}(u,i,t,s),stroke:ni[e.name]};return i.push(u),m}).flatMap(e=>e?[e]:[])})(e),[e]),s=1===e.length&&e[0]?.state==="SUCCESS",o=1===e.length&&e[0]?.state==="FAILURE",l=!s&&!o||t;return(0,u.useMemo)(()=>{void 0!==a.current&&e.length>0&&n(!0),a.current=e},[e]),(0,r.jsxs)("div",{className:nt.iconWrapper,children:[s&&(0,r.jsx)("div",{className:(0,d.$)(nt.icon,t&&nt["icon-animate"]),children:nn.PASSING}),o&&(0,r.jsx)("div",{className:(0,d.$)(nt.icon,t&&nt["icon-animate"]),children:nn.FAILING}),l&&(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${no.circleSize} ${no.circleSize}`,shapeRendering:"crispEdges",width:no.size,height:no.size,style:{userSelect:"none",zoom:"reset"},fill:"none","aria-hidden":"true",children:i.map(e=>(0,r.jsx)("circle",{cx:no.circleSize/2,cy:no.circleSize/2,r:44,style:{strokeLinecap:"round",strokeLinejoin:"round",strokeDashoffset:0,strokeWidth:no.strokeWidth,transition:`all ${nr.length}ms ease ${nr.delay}ms`,transformOrigin:"50% 50%",shapeRendering:"geometricPrecision",strokeDasharray:e.dashArray,transform:e.transform,stroke:e.stroke}},e.name))})]})}try{nl.displayName||(nl.displayName="StatusCheckStatesIcon")}catch{}let nc={FAILURE:["ERROR","FAILURE","STARTUP_FAILURE"],TIMED_OUT:["TIMED_OUT"],CANCELLED:["CANCELLED"],SUCCESS:["SUCCESS"],STALE:["STALE"],PENDING:["ACTION_REQUIRED","PENDING","WAITING","_UNKNOWN_VALUE"],IN_PROGRESS:["IN_PROGRESS"],QUEUED:["QUEUED"],NEUTRAL:["NEUTRAL"],SKIPPED:["SKIPPED"],EXPECTED:["EXPECTED"],REQUESTED:["REQUESTED"]};function nd(e){let t,n,a,s,o,c,d,u,m=(0,i.c)(27),{checkSectionAriaId:f,pendingWorkflowApprovalRollup:g,statusRollup:_,statusChecks:x,pullRequestHeadSha:v,pullRequestId:b,focusPrimaryMergeButton:S,mergeBoxUserPreferences:C}=e;m[0]!==v?(t={pullRequestHeadSha:v},m[0]=v,m[1]=t):t=m[1];let{isPending:j,mutate:N}=function(e){let t,n,a,r,s=(0,i.c)(10),{pullRequestHeadSha:o}=e,l=(0,h.e)(p.u.runActionRequiredWorkflows);s[0]!==o?(t={pullRequestHeadSha:o},s[0]=o,s[1]=t):t=s[1];let c=ts(t),d=(0,y.jE)();return s[2]!==l?(n=async()=>{let e=await (0,eI.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eI.hp)(e);return(0,eI.R)(e,t),t},s[2]=l,s[3]=n):n=s[3],s[4]!==d||s[5]!==c?(a=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[4]=d,s[5]=c,s[6]=a):a=s[6],s[7]!==n||s[8]!==a?(r={mutationFn:n,onSuccess:a},s[7]=n,s[8]=a,s[9]=r):r=s[9],(0,ew.n)(r)}(t),w=()=>{T(null),N(void 0,{onSuccess:()=>{setTimeout(nu,1e3),S()},onError:e=>T(e.message)})},[I,E]=(0,tl.A)(null),T=E,{workflowsRequiringApprovalCount:k,hasExpiredWorkflowRuns:R,approvalRequiredMessage:A,helpLink:L,viewerCanApproveWorkflowRuns:D}=g,P=`${k} workflow${1===k?"":"s"} awaiting approval`;m[2]!==A||m[3]!==R||m[4]!==L?(n=R?"Unable to re-run one or more workflows because they were created over a month ago.":(0,r.jsxs)(r.Fragment,{children:[A," ",(0,r.jsx)(ee.A,{inline:!0,href:L,children:"Learn more about approving workflows."})]}),m[2]=A,m[3]=R,m[4]=L,m[5]=n):n=m[5];let M=n;return m[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(tb,{bgColor:"attention.emphasis",color:"fg.onEmphasis"}),m[6]=a):a=m[6],m[7]!==w||m[8]!==j||m[9]!==D?(s=D?(0,r.jsx)(ed.Q,{loading:j,loadingAnnouncement:"Re-running workflows",onClick:w,children:"Approve workflows to run"}):void 0,m[7]=w,m[8]=j,m[9]=D,m[10]=s):s=m[10],m[11]!==f||m[12]!==M||m[13]!==s||m[14]!==P?(o=(0,r.jsx)(ei,{headerId:f,title:P,subtitle:M,icon:a,rightSideContent:s}),m[11]=f,m[12]=M,m[13]=s,m[14]=P,m[15]=o):o=m[15],m[16]!==I?(c=I&&(0,r.jsxs)(eS.A,{className:"m-3",variant:"danger",children:[(0,r.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),I]}),m[16]=I,m[17]=c):c=m[17],m[18]!==C||m[19]!==b||m[20]!==x||m[21]!==_.summary?(d=_.summary.length>0&&(0,r.jsx)(el,{isExpanded:!0,children:(0,r.jsx)(ne,{pullRequestId:b,statusChecks:x,statusRollupSummary:_.summary,mergeBoxUserPreferences:C})}),m[18]=C,m[19]=b,m[20]=x,m[21]=_.summary,m[22]=d):d=m[22],m[23]!==o||m[24]!==c||m[25]!==d?(u=(0,r.jsxs)(r.Fragment,{children:[o,c,d]}),m[23]=o,m[24]=c,m[25]=d,m[26]=u):u=m[26],u}function nu(){return(0,tm.i)("Successfully approved and re-requested workflows.")}let nm={PASSED:"All checks have passed",PENDING:"Some checks haven't completed yet",PENDING_APPROVAL:"Some checks are waiting for approval",PENDING_FAILED:"Some checks were not successful",SOME_FAILED:"Some checks were not successful",FAILED:"All checks have failed",PENDING_CONFLICTS:"Checks awaiting conflict resolution",UNKNOWN:"Checks status is unknown"};function np(e){let t,n,a,s,o,l=(0,i.c)(18),{pullRequestId:c,pullRequestHeadSha:d,focusPrimaryMergeButton:m,sectionStatus:p,shouldRender:h,mergeBoxUserPreferences:f}=e;l[0]!==d?(t={pullRequestHeadSha:d},l[0]=d,l[1]=t):t=l[1];let{data:g}=to(t),{aliveChannels:y,statusRollup:_,statusChecks:x}=g,v="PASSED"===_.combinedState,[b,S]=(0,em.Fo)(`${c}:checksExpanded`,!v),{sendAnalyticsEvent:C}=(0,Z.s)(),j=(0,u.useId)();!function(e,t){let n,a,r,s,o,l=(0,i.c)(10);l[0]!==t?(n={pullRequestHeadSha:t},l[0]=t,l[1]=n):n=l[1];let{refetch:c}=to(n),d=(0,te.A)(),u=tr()?2e3:1e4;l[2]!==d||l[3]!==c?(r=()=>{d()&&c()},l[2]=d,l[3]=c,l[4]=r):r=l[4],l[5]!==r||l[6]!==u?(s=(0,e8.n)(r,u),l[5]=r,l[6]=u,l[7]=s):s=l[7],a=s,l[8]!==a?(o=e=>{window.setTimeout(a,e.wait||0)},l[8]=a,l[9]=o):o=l[9];let m=o;(0,e9.x)(e,m)}(y.commitHeadShaChannel,d);let N=(0,i.c)(4);N[0]!==_.combinedState||N[1]!==_.summary.length?(s=()=>{if(0===_.summary.length)(0,tP.gd)();else{let e=tM[_.combinedState];(0,tP.iD)(e)}return tO},o=[_.combinedState,_.summary.length],N[0]=_.combinedState,N[1]=_.summary.length,N[2]=s,N[3]=o):(s=N[2],o=N[3]),(0,u.useEffect)(s,o);let w=_.pendingWorkflowApprovalRollup;return h?(l[2]!==j||l[3]!==b||l[4]!==m||l[5]!==f||l[6]!==d||l[7]!==c||l[8]!==p||l[9]!==C||l[10]!==S||l[11]!==x||l[12]!==_||l[13]!==w?(n="PENDING_APPROVAL"===_.combinedState&&w?(0,r.jsx)(nd,{checkSectionAriaId:j,pendingWorkflowApprovalRollup:w,statusRollup:_,statusChecks:x,pullRequestHeadSha:d,pullRequestId:c,focusPrimaryMergeButton:m,mergeBoxUserPreferences:f}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ei,{headerId:j,title:nm[p],subtitle:function(e){if(0===e.length)return"No checks available.";let t=tL(e,nc),n=Object.keys(t).reduce((e,n)=>{let a=t[n];return a?e+a:e},0),a=Object.keys(tT).map(e=>{let n=t[e]??0,a=tT[e];return n>0?`${n} ${a}`:void 0}).filter(Boolean).join(", ");return`${a} ${n>1?"checks":"check"}`}(_.summary),icon:(0,r.jsx)(nl,{statusRollupSummary:_.summary}),expandableProps:{ariaLabel:b?"Collapse checks":"Expand checks",isExpanded:b,onToggle:()=>{C(b?"checks_section.collapse":"checks_section.expand","MERGEBOX_CHECKS_SECTION_TOGGLE_BUTTON",tD(_.summary)),S(!b)}}}),(0,r.jsx)(el,{isExpanded:b,children:(0,r.jsx)(ne,{statusChecks:x,statusRollupSummary:_.summary,pullRequestId:c,mergeBoxUserPreferences:f})})]}),l[2]=j,l[3]=b,l[4]=m,l[5]=f,l[6]=d,l[7]=c,l[8]=p,l[9]=C,l[10]=S,l[11]=x,l[12]=_,l[13]=w,l[14]=n):n=l[14],l[15]!==j||l[16]!==n?(a=(0,r.jsx)("section",{"aria-label":"Checks","aria-describedby":j,className:"border-bottom color-border-subtle",children:n}),l[15]=j,l[16]=n,l[17]=a):a=l[17],a):null}try{nd.displayName||(nd.displayName="PendingApprovalChecksSection")}catch{}try{np.displayName||(np.displayName="ChecksSection")}catch{}function nh(){let e,t,n,a,s=(0,i.c)(6),{basePageDataUrl:o}=(0,f.Yu)();s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ee.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),s[0]=e):e=s[0];let c=`${o}/checks`;return s[1]!==c?(t=(0,r.jsxs)(r.Fragment,{children:["Try again or if the problem persists"," ",e," ","or"," ",(0,r.jsx)(ee.A,{href:c,inline:!0,children:"view the Checks tab."})]}),s[1]=c,s[2]=t):t=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(l.AlertIcon,{className:"mx-1",size:24}),s[3]=n):n=s[3],s[4]!==t?(a=(0,r.jsx)("section",{"aria-label":"Checks",className:"border-bottom borderColor-muted",children:(0,r.jsx)(ei,{title:"Checks cannot be loaded right now",subtitle:t,icon:n})}),s[4]=t,s[5]=a):a=s[5],a}try{nh.displayName||(nh.displayName="ChecksSectionFetchFailure")}catch{}var nf=n(3614),ng=n(10871);let ny={selectable:"ConflictsSection-module__selectable--BT2Oj",ConflictsSectionLoadingSpinner:"ConflictsSection-module__ConflictsSectionLoadingSpinner--tkJ8X",ConflictsSectionStatusSpinner:"ConflictsSection-module__ConflictsSectionStatusSpinner--qtsen"},n_={SpinnerContainer:"CenteredLoadingSpinner-module__SpinnerContainer--Kwt8t"};function nx(e){let t,n,a,s=(0,i.c)(5),{className:o}=e;return s[0]!==o?(t=(0,d.$)(n_.SpinnerContainer,o),s[0]=o,s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(c.A,{}),s[2]=n):n=s[2],s[3]!==t?(a=(0,r.jsx)("div",{className:t,children:n}),s[3]=t,s[4]=a):a=s[4],a}try{nx.displayName||(nx.displayName="CenteredLoadingSpinner")}catch{}var nv=n(73189),nb=n(83294);function nS(e){let t,n,a,s,o,c,d=(0,i.c)(29),{className:m,children:p,actionList:h,inactive:f,inactiveTooltipText:g,inactiveTooltipDirection:y,loading:_,loadingAnnouncement:x,secondaryButtonActive:v,secondaryButtonAriaLabel:b,onPrimaryButtonClick:S,shouldFocusPrimaryButton:C,onFocusPrimaryButton:j,isPrimary:N,hideSecondaryButton:w}=e,I=void 0===y?"ne":y,E=void 0!==w&&w,T=(0,u.useRef)(null);d[0]!==j||d[1]!==C?(t=()=>{C&&(T.current?.focus(),j?.())},n=[C,j],d[0]=j,d[1]=C,d[2]=t,d[3]=n):(t=d[2],n=d[3]),(0,u.useEffect)(t,n);let k=void 0!==N&&N?"primary":"default",[R,A]=(0,u.useState)(!1),L=f&&!v;d[4]!==f||d[5]!==_?(a=void 0!==_?{}:{inactive:f,"aria-disabled":f},d[4]=f,d[5]=_,d[6]=a):a=d[6];let D=a,P=f?nv.l:S;d[7]!==k||d[8]!==p||d[9]!==D||d[10]!==_||d[11]!==x||d[12]!==P?(s=(0,r.jsx)(ed.Q,{className:"flex-1",variant:k,ref:T,loading:_,loadingAnnouncement:x,onClick:P,...D,children:p}),d[7]=k,d[8]=p,d[9]=D,d[10]=_,d[11]=x,d[12]=P,d[13]=s):s=d[13],d[14]!==h||d[15]!==k||d[16]!==E||d[17]!==R||d[18]!==b||d[19]!==L?(o=!E&&(0,r.jsxs)(t$.W,{open:R,onOpenChange:L?nv.l:e=>A(e),children:[(0,r.jsx)(t$.W.Anchor,{children:(0,r.jsx)(tV.K,{className:"flex-0",variant:k,"aria-label":b,"aria-disabled":L,inactive:L,icon:l.TriangleDownIcon})}),(0,r.jsx)(t$.W.Overlay,{align:"end",sx:{width:"320px"},children:h})]}),d[14]=h,d[15]=k,d[16]=E,d[17]=R,d[18]=b,d[19]=L,d[20]=o):o=d[20],d[21]!==m||d[22]!==s||d[23]!==o?(c=(0,r.jsxs)(nb.A,{className:m,children:[s,o]}),d[21]=m,d[22]=s,d[23]=o,d[24]=c):c=d[24];let M=c;if(f&&g){let e;return d[25]!==M||d[26]!==I||d[27]!==g?(e=(0,r.jsx)(nf.m,{text:g,direction:I,children:M}),d[25]=M,d[26]=I,d[27]=g,d[28]=e):e=d[28],e}return M}try{nS.displayName||(nS.displayName="ButtonWithDropdown")}catch{}var nC=n(30923);function nj(e){let t,n,a=(0,i.c)(8),{description:s,onSelect:o,selected:l,text:c,inactiveText:d}=e;return a[0]!==s?(t=(0,r.jsx)(eb.l.Description,{variant:"block",children:s}),a[0]=s,a[1]=t):t=a[1],a[2]!==d||a[3]!==o||a[4]!==l||a[5]!==t||a[6]!==c?(n=(0,r.jsxs)(eb.l.Item,{selected:l,onSelect:o,inactiveText:d,children:[c,t]}),a[2]=d,a[3]=o,a[4]=l,a[5]=t,a[6]=c,a[7]=n):n=a[7],n}function nN(e){let t,n=(0,i.c)(5),{conflictsWebEditorPath:a,conflictsState:s,webEditorConflictResolution:o}=e;if("HAS_CONFLICTS"!==s||!o)return null;if(!o.viewerCanResolve){let e,t,a=o.viewerCannotResolve?.message||"";return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ed.Q,{inactive:!0,children:"Resolve conflicts"}),n[0]=e):e=n[0],n[1]!==a?(t=(0,r.jsx)(nf.m,{direction:"nw",text:a,children:e}),n[1]=a,n[2]=t):t=n[2],t}return n[3]!==a?(t=(0,r.jsx)(ng.z,{href:a,children:"Resolve conflicts"}),n[3]=a,n[4]=t):t=n[4],t}function nw(e){let t=(0,i.c)(3),{conflictsWebEditorPath:n,webEditorConflictResolution:a}=e;switch(a?.viewerCannotResolve?.reason){case"INSUFFICIENT_ACCESS":return null;case"TOO_COMPLEX":case"HEAD_BRANCH_PROTECTED":case"ADMIN_DISABLED":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("span",{children:"Use the command line to resolve conflicts before continuing."}),t[0]=e):e=t[0],e}default:{let e;return t[1]!==n?(e=(0,r.jsxs)("span",{children:["Use the"," ",(0,r.jsx)(ee.A,{inline:!0,href:n,children:"web editor"})," ","or the command line to resolve conflicts before continuing."]}),t[1]=n,t[2]=e):e=t[2],e}}}function nI(e){let t,n=(0,i.c)(3),{advisoryWorkspacePath:a,advisoryWorkspaceId:s}=e,o=a||"";return n[0]!==s||n[1]!==o?(t=(0,r.jsxs)("span",{children:["Merging must be performed from the"," ",(0,r.jsx)(ee.A,{inline:!0,href:o,children:s})," ","advisory."]}),n[0]=s,n[1]=o,n[2]=t):t=n[2],t}let nE={NO_CONFLICTS:{heading:"No conflicts with base branch",subtitle:()=>"Merging can be performed automatically.",icon:(0,r.jsx)(et.A,{icon:()=>(0,r.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32})},PENDING:{heading:"Checking for the ability to merge automatically...",subtitle:()=>"Hang in there while we check the branch's status.",icon:(0,r.jsx)(nx,{className:ny.ConflictsSectionLoadingSpinner})},OUT_OF_DATE:{heading:"This branch is out-of-date with the base branch",subtitle:({baseRefName:e,viewerLogin:t})=>`Merge the latest changes from ${e} into this branch. This merge commit will be associated with ${t}.`,icon:(0,r.jsx)(tb,{})},HAS_CONFLICTS:{heading:"This branch has conflicts that must be resolved",subtitle:({conflictsWebEditorPath:e,conflictsCondition:t})=>(0,r.jsx)(nw,{conflictsWebEditorPath:e,webEditorConflictResolution:t?.webEditorConflictResolution}),icon:(0,r.jsx)(tb,{})},HAS_REBASE_CONFLICTS:{heading:"This branch cannot be rebased due to conflicts",subtitle:()=>"",icon:(0,r.jsx)(tb,{})},HAS_ADVISORY_WORKSPACE:{heading:"No conflicts with base branch",subtitle:({advisoryWorkspaceId:e,advisoryWorkspacePath:t})=>(0,r.jsx)(nI,{advisoryWorkspaceId:e,advisoryWorkspacePath:t}),icon:(0,r.jsx)(et.A,{icon:()=>(0,r.jsx)(l.CheckIcon,{size:16}),className:"bgColor-success-emphasis fgColor-onEmphasis",size:32})}};function nT(e){let t,n,a,s,o,d,m,f,g,_,v,b,S,C,j,N,w,I,E,T,k,R,A,L,D,P=(0,i.c)(92),{baseRefName:M,headRefOid:O,resourcePath:B,viewerCanUpdateBranch:F,viewerUpdateMethods:U,viewerLogin:$,conflictsCondition:V,conflictsState:q,canUserPushToBase:W,advisoryWorkspace:G}=e;P[0]!==U?(t=U?.find(nM)?.name||"MERGE",P[0]=U,P[1]=t):t=P[1];let H=t,[z,Q]=(0,u.useState)(H),[K,J]=(0,tl.A)(!1),[Y,X]=(0,tl.A)(null),{sendAnalyticsEvent:ee}=(0,Z.s)(),et=(0,u.useId)(),en=x(),ea=(0,y.jE)();P[2]!==en||P[3]!==ea||P[4]!==J?(n=async()=>{await ea.refetchQueries({queryKey:en},{cancelRefetch:!1}),J(!1)},P[2]=en,P[3]=ea,P[4]=J,P[5]=n):n=P[5];let er=n;P[6]!==X||P[7]!==J?(a=e=>{J(!1),X(e.message)},P[6]=X,P[7]=J,P[8]=a):a=P[8];let es=a;P[9]!==es||P[10]!==er?(s={onSuccess:er,onError:es},P[9]=es,P[10]=er,P[11]=s):s=P[11];let{mutate:eo}=function(e){let t,n,a,r,s=(0,i.c)(10),{onSuccess:o,onError:l}=e,c=(0,h.e)(p.u.updatePullRequestBranch);return s[0]!==c?(t=async e=>{let{updateMethod:t,expectedHeadOid:n}=e;return(0,eI.q$)(c,{method:"POST",headers:{Accept:"application/json"},body:{updateMethod:t,expectedHeadOid:n}})},s[0]=c,s[1]=t):t=s[1],s[2]!==o?(n=async e=>{let t=await (0,eI.hp)(e);e.ok||(0,eI.R)(e,t);let n=await (await (0,nC.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message);o()},s[2]=o,s[3]=n):n=s[3],s[4]!==l?(a=e=>{l(e)},s[4]=l,s[5]=a):a=s[5],s[6]!==t||s[7]!==n||s[8]!==a?(r={mutationFn:t,onSuccess:n,onError:a},s[6]=t,s[7]=n,s[8]=a,s[9]=r):r=s[9],(0,ew.n)(r)}(s);P[12]!==O||P[13]!==K||P[14]!==z||P[15]!==ee||P[16]!==X||P[17]!==J||P[18]!==eo?(o=()=>{K||(J(!0),X(null),eo({updateMethod:z,expectedHeadOid:O}),ee("conflicts_section.update_branch","MERGEBOX_CONFLICTS_SECTION_UPDATE_BRANCH_BUTTON"))},P[12]=O,P[13]=K,P[14]=z,P[15]=ee,P[16]=X,P[17]=J,P[18]=eo,P[19]=o):o=P[19];let el=o,ec=`${B}/conflicts`;P[20]!==V.conflicts?(d=V.conflicts??[],P[20]=V.conflicts,P[21]=d):d=P[21];let ed=d;P[22]!==z?(m=function(){return"MERGE"===z?"Update branch":"Rebase branch"},P[22]=z,P[23]=m):m=P[23];let eu=m;P[24]!==z?(f=function(){return"MERGE"===z?"Updating branch":"Rebasing branch"},P[24]=z,P[25]=f):f=P[25];let em=f,ep=("OUT_OF_DATE"===q||"NO_CONFLICTS"===q||"PENDING"===q)&&F,eh="HAS_CONFLICTS"===q&&(V.webEditorConflictResolution?.viewerCanResolve||V.webEditorConflictResolution?.viewerCannotResolve?.reason!=="INSUFFICIENT_ACCESS"),ef=G?.advisoryWorkspaceId,eg=G?.advisoryWorkspacePath;P[26]!==U?(g=U?.filter(nP),P[26]=U,P[27]=g):g=P[27];let ey=g;P[28]!==U?(_=U?.find(nD),P[28]=U,P[29]=_):_=P[29];let e_=_;P[30]!==U?(v=U?.find(nL),P[30]=U,P[31]=v):v=P[31];let ex=v;P[32]!==U?(b=U?.find(nA),P[32]=U,P[33]=b):b=P[33];let ev=b;P[34]!==U?(S=U?.find(nR)?.failureReason,P[34]=U,P[35]=S):S=P[35];let eC=S;P[36]!==H||P[37]!==eC||P[38]!==ev||P[39]!==z||P[40]!==ee||P[41]!==e_||P[42]!==ex||P[43]!==U?(C=function(){return U?(0,r.jsxs)(eb.l,{selectionVariant:"single",showDividers:!0,children:[e_&&(0,r.jsx)(nj,{description:"The merge commit will be associated with your account.",selected:"MERGE"===H,text:"Update with merge commit",onSelect:()=>{ee("conflicts_section.select_merge_commit_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),Q("MERGE")}}),ex&&(0,r.jsx)(nj,{description:"This pull request will be rebased on top of the latest changes and then force pushed.",selected:"REBASE"===H,text:"Update with rebase",onSelect:()=>{ee("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),Q("REBASE")}}),ev&&(0,r.jsx)(nj,{inactiveText:eC||"This branch cannot be rebased at this time.",selected:"REBASE"===H,text:"Update with rebase",onSelect:()=>{ee("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),Q("REBASE")}})]}):(0,r.jsxs)(eb.l,{selectionVariant:"single",showDividers:!0,children:[(0,r.jsx)(nj,{description:"The merge commit will be associated with your account.",selected:"MERGE"===z,text:"Update with merge commit",onSelect:()=>{ee("conflicts_section.select_merge_commit_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),Q("MERGE")}}),(0,r.jsx)(nj,{description:"This pull request will be rebased on top of the latest changes and then force pushed.",selected:"REBASE"===z,text:"Update with rebase",onSelect:()=>{ee("conflicts_section.select_rebase_method","MERGEBOX_CONFLICTS_SECTION_MERGE_METHOD_MENU_ITEM"),Q("REBASE")}})]})},P[36]=H,P[37]=eC,P[38]=ev,P[39]=z,P[40]=ee,P[41]=e_,P[42]=ex,P[43]=U,P[44]=C):C=P[44];let ej=C,eN=nE[q],eE=nE[q];return P[45]!==K?(j=K&&(0,r.jsx)(c.A,{size:"small",className:ny.ConflictsSectionStatusSpinner}),P[45]=K,P[46]=j):j=P[46],P[47]!==eE.heading||P[48]!==j?(N=(0,r.jsxs)(r.Fragment,{children:[eE.heading,j]}),P[47]=eE.heading,P[48]=j,P[49]=N):N=P[49],P[50]!==ef||P[51]!==eg||P[52]!==M||P[53]!==W||P[54]!==V||P[55]!==q||P[56]!==ec||P[57]!==$?(w=W?nE[q].subtitle({baseRefName:M,viewerLogin:$,conflictsWebEditorPath:ec,conflictsCondition:V,advisoryWorkspaceId:ef,advisoryWorkspacePath:eg}):"Changes can be cleanly merged.",P[50]=ef,P[51]=eg,P[52]=M,P[53]=W,P[54]=V,P[55]=q,P[56]=ec,P[57]=$,P[58]=w):w=P[58],P[59]!==el||P[60]!==K||P[61]!==ep||P[62]!==ey?.length||P[63]!==em||P[64]!==eu||P[65]!==ej?(I=ep&&(0,r.jsx)(nS,{hideSecondaryButton:ey?.length===1,loading:K,loadingAnnouncement:em(),secondaryButtonAriaLabel:"Update branch options",actionList:ej(),onPrimaryButtonClick:el,children:eu()}),P[59]=el,P[60]=K,P[61]=ep,P[62]=ey?.length,P[63]=em,P[64]=eu,P[65]=ej,P[66]=I):I=P[66],P[67]!==V.webEditorConflictResolution||P[68]!==q||P[69]!==ec?(E=(0,r.jsx)(nN,{conflictsWebEditorPath:ec,conflictsState:q,webEditorConflictResolution:V.webEditorConflictResolution}),P[67]=V.webEditorConflictResolution,P[68]=q,P[69]=ec,P[70]=E):E=P[70],P[71]!==I||P[72]!==E?(T=(0,r.jsxs)(r.Fragment,{children:[I,E]}),P[71]=I,P[72]=E,P[73]=T):T=P[73],P[74]!==ed||P[75]!==eh?(k=eh&&(0,r.jsx)("div",{className:"ml-n3",children:(0,r.jsx)(eb.l,{className:"py-0 overflow-hidden",children:ed.map(nk)})}),P[74]=ed,P[75]=eh,P[76]=k):k=P[76],P[77]!==et||P[78]!==eN.icon||P[79]!==N||P[80]!==w||P[81]!==T||P[82]!==k?(R=(0,r.jsx)(ei,{headerId:et,icon:eN.icon,title:N,subtitle:w,rightSideContent:T,children:k}),P[77]=et,P[78]=eN.icon,P[79]=N,P[80]=w,P[81]=T,P[82]=k,P[83]=R):R=P[83],P[84]!==Y?(A=Y&&(0,r.jsxs)(eS.A,{className:"m-3",variant:"danger",children:[(0,r.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),Y]}),P[84]=Y,P[85]=A):A=P[85],P[86]!==R||P[87]!==A?(L=(0,r.jsxs)("div",{className:"d-flex flex-column width-full overflow-hidden",children:[R,A]}),P[86]=R,P[87]=A,P[88]=L):L=P[88],P[89]!==et||P[90]!==L?(D=(0,r.jsx)("section",{"aria-label":"Conflicts",className:"border-bottom borderColor-muted","aria-describedby":et,children:L}),P[89]=et,P[90]=L,P[91]=D):D=P[91],D}function nk(e){return(0,r.jsxs)(eb.l.Item,{children:[(0,r.jsx)(eb.l.LeadingVisual,{className:"fgColor-muted",children:(0,r.jsx)(l.FileIcon,{})}),(0,r.jsx)("span",{className:`input-monospace f6 ${ny.selectable}`,children:e})]},e)}function nR(e){return"REBASE"===e.name}function nA(e){return"REBASE"===e.name&&"UNAVAILABLE"===e.allowableStatus}function nL(e){return"REBASE"===e.name&&"ALLOWED"===e.allowableStatus}function nD(e){return"MERGE"===e.name&&"ALLOWED"===e.allowableStatus}function nP(e){return"ALLOWED"===e.allowableStatus||"UNAVAILABLE"===e.allowableStatus}function nM(e){return!0===e.isDefault}try{nj.displayName||(nj.displayName="UpdateBranchOption")}catch{}try{nN.displayName||(nN.displayName="ResolveConflictsButton")}catch{}try{nw.displayName||(nw.displayName="ConflictResolutionSubtitle")}catch{}try{nI.displayName||(nI.displayName="AdvisoryWorkspaceSubtitle")}catch{}try{nT.displayName||(nT.displayName="ConflictsSection")}catch{}let nO={DraftStateCircleIcon:"DraftStateSection-module__DraftStateCircleIcon--APxWt",DraftStateFlashMessage:"DraftStateSection-module__DraftStateFlashMessage--XlMkr",DraftStateIcon:"DraftStateSection-module__DraftStateIcon--_Co24"};function nB(e){let t,n,a,s,o,c,d,m,f=(0,i.c)(24),{viewerCanUpdate:g,helpUrl:_}=e,[v,b]=(0,tl.A)(null);f[0]!==b?(t={onError:e=>{b(e.message)}},f[0]=b,f[1]=t):t=f[1];let{mutate:S,isPending:C}=function(e){let t,n,a,r,s=(0,i.c)(11),{onError:o}=e,l=(0,h.e)(p.u.markReadyForReview),c=x(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eI.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eI.hp)(e);return(0,eI.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(a=e=>o(e),s[5]=o,s[6]=a):a=s[6],s[7]!==t||s[8]!==n||s[9]!==a?(r={mutationFn:t,onSuccess:n,onError:a},s[7]=t,s[8]=n,s[9]=a,s[10]=r):r=s[10],(0,ew.n)(r)}(t),{sendAnalyticsEvent:j}=(0,Z.s)(),N=(0,u.useId)();f[2]!==C||f[3]!==S||f[4]!==j?(n=function(){C||(S(),j("draft_state_section.mark_ready_for_review","MERGEBOX_DRAFT_STATE_SECTION_MARK_READY_FOR_REVIEW_BUTTON"))},f[2]=C,f[3]=S,f[4]=j,f[5]=n):n=f[5];let w=n,I=`${_}/get-started/learning-about-github/access-permissions-on-github`;return f[6]!==I||f[7]!==g?(a=g?"Draft pull requests cannot be merged.":(0,r.jsxs)("span",{children:["Only those with ",(0,r.jsx)("a",{href:I,children:"write access"})," to this repository can mark a draft pull request as ready for review."]}),f[6]=I,f[7]=g,f[8]=a):a=f[8],f[9]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)(et.A,{size:32,icon:nF,className:nO.DraftStateCircleIcon}),f[9]=s):s=f[9],f[10]!==w||f[11]!==C||f[12]!==g?(o=g?(0,r.jsx)(ed.Q,{onClick:w,loading:C,loadingAnnouncement:"Marking ready for review",children:"Ready for review"}):void 0,f[10]=w,f[11]=C,f[12]=g,f[13]=o):o=f[13],f[14]!==v?(c=v&&(0,r.jsxs)(eS.A,{variant:"danger",className:nO.DraftStateFlashMessage,children:[(0,r.jsx)(eT.A,{icon:l.StopIcon,className:nO.DraftStateIcon}),v]}),f[14]=v,f[15]=c):c=f[15],f[16]!==N||f[17]!==a||f[18]!==o||f[19]!==c?(d=(0,r.jsx)(ei,{headerId:N,title:"This pull request is still a work in progress",subtitle:a,icon:s,rightSideContent:o,children:c}),f[16]=N,f[17]=a,f[18]=o,f[19]=c,f[20]=d):d=f[20],f[21]!==N||f[22]!==d?(m=(0,r.jsx)("section",{"aria-label":"Draft state","aria-describedby":N,className:"border-bottom color-border-subtle",children:d}),f[21]=N,f[22]=d,f[23]=m):m=f[23],m}function nF(){return(0,r.jsx)(l.GitPullRequestDraftIcon,{size:16})}try{nB.displayName||(nB.displayName="DraftStateSection")}catch{}let nU={MergeQueueSectionText:"MergeQueueSection-module__MergeQueueSectionText--rEy7Y"};function n$(e){let t,n,a,s,o,c,d,m,f,g,_,v,b,S,C,j,N,w,I=(0,i.c)(52),{mergeQueue:E,mergeQueueEntry:T,viewerCanAddAndRemoveFromMergeQueue:k,focusPrimaryMergeButton:R}=e,A=T?.position,L=E?.url,D=(0,u.useRef)(null),[P,M]=(0,tl.A)(!1),[O,B]=(0,tl.A)(null),F=(0,i.c)(1);F[0]===Symbol.for("react.memo_cache_sentinel")?(w=[],F[0]=w):w=F[0],(0,u.useEffect)(tB,w);let{sendAnalyticsEvent:U}=(0,Z.s)();I[0]!==B||I[1]!==M?(t={onError:e=>{M(!1),B(e.message),D.current?.focus(),setTimeout(nq,1e3)}},I[0]=B,I[1]=M,I[2]=t):t=I[2];let{mutate:$,isPending:V}=function(e){let t,n,a,r,s=(0,i.c)(11),{onError:o}=e,l=(0,h.e)(p.u.dequeuePullRequest),c=x(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eI.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eI.hp)(e);return(0,eI.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(a=e=>{o(e)},s[5]=o,s[6]=a):a=s[6],s[7]!==t||s[8]!==n||s[9]!==a?(r={mutationFn:t,onSuccess:n,onError:a},s[7]=t,s[8]=n,s[9]=a,s[10]=r):r=s[10],(0,ew.n)(r)}(t);I[3]!==R||I[4]!==V||I[5]!==$||I[6]!==U||I[7]!==B||I[8]!==M?(n=()=>{V||(B(null),U("merge_queue_section.dequeue_pull_request","MERGEBOX_MERGE_QUEUE_SECTION_REMOVE_FROM_QUEUE_BUTTON"),$(void 0,{onSuccess:()=>{M(!1),setTimeout(nV,1e3),R()}}))},I[3]=R,I[4]=V,I[5]=$,I[6]=U,I[7]=B,I[8]=M,I[9]=n):n=I[9];let q=n;I[10]!==B||I[11]!==M?(a=()=>{B(null),M(!0)},I[10]=B,I[11]=M,I[12]=a):a=I[12];let W=a;I[13]!==M?(s=()=>M(!1),I[13]=M,I[14]=s):s=I[14],I[15]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(td.A.Header,{id:"remove-from-queue-dialog-title",children:"Remove from the queue?"}),I[15]=o):o=I[15],I[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)("span",{children:"Removing this pull request from the queue could impact other pull requests in the queue. Are you sure?"}),I[16]=c):c=I[16],I[17]!==V||I[18]!==M?(d=()=>{V||(M(!1),D.current?.focus())},I[17]=V,I[18]=M,I[19]=d):d=I[19],I[20]!==V||I[21]!==d?(m=(0,r.jsx)(ed.Q,{className:"mr-1",inactive:V,onClick:d,children:"Cancel"}),I[20]=V,I[21]=d,I[22]=m):m=I[22],I[23]!==q||I[24]!==V?(f=(0,r.jsx)(ed.Q,{variant:"danger",loading:V,loadingAnnouncement:"Removing from the queue",onClick:q,children:"Remove from the queue"}),I[23]=q,I[24]=V,I[25]=f):f=I[25],I[26]!==m||I[27]!==f?(g=(0,r.jsxs)("div",{className:"p-3",children:[c,(0,r.jsxs)("div",{className:"d-flex flex-justify-end mt-3",children:[m,f]})]}),I[26]=m,I[27]=f,I[28]=g):g=I[28],I[29]!==P||I[30]!==g||I[31]!==s?(_=(0,r.jsxs)(td.A,{"aria-labelledby":"remove-from-queue-dialog-title",isOpen:P,returnFocusRef:D,onDismiss:s,children:[o,g]}),I[29]=P,I[30]=g,I[31]=s,I[32]=_):_=I[32],I[33]!==O?(v=O&&(0,r.jsxs)(eS.A,{className:"mx-3 my-2",variant:"danger",children:[(0,r.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),O]}),I[33]=O,I[34]=v):v=I[34],I[35]!==W||I[36]!==T?.isLocked||I[37]!==k?(b=k&&!T?.isLocked&&(0,r.jsx)(ed.Q,{ref:D,onClick:W,children:"Remove from queue"}),I[35]=W,I[36]=T?.isLocked,I[37]=k,I[38]=b):b=I[38],I[39]!==b?(S=(0,r.jsx)(r.Fragment,{children:b}),I[39]=b,I[40]=S):S=I[40];let G=T?.isLocked;return I[41]!==A||I[42]!==L||I[43]!==G?(C=(0,r.jsx)(nW,{position:A,resourcePath:L,entryIsLocked:G}),I[41]=A,I[42]=L,I[43]=G,I[44]=C):C=I[44],I[45]!==S||I[46]!==C?(j=(0,r.jsx)(ei,{title:"Queued to merge...",rightSideContent:S,children:C}),I[45]=S,I[46]=C,I[47]=j):j=I[47],I[48]!==_||I[49]!==v||I[50]!==j?(N=(0,r.jsxs)(r.Fragment,{children:[_,v,j]}),I[48]=_,I[49]=v,I[50]=j,I[51]=N):N=I[51],N}function nV(){return(0,tm.i)("The pull request was successfully removed from the queue.")}function nq(){return(0,tm.i)("Failed to remove pull request from the merge queue")}function nW(e){let t,n,a,s,o=(0,i.c)(8),{position:l,resourcePath:c,entryIsLocked:d}=e;if(!l||!c){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(r.Fragment,{}),o[0]=e):e=o[0],e}let u=l-1;return t=d?"This pull request is locked for deployment by the":0===u?"This pull request is next up in the":1===u?`There is ${u} pull request ahead of this one in the`:`There are ${u} pull requests ahead of this one in the`,o[1]!==t?(n=(0,r.jsx)("span",{className:nU.MergeQueueSectionText,children:t}),o[1]=t,o[2]=n):n=o[2],o[3]!==c?(a=(0,r.jsx)(ee.A,{inline:!0,href:c,children:"merge queue"}),o[3]=c,o[4]=a):a=o[4],o[5]!==n||o[6]!==a?(s=(0,r.jsxs)(r.Fragment,{children:[n," ",a,"."]}),o[5]=n,o[6]=a,o[7]=s):s=o[7],s}try{n$.displayName||(n$.displayName="MergeQueueSection")}catch{}try{nW.displayName||(nW.displayName="MergeQueuePositionText")}catch{}function nG({mergeMethod:e,confirming:t,isBypassMerge:n=!1,inProgress:a=!1,isAutoMergeAllowed:r=!1}){if(a)return r?"Confirming...":"Merging...";let i=t?"Confirm auto-merge":"Enable auto-merge",s=t?"Confirm bypass rules and merge":"Bypass rules and merge";switch(e){case m.q$.MERGE:if(r)return i;if(n)return s;if(t)return"Confirm merge";else return"Merge pull request";case m.q$.SQUASH:if(r)return`${i} (squash)`;if(n)return`${s} (squash)`;if(t)return"Confirm squash and merge";else return"Squash and merge";case m.q$.REBASE:if(r)return`${i} (rebase)`;if(n)return`${s} (rebase)`;if(t)return"Confirm rebase and merge";else return"Rebase and merge"}}function nH({mergeMethod:e,confirming:t,inProgress:n}){if(n)return"Adding to merge queue...";switch(e){case m.lD.GROUP:return t?"Confirm merge when ready":"Merge when ready";case m.lD.SOLO:return t?"Confirm queue and force solo merge":"Queue and force solo merge"}}var nz=n(24815),nQ=n(16567),nK=n(39820);let MergeError=class MergeError extends Error{constructor(e,t=[],n){super(e),(0,k._)(this,"ruleErrors",void 0),this.name="MergeError",this.ruleErrors=t,this.cause=n}};function nJ(e){let t,n,a,r,s,o=(0,i.c)(14);o[0]!==e?(t=void 0===e?{}:e,o[0]=e,o[1]=t):t=o[1];let{onError:l,onSuccess:c}=t,d=(0,h.e)(p.u.enableAutoMerge),u=x(),m=(0,y.jE)();return o[2]!==d?(n=async e=>{let t=await (0,eI.q$)(d,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eI.hp)(t),a=new MergeError(n?.error||"Unknown error occurred",n?.metadata?.ruleErrors||[],t.status);return(0,eI.R)(t,n,a),n},o[2]=d,o[3]=n):n=o[3],o[4]!==u||o[5]!==c||o[6]!==m?(a=()=>(c?.(),m.refetchQueries({queryKey:u},{cancelRefetch:!1})),o[4]=u,o[5]=c,o[6]=m,o[7]=a):a=o[7],o[8]!==l?(r=e=>{l?.(e)},o[8]=l,o[9]=r):r=o[9],o[10]!==n||o[11]!==a||o[12]!==r?(s={mutationFn:n,onSuccess:a,onError:r},o[10]=n,o[11]=a,o[12]=r,o[13]=s):s=o[13],(0,ew.n)(s)}var nY=n(65025);function nX(e){let t,n=(0,i.c)(3),{children:a,className:s}=e,o=`d-flex flex-items-start flex-sm-items-center flex-column flex-sm-row gap-2 ${s}`;return n[0]!==a||n[1]!==o?(t=(0,r.jsx)("div",{className:o,children:a}),n[0]=a,n[1]=o,n[2]=t):t=n[2],t}nX.Slot=function({children:e}){var t;let n=u.Children.only(e);return u.isValidElement(n)&&(n=(t=n).type===nS||t.type===ed.Q?(0,u.cloneElement)(t,{className:`flex-self-stretch flex-shrink-0 ${t.props.className}`}):t),n};try{nX.displayName||(nX.displayName="MergeSectionActions")}catch{}try{(a=MergeSectionsActionsSlot).displayName||(a.displayName="MergeSectionsActionsSlot")}catch{}let nZ={ConfirmMergeContainer:"ConfirmMerge-module__ConfirmMergeContainer--svghz",ConfirmMergeText:"ConfirmMerge-module__ConfirmMergeText--Lq1XQ"};function n0(e){let t,n,a,s=(0,i.c)(5),{errorMessage:o}=e;return(s[0]!==o?(t=()=>{o&&o.length>0&&(0,tm.i)(o)},n=[o],s[0]=o,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,u.useEffect)(t,n),o)?(s[3]!==o?(a=(0,r.jsx)(nK.l,{className:"mt-3","aria-label":"Merge error warning banner",variant:"warning",title:"Merge error",hideTitle:!0,description:o}),s[3]=o,s[4]=a):a=s[4],a):null}function n1(e){let t,n,a,s,o,l,c,d,f,g,_,v,b,S,C,j,N,w,I=(0,i.c)(67),{defaultCommitAuthorEmail:E,commitMessageBody:T,commitMessageHeadline:k,defaultBranchName:R,handleConfirmingMergeInfo:A,isBypassMerge:L,onCancel:D,selectedMergeMethod:P,isAutoMergeAllowed:M,possibleCommitAuthorEmails:O}=e,B=void 0!==M&&M,F=(0,u.useRef)(null),U=(0,u.useRef)(null);I[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{F.current?.focus(),U.current?.scrollIntoView({behavior:"smooth",block:"nearest"})},n=[],I[0]=t,I[1]=n):(t=I[0],n=I[1]),(0,u.useEffect)(t,n);let[$,V]=(0,u.useState)(k||""),[q,W]=(0,u.useState)(T||""),{sendAnalyticsEvent:G}=(0,Z.s)(),[H,z]=(0,tl.A)("");I[2]===Symbol.for("react.memo_cache_sentinel")?(a=[],I[2]=a):a=I[2];let[Q,K]=(0,tl.A)(a),J=O.length>0,Y=P===m.q$.REBASE?"":E||"",[X,ee]=(0,u.useState)(Y);I[3]!==z||I[4]!==K?(s={onError:e=>{e instanceof MergeError&&e.ruleErrors.length>0?K(e.ruleErrors):(K([]),z(e.message))}},I[3]=z,I[4]=K,I[5]=s):s=I[5];let{mutate:et,isPending:en}=function(e){let t,n,a,r,s=(0,i.c)(11),{onError:o}=e,l=(0,h.e)(p.u.merge),c=x(),d=(0,y.jE)();return s[0]!==l?(t=async e=>{let t=await (0,eI.q$)(l,{method:"POST",headers:{Accept:"application/json"},body:e}),n=await (0,eI.hp)(t),a=new MergeError(n?.error||"Unknown error occurred",n?.metadata?.ruleErrors||[],t.status);return(0,eI.R)(t,n,a),n},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.invalidateQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(a=e=>o(e),s[5]=o,s[6]=a):a=s[6],s[7]!==t||s[8]!==n||s[9]!==a?(r={mutationFn:t,onSuccess:n,onError:a},s[7]=t,s[8]=n,s[9]=a,s[10]=r):r=s[10],(0,ew.n)(r)}(s);I[6]!==z||I[7]!==K?(o=e=>{e instanceof MergeError&&e.ruleErrors.length>0?K(e.ruleErrors):(K([]),z(e.message))},I[6]=z,I[7]=K,I[8]=o):o=I[8],I[9]!==A?(l=()=>{A(!1)},I[9]=A,I[10]=l):l=I[10],I[11]!==o||I[12]!==l?(c={onError:o,onSuccess:l},I[11]=o,I[12]=l,I[13]=c):c=I[13];let{mutate:ea,isPending:er}=nJ(c),ei=en||er;I[14]!==X||I[15]!==q||I[16]!==$||I[17]!==ea||I[18]!==B||I[19]!==L||I[20]!==ei||I[21]!==et||I[22]!==P||I[23]!==G||I[24]!==J||I[25]!==z?(d=()=>{ei||(z(""),B?(ea({...J?{authorEmail:X}:{},commitMessage:q,commitTitle:$,mergeMethod:P}),G("direct_merge_section.confirm_auto_merge","MERGEBOX_AUTO_MERGE_CONFIRMATION_BUTTON")):(et({...J?{authorEmail:X}:{},bypassBranchProtections:L,commitMessage:q,commitTitle:$,mergeMethod:P}),G("direct_merge_section.confirm_direct_merge","MERGEBOX_DIRECT_MERGE_CONFIRMATION_BUTTON")))},I[14]=X,I[15]=q,I[16]=$,I[17]=ea,I[18]=B,I[19]=L,I[20]=ei,I[21]=et,I[22]=P,I[23]=G,I[24]=J,I[25]=z,I[26]=d):d=I[26];let es=d;I[27]!==Q?(f=Q.length>0&&(0,r.jsx)(nY.r,{prefix:"",helpUrl:"",errorMessageNotUsingPrefix:"Repository rule violations found",hideRuleErrorsTitle:!0,ruleErrors:Q}),I[27]=Q,I[28]=f):f=I[28],I[29]!==J||I[30]!==q||I[31]!==$||I[32]!==Y||I[33]!==es||I[34]!==O||I[35]!==P?(g=P!==m.q$.REBASE&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(eC.A,{children:[(0,r.jsx)(eC.A.Label,{children:"Commit message"}),(0,r.jsx)(nz.A,{ref:F,block:!0,defaultValue:$,onChange:e=>V(e.currentTarget.value)})]}),(0,r.jsxs)(eC.A,{className:"mt-3 width-full",children:[(0,r.jsx)(eC.A.Label,{children:"Extended description"}),(0,r.jsx)(ej.Ay,{block:!0,placeholder:"Add an optional extended description\u2026",defaultValue:q,onChange:e=>W(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),es())}})]}),J?(0,r.jsx)("div",{className:nZ.ConfirmMergeContainer,children:(0,r.jsxs)(eC.A,{children:[(0,r.jsx)(eC.A.Label,{children:"Commit email"}),(0,r.jsx)(nQ.A,{defaultValue:Y,onChange:e=>ee(e.target.value),"aria-label":"Select commit author email",children:O.map(n2)})]})}):(0,r.jsx)("div",{className:nZ.ConfirmMergeContainer,children:(0,r.jsxs)("span",{className:nZ.ConfirmMergeText,children:["This commit will be authored by ",Y,"."]})})]}),I[29]=J,I[30]=q,I[31]=$,I[32]=Y,I[33]=es,I[34]=O,I[35]=P,I[36]=g):g=I[36],I[37]!==R||I[38]!==P?(_=P===m.q$.REBASE&&(0,r.jsxs)("span",{className:nZ.ConfirmMergeText,children:["This will rebase your changes and merge them into ",R,"."]}),I[37]=R,I[38]=P,I[39]=_):_=I[39],I[40]!==B||I[41]!==L||I[42]!==P?(v=nG({mergeMethod:P,confirming:!0,isBypassMerge:L,inProgress:!0,isAutoMergeAllowed:B}),I[40]=B,I[41]=L,I[42]=P,I[43]=v):v=I[43];let eo=L?"danger":B?"default":"primary";return I[44]!==B||I[45]!==L||I[46]!==P?(b=nG({mergeMethod:P,confirming:!0,isBypassMerge:L,inProgress:!1,isAutoMergeAllowed:B}),I[44]=B,I[45]=L,I[46]=P,I[47]=b):b=I[47],I[48]!==es||I[49]!==ei||I[50]!==v||I[51]!==eo||I[52]!==b?(S=(0,r.jsx)(nX.Slot,{children:(0,r.jsx)(ed.Q,{ref:U,loading:ei,loadingAnnouncement:v,variant:eo,onClick:es,children:b})}),I[48]=es,I[49]=ei,I[50]=v,I[51]=eo,I[52]=b,I[53]=S):S=I[53],I[54]!==D?(C=(0,r.jsx)(nX.Slot,{children:(0,r.jsx)(ed.Q,{onClick:D,children:"Cancel"})}),I[54]=D,I[55]=C):C=I[55],I[56]!==S||I[57]!==C?(j=(0,r.jsxs)(nX,{className:"mt-3",children:[S,C]}),I[56]=S,I[57]=C,I[58]=j):j=I[58],I[59]!==H?(N=(0,r.jsx)(n0,{errorMessage:H}),I[59]=H,I[60]=N):N=I[60],I[61]!==f||I[62]!==g||I[63]!==_||I[64]!==j||I[65]!==N?(w=(0,r.jsxs)("div",{children:[f,g,_,j,N]}),I[61]=f,I[62]=g,I[63]=_,I[64]=j,I[65]=N,I[66]=w):w=I[66],w}function n2(e){return(0,r.jsx)(nQ.A.Option,{value:e,children:e},e)}try{n0.displayName||(n0.displayName="MergeErrorMessage")}catch{}try{n1.displayName||(n1.displayName="ConfirmMerge")}catch{}function n3(e){let t,n,a=(0,i.c)(7),{onSelect:s,primaryText:o,secondaryText:l,selected:c}=e;return a[0]!==l?(t=(0,r.jsx)(eb.l.Description,{variant:"block",children:l}),a[0]=l,a[1]=t):t=a[1],a[2]!==s||a[3]!==o||a[4]!==c||a[5]!==t?(n=(0,r.jsxs)(eb.l.Item,{selected:c,onSelect:s,children:[o,t]}),a[2]=s,a[3]=o,a[4]=c,a[5]=t,a[6]=n):n=a[6],n}try{n3.displayName||(n3.displayName="MergeDropdownOption")}catch{}let n4=(0,u.lazy)(()=>Promise.all([n.e("primer-react"),n.e("packages_mergebox_components_sections_merge-section_command-line-instructions_CommandLineInst-cc1118")]).then(n.bind(n,44712)));function n5(e){let t,n,a,o,l,c,d,p,h,f,g,y,_,x,v,b,C,j,N,w=(0,i.c)(82),{baseRefName:I,canUserPushToBase:E,defaultCommitAuthorEmail:T,commitMessageBody:k,commitMessageHeadline:R,conflictsCondition:A,handleConfirmingMergeInfo:L,headRepository:D,helpUrl:P,isAdminBypassToggleChecked:M,isAdminBypassToggleVisible:O,isAutoMergeAllowed:B,isConfirmingMergeInfo:F,isCrossRepo:U,mergeable:V,numberOfCommits:q,mergeBoxRollupStatus:W,setShouldFocusPrimaryMergeButton:G,shouldFocusPrimaryMergeButton:H,status:z,viewerMergeActions:Q,possibleCommitAuthorEmails:K}=e,J=void 0!==B&&B,{mergeMethod:Y,setMergeMethod:X}=S(),{sendAnalyticsEvent:et}=(0,Z.s)(),[en,ea]=(0,tl.A)(!1),er=(0,u.useRef)(null);if(!A)return null;if(w[0]!==Q){let e=Q.find(n6);s(e),n=(t=function({mergeMethods:e}){return e.reduce((e,t)=>((t?.allowableStatus==="ALLOWED"||t?.allowableStatus==="ALLOWED_WITH_BYPASS")&&e.push(t.name),e),[])}({mergeMethods:e.mergeMethods})).includes(m.q$.MERGE),a=t.includes(m.q$.SQUASH),o=t.includes(m.q$.REBASE),w[0]=Q,w[1]=t,w[2]=n,w[3]=a,w[4]=o}else t=w[1],n=w[2],a=w[3],o=w[4];let ei=o,es=O&&M,eo=z===$.ChecksPending?"pending":"failing",el=`Merging is blocked due to ${eo} merge requirements`;w[5]!==L||w[6]!==J||w[7]!==et?(l=()=>{L(!0),et(J?"direct_merge_section.auto_merge_click":"direct_merge_section.direct_merge_click",J?"MERGEBOX_AUTO_MERGE_SECTION_MERGE_BUTTON":"MERGEBOX_DIRECT_MERGE_SECTION_MERGE_BUTTON")},w[5]=L,w[6]=J,w[7]=et,w[8]=l):l=w[8];let ec=l;w[9]!==L||w[10]!==J||w[11]!==et||w[12]!==G?(c=()=>{L(!1),G(!0),et(J?"direct_merge_section.cancel_auto_merge":"direct_merge_section.cancel_direct_merge",J?"MERGEBOX_AUTO_MERGE_CANCEL_CONFIRMATION_BUTTON":"MERGEBOX_DIRECT_MERGE_CANCEL_CONFIRMATION_BUTTON")},w[9]=L,w[10]=J,w[11]=et,w[12]=G,w[13]=c):c=w[13];let ed=c;w[14]!==et||w[15]!==ea?(d=()=>{ea(!0),et("direct_merge_section.view_command_line_instructions","MERGEBOX_DIRECT_MERGE_SECTION_VIEW_COMMAND_LINE_INSTRUCTIONS_BUTTON")},w[14]=et,w[15]=ea,w[16]=d):d=w[16];let eu=d;w[17]!==et||w[18]!==X?(p=(e,t)=>{X(e),et(t,"MERGEBOX_DIRECT_MERGE_SECTION_MERGE_METHOD_MENU_ITEM")},w[17]=et,w[18]=X,w[19]=p):p=w[19];let em=p;if(F){let e,t=T||"",n=k||"",a=R||"";return w[20]!==I||w[21]!==ed||w[22]!==L||w[23]!==M||w[24]!==J||w[25]!==Y||w[26]!==K||w[27]!==t||w[28]!==n||w[29]!==a?(e=(0,r.jsx)(n1,{defaultCommitAuthorEmail:t,commitMessageBody:n,commitMessageHeadline:a,defaultBranchName:I,handleConfirmingMergeInfo:L,isBypassMerge:M,selectedMergeMethod:Y,onCancel:ed,isAutoMergeAllowed:J,possibleCommitAuthorEmails:K}),w[20]=I,w[21]=ed,w[22]=L,w[23]=M,w[24]=J,w[25]=Y,w[26]=K,w[27]=t,w[28]=n,w[29]=a,w[30]=e):e=w[30],e}w[31]!==I||w[32]!==A||w[33]!==D||w[34]!==en||w[35]!==U||w[36]!==ea?(h=en&&er&&(0,r.jsx)(u.Suspense,{children:(0,r.jsx)(n4,{baseRefName:I,conflictsCondition:A,headRepository:D,isCrossRepo:U,returnFocusRef:er,onClose:()=>ea(!1)})}),w[31]=I,w[32]=A,w[33]=D,w[34]=en,w[35]=U,w[36]=ea,w[37]=h):h=w[37];let ep=1===t.length,eh=!J&&!V&&!es,ef=V&&"ALL_PASSED"===W;return w[38]!==n||w[39]!==Y||w[40]!==em?(f=n&&(0,r.jsx)(n3,{primaryText:"Create a merge commit",secondaryText:"All commits from this branch will be added to the base branch via a merge commit.",selected:Y===m.q$.MERGE,onSelect:()=>em(m.q$.MERGE,"direct_merge_section.select_create_a_merge_commit")}),w[38]=n,w[39]=Y,w[40]=em,w[41]=f):f=w[41],w[42]!==a||w[43]!==Y||w[44]!==q||w[45]!==em?(g=a&&(0,r.jsx)(n3,{primaryText:"Squash and merge",secondaryText:1===q?"The 1 commit from this branch will be added to the base branch.":`The ${q} commits from this branch will be combined into one commit in the base branch.`,selected:Y===m.q$.SQUASH,onSelect:()=>em(m.q$.SQUASH,"direct_merge_section.select_squash_and_merge")}),w[42]=a,w[43]=Y,w[44]=q,w[45]=em,w[46]=g):g=w[46],w[47]!==ei||w[48]!==Y||w[49]!==q||w[50]!==em?(y=ei&&(0,r.jsx)(n3,{primaryText:"Rebase and merge",secondaryText:`The ${q} commit${1!==q?"s":""} from this branch will be rebased and added to the base branch.`,selected:Y===m.q$.REBASE,onSelect:()=>em(m.q$.REBASE,"direct_merge_section.select_rebase_and_merge")}),w[47]=ei,w[48]=Y,w[49]=q,w[50]=em,w[51]=y):y=w[51],w[52]!==f||w[53]!==g||w[54]!==y?(_=(0,r.jsxs)(eb.l,{selectionVariant:"single",showDividers:!0,children:[f,g,y]}),w[52]=f,w[53]=g,w[54]=y,w[55]=_):_=w[55],w[56]!==G?(x=()=>G(!1),w[56]=G,w[57]=x):x=w[57],w[58]!==J||w[59]!==es||w[60]!==Y?(v=nG({mergeMethod:Y,confirming:!1,isBypassMerge:es,isAutoMergeAllowed:J}),w[58]=J,w[59]=es,w[60]=Y,w[61]=v):v=w[61],w[62]!==ec||w[63]!==el||w[64]!==H||w[65]!==ef||w[66]!==_||w[67]!==x||w[68]!==v||w[69]!==ep||w[70]!==eh?(b=(0,r.jsx)(nX.Slot,{children:(0,r.jsx)(nS,{hideSecondaryButton:ep,inactive:eh,inactiveTooltipText:el,inactiveTooltipDirection:"se",isPrimary:ef,secondaryButtonActive:!0,secondaryButtonAriaLabel:"Select merge method",shouldFocusPrimaryButton:H,actionList:_,onFocusPrimaryButton:x,onPrimaryButtonClick:ec,children:v})}),w[62]=ec,w[63]=el,w[64]=H,w[65]=ef,w[66]=_,w[67]=x,w[68]=v,w[69]=ep,w[70]=eh,w[71]=b):b=w[71],w[72]!==E||w[73]!==eu||w[74]!==P?(C=(0,r.jsx)(nX.Slot,{children:(0,r.jsx)("span",{className:"f6 fgColor-muted",children:E?(0,r.jsxs)(r.Fragment,{children:["You can also merge this with the command line."," ",(0,r.jsx)(ee.A,{as:"button",ref:er,inline:!0,onClick:eu,children:"View command line instructions."})]}):(0,r.jsxs)(r.Fragment,{children:["Only those with"," ",(0,r.jsx)(ee.A,{href:`${P}/en/get-started/learning-about-github/access-permissions-on-github`,inline:!0,children:"write access"})," ","to this repository can merge pull requests."]})})}),w[72]=E,w[73]=eu,w[74]=P,w[75]=C):C=w[75],w[76]!==b||w[77]!==C?(j=(0,r.jsxs)(nX,{children:[b,C]}),w[76]=b,w[77]=C,w[78]=j):j=w[78],w[79]!==j||w[80]!==h?(N=(0,r.jsxs)(r.Fragment,{children:[h,j]}),w[79]=j,w[80]=h,w[81]=N):N=w[81],N}function n6(e){return e.name===m.tw.DIRECT_MERGE}try{n4.displayName||(n4.displayName="CommandLineInstructionsDialog")}catch{}try{n5.displayName||(n5.displayName="DirectMergeActionsSection")}catch{}var n7=n(87826);function n8(e){let t,n,a,s=(0,i.c)(6),{checked:o,onToggleChecked:l}=e;return s[0]!==o||s[1]!==l?(t=(0,r.jsx)(n7.A,{onChange:l,checked:o}),s[0]=o,s[1]=l,s[2]=t):t=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(eC.A.Label,{children:(0,r.jsx)("span",{className:"fgColor-danger",children:" Merge without waiting for requirements to be met (bypass rules) "})}),s[3]=n):n=s[3],s[4]!==t?(a=(0,r.jsxs)(eC.A,{children:[t,n]}),s[4]=t,s[5]=a):a=s[5],a}try{n8.displayName||(n8.displayName="BypassMergeRequirementsToggle")}catch{}function n9(e,t,n){return"MERGEABLE_IF_STATUSES_PASS"===e&&"BEHIND"!==n&&t!==$.ChecksPending&&t!==$.ChecksFailing&&t!==$.UnableToMerge||"MERGEABLE"===e}function ae(e){let t,n,a,s,o,c,d,p,h,f,g=(0,i.c)(44),{autoMergeRequest:y,baseRefName:_,handleConfirmingMergeInfo:x,isDraft:v,isInMergeQueue:b,mergeQueue:S,mergeRequirementsState:C,mergeStateStatus:j,mergeBoxRollupStatus:N,status:w,viewerCanAddAndRemoveFromMergeQueue:I,viewerCanAddToMergeQueueSolo:E,shouldFocusPrimaryMergeButton:T,setShouldFocusPrimaryMergeButton:k}=e,R=S?.url,[A,L]=(0,u.useState)(m.lD.GROUP),[D,P]=(0,u.useState)(!1),[M,O]=(0,tl.A)(),{sendAnalyticsEvent:B}=(0,Z.s)();g[0]!==O?(t={onError:e=>{O(e.message)}},g[0]=O,g[1]=t):t=g[1];let{mutate:F,isPending:U}=nJ(t);g[2]!==x||g[3]!==B?(n=()=>{P(!0),x(!0),B("auto_merge_section.merge_click","MERGEBOX_AUTO_MERGE_BUTTON")},g[2]=x,g[3]=B,g[4]=n):n=g[4];let $=n;g[5]!==F||g[6]!==x||g[7]!==U||g[8]!==A||g[9]!==B||g[10]!==O?(a=()=>{U||(O(void 0),F({mergeMethod:A===m.lD.SOLO?"SOLO":"GROUP"}),x(!1),B("auto_merge_section.confirm_direct_merge","MERGEBOX_AUTO_MERGE_CONFIRMATION_BUTTON"))},g[5]=F,g[6]=x,g[7]=U,g[8]=A,g[9]=B,g[10]=O,g[11]=a):a=g[11];let V=a;g[12]!==B?(s=(e,t)=>{L(e),B(t,"MERGEBOX_MERGE_QUEUE_SECTION_MERGE_METHOD_MENU_ITEM")},g[12]=B,g[13]=s):s=g[13];let q=s;g[14]!==C||g[15]!==j||g[16]!==w?(o=n9(C,w,j),g[14]=C,g[15]=j,g[16]=w,g[17]=o):o=g[17];let W=o,G=!I||"UNKNOWN"===j||v||b||!!y,H=(0,u.useRef)(null);return g[18]!==D?(c=()=>{D&&H?.current&&H?.current.focus()},d=[D],g[18]=D,g[19]=c,g[20]=d):(c=g[19],d=g[20]),(0,u.useEffect)(c,d),g[21]!==M?(p=M&&(0,r.jsxs)(eS.A,{className:"mb-3",variant:"danger",children:[(0,r.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),M]}),g[21]=M,g[22]=p):p=g[22],g[23]!==V||g[24]!==_||g[25]!==$||g[26]!==x||g[27]!==W||g[28]!==U||g[29]!==N||g[30]!==R||g[31]!==C||g[32]!==G||g[33]!==A||g[34]!==B||g[35]!==k||g[36]!==T||g[37]!==D||g[38]!==q||g[39]!==E?(h=D?(0,r.jsxs)(nX,{children:[(0,r.jsx)(nX.Slot,{children:(0,r.jsx)(ed.Q,{ref:H,variant:"primary",loading:U,loadingAnnouncement:nH({mergeMethod:A,confirming:!0,inProgress:!0}),onClick:V,children:nH({mergeMethod:A,confirming:!0,inProgress:!1})})}),(0,r.jsx)(nX.Slot,{children:(0,r.jsx)(ed.Q,{onClick:()=>{x(!1),P(!1),B("auto_merge_section.cancel_auto_merge","MERGEBOX_AUTO_MERGE_CANCEL_CONFIRMATION_BUTTON")},children:"Cancel"})})]}):(0,r.jsxs)(nX,{children:[(0,r.jsx)(nX.Slot,{children:(0,r.jsx)(nS,{inactive:G,inactiveTooltipText:"UNKNOWN"===C?"Checking for the ability to merge automatically":"Merging is blocked due to failing merge requirements",inactiveTooltipDirection:"se",hideSecondaryButton:!E,secondaryButtonAriaLabel:"Select merge queue method",isPrimary:W&&"ALL_PASSED"===N,shouldFocusPrimaryButton:T,onFocusPrimaryButton:()=>k(!1),actionList:(0,r.jsx)(eb.l,{selectionVariant:"single",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n3,{primaryText:"Queue and merge in a group",secondaryText:`This pull request will be automatically grouped with other pull requests and merged into ${_}.`,selected:A===m.lD.GROUP,onSelect:()=>q(m.lD.GROUP,"merqe_queue_section.select_queue_and_merge_in_a_group")}),(0,r.jsx)(n3,{primaryText:"Queue and force solo merge",secondaryText:`This pull request will be merged into ${_} by itself.`,selected:A===m.lD.SOLO,onSelect:()=>q(m.lD.SOLO,"merqe_queue_section.select_queue_and_force_solo_merge")})]})}),onPrimaryButtonClick:$,children:nH({mergeMethod:A,confirming:!1,inProgress:U})})}),(0,r.jsx)(nX.Slot,{children:(0,r.jsxs)("span",{className:"f6 fgColor-muted pl-2",children:["This repository uses the"," ",(0,r.jsx)(ee.A,{href:R,inline:!0,children:"merge queue"})," ","for all merges into the ",_," branch."]})})]}),g[23]=V,g[24]=_,g[25]=$,g[26]=x,g[27]=W,g[28]=U,g[29]=N,g[30]=R,g[31]=C,g[32]=G,g[33]=A,g[34]=B,g[35]=k,g[36]=T,g[37]=D,g[38]=q,g[39]=E,g[40]=h):h=g[40],g[41]!==p||g[42]!==h?(f=(0,r.jsxs)(r.Fragment,{children:[p,h]}),g[41]=p,g[42]=h,g[43]=f):f=g[43],f}function at(e){let t,n,a,s,o,c,d,u,m,f=(0,i.c)(25),{autoMergeRequest:g,viewerCanDisableAutoMerge:_,isMergeQueueEnabled:v,handleConfirmingMergeInfo:b}=e,{sendAnalyticsEvent:S}=(0,Z.s)(),[C,j]=(0,tl.A)();f[0]!==j?(t={onError:e=>{j(e.message)}},f[0]=j,f[1]=t):t=f[1];let{mutate:N,isPending:w}=function(e){let t,n,a,r,s=(0,i.c)(11),{onError:o}=e,l=(0,h.e)(p.u.disableAutoMerge),c=x(),d=(0,y.jE)();return s[0]!==l?(t=async()=>{let e=await (0,eI.q$)(l,{method:"POST",headers:{Accept:"application/json"}}),t=await (0,eI.hp)(e);return(0,eI.R)(e,t),t},s[0]=l,s[1]=t):t=s[1],s[2]!==c||s[3]!==d?(n=()=>d.refetchQueries({queryKey:c},{cancelRefetch:!1}),s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==o?(a=e=>{o(e)},s[5]=o,s[6]=a):a=s[6],s[7]!==t||s[8]!==n||s[9]!==a?(r={mutationFn:t,onSuccess:n,onError:a},s[7]=t,s[8]=n,s[9]=a,s[10]=r):r=s[10],(0,ew.n)(r)}(t);f[2]!==N||f[3]!==b||f[4]!==w||f[5]!==S||f[6]!==j?(n=()=>{w||(j(void 0),b(!1),N(),S("auto_merge_section.disable_auto_merge","MERGEBOX_AUTO_MERGE_DISABLE_BUTTON"))},f[2]=N,f[3]=b,f[4]=w,f[5]=S,f[6]=j,f[7]=n):n=f[7];let I=n,E=g?.mergeMethod.toLowerCase()??"merge",T=v?"be added to the merge queue":`${E} automatically`;f[8]!==C?(a=C&&(0,r.jsxs)(eS.A,{className:"mx-3 my-2",variant:"danger",children:[(0,r.jsx)(eT.A,{className:"mr-2",icon:l.StopIcon}),C]}),f[8]=C,f[9]=a):a=f[9];let k=!_;return f[10]!==I||f[11]!==w||f[12]!==k?(s=(0,r.jsx)(nX.Slot,{children:(0,r.jsx)(ed.Q,{disabled:k,onClick:I,loading:w,loadingAnnouncement:"Disabling auto-merge",children:"Disable auto-merge"})}),f[10]=I,f[11]=w,f[12]=k,f[13]=s):s=f[13],f[14]!==T?(o=(0,r.jsx)("span",{className:"text-semibold",children:T}),f[14]=T,f[15]=o):o=f[15],f[16]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(ee.A,{inline:!0,href:"https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/incorporating-changes-from-a-pull-request/automatically-merging-a-pull-request",children:"Learn more about automatically merging a pull request."}),f[16]=c):c=f[16],f[17]!==o?(d=(0,r.jsx)(nX.Slot,{children:(0,r.jsxs)("div",{className:"flex-1",children:["This pull request will ",o," when all requirements are met."," ",c]})}),f[17]=o,f[18]=d):d=f[18],f[19]!==s||f[20]!==d?(u=(0,r.jsxs)(nX,{children:[s,d]}),f[19]=s,f[20]=d,f[21]=u):u=f[21],f[22]!==a||f[23]!==u?(m=(0,r.jsxs)(r.Fragment,{children:[a,u]}),f[22]=a,f[23]=u,f[24]=m):m=f[24],m}function an(e){let t,n,a,s,o,l,c,m,p,h,f,g,y,_,x,v,b,S,C,j=(0,i.c)(68);j[0]!==e?({advisoryWorkspace:t,autoMergeRequest:n,handleConfirmingMergeInfo:a,id:s,isConfirmingMergeInfo:o,isInMergeQueue:l,mergeQueue:c,mergeStateStatus:m,viewerCanAddAndRemoveFromMergeQueue:h,viewerCanAddToMergeQueueSolo:f,viewerCanDisableAutoMerge:y,viewerCanEnableAutoMerge:_,viewerCanAdminBypassMergeRequirements:g,...p}=e,j[0]=e,j[1]=t,j[2]=n,j[3]=a,j[4]=s,j[5]=o,j[6]=l,j[7]=c,j[8]=m,j[9]=p,j[10]=h,j[11]=f,j[12]=g,j[13]=y,j[14]=_):(t=j[1],n=j[2],a=j[3],s=j[4],o=j[5],l=j[6],c=j[7],m=j[8],p=j[9],h=j[10],f=j[11],g=j[12],y=j[13],_=j[14]);let[N,w]=(0,u.useState)(!1),I=p.viewerMergeActions,E=I.find(ar),T=I.find(aa);j[15]!==m||j[16]!==p.mergeRequirementsState||j[17]!==p.status?(x=n9(p.mergeRequirementsState,p.status,m),j[15]=m,j[16]=p.mergeRequirementsState,j[17]=p.status,j[18]=x):x=j[18];let k=x,R=E?.allowableStatus==="ALLOWED",A=T?.allowableStatus==="ALLOWED",L=!!n,D=g&&!L&&(!!R||!k),P=_&&!k;if(t)return null;if(L){let e;j[19]!==n||j[20]!==a||j[21]!==R||j[22]!==y?(e=(0,r.jsx)(at,{autoMergeRequest:n,isMergeQueueEnabled:R,viewerCanDisableAutoMerge:y,handleConfirmingMergeInfo:a}),j[19]=n,j[20]=a,j[21]=R,j[22]=y,j[23]=e):e=j[23],v=e}else if(R||A)if(R&&D&&N){let e;j[28]!==a||j[29]!==o||j[30]!==k||j[31]!==p||j[32]!==D?(e=(0,r.jsx)(n5,{mergeable:k,handleConfirmingMergeInfo:a,isAdminBypassToggleVisible:D,isAdminBypassToggleChecked:!0,isConfirmingMergeInfo:o,...p}),j[28]=a,j[29]=o,j[30]=k,j[31]=p,j[32]=D,j[33]=e):e=j[33],v=e}else if(R){let e;j[34]!==n||j[35]!==a||j[36]!==s||j[37]!==l||j[38]!==c||j[39]!==m||j[40]!==p||j[41]!==h||j[42]!==f?(e=(0,r.jsx)(ae,{autoMergeRequest:n,pullRequestId:s,handleConfirmingMergeInfo:a,isInMergeQueue:l,mergeQueue:c,mergeStateStatus:m,viewerCanAddAndRemoveFromMergeQueue:h,viewerCanAddToMergeQueueSolo:f,...p}),j[34]=n,j[35]=a,j[36]=s,j[37]=l,j[38]=c,j[39]=m,j[40]=p,j[41]=h,j[42]=f,j[43]=e):e=j[43],v=e}else if(_&&!N){let e;j[44]!==a||j[45]!==o||j[46]!==k||j[47]!==p||j[48]!==D||j[49]!==P?(e=(0,r.jsx)(n5,{handleConfirmingMergeInfo:a,mergeable:k,isAdminBypassToggleChecked:!1,isAdminBypassToggleVisible:D,isAutoMergeAllowed:P,isConfirmingMergeInfo:o,...p}),j[44]=a,j[45]=o,j[46]=k,j[47]=p,j[48]=D,j[49]=P,j[50]=e):e=j[50],v=e}else{let e;j[51]!==a||j[52]!==N||j[53]!==o||j[54]!==k||j[55]!==p||j[56]!==D?(e=(0,r.jsx)(n5,{handleConfirmingMergeInfo:a,isAdminBypassToggleChecked:N,isAdminBypassToggleVisible:D,isConfirmingMergeInfo:o,mergeable:k,...p}),j[51]=a,j[52]=N,j[53]=o,j[54]=k,j[55]=p,j[56]=D,j[57]=e):e=j[57],v=e}else{let e;j[24]!==a||j[25]!==o||j[26]!==p?(e=(0,r.jsx)(n5,{mergeable:!1,handleConfirmingMergeInfo:a,isAdminBypassToggleChecked:!1,isAdminBypassToggleVisible:!1,isConfirmingMergeInfo:o,...p}),j[24]=a,j[25]=o,j[26]=p,j[27]=e):e=j[27],v=e}let M=o?"rounded-2":"rounded-bottom-2";return j[58]!==M?(b=(0,d.$)("p-3 bgColor-muted borderColor-muted",M),j[58]=M,j[59]=b):b=j[59],j[60]!==N||j[61]!==o||j[62]!==D?(S=D&&!o&&(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)(n8,{checked:N,onToggleChecked:()=>w(!N)})}),j[60]=N,j[61]=o,j[62]=D,j[63]=S):S=j[63],j[64]!==v||j[65]!==b||j[66]!==S?(C=(0,r.jsxs)("div",{className:b,children:[S,v]}),j[64]=v,j[65]=b,j[66]=S,j[67]=C):C=j[67],C}function aa(e){return e.name===m.tw.DIRECT_MERGE}function ar(e){let{name:t}=e;return t===m.tw.MERGE_QUEUE}try{ae.displayName||(ae.displayName="AddToMergeQueueSection")}catch{}try{at.displayName||(at.displayName="DisableAutoMerge")}catch{}try{an.displayName||(an.displayName="MergeSection")}catch{}function ai(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:ty.mergeboxLoading,children:(0,r.jsx)(c.A,{})}),t[0]=e):e=t[0],e}let as=(0,u.memo)(function(e){let t,n,a,s,l,c=(0,i.c)(11);c[0]!==e?({hideIcon:n,...t}=e,c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]);let d=void 0!==n&&n;return c[3]!==d?(a=(0,r.jsx)(tv,{hideIcon:d}),c[3]=d,c[4]=a):a=c[4],c[5]!==d||c[6]!==t?(s=(0,r.jsx)(u.Suspense,{children:(0,r.jsx)(ao,{hideIcon:d,...t})}),c[5]=d,c[6]=t,c[7]=s):s=c[7],c[8]!==a||c[9]!==s?(l=(0,r.jsx)(o.t,{critical:!0,fallback:a,children:s}),c[8]=a,c[9]=s,c[10]=l):l=c[10],l});function ao(e){let t,n,a,s,o,l,c,d,m,f,v=(0,i.c)(20);v[0]!==e?({viewerLogin:a,channels:t,...n}=e,v[0]=e,v[1]=t,v[2]=n,v[3]=a):(t=v[1],n=v[2],a=v[3]);let{mergeMethod:b}=S();v[4]!==b?(s={mergeMethod:b,bypassRequirements:!1},v[4]=b,v[5]=s):s=v[5];let{data:C,refetch:j,isLoading:N,error:w}=function(e){let t,n,a=(0,i.c)(7),{mergeMethod:r,bypassRequirements:s}=e,o=new URLSearchParams;o.append("merge_method",r),o.append("bypass_requirements",(void 0!==s&&s).toString());let l=`${(0,h.e)(p.u.mergeBox)}?${o.toString()}`,c=x(),d=(0,y.jE)();return a[0]!==l||a[1]!==d||a[2]!==c?(t=async()=>(0,g.H)(l,c,d),a[0]=l,a[1]=d,a[2]=c,a[3]=t):t=a[3],a[4]!==c||a[5]!==t?(n={queryKey:c,queryFn:t,staleTime:1/0},a[4]=c,a[5]=t,a[6]=n):n=a[6],(0,_.I)(n)}(s);e:{if(C?.pullRequest.mergeBoxAliveChannels){o=C?.pullRequest.mergeBoxAliveChannels;break e}o=t}let I=o;v[6]!==j?(l=()=>{(0,u.startTransition)(()=>{j({cancelRefetch:!1})})},v[6]=j,v[7]=l):l=v[7];let E=l;if(v[8]!==I||v[9]!==E?(c={refetchQuery:E,channels:I},v[8]=I,v[9]=E,v[10]=c):c=v[10],!function({channels:e,refetchQuery:t}){let n=(0,u.useMemo)(()=>Object.values(e).filter(e=>null!==e),[e]),a=(0,te.A)(),[r,i]=(0,u.useState)(!1),s=tr(),o=(0,u.useMemo)(()=>(0,e8.n)(()=>{a()&&t()},2e3),[t,a]),l=(0,u.useMemo)(()=>e=>{s?window.setTimeout(()=>o(),e.wait||0):i(!0)},[s,o]);for(let e of((0,u.useEffect)(()=>{a()&&s&&r&&(i(!1),t())},[s,r,i,a,t]),n))(0,e9.x)(e,l)}(c),N){let e;return v[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(ai,{}),v[11]=e):e=v[11],e}if(w)throw w;if(!C)return null;v[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,r.jsx)(ai,{}),m=(0,r.jsx)("h2",{className:"sr-only",children:"Merge info"}),v[12]=d,v[13]=m):(d=v[12],m=v[13]);let T=C.pullRequest.numberOfCommits||0;return v[14]!==C.mergeRequirements||v[15]!==C.pullRequest||v[16]!==n||v[17]!==T||v[18]!==a?(f=(0,r.jsxs)(u.Suspense,{fallback:d,children:[m,(0,r.jsx)(al,{mergeRequirements:C.mergeRequirements,numberOfCommits:T,pullRequest:C.pullRequest,viewerLogin:a,...n})]}),v[14]=C.mergeRequirements,v[15]=C.pullRequest,v[16]=n,v[17]=T,v[18]=a,v[19]=f):f=v[19],f}function al(e){let t,n,a,c,m,f,x,v,b,S,N,w,I,E,T,k,R,A,L,D,P,M=(0,i.c)(90),{helpUrl:O,hideIcon:B,mergeRequirements:F,numberOfCommits:U,pullRequest:K,viewerLogin:J}=e;s(K.viewerMergeActions.find(ad));let[Y,X]=(0,u.useState)(!1),Z=!Y,[ee,et]=(0,u.useState)(!1),{isInMergeQueue:en,state:ea,viewerCanDeleteHeadRef:er,viewerCanRestoreHeadRef:ei}=K,es=void 0!==B&&B||("CLOSED"===ea||"MERGED"===ea)&&!er&&!ei;M[0]!==K.headRefOid?(t={pullRequestHeadSha:K.headRefOid},M[0]=K.headRefOid,M[1]=t):t=M[1];let eo=function(e){let t,n,a,r=(0,i.c)(9),{pullRequestHeadSha:s}=e,o=(0,h.e)(p.u.statusChecks);r[0]!==s?(t={pullRequestHeadSha:s},r[0]=s,r[1]=t):t=r[1];let l=ts(t),c=(0,y.jE)();return r[2]!==o||r[3]!==c||r[4]!==l?(n=async()=>(0,g.H)(o,l,c),r[2]=o,r[3]=c,r[4]=l,r[5]=n):n=r[5],r[6]!==l||r[7]!==n?(a={queryKey:l,throwOnError:!1,queryFn:n,staleTime:1e4},r[6]=l,r[7]=n,r[8]=a):a=r[8],(0,_.I)(a)}(t).data;if(M[2]!==F||M[3]!==K||M[4]!==Z||M[5]!==eo){N=function({pullRequest:e,mergeRequirements:t,statusChecksData:n}){if("MERGED"===e.state)return $.Merged;if("CLOSED"===e.state)return $.Closed;if(function(e){let t=V(e);return t.includes("PULL_REQUEST_REPO_STATE")||t.includes("PULL_REQUEST_USER_STATE")}(t))return $.NonactionableFailure;if(e.isInMergeQueue)return $.InMergeQueue;if(e.isDraft&&!W(n))return $.DraftReadyForReview;if(e.isDraft)return $.DraftNotReadyForReview;if(W(n))return $.ChecksFailing;if(q(n))return $.ChecksPending;if(H(t,n))return $.NonRequiredChecksUnsuccessful;if(t?.state==="MERGEABLE"||t?.state==="MERGEABLE_IF_STATUSES_PASS"&&G(n))return $.Mergeable;if((function(e){let t=e?.conditions.find(e=>"PULL_REQUEST_RULES"===e.type);if(!t)return[];let n=t?.ruleRollups?.filter(e=>"FAILED"===e.result);return n?n.map(e=>e.ruleType):[]})(t).includes("PULL_REQUEST")&&!z(t).includes("CHANGES_REQUESTED"))return $.AwaitingReview;if(z(t).includes("CHANGES_REQUESTED"))return $.ChangesRequested;else if(t?.state==="UNKNOWN"&&!Q(t))return $.Unknown;else if(Q(t))return $.MergeConflicts;else return $.UnableToMerge}({pullRequest:K,mergeRequirements:F,statusChecksData:eo});let e=new MergeBoxStatusCalculator(K,F,eo);x=e.overallStatus,n=e.sections.BlockedSection,a=e.sections.ChecksSection,c=e.sections.ClosedOrMergedStateMergeBox,m=e.sections.ConflictsSection,f=e.sections.DraftStateSection,v=e.sections.MergeQueueSection,S=e.sections.ReviewerSection,b=function(e){switch(e){case $.Mergeable:return{icon:l.CheckCircleFillIcon,iconColor:"success.emphasis",title:"Merge pull request"};case $.DraftReadyForReview:case $.DraftNotReadyForReview:return{icon:l.GitPullRequestDraftIcon,iconColor:"neutral.emphasis",title:"Draft"};case $.InMergeQueue:return{icon:l.GitMergeQueueIcon,iconColor:"attention.emphasis",title:"Queued"};case $.ChecksPending:return{icon:l.DotFillIcon,iconColor:"neutral.emphasis",title:"Checks pending"};case $.ChecksFailing:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Checks failing"};case $.NonRequiredChecksUnsuccessful:return{icon:l.DotFillIcon,iconColor:"neutral.emphasis",title:"Non-required checks unsuccessful"};case $.AwaitingReview:return{icon:l.DotFillIcon,iconColor:"danger.emphasis",title:"Awaiting reviews"};case $.ChangesRequested:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Changes requested"};case $.MergeConflicts:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Merge conflicts"};case $.Unknown:return{icon:l.DotFillIcon,iconColor:"neutral.emphasis",title:"Unknown"};case $.Merged:return{icon:l.GitMergeIcon,iconColor:"done.emphasis",title:"Merged"};case $.Closed:return{icon:l.GitPullRequestClosedIcon,iconColor:"neutral.emphasis",title:"Closed"};default:return{icon:l.XCircleFillIcon,iconColor:"danger.emphasis",title:"Unable to merge"}}}(N),w=function(e,t){let n;switch(e){case"ALL_PASSED":n={iconColor:"success.emphasis",borderColor:"borderColor-success-emphasis"};break;case"MERGED":n={iconColor:"done.emphasis",borderColor:"borderColor-done-emphasis"};break;case"QUEUED":n={iconColor:"attention.emphasis",borderColor:"borderColor-attention-emphasis"};break;default:n={iconColor:"neutral.emphasis",borderColor:"borderColor-default"}}return t&&(n.borderColor="borderColor-default"),n}(x,!Z),M[2]=F,M[3]=K,M[4]=Z,M[5]=eo,M[6]=n,M[7]=a,M[8]=c,M[9]=m,M[10]=f,M[11]=x,M[12]=v,M[13]=b,M[14]=S,M[15]=N,M[16]=w}else n=M[6],a=M[7],c=M[8],m=M[9],f=M[10],x=M[11],v=M[12],b=M[13],S=M[14],N=M[15],w=M[16];let el=w,ec=F?.conditions.find(ac),ed=ec?.result==="PASSED";M[17]!==F?(I=function(e){let t=j(e);if(t.length<1)return!1;let n=t[0]?.ruleRollups.find(e=>"AUTHORIZATION"===e.ruleType);return n?.result==="FAILED"}(F),M[17]=F,M[18]=I):I=M[18];let eu=I;M[19]!==F?(E=C(F),M[19]=F,M[20]=E):E=M[20];let em=E,ep=en?l.GitMergeQueueIcon:l.GitMergeIcon;M[21]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{et(!0)},M[21]=T):T=M[21];let eh=T,ef=!ed||eu,eg=K.mergeBoxUserPreferences;M[22]===Symbol.for("react.memo_cache_sentinel")?(k=(0,d.$)(ty.mergePartialContainer,"position-relative partial-pull-merging-analytics-js"),M[22]=k):k=M[22],M[23]!==ep||M[24]!==el.iconColor||M[25]!==b||M[26]!==es?(R=!es&&(0,r.jsx)("div",{className:"d-none d-lg-block","data-testid":"mergeability-icon-wrapper",children:(0,r.jsx)(tg,{icon:ep,ariaLabel:b.title,iconBackgroundColor:el.iconColor})}),M[23]=ep,M[24]=el.iconColor,M[25]=b,M[26]=es,M[27]=R):R=M[27];let ey=ef?ty.mergeBoxAdjustBorders:"",e_=`border rounded-2 ${el.borderColor}`;return M[28]!==e_||M[29]!==ey?(A=(0,d.$)(ey,e_),M[28]=e_,M[29]=ey,M[30]=A):A=M[30],M[31]!==n||M[32]!==ed||M[33]!==a||M[34]!==c.shouldRender||M[35]!==em||M[36]!==m||M[37]!==f||M[38]!==O||M[39]!==Y||M[40]!==x||M[41]!==eg||M[42]!==v||M[43]!==F||M[44]!==U||M[45]!==K.advisoryWorkspace||M[46]!==K.autoMergeRequest||M[47]!==K.baseRefName||M[48]!==K.baseRepository||M[49]!==K.deprovisionableCodespaces||M[50]!==K.headRefName||M[51]!==K.headRefOid||M[52]!==K.headRepository||M[53]!==K.id||M[54]!==K.isCrossRepo||M[55]!==K.isDraft||M[56]!==K.isInMergeQueue||M[57]!==K.latestOpinionatedReviews||M[58]!==K.mergeQueue||M[59]!==K.mergeQueueEntry||M[60]!==K.mergeStateStatus||M[61]!==K.pendingReviewRequests||M[62]!==K.resourcePath||M[63]!==K.state||M[64]!==K.viewerCanAddAndRemoveFromMergeQueue||M[65]!==K.viewerCanAddToMergeQueueSolo||M[66]!==K.viewerCanAdminBypassMergeRequirements||M[67]!==K.viewerCanDeleteHeadRef||M[68]!==K.viewerCanDisableAutoMerge||M[69]!==K.viewerCanDismissReviews||M[70]!==K.viewerCanEnableAutoMerge||M[71]!==K.viewerCanReRequestReviews||M[72]!==K.viewerCanRestoreHeadRef||M[73]!==K.viewerCanUpdate||M[74]!==K.viewerCanUpdateBranch||M[75]!==K.viewerMergeActions||M[76]!==K.viewerUpdateMethods||M[77]!==S||M[78]!==ee||M[79]!==ef||M[80]!==Z||M[81]!==N||M[82]!==J?(L=c.shouldRender||!F?(0,r.jsx)(tp,{isCrossRepo:K.isCrossRepo,state:K.state,headRefName:K.headRefName,headRepository:K.headRepository,baseRepository:K.baseRepository,viewerCanDeleteHeadRef:K.viewerCanDeleteHeadRef,viewerCanRestoreHeadRef:K.viewerCanRestoreHeadRef,deprovisionableCodespaces:K.deprovisionableCodespaces}):v.shouldRender?(0,r.jsx)(n$,{viewerCanAddAndRemoveFromMergeQueue:K.viewerCanAddAndRemoveFromMergeQueue,mergeQueueEntry:K.mergeQueueEntry,mergeQueue:K.mergeQueue,focusPrimaryMergeButton:eh}):(0,r.jsxs)(r.Fragment,{children:[Z&&(0,r.jsxs)(r.Fragment,{children:[S.shouldRender&&(0,r.jsx)(eB,{consolidatedFailureReasons:S.consolidatedFailureReasons,helpUrl:O,latestOpinionatedReviews:K.latestOpinionatedReviews,numReviewsRequired:S.numReviewsRequired,pendingRequestedReviews:K.pendingReviewRequests,pullRequestId:K.id,reviewsState:S.sectionStatus,viewerCanDismissReviews:K.viewerCanDismissReviews,viewerCanReRequestReviews:K.viewerCanReRequestReviews}),(0,r.jsx)(o.t,{fallback:(0,r.jsx)(nh,{}),children:(0,r.jsx)(np,{pullRequestId:K.id,pullRequestHeadSha:K.headRefOid,focusPrimaryMergeButton:eh,sectionStatus:a.sectionStatus,shouldRender:a.shouldRender,mergeBoxUserPreferences:eg})}),m.shouldRender&&m.conflictsCondition&&(0,r.jsx)(nT,{advisoryWorkspace:K.advisoryWorkspace,baseRefName:K.baseRefName,headRefOid:K.headRefOid,conflictsCondition:m.conflictsCondition,conflictsState:m.sectionStatus,mergeStateStatus:K.mergeStateStatus,resourcePath:K.resourcePath,canUserPushToBase:ed,viewerCanUpdateBranch:K.viewerCanUpdateBranch,viewerLogin:J,viewerUpdateMethods:K.viewerUpdateMethods}),n.shouldRender&&(0,r.jsx)(tN,{failingConditionsAndRules:n.failingConditionsAndRules}),f.shouldRender&&(0,r.jsx)(nB,{viewerCanUpdate:K.viewerCanUpdate,helpUrl:O})]}),ef?null:(0,r.jsx)(an,{advisoryWorkspace:K.advisoryWorkspace,autoMergeRequest:K.autoMergeRequest,baseRefName:K.baseRefName,numberOfCommits:U,conflictsCondition:em,headRepository:K.headRepository,helpUrl:O,id:K.id,isConfirmingMergeInfo:Y,isCrossRepo:K.isCrossRepo,isDraft:K.isDraft,isInMergeQueue:K.isInMergeQueue,mergeQueue:K.mergeQueue,canUserPushToBase:ed,defaultCommitAuthorEmail:F.defaultCommitAuthorEmail,commitMessageBody:F.commitMessageBody,commitMessageHeadline:F.commitMessageHeadline,mergeRequirementsState:F.state,mergeStateStatus:K.mergeStateStatus,mergeBoxRollupStatus:x,viewerCanAddAndRemoveFromMergeQueue:K.viewerCanAddAndRemoveFromMergeQueue,viewerCanAdminBypassMergeRequirements:K.viewerCanAdminBypassMergeRequirements,viewerCanAddToMergeQueueSolo:K.viewerCanAddToMergeQueueSolo,viewerCanDisableAutoMerge:K.viewerCanDisableAutoMerge,viewerMergeActions:K.viewerMergeActions,viewerCanEnableAutoMerge:K.viewerCanEnableAutoMerge,shouldFocusPrimaryMergeButton:ee,setShouldFocusPrimaryMergeButton:et,status:N,possibleCommitAuthorEmails:F.possibleCommitAuthorEmails,handleConfirmingMergeInfo:X})]}),M[31]=n,M[32]=ed,M[33]=a,M[34]=c.shouldRender,M[35]=em,M[36]=m,M[37]=f,M[38]=O,M[39]=Y,M[40]=x,M[41]=eg,M[42]=v,M[43]=F,M[44]=U,M[45]=K.advisoryWorkspace,M[46]=K.autoMergeRequest,M[47]=K.baseRefName,M[48]=K.baseRepository,M[49]=K.deprovisionableCodespaces,M[50]=K.headRefName,M[51]=K.headRefOid,M[52]=K.headRepository,M[53]=K.id,M[54]=K.isCrossRepo,M[55]=K.isDraft,M[56]=K.isInMergeQueue,M[57]=K.latestOpinionatedReviews,M[58]=K.mergeQueue,M[59]=K.mergeQueueEntry,M[60]=K.mergeStateStatus,M[61]=K.pendingReviewRequests,M[62]=K.resourcePath,M[63]=K.state,M[64]=K.viewerCanAddAndRemoveFromMergeQueue,M[65]=K.viewerCanAddToMergeQueueSolo,M[66]=K.viewerCanAdminBypassMergeRequirements,M[67]=K.viewerCanDeleteHeadRef,M[68]=K.viewerCanDisableAutoMerge,M[69]=K.viewerCanDismissReviews,M[70]=K.viewerCanEnableAutoMerge,M[71]=K.viewerCanReRequestReviews,M[72]=K.viewerCanRestoreHeadRef,M[73]=K.viewerCanUpdate,M[74]=K.viewerCanUpdateBranch,M[75]=K.viewerMergeActions,M[76]=K.viewerUpdateMethods,M[77]=S,M[78]=ee,M[79]=ef,M[80]=Z,M[81]=N,M[82]=J,M[83]=L):L=M[83],M[84]!==A||M[85]!==L?(D=(0,r.jsx)("div",{className:A,children:L}),M[84]=A,M[85]=L,M[86]=D):D=M[86],M[87]!==D||M[88]!==R?(P=(0,r.jsxs)("div",{className:k,children:[R,D]}),M[87]=D,M[88]=R,M[89]=P):P=M[89],P}function ac(e){return"PULL_REQUEST_USER_STATE"===e.type}function ad(e){return e.name===m.tw.DIRECT_MERGE}try{ai.displayName||(ai.displayName="MergeBoxLoading")}catch{}try{as.displayName||(as.displayName="MergeBoxWithSuspense")}catch{}try{ao.displayName||(ao.displayName="MergeBoxWrapper")}catch{}try{al.displayName||(al.displayName="MergeBox")}catch{}function au(e){return Object.values(m.q$).includes(e)}},17645:(e,t,n)=>{n.d(t,{Qv:()=>s,TW:()=>l,iG:()=>o,jw:()=>d,lD:()=>i,nw:()=>c,q$:()=>r,tw:()=>a});let a={DIRECT_MERGE:"DIRECT_MERGE",AUTO_MERGE:"AUTO_MERGE",MERGE_QUEUE:"MERGE_QUEUE"},r={MERGE:"MERGE",SQUASH:"SQUASH",REBASE:"REBASE"},i={GROUP:"GROUP",SOLO:"SOLO"},s={Approvals:"approvals",RequestedChanges:"requested changes",PendingReviewRequest:"pending reviews"},o=["PULL_REQUEST_RULES"],l=["PULL_REQUEST_USER_STATE"],c=["PULL_REQUEST_MERGE_CONFLICT_STATE"],d=["PULL_REQUEST_STATE","PULL_REQUEST_MERGE_METHOD","PULL_REQUEST_REPO_STATE","UNKNOWN"]},894:(e,t,n)=>{n.d(t,{L:()=>i,M:()=>r});var a=n(96540);let r=(0,a.createContext)(null);function i(){let e=(0,a.useContext)(r);if(!e)throw Error("useLayoutContext must be used within a Layout component");return e}},69759:(e,t,n)=>{n.d(t,{B:()=>a});function a(e,t){let n=e.createElement("template");return n.innerHTML=t,e.importNode(n.content,!0)}},51407:(e,t,n)=>{n.d(t,{Y:()=>a});function a(){let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}},53885:(e,t,n)=>{n.d(t,{e:()=>i});var a=n(37285),r=n(50129);function i(e,t){let{basePageDataUrl:n}=(0,r.Yu)(),i=`${n}/page_data/${e}`;return t&&(i+=`?${t}`),(0,a.RD)(i)}},20622:(e,t,n)=>{n.d(t,{u:()=>a});let a={codeButton:"code_button",codeowners:"codeowners",commits:"commits",diffEntries:"diff_entries",diffstat:"diffstat",header:"header",mergeBox:"merge_box",mergeInstructions:"merge_instructions",pendingReview:"pending_review",statusChecks:"status_checks",tabCounts:"tab_counts",threadPreviews:"thread_previews",viewedFilesCount:"viewed_files_count",viewedFilesCount2:"viewed_files_count2",diffSummaries:"diff_summaries",diffViewUserSettings:"user_diff_view_settings",tableOfContents:"table_of_contents",diffCollapsedStatus:"diff_collapsed_status",diffContextLines:"diff_entry_lines",richDiff:"rich_diff",abandonReview:"abandon_review",addCommentReaction:"add_comment_reaction",changeBase:"change_base",cleanupCodespaces:"cleanup_codespaces",createReviewComment:"create_review_comment",deleteHeadRef:"delete_head_ref",dequeuePullRequest:"dequeue_pull_request",disableAutoMerge:"disable_auto_merge",enableAutoMerge:"enable_auto_merge",dismissReview:"dismiss_review",markReadyForReview:"mark_ready_for_review",merge:"merge",removeCommentReaction:"remove_comment_reaction",reRequestReviewFromUser:"re_request_review_from_user",restoreHeadRef:"restore_head_ref",resolveThread:"resolve_thread",runActionRequiredWorkflows:"run_action_required_workflows",submitReview:"submit_review",unresolveThread:"unresolve_thread",updateReviewComment:"update_review_comment",updatePullRequestBranch:"update_pull_request_branch",updateTitle:"update_title",updateDiffViewUserSettings:"update_diff_view_user_settings",updateViewedFiles:"update_viewed_files",updateMergeBoxUserPreference:"update_merge_box_user_preference",updateWhitespacePreference:"update_whitespace_preference",hideComment:"hide_comment",unhideComment:"unhide_comment",submitSuggestedChanges:"apply_suggestions"}},48845:(e,t,n)=>{n.d(t,{R:()=>i,hp:()=>r,ol:()=>AuthSessionExpiredError,q$:()=>s});var a=n(96379);let FetchRequestError=class FetchRequestError extends Error{constructor(e){super("Unable to perform this operation. Please try again later."),this.name="FetchRequestError",this.cause=e}};let ServerUnavailableError=class ServerUnavailableError extends Error{constructor(e){super("Unable to perform this operation. Please try again later."),this.name="ServerUnavailableError",this.cause=e}};let JSONParseFetchError=class JSONParseFetchError extends Error{constructor(e){super("Unable to read response from the server. Please try again later."),this.name="JSONParseFetchError",this.cause=e}};let AuthSessionExpiredError=class AuthSessionExpiredError extends Error{constructor(){super("Unable to perform this operation. Please try again later."),this.name="AuthSessionExpiredError"}};async function r(e){try{return await e.json()}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw new JSONParseFetchError(e)}}function i(e,t,n){if(!e.ok){if(e.status>=500)throw new ServerUnavailableError(e.status);if(n)throw n;if(t)throw Error(t?.error||"Unknown error occurred",{cause:e.status});throw Error(`HTTP ${e.status}`)}}async function s(e,t){try{return await (0,a.Sr)(e,t)}catch(e){throw new FetchRequestError(e)}}},51625:(e,t,n)=>{n.d(t,{_x:()=>r,cP:()=>i,eu:()=>a,pI:()=>s});let a="spark",r="Spark",i="/spark",s="Create web apps with React and TypeScript to prototype ideas, build tools, and more"},30459:(e,t,n)=>{n.d(t,{S:()=>l,s:()=>o});var a=n(21728),r=n(96540),i=n(53419),s=n(49936);function o(){let e,t,n=(0,a.c)(6),o=(0,r.useContext)(s.I);if(!o)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:l,category:c,metadata:d}=o;n[0]!==l||n[1]!==c||n[2]!==d?(e=(e,t,n)=>{let a={react:!0,app_name:l,category:c,...d};(0,i.BI)(e,{...a,...void 0===n?{}:n,target:t})},n[0]=l,n[1]=c,n[2]=d,n[3]=e):e=n[3];let u=e;return n[4]!==u?(t={sendAnalyticsEvent:u},n[4]=u,n[5]=t):t=n[5],t}function l(){let e,t,n=(0,a.c)(4),{sendAnalyticsEvent:r}=o();n[0]!==r?(e=e=>{r("analytics.click",void 0,void 0===e?{}:e)},n[0]=r,n[1]=e):e=n[1];let i=e;return n[2]!==i?(t={sendClickAnalyticsEvent:i},n[2]=i,n[3]=t):t=n[3],t}},6551:(e,t,n)=>{n.d(t,{S:()=>r});var a=n(96540);function r(e){let t=(0,a.useRef)(void 0);return(0,a.useEffect)(()=>{t.current=e},[e]),t.current}},51587:(e,t,n)=>{n.d(t,{N:()=>i});var a=n(79634),r=n(96540);let i=()=>{let e=(0,a.X)();return(0,r.useMemo)(()=>({ssoOrgs:e?.sso_organizations??[],baseAvatarUrl:e?.base_avatar_url??"https://avatars.githubusercontent.com"}),[e?.sso_organizations,e?.base_avatar_url])}},55248:(e,t,n)=>{n.d(t,{j:()=>s,p:()=>i});var a=n(74848),r=n(21728);function i(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M7.25 1.7793C9.371 1.77943 11.1858 3.00816 12.0166 4.80762C14.2732 5.06028 15.9999 6.94976 16 9.2793C16 9.32465 15.9976 9.37003 15.9961 9.41504H15.9971C15.9971 9.82924 15.6613 10.165 15.2471 10.165C14.8356 10.1648 14.5011 9.83347 14.4971 9.42285H14.4961C14.4983 9.37538 14.5 9.32737 14.5 9.2793C14.4999 7.60324 13.176 6.27947 11.5 6.2793C11.1806 6.2793 10.8958 6.07714 10.791 5.77539C10.284 4.31438 8.90436 3.27944 7.25 3.2793C5.1596 3.2793 3.50012 4.93893 3.5 7.0293C3.5 7.11497 3.50931 7.23128 3.52051 7.33887C3.52582 7.38984 3.53023 7.43466 3.53418 7.46582L3.53906 7.50098L3.54004 7.50977L3.54102 7.51074C3.59503 7.88942 3.35481 8.24868 2.98438 8.34375C2.1243 8.5636 1.5001 9.32996 1.5 10.2793C1.5 11.4033 2.37598 12.2793 3.5 12.2793H3.5332V12.2783C3.53974 12.2783 3.54624 12.2791 3.55273 12.2793H3.55371C3.95838 12.2902 4.28314 12.621 4.2832 13.0283C4.2832 13.4356 3.95841 13.7655 3.55371 13.7764V13.7793H3.5C1.54755 13.7793 0 12.2317 0 10.2793C8.74811e-05 8.86873 0.808798 7.66476 2.00098 7.1084C2.00028 7.08195 2 7.05535 2 7.0293C2.00012 4.1105 4.33118 1.7793 7.25 1.7793ZM6.49707 7.98242C6.78987 7.68961 7.2647 7.68979 7.55762 7.98242L9.80762 10.2324C9.94825 10.373 10.0273 10.5638 10.0273 10.7627C10.0273 10.9616 9.94827 11.1523 9.80762 11.293L7.55762 13.543C7.26472 13.8358 6.78992 13.8358 6.49707 13.543C6.20444 13.2501 6.20435 12.7753 6.49707 12.4824L8.2168 10.7627L6.49707 9.04297C6.20447 8.75008 6.20433 8.27522 6.49707 7.98242ZM14.5273 12.2627C14.9415 12.2627 15.2773 12.5985 15.2773 13.0127C15.2773 13.4269 14.9415 13.7627 14.5273 13.7627H11.5273C11.1133 13.7625 10.7773 13.4268 10.7773 13.0127C10.7774 12.5987 11.1133 12.2629 11.5273 12.2627H14.5273Z",fill:"currentColor"})}),t[0]=e):e=t[0],e}function s(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M14.4482 3.33337C18.7 3.33337 22.3305 5.81163 23.9131 9.41736C23.9174 9.4271 23.9218 9.43678 23.9258 9.44666L23.9287 9.45447C28.4413 9.79159 31.9629 13.4237 31.998 17.9789H31.9922C31.9894 18.5288 31.5438 18.974 30.9932 18.974C30.441 18.9739 29.9933 18.5261 29.9932 17.974H29.9971C29.9577 14.3305 27.0059 11.4291 23.2412 11.4291C22.8325 11.429 22.4654 11.1795 22.3135 10.8002L22.0752 10.2064C20.8076 7.33395 17.8991 5.33337 14.4482 5.33337C9.80134 5.33339 6.13785 8.95653 6.1377 13.476C6.1377 13.855 6.16656 14.2794 6.20605 14.4838C6.30638 15.004 5.98334 15.5117 5.46973 15.642C3.44486 16.1554 2 17.9258 2 20.0795C2.00003 22.6354 4.04211 24.6663 6.68945 24.6664H8.125C8.67643 24.6673 9.12289 25.1148 9.12305 25.6664C9.12305 26.2181 8.67653 26.6645 8.125 26.6654V26.6664H6.68945C2.97192 26.6663 3.31456e-05 23.774 0 20.0795C0 17.2864 1.70256 14.9426 4.14941 13.972C4.14121 13.7976 4.1377 13.6268 4.1377 13.476C4.13785 7.81789 8.73115 3.33339 14.4482 3.33337ZM13.9863 17.6185C14.3768 17.2282 15.0099 17.2284 15.4004 17.6185L19.0674 21.2855C19.2549 21.473 19.3603 21.7274 19.3604 21.9926C19.3604 22.2577 19.2548 22.5121 19.0674 22.6996L15.4004 26.3666C15.0099 26.7569 14.3768 26.757 13.9863 26.3666C13.5959 25.9761 13.596 25.3431 13.9863 24.9525L16.9463 21.9926L13.9863 19.0336C13.5958 18.643 13.5958 18.0091 13.9863 17.6185ZM28.6934 24.6595C29.2456 24.6595 29.6934 25.1073 29.6934 25.6595C29.6932 26.2117 29.2456 26.6595 28.6934 26.6595H22.0264C21.4744 26.6593 21.0265 26.2116 21.0264 25.6595C21.0264 25.1074 21.4743 24.6598 22.0264 24.6595H28.6934Z",fill:"currentColor"})}),t[0]=e):e=t[0],e}try{i.displayName||(i.displayName="AgentsIcon16")}catch{}try{s.displayName||(s.displayName="AgentsIcon32")}catch{}},64894:(e,t,n)=>{n.d(t,{C:()=>l});var a=n(74848),r=n(21728),i=n(39820),s=n(96379),o=n(96540);function l(e){let t,n,l,c=(0,r.c)(4),{onBannerDismiss:d,enabled:u}=e,[m,p]=(0,o.useState)(!1);return!(void 0===u||u)||m?null:(c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-bold",children:"Copilot coding agent now uses fewer premium requests!"})," From now on, each session uses just one premium request."]}),n=(0,a.jsx)(i.l.PrimaryAction,{as:"a",href:"https://docs.github.com/copilot/concepts/copilot-billing/understanding-and-managing-requests-in-copilot",children:"Learn more"}),c[0]=t,c[1]=n):(t=c[0],n=c[1]),c[2]!==d?(l=(0,a.jsx)(i.l,{variant:"upsell",title:"Copilot premium requests announcement",hideTitle:!0,description:t,primaryAction:n,onDismiss:async()=>{p(!0),d&&d(),await (0,s.DI)("/settings/dismiss-notice/copilot_coding_agent_premium_requests_banner",{method:"POST"})}}),c[2]=d,c[3]=l):l=c[3],l)}try{l.displayName||(l.displayName="PremiumRequestsBanner")}catch{}},5106:(e,t,n)=>{n.d(t,{eB:()=>b,ZL:()=>v,TO:()=>x});var a,r=n(74848),i=n(21728),s=n(80679),o=n(89169),l=n(38621);let c={description:"TaskListItem-module__description--UXlQ1",iconTransition:"TaskListItem-module__iconTransition--qlkQV",fadeOut:"TaskListItem-module__fadeOut--HZHZN",fadeText:"TaskListItem-module__fadeText--S_0MH",entering:"TaskListItem-module__entering--mxeSa",exiting:"TaskListItem-module__exiting--DO7Ic"};var d=n(96540),u=n(67154),m=n(30388),p=n(82595),h=n(84511);let f={animatedDot:"WithAnimatedEllipsis-module__animatedDot--Dbgsr"},g=e=>{let t,n,a,s=(0,i.c)(4),{children:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("style",{children:`
    @keyframes dot1 {
      0%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot2 {
      0% { opacity: 0; }
      15% { opacity: 0; }
      25%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
    @keyframes dot3 {
      0% { opacity: 0; }
      40% { opacity: 0; }
      50%, 75% { opacity: 1; }
      100% { opacity: 0; }
    }
  `}),n=[1,2,3].map(y),s[0]=t,s[1]=n):(t=s[0],n=s[1]),s[2]!==o?(a=(0,r.jsxs)(r.Fragment,{children:[o,t,n]}),s[2]=o,s[3]=a):a=s[3],a};try{g.displayName||(g.displayName="WithAnimatedEllipsis")}catch{}function y(e){return(0,r.jsx)(h.A,{sx:{animationName:`dot${e}`},className:f.animatedDot,children:"."},`dot${e}`)}let _=e=>{let t,n,a,s=(0,i.c)(7),{text:o}=e,[l,u]=(0,d.useState)(null),[m,p]=(0,d.useState)("none");s[0]!==l||s[1]!==o?(t=()=>{if(null===l)return void u(o);if(o!==l){p("exiting");let e=setTimeout(()=>{u(o),p("entering")},400);return()=>clearTimeout(e)}},n=[o,l],s[0]=l,s[1]=o,s[2]=t,s[3]=n):(t=s[2],n=s[3]),(0,d.useEffect)(t,n);let h=`${c.fadeText} ${"entering"===m?c.entering:"exiting"===m?c.exiting:null}`;return s[4]!==l||s[5]!==h?(a=(0,r.jsx)("span",{className:h,children:l}),s[4]=l,s[5]=h,s[6]=a):a=s[6],a};function x(e,t,n){if(t)return{icon:l.GitMergeQueueIcon,color:"var(--fgColor-attention)","data-testid":"icon-git-merge-queue"};if("queued"===n)return{icon:l.ClockIcon,color:"var(--fgColor-attention)","data-testid":"icon-clock"};if("open"===e){if("waiting_for_user"===n||"completed"===n)return{icon:l.CheckCircleFillIcon,color:"var(--fgColor-success)","data-testid":"icon-check-circle-fill"};if("failed"===n||"timed_out"===n)return{icon:l.StopIcon,color:"var(--fgColor-danger)","data-testid":"icon-stop"};if("in_progress"===n)return{icon:()=>(0,r.jsx)(s.gX,{animated:!0}),color:"attention.fg","data-testid":"icon-spinning-circle"};if("idle"===n)return{icon:l.DotFillIcon,color:"var(--fgColor-muted)","data-testid":"icon-dot"};if("cancelled"===n)return{icon:l.SkipIcon,color:"var(--fgColor-muted)","data-testid":"icon-skip"}}return"merged"===e?{icon:l.GitMergeIcon,color:"var(--fgColor-done)","data-testid":"icon-git-merge"}:"closed"===e?{icon:l.GitPullRequestClosedIcon,color:"var(--fgColor-danger)","data-testid":"icon-skip"}:{icon:l.DotFillIcon,color:"var(--fgColor-muted)","data-testid":"icon-idle"}}function v(e){let t,n,a,s,l,h,f,g,y,v,b,S,C=(0,i.c)(32),{state:j,revisionCount:N,startedAt:w,prState:I,prUrl:E,prTitle:T,prNwo:k,prNumber:R,prInMergeQueue:A}=e,[L,D]=(0,d.useState)(null),[P,M]=(0,d.useState)(!1);C[0]!==A||C[1]!==I||C[2]!==j?(n="merged"===I?"Merged":"closed"===I?"Closed":A?"Queued to merge":j&&(0,u.w)(j)||"",C[0]=A,C[1]=I,C[2]=j,C[3]=n):n=C[3],t=n,C[4]!==A||C[5]!==I||C[6]!==j?(s=x(I,A,j),C[4]=A,C[5]=I,C[6]=j,C[7]=s):s=C[7],a=s,C[8]!==L||C[9]!==a?(l=()=>{if(!L)return void D(a);if(L.icon!==a.icon){M(!0);let e=setTimeout(()=>{D(a),M(!1)},300);return()=>clearTimeout(e)}},h=[a,L],C[8]=L,C[9]=a,C[10]=l,C[11]=h):(l=C[10],h=C[11]),(0,d.useEffect)(l,h);let O=N>0?`${N} revision${N>1?"s":""} \xb7 `:null,B=`${c.iconTransition} ${P?c.fadeOut:""}`;return C[12]!==a||C[13]!==B?(f=(0,r.jsx)(m.qJ.Item.LeadingVisual,{children:(0,r.jsx)(p.I,{...a,className:B})}),C[12]=a,C[13]=B,C[14]=f):f=C[14],C[15]!==T?(g=(0,r.jsx)(m.qJ.Item.Title,{children:T}),C[15]=T,C[16]=g):g=C[16],C[17]!==w?(y=(0,r.jsx)(o.A,{format:"micro",datetime:w}),C[17]=w,C[18]=y):y=C[18],C[19]!==t?(v=(0,r.jsx)(_,{text:t}),C[19]=t,C[20]=v):v=C[20],C[21]!==R||C[22]!==k||C[23]!==O||C[24]!==y||C[25]!==v?(b=(0,r.jsx)(m.qJ.Item.Description,{children:(0,r.jsxs)("span",{className:c.description,children:[k,"#",R," \xb7 started ",y," ago \xb7"," ",O,v]})}),C[21]=R,C[22]=k,C[23]=O,C[24]=y,C[25]=v,C[26]=b):b=C[26],C[27]!==E||C[28]!==b||C[29]!==f||C[30]!==g?(S=(0,r.jsxs)(m.qJ.Item,{href:E,isExternalLink:!0,children:[f,g,b]}),C[27]=E,C[28]=b,C[29]=f,C[30]=g,C[31]=S):S=C[31],S}function b(e){let t,n,a,s,o=(0,i.c)(7),{repositoryNwo:d}=e,u=`Creating task in ${d}`;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(m.qJ.Item.LeadingVisual,{children:(0,r.jsx)(p.I,{icon:l.DotFillIcon,color:"var(--fgColor-attention)"})}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(m.qJ.Item.Title,{children:(0,r.jsx)(g,{children:"Creating task"})}),o[1]=n):n=o[1],o[2]!==d?(a=(0,r.jsxs)(m.qJ.Item.Description,{children:[(0,r.jsx)("span",{className:c.description,children:d})," \xb7 Initializing pull request\u2026"]}),o[2]=d,o[3]=a):a=o[3],o[4]!==u||o[5]!==a?(s=(0,r.jsxs)(m.qJ.Item,{"aria-label":u,children:[t,n,a]}),o[4]=u,o[5]=a,o[6]=s):s=o[6],s}try{_.displayName||(_.displayName="FadeText")}catch{}try{v.displayName||(v.displayName="TaskListItem")}catch{}try{(a=function(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(m.qJ.Item.Skeleton,{}),t[0]=e):e=t[0],e}).displayName||(a.displayName="LoadingTaskListItem")}catch{}try{b.displayName||(b.displayName="OptimisticTaskListItem")}catch{}},47865:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(21728),r=n(97665),i=n(94747),s=n(69599),o=n(51120),l=n(55899),c=n(93654);function d(e){let t,n,o,d,m,p,h,f,g,y=(0,a.c)(22),{apiURL:_,onError:x}=e,v=(0,r.jE)();y[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.G7)("copilot_immersive_agent_branch_selection"),y[0]=t):t=y[0];let b=t;y[1]===Symbol.for("react.memo_cache_sentinel")?(n=["createTask"],y[1]=n):n=y[1],y[2]!==v?(o=async e=>{await v.cancelQueries({queryKey:c.ZL});let t=v.getQueryData(c.ZL)??[],n=function({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:a,eventType:r,subagent:i}){return{resource_type:"pull",resource_id:-1,session_count:1,latest_session_updated_at:new Date().toISOString(),latest_session_state:"in_progress",event_identifiers:[e],event_type:r,isOptimistic:!0,clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:a,subagent:i}}(e);return v.setQueryData(c.ZL,[n,...t]),{previousTasks:t}},y[2]=v,y[3]=o):o=y[3],y[4]!==_?(d=async e=>{if(!(await u({...e,apiURL:_,isBranchSelectionEnabled:b,title:e.problemStatement})).ok)throw Error(`Failed to create task: ${e.clientGeneratedId}`);return e.clientGeneratedId},y[4]=_,y[5]=d):d=y[5],y[6]!==x||y[7]!==v?(m=(e,t)=>{let n=(v.getQueryData(c.ZL)??[]).filter(e=>e.clientGeneratedId!==t.clientGeneratedId);v.setQueryData(c.ZL,n),x?.(e,t)},y[6]=x,y[7]=v,y[8]=m):m=y[8],y[9]!==v?(p=()=>{v.invalidateQueries({queryKey:c.ZL})},y[9]=v,y[10]=p):p=y[10],y[11]!==o||y[12]!==d||y[13]!==m||y[14]!==p?(h={mutationKey:n,onMutate:o,mutationFn:d,onError:m,onSuccess:p},y[11]=o,y[12]=d,y[13]=m,y[14]=p,y[15]=h):h=y[15];let S=(0,i.n)(h);y[16]!==S?(f=e=>{let t=(0,l.u)();S.mutate({...e,clientGeneratedId:t})},y[16]=S,y[17]=f):f=y[17];let C=f;return y[18]!==C||y[19]!==S.error||y[20]!==S.isPending?(g={createTask:C,isCreating:S.isPending,createError:S.error},y[18]=C,y[19]=S.error,y[20]=S.isPending,y[21]=g):g=y[21],g}async function u({clientGeneratedId:e,nwo:t,problemStatement:n,baseRef:a,apiURL:r,isBranchSelectionEnabled:i,eventType:s,title:l,subagent:c}){let d=`/agents/swe/jobs/${t}`;return await (0,o.I)({apiURL:r,path:d,method:"POST",body:{problem_statement:n,pull_request:{...i&&{base_ref:`refs/heads/${a}`},...l&&{title:l}},event_identifiers:[e],event_type:s,subagent:c}})}},64846:(e,t,n)=>{n.d(t,{Q:()=>s});var a=n(69599),r=n(82075),i=n(96540);function s(e){let t=(0,r.D)("localStorage"),n=(0,a.G7)("copilot_agent_task_caching");return{value:(0,i.useMemo)(()=>{if(n)return t.getItem(e)??void 0},[n,t,e]),setValue:a=>{n&&t.setItem(e,a)},removeItem:()=>{n&&t.removeItem(e)}}}},91865:(e,t,n)=>{n.d(t,{ET:()=>s,Iw:()=>l,V4:()=>c,ms:()=>o});var a=n(96540),r=n(97286),i=n(64846);let s="AGENT_SESSIONS_PR_MAP";function o(e){return Array.from(new Set(e?e.map(e=>e.resource_id):[])).sort((e,t)=>Number(e)-Number(t)).join(",")}let l=async(e,t)=>{let n=o(e);if(!n)return{};let a=await fetch(`/copilot/agent-sessions/pull-requests?pull_request_ids=${encodeURIComponent(n)}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!a.ok)throw Error("Failed to fetch pull requests");let r=(await a.json()).pull_requests;return t(r),r};function c({tasks:e,sessionsPollingInterval:t=3e3,initialPullRequestsMap:n}){let c=o(e),{value:d,setValue:u}=(0,i.Q)(s),m=(0,a.useRef)(n??{}),p=(0,r.I)({queryKey:["agent-sessions-pull-requests",c],queryFn:async()=>await l(e,u),initialData:n??d,refetchInterval:t,refetchIntervalInBackground:!1,enabled:c.length>0});p.data&&(m.current={...m.current,...p.data});let h=(0,a.useMemo)(()=>m.current,[p.data]);return{...p,data:h}}},93654:(e,t,n)=>{n.d(t,{ZL:()=>c,j:()=>u,si:()=>m,xZ:()=>d});var a=n(21728),r=n(97665),i=n(42455),s=n(51120),o=n(91865),l=n(64846);let c=["agent-tasks"],d="AGENT_SESSIONS_TASKS",u=async(e,t,n)=>{let a=await (0,s.I)({apiURL:n,path:"/agents/sessions"}),r=function(e,t){let n=e.map(e=>{let n=t.find(t=>e.event_identifiers?.includes(t.clientGeneratedId));return{...e,isOptimistic:!!n,...n&&{problemStatement:n.problemStatement,nwo:n.nwo,baseRef:n.baseRef,clientGeneratedId:n.clientGeneratedId}}}),a=t.filter(e=>!n.some(t=>t.event_identifiers?.includes(e.clientGeneratedId)));return[...n,...a].sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())}(function(e){let t=new Map;for(let n of e){let e=t.get(n.resource_id.toString());e?(e.session_count+=1,new Date(n.last_updated_at)>new Date(e.latest_session_updated_at)&&(e.latest_session_updated_at=n.last_updated_at,e.latest_session_state=n.state)):t.set(n.resource_id.toString(),{resource_type:n.resource_type,resource_id:n.resource_id,session_count:1,latest_session_updated_at:n.last_updated_at,latest_session_state:n.state,event_identifiers:n.event_identifiers})}return Array.from(t.values()).sort((e,t)=>new Date(t.latest_session_updated_at).getTime()-new Date(e.latest_session_updated_at).getTime())}((await a.json()).sessions),(e.getQueryData(c)||[]).filter(e=>!0===e.isOptimistic));return t(r),r};function m(e){let t,n,s,m,f,g,y,_,x=(0,a.c)(25),{apiURL:v,sessionsPollingInterval:b,initialTasks:S,initialPullRequestsMap:C}=e,j=void 0===b?3e3:b,{value:N,setValue:w}=(0,l.Q)(d),I=(0,r.jE)();x[0]!==v||x[1]!==I||x[2]!==w?(t=async()=>await u(I,w,v),x[0]=v,x[1]=I,x[2]=w,x[3]=t):t=x[3];let E=S??N;x[4]!==j||x[5]!==t||x[6]!==E?(n={queryKey:c,queryFn:t,initialData:E,refetchInterval:j,refetchIntervalInBackground:!1},x[4]=j,x[5]=t,x[6]=E,x[7]=n):n=x[7];let T=(0,i.b)(n);x[8]!==T.data?(m=T.data||[],x[8]=T.data,x[9]=m):m=x[9],s=m,x[10]!==s?(f=s.filter(h),x[10]=s,x[11]=f):f=x[11];let k=f;x[12]!==C||x[13]!==j||x[14]!==k?(g={tasks:k,sessionsPollingInterval:j,initialPullRequestsMap:C},x[12]=C,x[13]=j,x[14]=k,x[15]=g):g=x[15];let{data:R,isError:A,isLoading:L}=(0,o.V4)(g);if(x[16]!==s||x[17]!==R){let e;x[19]!==R?(e=e=>{if(void 0===e.resource_id)return e;let t=R[e.resource_id];return t?{...e,isOptimistic:!1,pull:t}:{...e,pull:void 0}},x[19]=R,x[20]=e):e=x[20],y=s.map(e).filter(p),x[16]=s,x[17]=R,x[18]=y}else y=x[18];let D=y,P=T.isLoading&&!T.data||L&&!C,M=T.isError||A;return x[21]!==M||x[22]!==P||x[23]!==D?(_={tasks:D,isLoading:P,isError:M},x[21]=M,x[22]=P,x[23]=D,x[24]=_):_=x[24],_}function p(e){return!0===e.isOptimistic||void 0!==e.pull}function h(e){return void 0!==e.resource_id}},25849:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var a=n(74848),r=n(24774),i=n(96540),s=n(53839),o=n(98325),l=n(11636),c=n(71381),d=n(68605);let u=(e,t)=>{let{state:n,placeholder:a,replacementText:r}=e.detail;"uploading"===n?(0,d.w0)(t)?(0,d.tJ)(t,a):(0,d.TC)(t,r):("uploaded"===n||"failed"===n)&&(0,d.TB)(t,a,r)},m=(e,t)=>{let{left:n,top:a}=e.detail,r=t.posAtCoords({x:n,y:a});r&&t.dispatch({selection:{anchor:r,head:r}})};var p=n(74713),h=n(18351),f=n(41185),g=n(45230),y=n(15874),_=n(3482);let x={key:"Tab",run:({state:e,dispatch:t})=>e.selection.ranges.some(e=>!e.empty)?(0,g.UY)({state:e,dispatch:t}):(t(e.update(e.replaceSelection(e.facet(y.Xt)),{scrollIntoView:!0,userEvent:"input"})),!0),shift:g.Mg};var v=n(63133);let b=[],S=[],C=(0,i.forwardRef)((e,t)=>{let{value:n="",extensions:g=b,keyBindings:y=S,height:C="85vh",width:j="100%",focusNextRenderRef:N,containerClassName:w,...I}=e,E=(0,i.useRef)(null),T=function({extensions:e=[],fileName:t="",onChange:n,spacing:a,isHpc:g,isReadOnly:y,enableFileUpload:b,parentRef:S,placeholder:C="Enter file contents here",ariaLabelledBy:j,value:N,width:w="",height:I="",minHeight:E="",hideHelpUntilFocus:T,hideHelp:k,onCreateEditor:R,onDestroyEditor:A}){let L=(0,i.useRef)(void 0),D=(0,i.useMemo)(()=>new s.xx,[]),P=(0,i.useMemo)(()=>new s.xx,[]),M=(0,i.useMemo)(()=>new s.xx,[]),O=(0,i.useCallback)(e=>{e.docChanged&&n(e.state.doc.toString()||"")},[n]),B=(0,i.useMemo)(()=>r.Lz.updateListener.of(O),[O]),F=(0,i.useMemo)(()=>r.Lz.theme({"&":{height:I,minHeight:E,width:w}}),[I,E,w]),U=(0,i.useMemo)(()=>{let t=[...o.o,B,F,(0,r.qf)(C),...(0,c.u)(a),(0,p.h)(),D.of([]),P.of([]),M.of([(0,l.O)()]),(0,h.I)(j),r.Lz.contentAttributes.of({"aria-labelledby":`${j} focus-trap-help-panel`}),r.Lz.editorAttributes.of({class:T?"hide-help-until-focus":""}),r.Lz.editorAttributes.of({class:k?"hide-help":""})];if(b&&(t.push((0,r.A)()),t.push([r.Lz.domEventHandlers({"upload:editor:change":u,"upload:editor:cursor":m})])),g&&t.push(r.Lz.editorAttributes.of({"data-hpc":"true"})),y)t.push((0,f.T)());else t.push([function(e,t,n){let a=new s.xx;return[a.of(n?t:[]),r.w4.of([{key:e,run:function(e){let n=a.get(e.state)===t;return e.dispatch({effects:a.reconfigure(n?[]:t)}),!0}}])]}("Shift-Ctrl-m",r.w4.of([x]),!0),(0,_.G)(function(){let e=document.createElement("div"),t=e=>{let t=document.createElement("kbd");return t.textContent=e,t};return e.append("Use ",t("Control + Shift + m")," to toggle the ",t("tab")," key moving focus. Alternatively, use ",t("esc")," then ",t("tab")," to move to the next interactive element on the page."),e.className="cm-help-panel",e.id="focus-trap-help-panel",e}(),k?"top":"bottom")]);return t.push(...e),t},[B,F,C,a,D,P,M,j,T,k,b,g,y,e]);return(0,i.useEffect)(()=>{let e=S.current;if(!e)return;let t=s.$t.create({doc:N,extensions:U}),n=new r.Lz({state:t,parent:e});return R?.(n),L.current=n,()=>{n.destroy(),A?.(n)}},[]),(0,i.useEffect)(()=>{L.current&&(L.current.dispatch({effects:P.reconfigure([])}),L.current.dispatch({effects:s.Pe.reconfigure.of(U)}))},[P,U]),(0,i.useEffect)(()=>{if(L.current&&void 0!==N){let e=L.current.state.doc.toString()||"",t=N||"";if(t!==e){let n=(0,d.fJ)(e,t);n.length>0&&L.current.dispatch({changes:n,annotations:[f.H.of(!0)]})}}},[N]),(0,i.useEffect)(()=>{(0,v.r)({autoCompleteCompartment:P,fileName:t,languageCompartment:D,managedExtensions:U,themeCompartment:M,view:L.current})},[t,D,P,U,M]),L}({parentRef:E,value:n,height:C,width:j,extensions:(0,i.useMemo)(()=>[...g,r.w4.of(y)],[g,y]),...I});return(0,i.useImperativeHandle)(t,()=>({editor:E.current,view:T.current}),[E,T]),N?.current&&T&&(window.requestAnimationFrame(()=>{T.current&&!T.current.hasFocus&&T.current.focus()}),N.current=!1),(0,a.jsx)("div",{className:w,ref:E})});C.displayName="CodeMirror";let j=C},97315:(e,t,n)=>{n.d(t,{P:()=>c});var a=n(74848),r=n(21728),i=n(39820),s=n(96540),o=n(33592);let l={ambientErrorBanner:"AmbientErrorBanner-module__ambientErrorBanner--lajPC",largeBorderRadius:"AmbientErrorBanner-module__largeBorderRadius--NGjjE",mediumBorderRadius:"AmbientErrorBanner-module__mediumBorderRadius--aAp6Z"};function c(e){let t,n,c,u,m,p,h=(0,r.c)(14),{ambientError:f,useLargerBorderRadius:g}=e,y=(0,o.b)(),[_,x]=(0,s.useState)(0),v=void 0!==g&&g?l.largeBorderRadius:l.mediumBorderRadius,b=(0,s.useRef)(null);h[0]!==f.message?(t=()=>{if(f.message){x(d);let e=setTimeout(()=>{b.current&&b.current.focus()},250);return()=>clearTimeout(e)}},h[0]=f.message,h[1]=t):t=h[1],h[2]!==f?(n=[f],h[2]=f,h[3]=n):n=h[3],(0,s.useEffect)(t,n);let S=`${l.ambientErrorBanner} ${v}`;return h[4]===Symbol.for("react.memo_cache_sentinel")?(c={outline:"none"},h[4]=c):c=h[4],h[5]!==f.message?(u=(0,a.jsx)("div",{ref:b,tabIndex:-1,style:c,children:f.message}),h[5]=f.message,h[6]=u):u=h[6],h[7]!==y?(m=()=>{y.dismissAmbientError()},h[7]=y,h[8]=m):m=h[8],h[9]!==_||h[10]!==S||h[11]!==u||h[12]!==m?(p=(0,a.jsx)(i.l,{"aria-atomic":"true",className:S,description:u,variant:"critical",title:"Error during copilot chat has occurred.",hideTitle:!0,onDismiss:m},_),h[9]=_,h[10]=S,h[11]=u,h[12]=m,h[13]=p):p=h[13],p}function d(e){return e+1}try{c.displayName||(c.displayName="AmbientErrorBanner")}catch{}},55009:(e,t,n)=>{n.d(t,{o:()=>d});var a=n(74848),r=n(21728),i=n(34164),s=n(96540);let o={chatImageAttachment:"ChatImage-module__chatImageAttachment--yonSm",squareView:"ChatImage-module__squareView--nZPWG",fullView:"ChatImage-module__fullView--hHWSy",userAttachedImage:"ChatImage-module__userAttachedImage--e5PZR",overlay:"ChatImage-module__overlay--Z0bfs",overlayScreen:"ChatImage-module__overlayScreen--oZnB_",expandIcon:"ChatImage-module__expandIcon--H2k4g"};function l(e){let t,n,i=(0,r.c)(5),{className:s,size:o}=e,l=o||14,c=o||14;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13.672 5.342a.8.8 0 0 0 .05-.295V.805a.75.75 0 0 0-.75-.75H8.73a.75.75 0 0 0 0 1.5h2.433L8.138 4.577A.75.75 0 0 0 9.2 5.638l3.024-3.023v2.432a.75.75 0 0 0 1.45.295M.328 8.657a.8.8 0 0 0-.05.295v4.243a.75.75 0 0 0 .75.75h4.243a.75.75 0 0 0 0-1.5H2.838l3.024-3.023A.75.75 0 1 0 4.8 8.362l-3.024 3.023V8.952a.75.75 0 0 0-1.45-.295",clipRule:"evenodd"}),i[0]=t):t=i[0],i[1]!==s||i[2]!==l||i[3]!==c?(n=(0,a.jsx)("svg",{className:s,xmlns:"http://www.w3.org/2000/svg",width:l,height:c,fill:"none",viewBox:"0 0 14 14",role:"presentation",children:t}),i[1]=s,i[2]=l,i[3]=c,i[4]=n):n=i[4],n}try{l.displayName||(l.displayName="ExpandIcon")}catch{}let c=e=>{let t,n,c,d,u,m,p,h,f,g=(0,r.c)(25),{src:y,alt:_,onClick:x,useOverlay:v,mode:b,squareView:S}=e,[C,j]=(0,s.useState)(!1),N=S?o.squareView:o.fullView,w="assistive"===b;g[0]!==N||g[1]!==w?(t=(0,i.$)(o.chatImageAttachment,N,{assistive:w}),g[0]=N,g[1]=w,g[2]=t):t=g[2];let I=S?o.squareView:o.fullView;return g[3]!==I?(n=(0,i.$)(o.userAttachedImage,I),g[3]=I,g[4]=n):n=g[4],g[5]!==_||g[6]!==y||g[7]!==n?(c=(0,a.jsx)("img",{className:n,src:y,alt:_}),g[5]=_,g[6]=y,g[7]=n,g[8]=c):c=g[8],g[9]!==C||g[10]!==S?(d=(0,i.$)(o.overlay,{hovered:C,[o.squareView]:S}),g[9]=C,g[10]=S,g[11]=d):d=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(u=()=>j(!0),m=()=>j(!1),g[12]=u,g[13]=m):(u=g[12],m=g[13]),g[14]!==v?(p=v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:o.overlayScreen}),(0,a.jsx)(l,{className:o.expandIcon,size:20})]}),g[14]=v,g[15]=p):p=g[15],g[16]!==x||g[17]!==y||g[18]!==p||g[19]!==d?(h=(0,a.jsx)("a",{href:y,className:d,onClick:x,onMouseEnter:u,onMouseLeave:m,"aria-label":"Open image thumbnail",target:"_blank",rel:"noreferrer",children:p}),g[16]=x,g[17]=y,g[18]=p,g[19]=d,g[20]=h):h=g[20],g[21]!==h||g[22]!==t||g[23]!==c?(f=(0,a.jsxs)("div",{className:t,children:[c,h]}),g[21]=h,g[22]=t,g[23]=c,g[24]=f):f=g[24],f},d=(0,s.memo)(c);try{c.displayName||(c.displayName="ChatImageUnmemoized")}catch{}try{d.displayName||(d.displayName="ChatImage")}catch{}},46665:(e,t,n)=>{n.d(t,{$:()=>o,V:()=>l});var a=n(74848),r=n(21728),i=n(96540);let s=(0,i.createContext)(void 0),o=e=>{let t,n,i,o=(0,r.c)(5),{message:l,children:c}=e;return o[0]!==l?(n={message:l},o[0]=l,o[1]=n):n=o[1],t=n,o[2]!==c||o[3]!==t?(i=(0,a.jsx)(s.Provider,{value:t,children:c}),o[2]=c,o[3]=t,o[4]=i):i=o[4],i},l=()=>{let e=(0,i.useContext)(s);if(!e)throw Error("useChatMessage must be used with ChatMessageProvider.");return e};try{s.displayName||(s.displayName="ChatMessageContext")}catch{}try{o.displayName||(o.displayName="ChatMessageProvider")}catch{}},59524:(e,t,n)=>{n.d(t,{Q:()=>c});var a=n(74848),r=n(21728),i=n(38621),s=n(72010),o=n(70728);let l={Details:"ChatMessageMcpToolResultsList-module__Details--ri1It",ToolInputOutputHeading:"ChatMessageMcpToolResultsList-module__ToolInputOutputHeading--tgNpb",ToolInputOutputContents:"ChatMessageMcpToolResultsList-module__ToolInputOutputContents--DB0rS"};function c(e){let t,n,i=(0,r.c)(4),{mcpToolResults:s}=e;return s&&0!==s.length?(i[0]!==s?(t=s.map(d),i[0]=s,i[1]=t):t=i[1],i[2]!==t?(n=(0,a.jsx)("div",{className:"mb-2",children:t}),i[2]=t,i[3]=n):n=i[3],n):null}function d(e){return(0,a.jsx)(u,{result:e},e.toolName)}function u(e){let t,n,c,d,u,m,p,h,f,g,y,_,x,v=(0,r.c)(29),{result:b}=e;v[0]===Symbol.for("react.memo_cache_sentinel")?(t={},v[0]=t):t=v[0];let{getDetailsProps:S,open:C}=(0,s.A)(t),j=b.toolName;return v[1]!==S?(n=S(),v[1]=S,v[2]=n):n=v[2],v[3]!==C?(c=!C&&(0,a.jsx)(i.ChevronRightIcon,{size:16,className:"mr-1 inline-block"}),v[3]=C,v[4]=c):c=v[4],v[5]!==C?(d=C&&(0,a.jsx)(i.ChevronDownIcon,{size:16,className:"mr-1 inline-block"}),v[5]=C,v[6]=d):d=v[6],v[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,a.jsx)(i.ToolsIcon,{size:16,className:"mr-1 inline-block"}),v[7]=u):u=v[7],v[8]!==b.serverName||v[9]!==b.toolName||v[10]!==c||v[11]!==d?(m=(0,a.jsxs)("summary",{children:[c,d,u,"Called ",b.toolName," from ",b.serverName]}),v[8]=b.serverName,v[9]=b.toolName,v[10]=c,v[11]=d,v[12]=m):m=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(p=(0,a.jsx)("h3",{className:l.ToolInputOutputHeading,children:"Input"}),v[13]=p):p=v[13],v[14]!==b.toolArguments?(h=JSON.stringify(b.toolArguments,null,2),v[14]=b.toolArguments,v[15]=h):h=v[15],v[16]!==h?(f=(0,a.jsx)("div",{className:"border rounded p-2 mb-2",children:(0,a.jsx)("span",{className:l.ToolInputOutputContents,children:h})}),v[16]=h,v[17]=f):f=v[17],v[18]===Symbol.for("react.memo_cache_sentinel")?(g=(0,a.jsx)("h3",{className:l.ToolInputOutputHeading,children:"Output"}),v[18]=g):g=v[18],v[19]!==b.toolResponse?(y=JSON.stringify(b.toolResponse,null,2),v[19]=b.toolResponse,v[20]=y):y=v[20],v[21]!==y?(_=(0,a.jsx)("div",{className:"border rounded p-2 mb-2",children:(0,a.jsx)("span",{className:l.ToolInputOutputContents,children:y})}),v[21]=y,v[22]=_):_=v[22],v[23]!==b.toolName||v[24]!==f||v[25]!==_||v[26]!==n||v[27]!==m?(x=(0,a.jsxs)(o.A,{className:l.Details,...n,children:[m,p,f,g,_]},j),v[23]=b.toolName,v[24]=f,v[25]=_,v[26]=n,v[27]=m,v[28]=x):x=v[28],x}try{c.displayName||(c.displayName="ChatMessageMcpToolResultsList")}catch{}try{u.displayName||(u.displayName="McpToolResult")}catch{}},63262:(e,t,n)=>{n.d(t,{A:()=>d,i:()=>c});var a=n(74848),r=n(21728),i=n(71315),s=n(96540),o=n(2635),l=n(7104);let c=e=>{let t,n,c,d,u=(0,r.c)(10),{isLastGroup:m,children:p}=e,{scrollContainerHeight:h,scrollToBottom:f}=(0,l.b)(),{threadHasNewMessages:g,pendingFirstMessage:y}=(0,o.Pk)(),_=m&&(g||y);if(u[0]!==_||u[1]!==f?(t=()=>{_&&f("smooth")},n=[_,f],u[0]=_,u[1]=f,u[2]=t,u[3]=n):(t=u[2],n=u[3]),(0,s.useEffect)(t,n),_)if(i.cg?.CSS?.supports("container-type: size")){let e;u[4]===Symbol.for("react.memo_cache_sentinel")?(e={minHeight:"100cqh"},u[4]=e):e=u[4],d=e}else{let e;u[5]!==h?(e={minHeight:h},u[5]=h,u[6]=e):e=u[6],d=e}return u[7]!==p||u[8]!==d?(c=(0,a.jsx)("div",{style:d,children:p}),u[7]=p,u[8]=d,u[9]=c):c=u[9],c};function d(e){return e.reduce((e,t)=>{let n=e.at(-1);return"assistant"===(n?.at(-1)?.role??"assistant")&&"user"===t.role?e.push([t]):n?.push(t),e},[])}try{c.displayName||(c.displayName="ChatMessagesGroup")}catch{}},88752:(e,t,n)=>{n.d(t,{t:()=>L,s:()=>R});var a,r=n(74848),i=n(38621),s=n(72010),o=n(70728),l=n(52446),c=n(81246),d=n(30729),u=n(34164),m=n(96540),p=n(25641),h=n(35247),f=n(2635),g=n(23967),y=n(1002),_=n(5945),x=n(33592);let v={ActionList_LinkItem:"ChatReference-module__ActionList_LinkItem--gopkk"};var b=n(35673),S=n(1631);function C({reference:e,onClick:t}){let n,a=(0,f.Pk)(),s=(0,x.b)(),o=(0,m.useRef)(null),[c,d]=(0,m.useState)(!1),h=a?.mode??"assistive",{currentReferences:g}=a??{currentReferences:[]},C=(0,m.useMemo)(()=>g.map(e=>(0,p.Vb)(e)),[g]),j=(0,m.useMemo)(()=>(0,p.Vb)(e),[e]),N=(0,m.useMemo)(()=>"repo-instructions"===e.type,[e]),w=(0,m.useMemo)(()=>"org-instructions"===e.type,[e]),I=!N&&!w&&"web-search-result"!==e.type,E=(0,m.useMemo)(()=>N||w||C.includes(j),[N,w,C,j]),T=(0,m.useCallback)(t=>{t.stopPropagation(),E||s.addReference(e,"refMenu")},[s,e,E]),k=(0,p.JP)(e),R=(0,p.Xs)(k),A=(0,S.a_)(e,(0,p.P)(a?.currentTopic));switch(e.type){case"file":case"snippet":{n=`${e.repoName}`;let t=e.path.lastIndexOf("/");-1!==t&&(n=`${n}/${e.path.substring(0,t)}`);break}case"web-search-result":n=new URL(e.url,window.location.origin).hostname.replace(/^www\./,"")}let L=(0,p.z$)(e);return(0,r.jsxs)(l.l.LinkItem,{onClick:n=>{t&&!n.defaultPrevented&&t(e,n)},href:k,rel:"noopener",className:(0,u.$)("reference-action",v.ActionList_LinkItem),target:"immersive"===h||"third-party"===e.type?"_blank":void 0,children:[A&&(0,r.jsx)(l.l.LeadingVisual,{children:(0,r.jsx)(A,{})}),(0,r.jsxs)(y.A,{title:L,maxWidth:"100%",className:"text-semibold",children:[L,n&&(0,r.jsx)("span",{className:"color-fg-muted ml-2",children:n})]}),I&&(0,r.jsx)(l.l.TrailingAction,{onClick:()=>d(!0),icon:i.KebabHorizontalIcon,label:"More reference options",ref:o}),I&&(0,r.jsx)(_.W,{anchorRef:o,open:c,onOpenChange:d,children:(0,r.jsx)(b.UJ,{portalContainerName:b.Dq,children:(0,r.jsxs)(l.l,{children:[R&&("immersive"===h||["third-party","folder","repository","docset"].includes(e.type)?(0,r.jsxs)(l.l.LinkItem,{href:k,rel:"noopener",target:"_blank",children:[(0,r.jsx)(l.l.LeadingVisual,{children:(0,r.jsx)(i.LinkIcon,{})}),"Open"]}):(0,r.jsxs)(l.l.Item,{onSelect:()=>{s.selectReference(e)},children:[(0,r.jsx)(l.l.LeadingVisual,{children:(0,r.jsx)(i.LinkIcon,{})}),"Preview"]})),(0,r.jsxs)(l.l.Item,{onSelect:T,disabled:E,children:[(0,r.jsx)(l.l.LeadingVisual,{children:(0,r.jsx)(i.PaperclipIcon,{})}),"Attach to chat"]})]})})})]})}try{C.displayName||(C.displayName="OutputReference")}catch{}try{(a=Icon).displayName||(a.displayName="Icon")}catch{}let j={referencesContainer:"ChatReferences-module__referencesContainer--qLjdy",referencesListImmersiveContainer:"ChatReferences-module__referencesListImmersiveContainer--gM5wy",title:"ChatReferences-module__title--d18y3",assistiveTitle:"ChatReferences-module__assistiveTitle--Ojcrs",referencesDetails:"ChatReferences-module__referencesDetails--Ypv2c",referenceTokensOuterContainer:"ChatReferences-module__referenceTokensOuterContainer--OV840",referenceTokensContainer:"ChatReferences-module__referenceTokensContainer--nhf9A",chatMessageReferenceListFooter:"ChatReferences-module__chatMessageReferenceListFooter--WgJAa",chevronDownIcon:"ChatReferences-module__chevronDownIcon--Fv9mJ",chevronUpIcon:"ChatReferences-module__chevronUpIcon--OPX7R",ActionList:"ChatReferences-module__ActionList--ACk2F"};var N=n(21728),w=n(12004);let I={referenceToken:"FigmaChatReference-module__referenceToken--PONuv",name:"FigmaChatReference-module__name--XjBR8",content:"FigmaChatReference-module__content--Mpcb0",thumbnail:"FigmaChatReference-module__thumbnail--mm7QC",thumbnailHidden:"FigmaChatReference-module__thumbnailHidden--pv7wD",thumbnailOuter:"FigmaChatReference-module__thumbnailOuter--oMFvD",thumbnailLoading:"FigmaChatReference-module__thumbnailLoading--cQ2Uf",figmaIconOuter:"FigmaChatReference-module__figmaIconOuter--KtveL",figmaIcon:"FigmaChatReference-module__figmaIcon--kEY45"};var E=n(89237);let T=(0,m.forwardRef)(function(e,t){let n,a,i,s,o,l,c,d,h,f,g=(0,N.c)(23);g[0]!==e?({reference:n,...a}=e,g[0]=e,g[1]=n,g[2]=a):(n=g[1],a=g[2]);let[y,_]=(0,m.useState)(!0);return g[3]!==n?(i=(0,p.JP)(n),g[3]=n,g[4]=i):i=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,u.$)(I.referenceToken),g[5]=s):s=g[5],g[6]!==n.thumbnailUrl||g[7]!==n.title||g[8]!==y?(o=n.thumbnailUrl&&(0,r.jsxs)(r.Fragment,{children:[y&&(0,r.jsx)("span",{className:I.thumbnailLoading,children:(0,r.jsx)(w.A,{size:"medium"})}),(0,r.jsx)("img",{className:(0,u.$)(I.thumbnail,{[I.thumbnailHidden]:y}),src:n.thumbnailUrl,alt:`preview thumbnail for ${n.title}`,onLoad:()=>_(!1)})]}),g[6]=n.thumbnailUrl,g[7]=n.title,g[8]=y,g[9]=o):o=g[9],g[10]!==o?(l=(0,r.jsx)("span",{className:I.thumbnailOuter,children:o}),g[10]=o,g[11]=l):l=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)("div",{className:I.figmaIconOuter,children:(0,r.jsx)(E._,{className:I.figmaIcon})}),g[12]=c):c=g[12],g[13]!==n?(d=(0,p.z$)(n),g[13]=n,g[14]=d):d=g[14],g[15]!==d?(h=(0,r.jsxs)("span",{className:I.content,children:[c,(0,r.jsx)("span",{className:I.name,children:d})]}),g[15]=d,g[16]=h):h=g[16],g[17]!==t||g[18]!==a||g[19]!==i||g[20]!==l||g[21]!==h?(f=(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("a",{href:i,className:s,ref:t,target:"_blank",rel:"noreferrer",...a,children:[l,h]})}),g[17]=t,g[18]=a,g[19]=i,g[20]=l,g[21]=h,g[22]=f):f=g[22],f});try{T.displayName||(T.displayName="FigmaChatReference")}catch{}var k=n(95896);function R({references:e,onToggle:t,onClick:n,isImmersive:a,className:h}){let g=(0,f.Pk)(),y=(0,m.useMemo)(()=>(0,p.rT)(e),[e]),{getDetailsProps:_}=(0,s.A)({}),x=(0,m.useMemo)(()=>(0,p.P)(g?.currentTopic)&&y.every(A),[g?.currentTopic,y]),v=(0,m.useMemo)(()=>y.some(e=>"web-search-result"===e.type),[y]);if(0===y.length)return null;let b=x&&g?.currentTopic?.name?`Search results from ${g.currentTopic.name}`:`${y.length} ${1===y.length?"reference":"references"}`;return(0,r.jsxs)(o.A,{..._(),onToggle:t,className:(0,u.$)(h,j.referencesDetails),children:[(0,r.jsxs)("summary",{className:(0,u.$)(j.referencesContainer),children:[(0,r.jsx)("span",{className:(0,u.$)(j.title,a?"":j.assistiveTitle),children:b}),(0,r.jsx)(d.A,{icon:i.ChevronDownIcon,className:(0,u.$)("references-chevron-down",j.chevronDownIcon)}),(0,r.jsx)(d.A,{icon:i.ChevronUpIcon,className:(0,u.$)("references-chevron-up",j.chevronUpIcon)})]}),(0,r.jsxs)(l.l,{className:(0,u.$)(a&&j.referencesListImmersiveContainer,j.ActionList),children:[y.map(e=>(0,r.jsx)(C,{reference:e,onClick:n},(0,p.Vb)(e))),v&&(0,r.jsxs)("div",{className:j.chatMessageReferenceListFooter,children:["Copilot used the"," ",(0,r.jsx)(c.A,{inline:!0,href:"https://gh.io/azure-ai-agent-with-bing-grounding",target:"_blank",rel:"noopener noreferrer",children:"Bing Search"})," ","tool."," ",(0,r.jsx)(c.A,{inline:!0,href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})]})]})]})}function A(e){return"snippet"===e.type&&!!e.languageName&&g.Yr.has(e.languageName)}function L({references:e,message:t,className:n,size:a,onClickReference:i,getReferenceVersion:s}){let{bigReferences:o,smallReferences:l}=(0,m.useMemo)(()=>(function(e){let t=(0,p.rT)(e),n=[],a=[];for(let e of t)D.has(e.type)?n.push(e):a.push(e);return{bigReferences:n,smallReferences:a}})(e),[e]),c=e=>"figma"===e.type&&h.W.immersiveFigmaIntegration?(0,r.jsx)(T,{reference:e,onClick:t=>i?.(e,t)},(0,p.Vb)(e)):(0,r.jsx)(S.BR,{message:t,reference:e,size:a,onClick:(t,n)=>i?.(e,n),getReferenceVersion:s},(0,p.Vb)(e));return(0,r.jsxs)(k.M,{"aria-label":"Attachments",className:(0,u.$)(j.referenceTokensOuterContainer,n),children:[o.map(c),(0,r.jsx)("div",{className:j.referenceTokensContainer,children:l.map(c)})]})}let D=new Set(["figma","image"]);try{R.displayName||(R.displayName="ChatMessageReferencesList")}catch{}try{L.displayName||(L.displayName="ChatMessageReferenceTokens")}catch{}try{D.displayName||(D.displayName="BIG_REFERENCE_TYPES")}catch{}},7104:(e,t,n)=>{n.d(t,{$:()=>d,b:()=>u});var a=n(74848),r=n(21728),i=n(81425),s=n(34164),o=n(96540);let l={container:"ChatScrollContainer-module__container--z_iNX"},c=(0,o.createContext)(null);function d(e){let t,n,d,u,m,p,h,f,g,y,_,x,v,b,S,C=(0,r.c)(30);C[0]!==e?({children:n,disabled:d,containerRef:t,...u}=e,C[0]=e,C[1]=t,C[2]=n,C[3]=d,C[4]=u):(t=C[1],n=C[2],d=C[3],u=C[4]);let j=(0,i.L)(t),N=(0,o.useRef)(null),[w,I]=(0,o.useState)(!1);C[5]!==j.current?(m=()=>{let e=new IntersectionObserver(e=>{let[t]=e;return I(!t?.isIntersecting)},{root:j.current,threshold:0,rootMargin:"50px"});return e.observe(N.current),()=>e.disconnect()},C[5]=j.current,C[6]=m):m=C[6],C[7]!==j?(p=[j],C[7]=j,C[8]=p):p=C[8],(0,o.useEffect)(m,p);let[E,T]=(0,o.useState)();C[9]!==j.current?(h=()=>{let e=()=>{if(!j.current)return;let e=getComputedStyle(j.current);T(`calc(${j.current.clientHeight}px - ${e.paddingTop} - ${e.paddingBottom})`)},t=new ResizeObserver(e);return e(),t.observe(j.current),()=>t.disconnect()},C[9]=j.current,C[10]=h):h=C[10],C[11]!==j?(f=[j],C[11]=j,C[12]=f):f=C[12],(0,o.useEffect)(h,f),C[13]!==d?(g=e=>{d||N.current?.scrollIntoView({behavior:e,block:"end"})},C[13]=d,C[14]=g):g=C[14];let k=g;return C[15]!==w||C[16]!==E||C[17]!==k?(_={isScrolledUp:w,scrollToBottom:k,scrollContainerHeight:E},C[15]=w,C[16]=E,C[17]=k,C[18]=_):_=C[18],y=_,C[19]!==u.className?(x=(0,s.$)(l.container,u.className),C[19]=u.className,C[20]=x):x=C[20],C[21]===Symbol.for("react.memo_cache_sentinel")?(v=(0,a.jsx)("div",{ref:N,style:{height:"1px",marginTop:"-1px"}}),C[21]=v):v=C[21],C[22]!==n||C[23]!==j||C[24]!==u||C[25]!==x?(b=(0,a.jsxs)("div",{ref:j,...u,className:x,children:[n,v]}),C[22]=n,C[23]=j,C[24]=u,C[25]=x,C[26]=b):b=C[26],C[27]!==y||C[28]!==b?(S=(0,a.jsx)(c.Provider,{value:y,children:b}),C[27]=y,C[28]=b,C[29]=S):S=C[29],S}let u=()=>{let e=(0,o.useContext)(c);if(!e)throw Error("useChatScroll may only be called in a descendant of ChatScrollContainer");return e};try{c.displayName||(c.displayName="ChatScrollContext")}catch{}try{d.displayName||(d.displayName="ChatScrollContainer")}catch{}},32744:(e,t,n)=>{n.d(t,{m:()=>u});var a=n(74848),r=n(21728),i=n(63557),s=n(55847),o=n(34164),l=n(96540),c=n(2635);let d={ConfirmationContainer:"Confirmation-module__ConfirmationContainer--LWT81",confirmationTitle:"Confirmation-module__confirmationTitle--e5Xlk",confirmationMessage:"Confirmation-module__confirmationMessage--APY8y",actionButtonsContainer:"Confirmation-module__actionButtonsContainer--MdVl0"};function u(e){let t,n,u,p,h,f,g,y=(0,r.c)(22),{confirmation:_,handleConfirmation:x,isLatestMessage:v}=e,b=(0,c.Pk)();if(y[0]!==_.confirmation||y[1]!==b.allClientConfirmations){let e=JSON.stringify(Object.values(_.confirmation).sort());t=b.allClientConfirmations?.includes(e),y[0]=_.confirmation,y[1]=b.allClientConfirmations,y[2]=t}else t=y[2];let S=t,{isWaitingOnCopilot:C,currentUserLogin:j}=b,[N,w]=(0,l.useState)(S&&!v);y[3]!==_.confirmation||y[4]!==_.onSubmit||y[5]!==_.title||y[6]!==j||y[7]!==x?(n=e=>{w(!0),x({state:e,userLogin:j,confirmation:_.confirmation},_.title,_.onSubmit)},y[3]=_.confirmation,y[4]=_.onSubmit,y[5]=_.title,y[6]=j,y[7]=x,y[8]=n):n=y[8];let I=n;return y[9]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.$)("border rounded-2",d.ConfirmationContainer),y[9]=u):u=y[9],y[10]!==_.title?(p=(0,a.jsx)(i.A,{as:"h3",className:d.confirmationTitle,children:_.title}),y[10]=_.title,y[11]=p):p=y[11],y[12]!==_.message?(h=_.message.split(`
`).map(m),y[12]=_.message,y[13]=h):h=y[13],y[14]!==N||y[15]!==I||y[16]!==C?(f=!N&&(0,a.jsxs)("div",{className:d.actionButtonsContainer,children:[(0,a.jsx)(s.Q,{disabled:C,variant:"primary",onClick:()=>I("accepted"),children:"Allow"}),(0,a.jsx)(s.Q,{disabled:C,onClick:()=>I("dismissed"),children:"Dismiss"})]}),y[14]=N,y[15]=I,y[16]=C,y[17]=f):f=y[17],y[18]!==p||y[19]!==h||y[20]!==f?(g=(0,a.jsxs)("div",{className:u,children:[p,h,f]}),y[18]=p,y[19]=h,y[20]=f,y[21]=g):g=y[21],g}function m(e){return(0,a.jsx)("p",{className:d.confirmationMessage,children:e},e)}try{u.displayName||(u.displayName="Confirmation")}catch{}},17005:(e,t,n)=>{n.d(t,{l:()=>u});var a=n(74848),r=n(21728),i=n(77274),s=n(96379),o=n(96540),l=n(35247),c=n(54508);let d=[{name:"Hate it",value:1,icon:i.YS,color:"veryDissatisfied"},{name:"Not great",value:2,icon:i.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:3,icon:i.Cf,color:"satisfied"},{name:"Love it",value:4,icon:i.mN,color:"verySatisfied"}],u=(0,o.forwardRef)(function(e,t){let n,u,m,p,h=(0,r.c)(7),{mode:f,returnFocusRef:g}=e,y=(0,o.useRef)(null),_=(0,o.useRef)(null),x=(0,o.useRef)(void 0);h[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:e=>{x.current=e,l.W.copilotChatInterviewSurvey?y.current?.openDialog():_.current?.openDialog(e)}}),h[0]=n):n=h[0],(0,o.useImperativeHandle)(t,n),h[1]!==f?(u=async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let a={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:f};try{(await (0,s.lS)("/github-copilot/feedback",{method:"POST",body:a})).ok||n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},h[1]=f,h[2]=u):u=h[2];let v=u;return h[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,a.jsx)(c.E,{ref:y,onClose:e=>{"no-thanks"===e&&_.current?.openDialog(x.current)}}),h[3]=m):m=h[3],h[4]!==v||h[5]!==g?(p=(0,a.jsxs)(a.Fragment,{children:[m,(0,a.jsx)(i.NE,{ref:_,options:d,onSubmit:v,returnFocusRef:g})]}),h[4]=v,h[5]=g,h[6]=p):p=h[6],p});u.displayName="ConversationFeedbackDialog"},82178:(e,t,n)=>{n.d(t,{W:()=>p});var a=n(74848),r=n(21728),i=n(74807),s=n(34164),o=n(96540);let l={copilotBadge:"CopilotBadgeV2-module__copilotBadge--w1X6Q",loading:"CopilotBadgeV2-module__loading--qeW04",animation:"CopilotBadgeV2-module__animation--ttRRT",assistive:"CopilotBadgeV2-module__assistive--YGoYv",clickableAnimationWrapper:"CopilotBadgeV2-module__clickableAnimationWrapper--i45z5"},c=[i.L.Tickle,i.L.Celebrate,i.L.JumpWiggle],d=["yes","absolutely","certainly","sure","definitely","right","correct","indeed","precisely","exactly","true","affirmative","agree","agreed"],u=["no","never","negative","wrong","false","untrue","cannot","can't","sorry","incorrect","deny","disagree","refuse","unfortunately"];function m(e){let t=new Date(e);return(new Date().getTime()-t.getTime())/1e3/60<.5}function p(e){let t,n,p,f,g,y,_,x,v,b,S=(0,r.c)(37),{isFirstMessage:C,isLoading:j,isLoadingSkills:N,isError:w,className:I,mode:E,message:T,createdAt:k}=e,R=void 0!==C&&C;S[0]!==k||S[1]!==R?(t=()=>({animationType:R&&(!k||m(k))?i.L.Celebrate:i.L.Static,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!1}),S[0]=k,S[1]=R,S[2]=t):t=S[2];let[A,L]=(0,o.useState)(t);S[3]!==k||S[4]!==w||S[5]!==j||S[6]!==N||S[7]!==T?(n=()=>{m(k)&&L(e=>(function({previousState:e,isLoadingSkills:t,isAffirmativeSentiment:n,isNegativeSentiment:a,isError:r,isLoading:s}){switch(e.animationType){case i.L.Static:if((n||a)&&!r&&!e.hasLoadedMessage)return{animationType:n?i.L.Affirmative:i.L.Negative,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};if(t)return{...e,animationType:i.L.Thinking,loopAnimation:!0};if(!s&&!e.hasLoadedMessage&&!r)return{animationType:i.L.Confirm,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};if(r&&!e.hasLoadedMessage)return{animationType:i.L.Negative,onFinish:i.L.Static,loopAnimation:!1,hasLoadedMessage:!0};return e;case i.L.Thinking:if(!t)return{...e,animationType:r?i.L.Negative:i.L.Static,loopAnimation:!1};return e;default:return e}})({previousState:e,isLoadingSkills:N||!1,isError:w||!1,isLoading:j||!1,isAffirmativeSentiment:function(e){if(e.length<200){let t=e.toLowerCase().split(/\W+/).filter(Boolean);return d.some(e=>t.includes(e.toLowerCase()))}return!1}(T),isNegativeSentiment:function(e){if(e.length<200){let t=e.toLowerCase().split(/\W+/).filter(Boolean);return u.some(e=>t.includes(e.toLowerCase()))}return!1}(T)}))},S[3]=k,S[4]=w,S[5]=j,S[6]=N,S[7]=T,S[8]=n):n=S[8],S[9]!==A.animationType||S[10]!==A.hasLoadedMessage||S[11]!==k||S[12]!==w||S[13]!==R||S[14]!==j||S[15]!==N||S[16]!==T?(p=[N,w,j,A.animationType,A.hasLoadedMessage,R,T,k],S[9]=A.animationType,S[10]=A.hasLoadedMessage,S[11]=k,S[12]=w,S[13]=R,S[14]=j,S[15]=N,S[16]=T,S[17]=p):p=S[17],(0,o.useEffect)(n,p),S[18]!==A||S[19]!==j?(f=()=>{j||L({...A,animationType:c[Math.floor(Math.random()*c.length)],onFinish:i.L.Static,loopAnimation:!1})},S[18]=A,S[19]=j,S[20]=f):f=S[20];let D=f,P=j&&l.loading;S[21]!==I||S[22]!==P?(g=(0,s.$)(l.copilotBadge,P,I),S[21]=I,S[22]=P,S[23]=g):g=S[23];let M=A.animationType;S[24]===Symbol.for("react.memo_cache_sentinel")?(y=()=>L(h),S[24]=y):y=S[24];let O=A.loopAnimation,B="assistive"===E&&l.assistive;return S[25]!==B?(_=(0,s.$)(l.animation,B),S[25]=B,S[26]=_):_=S[26],S[27]!==A.animationType||S[28]!==A.loopAnimation||S[29]!==_?(x=(0,a.jsx)(i.N,{animationType:M,onAnimationEnd:y,loopAnimation:O,className:_}),S[27]=A.animationType,S[28]=A.loopAnimation,S[29]=_,S[30]=x):x=S[30],S[31]!==D||S[32]!==x?(v=(0,a.jsx)("div",{onClick:D,className:l.clickableAnimationWrapper,children:x}),S[31]=D,S[32]=x,S[33]=v):v=S[33],S[34]!==v||S[35]!==g?(b=(0,a.jsx)("div",{className:g,"aria-label":"Copilot badge",role:"img",children:v}),S[34]=v,S[35]=g,S[36]=b):b=S[36],b}function h(e){return{...e,animationType:e.onFinish}}try{p.displayName||(p.displayName="CopilotBadge")}catch{}},94517:(e,t,n)=>{n.d(t,{h:()=>C,K:()=>b});var a=n(74848),r=n(21728),i=n(4817),s=n(38621),o=n(69410),l=n(81246),c=n(62227);function d({error:e,className:t}){let n=e.identifier||"",r=n.split("url=")[1]||"",i=n.match(/\/([^/]+)\/sso/),d=i&&i[1]||"";return d&&r?(0,a.jsx)("div",{className:t,"data-testid":"sso-banner",children:(0,a.jsx)("div",{className:c.A.Box,children:(0,a.jsx)("section",{"aria-label":"Single sign-on information",children:(0,a.jsx)(o.A,{sx:{borderRadius:2,borderWidth:1},className:c.A.Flash,children:(0,a.jsxs)("div",{children:[(0,a.jsx)(s.ShieldLockIcon,{}),(0,a.jsx)(l.A,{inline:!0,href:function({authorizeUrl:e}){let t=new URL(e,window.location.origin);return t.searchParams.set("return_to",window.location.toString()),t.toString()}({authorizeUrl:r}),children:"Single sign-on"})," ","to see results in the ",(0,a.jsx)("b",{children:d})," organization."]})})})})}):null}try{d.displayName||(d.displayName="SSOBannerFromError")}catch{}var u=n(29731),m=n(87330),p=n(55847),h=n(39820),f=n(34164),g=n(96540),y=n(25641),_=n(17285),x=n(77939),v=n(46665);function b(e){let t=(0,r.c)(8),{manager:n}=e,{message:i}=(0,v.V)(),{error:s}=i;if(!s)return null;switch(s.type){case"agentUnauthorized":{let e;return t[0]!==s||t[1]!==n?(e=(0,a.jsx)(S,{error:s,manager:n}),t[0]=s,t[1]=n,t[2]=e):e=t[2],e}case"agentRequest":{let e;return t[3]!==s.details?(e=(0,a.jsx)(C,{errors:[s.details]}),t[3]=s.details,t[4]=e):e=t[4],e}default:{let e,n;t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,u.G)("error-message-banner"),t[5]=e):e=t[5];let r=s.message||"Something went wrong";return t[6]!==r?(n=(0,a.jsx)(h.l,{...e,title:"Error",hideTitle:!0,description:r,variant:"warning"}),t[6]=r,t[7]=n):n=t[7],n}}}function S(e){let t,n,i,o,l,c,d,h,_,v,b,S=(0,r.c)(25),{error:C,manager:j}=e,{details:N}=C,[w,I]=(0,g.useState)(!1);S[0]!==N.name||S[1]!==j?(t=()=>{I(!0),j.dispatch({type:"MESSAGE_ADDED",message:(0,y.Y6)({role:"user",content:`Dismissed the connection with ${N.name}.`,mediaContent:[],parentMessageID:j.FindLastMessageID()})}),j.dispatch({type:"MESSAGE_ADDED",message:(0,y.Y6)({role:"assistant",content:`I was unable to connect you to ${N.name} because you cancelled the authentication.`,mediaContent:[],parentMessageID:j.FindLastMessageID()})})},S[0]=N.name,S[1]=j,S[2]=t):t=S[2];let E=t;S[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,u.G)("agent-unauthorized-error"),S[3]=n):n=S[3],S[4]!==w||S[5]!==E?(i=!w&&(0,a.jsx)(m.K,{"aria-label":"Close",className:"position-absolute top-0 right-0 mt-2 mr-2",icon:s.XIcon,onClick:E,variant:"invisible",unsafeDisableTooltip:!0}),S[4]=w,S[5]=E,S[6]=i):i=S[6],S[7]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsx)(s.MarkGithubIcon,{size:48,className:"border circle borderColor-muted"}),l=(0,a.jsx)(s.LinkIcon,{className:"fgColor-muted"}),c=(0,f.$)("avatar",x.A.agentUnauthorizedAvatar,"border circle borderColor-muted"),S[7]=o,S[8]=l,S[9]=c):(o=S[7],l=S[8],c=S[9]);let T=`icon for ${N.name}`;return S[10]!==N.avatar_url||S[11]!==T?(d=(0,a.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[o,l,(0,a.jsx)("img",{className:c,src:N.avatar_url,alt:T})]}),S[10]=N.avatar_url,S[11]=T,S[12]=d):d=S[12],S[13]!==N.name?(_=(0,a.jsxs)("p",{className:"h4 m-0 text-center",children:["Connect with ",N.name]}),h=(0,a.jsxs)("p",{className:"fgColor-muted text-center",children:["To use the ",N.name," extension, you\u2019ll need to connect your GitHub account to your ",N.name," account."]}),S[13]=N.name,S[14]=h,S[15]=_):(h=S[14],_=S[15]),S[16]!==N.authorize_url||S[17]!==w?(v=!w&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Q,{as:"a",variant:"primary",size:"large",className:"width-full",href:N.authorize_url,rel:"noopener",target:"_blank",children:"Connect"}),(0,a.jsxs)("p",{className:"fgColor-muted text-center f6 m-0",children:["Click connect to be redirected to ",N.authorize_url]})]}),S[16]=N.authorize_url,S[17]=w,S[18]=v):v=S[18],S[19]!==h||S[20]!==v||S[21]!==i||S[22]!==d||S[23]!==_?(b=(0,a.jsxs)("div",{className:"position-relative d-flex flex-column flex-items-center gap-3 border rounded-2 p-5",...n,children:[i,d,_,h,v]}),S[19]=h,S[20]=v,S[21]=i,S[22]=d,S[23]=_,S[24]=b):b=S[24],b}function C(e){let t,n,i=(0,r.c)(4),{errors:s}=e;return i[0]!==s?(t=s.map(j),i[0]=s,i[1]=t):t=i[1],i[2]!==t?(n=(0,a.jsx)("div",{className:"d-flex flex-column gap-2",children:t}),i[2]=t,i[3]=n):n=i[3],n}function j(e,t){var n,r,o,l,c;return n=e,r=t,"sso"===n.code?(0,a.jsx)(d,{error:n,className:"mt-3"},r):(o=n,l=r,(0,a.jsxs)("div",{className:"p-3 border rounded-2",children:[(0,a.jsxs)("div",{className:"text-bold",children:[(0,a.jsx)(s.AlertFillIcon,{className:"mr-1 fgColor-attention"})," ","http"===(c=o).type?`${c.code} ${c.identifier}`:`${(0,_.Z)(c.type)} error`]}),(0,a.jsx)(i.To,{markdown:o.message})]},l))}try{b.displayName||(b.displayName="ErrorMessage")}catch{}try{S.displayName||(S.displayName="AgentUnauthorizedError")}catch{}try{C.displayName||(C.displayName="AgentErrors")}catch{}},34363:(e,t,n)=>{n.d(t,{G:()=>x});var a=n(74848),r=n(21728),i=n(38621),s=n(87330),o=n(96540),l=n(2635),c=n(33592),d=n(46665);let u={submittedFeedbackButton:"Feedback-module__submittedFeedbackButton--BrkHM"};var m=n(77274),p=n(35247),h=n(79064),f=n(54508);let g={thumbsUp:"MessageFeedbackDialog-module__thumbsUp--go17F",thumbsDown:"MessageFeedbackDialog-module__thumbsDown--sluhP"},y=[{name:"Bad",value:"NEGATIVE",icon:(0,a.jsx)(i.ThumbsdownIcon,{className:g.thumbsDown}),color:"bad"},{name:"Good",value:"POSITIVE",icon:(0,a.jsx)(i.ThumbsupIcon,{className:g.thumbsUp}),color:"good"}],_=(0,o.forwardRef)(function({messageId:e,threadId:t,returnFocusRef:n,onSubmitted:r,onClose:i},s){let l=(0,c.b)(),d=(0,o.useRef)(null),u=(0,o.useRef)(null),g=(0,o.useRef)(void 0);(0,o.useImperativeHandle)(s,()=>({openDialog:e=>{g.current=e,p.W.copilotChatInterviewSurvey?d.current?.openDialog():u.current?.openDialog(e)}}));let _=async(n,a)=>{let i=[];if(null==n&&i.push("Please select a rating."),a.length>500&&i.push("Please keep your feedback within 500 characters or less."),i.length>0)return i;try{(await l.service.sendFeedback({feedback:n,feedbackChoice:[],messageId:e,threadId:t,textResponse:a})).ok?r?.(n):i.push("An error occurred while submitting your feedback.")}catch{i.push("An error occurred while submitting your feedback.")}return i};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.E,{ref:d,title:"Give additional feedback",onClose:e=>{"no-thanks"===e?u.current?.openDialog(g.current):i?.()}}),(0,a.jsx)(m.NE,{title:"Give additional feedback",ref:u,options:y,onSubmit:_,onClose:i,requestID:h.Jt.getRequestID(e),returnFocusRef:n})]})});function x(e){let t,n,m,p,h,f=(0,r.c)(20),{iconSize:g}=e,{message:y}=(0,d.V)(),x=y.id,v=y.threadID,b=(0,c.b)(),S=(0,o.useRef)(null),C=(0,o.useRef)(null);f[0]!==b||f[1]!==y?(t=e=>{b.handleFeedback(y,e)},f[0]=b,f[1]=y,f[2]=t):t=f[2];let j=t,{optedInToUserFeedback:N}=(0,l.Pk)();f[3]!==b.service||f[4]!==x||f[5]!==j||f[6]!==N||f[7]!==v?(n=e=>{b.service.sendFeedback({feedback:e,messageId:x,threadId:v}),j(e),N?S.current?.openDialog(e):C.current?.focus()},f[3]=b.service,f[4]=x,f[5]=j,f[6]=N,f[7]=v,f[8]=n):n=f[8];let w=n;return f[9]!==g||f[10]!==y.feedback||f[11]!==w?(m=null!=y.feedback?(0,a.jsx)(s.K,{ref:C,"aria-label":`${y.feedback.toLocaleLowerCase()} feedback submitted`,icon:"POSITIVE"===y.feedback?i.ThumbsupIcon:i.ThumbsdownIcon,variant:"invisible",size:g,"aria-disabled":!0,className:u.submittedFeedbackButton}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.K,{icon:i.ThumbsupIcon,"aria-label":"Good response",onClick:()=>w("POSITIVE"),variant:"invisible",size:g}),(0,a.jsx)(s.K,{icon:i.ThumbsdownIcon,size:g,"aria-label":"Bad response",onClick:()=>w("NEGATIVE"),variant:"invisible"})]}),f[9]=g,f[10]=y.feedback,f[11]=w,f[12]=m):m=f[12],f[13]!==x||f[14]!==j||f[15]!==v?(p=(0,a.jsx)(_,{ref:S,messageId:x,threadId:v,onSubmitted:j,returnFocusRef:C}),f[13]=x,f[14]=j,f[15]=v,f[16]=p):p=f[16],f[17]!==m||f[18]!==p?(h=(0,a.jsxs)(a.Fragment,{children:[m,p]}),f[17]=m,f[18]=p,f[19]=h):h=f[19],h}_.displayName="MessageFeedbackDialog";try{x.displayName||(x.displayName="Feedback")}catch{}},11633:(e,t,n)=>{n.d(t,{WA:()=>e_});var a,r,i,s,o,l,c,d,u,m,p,h,f,g=n(74848),y=n(21728),_=n(41738),x=n(38621),v=n(1002),b=n(63557);n(51213),n(35247);var S=n(79064),C=n(81246),j=n(12004),N=n(55847),w=n(52446),I=n(30729),E=n(34164),T=n(96540),k=n(25641),R=n(2635);let A={functionCallButton:"FunctionCallButton-module__functionCallButton--_WmIK"},L={functionReferenceListContainer:"FunctionLoadingUtils-module__functionReferenceListContainer--_vK99",functionLoading:"FunctionLoadingUtils-module__functionLoading--APVUB",spinner:"FunctionLoadingUtils-module__spinner--LI0rU",functionReferenceButton:"FunctionLoadingUtils-module__functionReferenceButton--AiuYU",functionReferenceButtonContents:"FunctionLoadingUtils-module__functionReferenceButtonContents--fRReb",functionReferenceTitle:"FunctionLoadingUtils-module__functionReferenceTitle--pFYb2",functionReferenceListFooter:"FunctionLoadingUtils-module__functionReferenceListFooter--Nvw6l",errorContainer:"FunctionLoadingUtils-module__errorContainer--uwToA",errorHeading:"FunctionLoadingUtils-module__errorHeading--AXPQe",errorMessage:"FunctionLoadingUtils-module__errorMessage--GB_0R",toolDescriptionText:"FunctionLoadingUtils-module__toolDescriptionText--wLOuU",toolNameHighlight:"FunctionLoadingUtils-module__toolNameHighlight--Jpfyk",functionTitleContainer:"FunctionLoadingUtils-module__functionTitleContainer--jes_G"};function D(e){return(e.references?.[0]?.results??[]).map(P)}function P(e){return{title:e.title,url:e.url,description:e.excerpt,leadingIcon:x.GlobeIcon}}function M(e){let t=e.references?.[0];return(t?.results??[]).map(e=>({title:e.title,url:e.url,leadingIcon:"bing_search"===e.reference_type?_._:x.GlobeIcon}))}function O(e){return(e.references??[]).map(B)}function B(e){return"file-v2"===e.type?{description:`${e.repoName}/${e.path}`,leadingIcon:x.FileIcon,reference:e,title:(0,k.Xo)(e),url:e.url}:void 0}let F=(e,t)=>t?`${e} on ref ${t}`:e;function U(e){return(e.references??[]).map($)}function $(e){return"alert.api"===e.type?{description:"Alert",leadingIcon:V,title:"Alert"}:void 0}function V(){return(0,g.jsx)(x.ShieldIcon,{})}function q(e){return(e.references??[]).map(W)}function W(e){return"discussion"===e.type?{title:e.title??"Discussion",description:`Using discussion #${e.number} for ${e.repository.owner}/${e.repository.name}`,url:e.url,leadingIcon:x.CommentDiscussionIcon}:void 0}function G(e){let t,n,a=(0,y.c)(3),{children:r}=e;return a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)("span",{className:L.spinner,children:(0,g.jsx)(j.A,{size:"small"})}),a[0]=t):t=a[0],a[1]!==r?(n=(0,g.jsxs)("div",{className:L.functionLoading,children:[t,(0,g.jsx)("span",{children:r})]}),a[1]=r,a[2]=n):n=a[2],n}function H(e){return(e.references??[]).filter(Q).map(z)}function z(e){return{description:`${e.id} \xb7 ${e.repoOwner}/${e.repoName}`,leadingIcon:x.PlayIcon,title:"Job"}}function Q(e){return"job"===e.type}function K(e){return e.jobId?`job ${e.jobId}`:e.runId?`workflow run ${e.runId}`:e.pullRequestNumber?`pull request ${e.pullRequestNumber}`:e.workflowPath?`workflow ${e.workflowPath}`:"unknown job"}function J(e){let t,n,a=(0,y.c)(27),{additionalFooterContent:r,chatManager:i,errorButtonText:s,errorTitle:o,functionCall:l,inProgressMessage:c,noResultsMessage:d,resultsMapper:u,successButtonText:m,toolLink:p,toolName:h,useSelectReference:f}=e,[_,b]=(0,T.useState)(!1),S=(0,T.useId)();if(a[0]!==r||a[1]!==i||a[2]!==S||a[3]!==s||a[4]!==o||a[5]!==_||a[6]!==l||a[7]!==c||a[8]!==d||a[9]!==u||a[10]!==m||a[11]!==p||a[12]!==h||a[13]!==f){n=Symbol.for("react.early_return_sentinel");e:{let e,y,C,j,T=u(l),{status:k,errorMessage:R}=l;if(l.references?.length===1){let e=l.references[0];if(e)switch(e.type){case"text":k="error",R=e.text;break;case"unsupported":k="unsupported",R=e.text}}if("started"===k){let e;a[16]!==c?(e=(0,g.jsx)(G,{children:c}),a[16]=c,a[17]=e):e=a[17],n=e;break e}a[18]===Symbol.for("react.memo_cache_sentinel")?(e=(0,E.$)(L.functionReferenceButton,A.functionCallButton),a[18]=e):e=a[18];let D=_?x.ChevronUpIcon:x.ChevronDownIcon;a[19]===Symbol.for("react.memo_cache_sentinel")?(y=()=>b(Y),a[19]=y):y=a[19];let P="error"===k?s:"unsupported"===k?d:m;a[20]!==P?(C=(0,g.jsx)("span",{className:L.functionReferenceButtonContents,children:P}),a[20]=P,a[21]=C):C=a[21],a[22]!==S||a[23]!==_||a[24]!==D||a[25]!==C?(j=(0,g.jsx)(N.Q,{"aria-expanded":_,"aria-controls":S,className:e,leadingVisual:D,onClick:y,variant:"invisible",children:C}),a[22]=S,a[23]=_,a[24]=D,a[25]=C,a[26]=j):j=a[26],t=(0,g.jsxs)(g.Fragment,{children:[j,_&&(0,g.jsxs)("div",{id:S,className:L.functionReferenceListContainer,children:[(0,g.jsx)(w.l,{children:"error"===k?(0,g.jsxs)(w.l.Item,{children:[o,(0,g.jsx)(w.l.Description,{variant:"block",children:R})]}):"unsupported"===k?(0,g.jsxs)(w.l.Item,{children:[R,(0,g.jsx)(w.l.Description,{truncate:!0,children:""})]}):0===T.length?(0,g.jsxs)(w.l.Item,{children:[d,(0,g.jsx)(w.l.Description,{truncate:!0,children:"Try modifying your query by reframing your question."})]}):T.map((e,t)=>e&&(0,g.jsxs)(w.l.LinkItem,{className:"width-fit",href:e.url,onClick:t=>{f&&e.reference&&(i.selectReference(e.reference),t.preventDefault())},target:"_blank",rel:"noopener",children:[e.leadingIcon&&(0,g.jsx)(w.l.LeadingVisual,{children:(0,g.jsx)(I.A,{icon:e.leadingIcon,sx:{...e.leadingIconColor&&{color:e.leadingIconColor}}})}),(0,g.jsx)(v.A,{className:L.functionReferenceTitle,title:e.title,children:e.title}),(0,g.jsx)(w.l.Description,{variant:"block",children:e.description})]},t))}),(0,g.jsxs)("span",{className:L.functionReferenceListFooter,children:["Copilot used the"," ",(0,g.jsx)("a",{href:p,target:"_blank",rel:"noopener noreferrer",children:h})," ","tool",r&&(0,g.jsxs)(g.Fragment,{children:[". ",r]})]})]})]})}a[0]=r,a[1]=i,a[2]=S,a[3]=s,a[4]=o,a[5]=_,a[6]=l,a[7]=c,a[8]=d,a[9]=u,a[10]=m,a[11]=p,a[12]=h,a[13]=f,a[14]=t,a[15]=n}else t=a[14],n=a[15];return n!==Symbol.for("react.early_return_sentinel")?n:t}function Y(e){return!e}function X(e){return"text"!==e.type}function Z(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ee(e){let t=e.references?.[0];return[{title:t?.title||"",url:t?.url||"",description:""}]}let et="https://docs.github.com/en/support/contacting-github-support/using-copilot-in-github-support";function en(e){return(e.references?.[0]?.results??[]).map(ea)}function ea(e){return{title:e.title,url:e.url,description:e.url}}function er(e){return(e.references??[]).map(e=>"file"===e.type||"snippet"===e.type?{description:(0,k.Z8)(e),leadingIcon:x.CodeIcon,reference:e,title:(0,k.z$)(e),url:e.url}:void 0)}try{(a=function(e){let t,n,a=(0,y.c)(8),{chatManager:r,functionCall:i,skillArgs:s}=e,o=s.query;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)(C.A,{href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"}),a[0]=t):t=a[0];let l=`An error occurred when searching for \u{201C}${o}\u{201D}`,c=`Searching the web for \u{201C}${o}\u{201D}`,d=`No web search results for \u{201C}${o}\u{201D} were found`,u=`Using web search results for \u{201C}${o}\u{201D}`;return a[1]!==r||a[2]!==i||a[3]!==l||a[4]!==c||a[5]!==d||a[6]!==u?(n=(0,g.jsx)(J,{additionalFooterContent:t,chatManager:r,errorButtonText:l,errorTitle:"An error occurred when searching the web",toolLink:"https://bing.com",toolName:"Bing search",functionCall:i,inProgressMessage:c,noResultsMessage:d,resultsMapper:D,successButtonText:u,useSelectReference:!1}),a[1]=r,a[2]=i,a[3]=l,a[4]=c,a[5]=d,a[6]=u,a[7]=n):n=a[7],n}).displayName||(a.displayName="BingFunctionButton")}catch{}try{(r=function(e){let t,n,a=(0,y.c)(8),{chatManager:r,functionCall:i,skillArgs:s}=e,o=s.query;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)(C.A,{href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"}),a[0]=t):t=a[0];let l=`An error occurred when searching for \u{201C}${o}\u{201D}`,c=`Searching the web for \u{201C}${o}\u{201D}`,d=`No web search results for \u{201C}${o}\u{201D} were found`,u=`Using web search results for \u{201C}${o}\u{201D}`;return a[1]!==r||a[2]!==i||a[3]!==l||a[4]!==c||a[5]!==d||a[6]!==u?(n=(0,g.jsx)(J,{additionalFooterContent:t,chatManager:r,errorButtonText:l,errorTitle:"An error occurred when searching the web",toolLink:"https://gh.io/azure-ai-agent-with-bing-grounding",toolName:"Bing Search",functionCall:i,inProgressMessage:c,noResultsMessage:d,resultsMapper:M,successButtonText:u,useSelectReference:!1}),a[1]=r,a[2]=i,a[3]=l,a[4]=c,a[5]=d,a[6]=u,a[7]=n):n=a[7],n}).displayName||(r.displayName="BingGroundingFunctionButton")}catch{}try{(i=function(e){var t;let n,a=(0,y.c)(9),{chatManager:r,functionCall:i,skillArgs:s,useSelectReference:o}=e,l=s.query,c="scopingQuery"in s?s.scopingQuery:s.repoOwner&&s.repoName?`repo:${s.repoOwner}/${s.repoName}`:void 0;c&&(c=(t=c).startsWith("repo:")?t.substring(5):t);let d="semantic-code-search"===s.kind?"semantic":"lexical",u=`An error occurred when searching for \u{201C}${l}\u{201D}`,m=`${d.charAt(0).toUpperCase()+d.slice(1)} search`,p=`Searching for \u{201C}${l}\u{201D}${c&&` in ${c}`}`,h=`No results were found when ${d} searching for \u{201C}${l}\u{201D}${c&&` in ${c}`}`,f=`Using ${d} search results for \u{201C}${l}\u{201D}${c&&` in ${c}`}`;return a[0]!==r||a[1]!==i||a[2]!==u||a[3]!==m||a[4]!==p||a[5]!==h||a[6]!==f||a[7]!==o?(n=(0,g.jsx)(J,{chatManager:r,errorButtonText:u,errorTitle:"An error occurred when searching code",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:m,functionCall:i,inProgressMessage:p,noResultsMessage:h,resultsMapper:er,successButtonText:f,useSelectReference:o}),a[0]=r,a[1]=i,a[2]=u,a[3]=m,a[4]=p,a[5]=h,a[6]=f,a[7]=o,a[8]=n):n=a[8],n}).displayName||(i.displayName="CodeSearchButton")}catch{}try{(s=function(e){let t,n=(0,y.c)(8),{chatManager:a,functionCall:r,skillArgs:i,useSelectReference:s}=e,o=i.query,l=i.kbID,{knowledgeBases:c}=(0,R.Pk)(),d=c.find(e=>e.id===l),u=d?.name??"the knowledge base",m=`An error occurred when searching for \u{201C}${o}\u{201D} in ${u}`,p=`Searching the ${u} knowledge base for \u{201C}${o}\u{201D}`,h=`No results were found when searching the ${u} knowledge base for \u{201C}${o}\u{201D}`,f=`Using search results from the ${u} knowledge base for \u{201C}${o}\u{201D}`;return n[0]!==a||n[1]!==r||n[2]!==m||n[3]!==p||n[4]!==h||n[5]!==f||n[6]!==s?(t=(0,g.jsx)(J,{chatManager:a,errorButtonText:m,errorTitle:"An error occurred when searching the knowledge base",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Knowledge base search",functionCall:r,inProgressMessage:p,noResultsMessage:h,resultsMapper:er,successButtonText:f,useSelectReference:s}),n[0]=a,n[1]=r,n[2]=m,n[3]=p,n[4]=h,n[5]=f,n[6]=s,n[7]=t):t=n[7],t}).displayName||(s.displayName="KnowledgeBaseSearchButton")}catch{}try{(o=function(e){let t,n,a,r,i,s=(0,y.c)(20),{chatManager:o,functionCall:l,skillArgs:c,useSelectReference:d}=e,{path:u,repo:m,ref:p}=c,h=`An error occurred when finding \u{201C}${u}\u{201D} in ${m}`;s[0]!==p||s[1]!==h?(t=F(h,p),s[0]=p,s[1]=h,s[2]=t):t=s[2];let f=`File results for \u{201C}${u}\u{201D} in ${m}`;s[3]!==p||s[4]!==f?(n=F(f,p),s[3]=p,s[4]=f,s[5]=n):n=s[5];let _=`No files matching \u{201C}${u}\u{201D} in ${m} were found`;s[6]!==p||s[7]!==_?(a=F(_,p),s[6]=p,s[7]=_,s[8]=a):a=s[8];let x=`Using results for \u{201C}${u}\u{201D} in ${m}`;return s[9]!==p||s[10]!==x?(r=F(x,p),s[9]=p,s[10]=x,s[11]=r):r=s[11],s[12]!==o||s[13]!==l||s[14]!==t||s[15]!==n||s[16]!==a||s[17]!==r||s[18]!==d?(i=(0,g.jsx)(J,{chatManager:o,errorButtonText:t,errorTitle:"An error occurred when finding a file",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get file",functionCall:l,inProgressMessage:n,noResultsMessage:a,resultsMapper:O,successButtonText:r,useSelectReference:d}),s[12]=o,s[13]=l,s[14]=t,s[15]=n,s[16]=a,s[17]=r,s[18]=d,s[19]=i):i=s[19],i}).displayName||(o.displayName="GetFileButton")}catch{}try{(l=function(e){let t,n,a,r,i,s,o=(0,y.c)(23),{chatManager:l,functionCall:c,skillArgs:d,useSelectReference:u}=e,{path:m,repo:p,ref:h}=d,f=`An error occurred when finding file changes for \u{201C}${m}\u{201D} in ${p}`;o[0]!==h||o[1]!==f?(t=F(f,h),o[0]=h,o[1]=f,o[2]=t):t=o[2];let _=`File changes results for \u{201C}${m} in ${p}`;o[3]!==h||o[4]!==_?(n=F(_,h),o[3]=h,o[4]=_,o[5]=n):n=o[5];let v=`No files changes were found for \u{201C}${m}\u{201D} in ${p}`;o[6]!==h||o[7]!==v?(a=F(v,h),o[6]=h,o[7]=v,o[8]=a):a=o[8],o[9]!==m?(r=e=>(e.references??[]).map(e=>"file-changes"===e.type?{description:`${e.repository.name}/${m}`,leadingIcon:x.FileIcon,reference:e,title:(0,k.Xo)(e),url:e.url}:void 0),o[9]=m,o[10]=r):r=o[10];let b=`Using results for \u{201C}${m}\u{201D} in ${p}`;return o[11]!==h||o[12]!==b?(i=F(b,h),o[11]=h,o[12]=b,o[13]=i):i=o[13],o[14]!==l||o[15]!==c||o[16]!==t||o[17]!==n||o[18]!==a||o[19]!==r||o[20]!==i||o[21]!==u?(s=(0,g.jsx)(J,{chatManager:l,errorButtonText:t,errorTitle:"An error occurred when finding the file changes",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get file changes",functionCall:c,inProgressMessage:n,noResultsMessage:a,resultsMapper:r,successButtonText:i,useSelectReference:u}),o[14]=l,o[15]=c,o[16]=t,o[17]=n,o[18]=a,o[19]=r,o[20]=i,o[21]=u,o[22]=s):s=o[22],s}).displayName||(l.displayName="GetFileChangesButton")}catch{}try{(c=function(e){let t,n=(0,y.c)(5),{chatManager:a,functionCall:r,skillArgs:i,useSelectReference:s}=e,o=`An error occurred when fetching alert information for ${i.url}`;return n[0]!==a||n[1]!==r||n[2]!==o||n[3]!==s?(t=(0,g.jsx)(J,{chatManager:a,errorButtonText:o,errorTitle:"An error occurred when fetching alert information",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get alert information",functionCall:r,inProgressMessage:"Fetching alert information",noResultsMessage:"Unable to fetch alert information",resultsMapper:U,successButtonText:"Using alert information",useSelectReference:s}),n[0]=a,n[1]=r,n[2]=o,n[3]=s,n[4]=t):t=n[4],t}).displayName||(c.displayName="GetAlertButton")}catch{}try{(d=function(e){let t,n=(0,y.c)(7),{chatManager:a,functionCall:r,skillArgs:i,useSelectReference:s}=e,o=`Fetching discussion ${i.discussionNumber}`,l=`Unable to fetch discussion ${i.discussionNumber}`,c=`Using discussion #${i.discussionNumber}`;return n[0]!==a||n[1]!==r||n[2]!==o||n[3]!==l||n[4]!==c||n[5]!==s?(t=(0,g.jsx)(J,{chatManager:a,errorButtonText:"An error occurred when fetching discussion",errorTitle:"An error occurred when fetching discussion",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get discussion",functionCall:r,inProgressMessage:o,noResultsMessage:l,resultsMapper:q,successButtonText:c,useSelectReference:s}),n[0]=a,n[1]=r,n[2]=o,n[3]=l,n[4]=c,n[5]=s,n[6]=t):t=n[6],t}).displayName||(d.displayName="GetDiscussionButton")}catch{}try{G.displayName||(G.displayName="FunctionLoading")}catch{}try{(u=function(e){let t=(0,y.c)(1),{functionCall:n}=e,{status:a}=n;if("started"===a){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(G,{children:"Coming up with a plan"}),t[0]=e):e=t[0],e}}).displayName||(u.displayName="PlanButton")}catch{}try{(m=function(e){let t,n=(0,y.c)(8),{chatManager:a,functionCall:r,skillArgs:i,useSelectReference:s}=e,o=K(i),l=`An error occurred when fetching logs for ${o} in ${i.repo}`,c=`Fetching logs for ${o} in ${i.repo}`,d=`Unable to fetch logs for ${o} in ${i.repo}`,u=`Using logs for ${o} in ${i.repo}`;return n[0]!==a||n[1]!==r||n[2]!==l||n[3]!==c||n[4]!==d||n[5]!==u||n[6]!==s?(t=(0,g.jsx)(J,{chatManager:a,errorButtonText:l,errorTitle:"An error occurred when fetching a commit",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:"Get job logs",functionCall:r,inProgressMessage:c,noResultsMessage:d,resultsMapper:H,successButtonText:u,useSelectReference:s}),n[0]=a,n[1]=r,n[2]=l,n[3]=c,n[4]=d,n[5]=u,n[6]=s,n[7]=t):t=n[7],t}).displayName||(m.displayName="GetJobLogsButton")}catch{}try{J.displayName||(J.displayName="ExpandableFunctionButton")}catch{}try{(p=function(e){let t,n,a,r=(0,y.c)(15),{chatManager:i,functionCall:s,skillArgs:o,useSelectReference:l}=e,c="GitHub API",d=s.references?.[0];if(d){let e=d.type;if(e.endsWith(".api")){let t=e.split(".")[0];t&&(c=`${t.split("-").map(Z).join(" ")} API`)}else"api-response"===d.type&&(c=`${d.resourceType} API`)}r[0]!==o.endpoint||r[1]!==o.endpointDescription?(t=o.endpointDescription?{errorButtonText:`An error occurred when using the GitHub API to ${o.endpointDescription}`,inProgressMessage:`Using the GitHub API to ${o.endpointDescription}`,noResultsMessage:`Unable to use the GitHub API to ${o.endpointDescription}`,successButtonText:`Using the GitHub API to ${o.endpointDescription}`}:{errorButtonText:`An error occurred when fetching from ${o.endpoint}`,inProgressMessage:`Fetching endpoint ${o.endpoint}`,noResultsMessage:`Unable to fetch from ${o.endpoint}`,successButtonText:`Using endpoint ${o.endpoint}`},r[0]=o.endpoint,r[1]=o.endpointDescription,r[2]=t):t=r[2];let u=t;return r[3]!==o?(n=e=>e.references?.filter(X).map(e=>(function(e,t){switch(e.type){case"release.api":return{description:`Release ${e.tag_name} \xb7 ${t.repo}`,leadingIcon:x.TagIcon,title:e.name??"Release",url:e.html_url};case"issue.api":return{description:`#${e.number} \xb7 ${t.repo}`,leadingIcon:x.IssueOpenedIcon,title:e.title??"Issue",url:e.html_url};case"pull-request.api":return{description:`#${e.number} \xb7 ${t.repo}`,leadingIcon:x.GitPullRequestIcon,title:e.title??"Pull request",url:e.html_url};case"repository.api":return{description:e.description||"",title:e.name,leadingIcon:x.RepoIcon,url:e.html_url};case"commit.api":return{description:`${e.sha} \xb7 ${t.repo}`,leadingIcon:x.GitCommitIcon,title:e.commit.message??"Commit",url:e.html_url};case"topic.api":return{description:e.short_description||"",leadingIcon:x.HashIcon,title:e.display_name??e.name};case"api-response":switch(e.resourceType){case"Repository":return{description:e.data.description||"",title:e.data.name,leadingIcon:x.RepoIcon,url:e.data.html_url};case"Issue":return{description:`#${e.data.number} \xb7 ${t.repo}`,leadingIcon:x.IssueOpenedIcon,title:e.data.title??"Issue",url:e.data.html_url};case"Release":return{description:`Release ${e.data.tag_name} \xb7 ${t.repo}`,leadingIcon:x.TagIcon,title:e.data.name??"Release",url:e.data.html_url};case"PullRequest":return{description:`#${e.data.number} \xb7 ${t.repo}`,leadingIcon:x.GitPullRequestIcon,title:e.data.title??"Pull request",url:e.data.html_url};case"Commit":return{description:`${e.data.sha} \xb7 ${t.repo}`,leadingIcon:x.GitCommitIcon,title:e.data.commit.message??"Commit",url:e.data.html_url};case"Topic":return{description:e.data.short_description||"",leadingIcon:x.HashIcon,title:e.data.display_name??e.data.name};default:return{description:"API endpoint returned results successfully",leadingIcon:x.InfoIcon,title:"API results"}}default:return{description:"API endpoint returned results successfully",leadingIcon:x.InfoIcon,title:"API results"}}})(e,o))??[],r[3]=o,r[4]=n):n=r[4],r[5]!==i||r[6]!==s||r[7]!==u.errorButtonText||r[8]!==u.inProgressMessage||r[9]!==u.noResultsMessage||r[10]!==u.successButtonText||r[11]!==n||r[12]!==c||r[13]!==l?(a=(0,g.jsx)(J,{chatManager:i,errorTitle:"An error occurred when fetching data from the GitHub API",toolLink:"https://docs.github.com/en/enterprise-cloud@latest/copilot/github-copilot-enterprise/copilot-chat-in-github/using-github-copilot-chat-in-githubcom#currently-available-skills",toolName:c,functionCall:s,errorButtonText:u.errorButtonText,inProgressMessage:u.inProgressMessage,noResultsMessage:u.noResultsMessage,successButtonText:u.successButtonText,useSelectReference:l,resultsMapper:n}),r[5]=i,r[6]=s,r[7]=u.errorButtonText,r[8]=u.inProgressMessage,r[9]=u.noResultsMessage,r[10]=u.successButtonText,r[11]=n,r[12]=c,r[13]=l,r[14]=a):a=r[14],a}).displayName||(p.displayName="GetGitHubDataButton")}catch{}try{(h=function(e){let t,n=(0,y.c)(7),{chatManager:a,functionCall:r,skillArgs:i}=e,s=`An error occurred when retrieving \u{201C}${i.name}\u{201D}`,o=`Getting Figma file \u{201C}${i.name}\u{201D}`,l=`Unable to retrieve \u{201C}${i.name}\u{201D}`,c=`Using result from \u{201C}${i.name}\u{201D}`;return n[0]!==a||n[1]!==r||n[2]!==s||n[3]!==o||n[4]!==l||n[5]!==c?(t=(0,g.jsx)(J,{chatManager:a,errorButtonText:s,errorTitle:"An error occurred retrieving Figma file",toolLink:"https://figma.com",toolName:"Get Figma",functionCall:r,inProgressMessage:o,noResultsMessage:l,resultsMapper:ee,successButtonText:c,useSelectReference:!1}),n[0]=a,n[1]=r,n[2]=s,n[3]=o,n[4]=l,n[5]=c,n[6]=t):t=n[6],t}).displayName||(h.displayName="FigmaButton")}catch{}try{(f=function(e){let t,n,a=(0,y.c)(8),{chatManager:r,functionCall:i,skillArgs:s}=e,o=s.rawUserQuery;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.jsx)(C.A,{href:et,rel:"nofollow",target:"_blank",children:"Information on using Copilot in GitHub Support"}),a[0]=t):t=a[0];let l=`An error occurred when searching for \u{201C}${o}\u{201D}`,c=`Searching support documents for \u{201C}${o}\u{201D}`,d=`No support documents for \u{201C}${o}\u{201D} were found`,u=`Using support search results for \u{201C}${o}\u{201D}`;return a[1]!==r||a[2]!==i||a[3]!==l||a[4]!==c||a[5]!==d||a[6]!==u?(n=(0,g.jsx)(J,{additionalFooterContent:t,chatManager:r,errorButtonText:l,errorTitle:"An error occurred when searching support documents",toolLink:et,toolName:"Support Search",functionCall:i,inProgressMessage:c,noResultsMessage:d,resultsMapper:en,successButtonText:u,useSelectReference:!1}),a[1]=r,a[2]=i,a[3]=l,a[4]=c,a[5]=d,a[6]=u,a[7]=n):n=a[7],n}).displayName||(f.displayName="SupportSearchButton")}catch{}let ei=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(x.SearchIcon,{}),t[0]=e):e=t[0],e},es=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(x.FileIcon,{}),t[0]=e):e=t[0],e},eo=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(x.TagIcon,{}),t[0]=e):e=t[0],e},el=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(x.PlayIcon,{}),t[0]=e):e=t[0],e},ec=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(x.BookIcon,{}),t[0]=e):e=t[0],e},ed=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(x.CommentDiscussionIcon,{}),t[0]=e):e=t[0],e},eu=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(x.TasklistIcon,{}),t[0]=e):e=t[0],e},em=()=>{let e,t=(0,y.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(em,{}),t[0]=e):e=t[0],e},ep="planning response";function eh(e){let t,n,a,r,i=(0,y.c)(10),{maxWidth:s,functionMetadata:o}=e;return i[0]!==o?(t=o.icon(),i[0]=o,i[1]=t):t=i[1],i[2]!==s?(n={maxWidth:s},i[2]=s,i[3]=n):n=i[3],i[4]!==o.completedText||i[5]!==n?(a=(0,g.jsx)(v.A,{title:o.completedText,sx:n,children:o.completedText}),i[4]=o.completedText,i[5]=n,i[6]=a):a=i[6],i[7]!==t||i[8]!==a?(r=(0,g.jsxs)(g.Fragment,{children:[t,a]}),i[7]=t,i[8]=a,i[9]=r):r=i[9],r}function ef(e){let t,n,a,r,i=(0,y.c)(10),{maxWidth:s,functionMetadata:o}=e;return i[0]!==o?(t=o.icon(),i[0]=o,i[1]=t):t=i[1],i[2]!==s?(n={maxWidth:s},i[2]=s,i[3]=n):n=i[3],i[4]!==o.loadingText||i[5]!==n?(a=(0,g.jsx)(v.A,{title:o.loadingText,sx:n,children:o.loadingText}),i[4]=o.loadingText,i[5]=n,i[6]=a):a=i[6],i[7]!==t||i[8]!==a?(r=(0,g.jsxs)(g.Fragment,{children:[t,a]}),i[7]=t,i[8]=a,i[9]=r):r=i[9],r}function eg(e){let t,n,a,r,i=(0,y.c)(10),{functionCall:s,functionMetadata:o}=e;return i[0]!==o.activeSkillText?(t=(0,g.jsxs)(b.A,{as:"h3",className:L.errorHeading,children:["An error occurred while ",o.activeSkillText]}),i[0]=o.activeSkillText,i[1]=t):t=i[1],i[2]!==s.errorMessage?(n=(0,g.jsx)("p",{className:L.errorMessage,children:s.errorMessage}),i[2]=s.errorMessage,i[3]=n):n=i[3],i[4]!==o.name?(a=(0,g.jsxs)("p",{className:L.toolDescriptionText,children:["Copilot used the ",(0,g.jsx)("span",{className:L.toolNameHighlight,children:o.name})," tool"]}),i[4]=o.name,i[5]=a):a=i[5],i[6]!==t||i[7]!==n||i[8]!==a?(r=(0,g.jsxs)("div",{className:L.errorContainer,children:[t,n,a]}),i[6]=t,i[7]=n,i[8]=a,i[9]=r):r=i[9],r}function ey(e){let t,n,a=(0,y.c)(6),{functionCall:r,functionMetadata:i,panelWidth:s}=e,o=s?s-130:S.Jt.DEFAULT_PANEL_WIDTH;a[0]!==r||a[1]!==i||a[2]!==o?(t=r?.status==="error"?(0,g.jsx)(eg,{functionCall:r,functionMetadata:i}):r?.status==="completed"?(0,g.jsx)(eh,{maxWidth:o,functionMetadata:i}):(0,g.jsx)(ef,{maxWidth:o,functionMetadata:i}),a[0]=r,a[1]=i,a[2]=o,a[3]=t):t=a[3];let l=t;return a[4]!==l?(n=(0,g.jsx)("div",{className:L.functionTitleContainer,children:l}),a[4]=l,a[5]=n):n=a[5],n}function e_(e){if(!e)return ep;let t=function(e){if(e){var t={...JSON.parse(e?.arguments||"{}"),kind:e.slug};switch(t.kind){case"bing-search":return{id:"bing-search",referenceType:"web-search",loadingText:`Using Bing to search for "${t.query}"`,completedText:`Bing results for "${t.query}"`,icon:_._,name:"Bing search",activeSkillText:"searching Bing"};case"lexical-code-search":return{id:"codesearch",loadingText:`Search for "${t.query}" in "${t.scopingQuery}"`,completedText:`Search results for "${t.query}" in "${t.scopingQuery}"`,icon:ei,name:"Code search",activeSkillText:"searching the codebase"};case"semantic-code-search":return{id:"codesearch",loadingText:`Search for "${t.query}" in "${t.repoOwner}/${t.repoName}"`,completedText:`Search results for "${t.query}" in "${t.repoOwner}/${t.repoName}"`,icon:ei,name:"Code search",activeSkillText:"searching the codebase"};case"kb-search":return{id:"kb-search",loadingText:`Searching for "${t.query}" in the knowledge base`,completedText:`Knowledge base search results for "${t.query}"`,icon:ec,name:"Knowledge base search",activeSkillText:"searching the knowledge base"};case"getalert":return{id:"getalert",loadingText:"Retrieving information about alerts",completedText:"Including information about alerts",icon:()=>(0,g.jsx)(x.ShieldIcon,{}),name:"Get alert",activeSkillText:"getting alert"};case"get-github-data":return{id:"get-github-data",loadingText:`Fetching ${t.endpoint}`,completedText:`Results of ${t.endpoint}`,icon:eo,name:"Get GitHub Data",activeSkillText:"getting data"};case"get-actions-job-logs":{let e=K(t),n=e.charAt(0).toUpperCase()+e.slice(1);return{id:"get-actions-jog-logs",loadingText:`Retrieving ${e} in ${t.repo}`,completedText:`${n} in ${t.repo}`,icon:el,name:"Get job logs",activeSkillText:"getting job logs"}}case"getdiscussion":return{id:"getdiscussion",loadingText:`Fetching discussion ${t.discussionNumber}`,completedText:`Details about discussion #${t.discussionNumber}`,icon:ed,name:"Get discussion",activeSkillText:"getting discussion"};case"getfile":return{id:"getfile",loadingText:"Searching for file",completedText:"Using results of get file",icon:es,name:"Get file",activeSkillText:"searching for file"};case"getfilechanges":return{id:"getfilechanges",loadingText:"Searching for file changes",completedText:`File changes for ${t.path} in ${t.repo}`,icon:es,name:"Get file changes",activeSkillText:"searching for file changes"};case"planskill":return{id:"planskill",loadingText:"Planning response...",completedText:"Plan created",icon:eu,name:"Plan skill",activeSkillText:"planning response"};case"support-search":return{id:"supportsearch",loadingText:"Searching for support documents",completedText:"Using results of support search",icon:ec,name:"Support search",activeSkillText:"searching for support documents"};case"get-figma":return{id:"getfigma",loadingText:"Analyzing Figma file",completedText:"Using results of Figma file",icon:ec,name:"Get Figma",activeSkillText:"analyzing Figma file"};case"codesearchagentskill":return{id:"codesearchagentskill",loadingText:"Using the code search agent",completedText:"Using results of code search agent",icon:ec,name:"Code Search Agent",activeSkillText:"searching the codebase"};case"draft-issue":return{id:"draft-issue",loadingText:t.repository?`Drafting issue in ${t.repository}`:"Drafting issue ",completedText:t.repository?`Drafted issue in ${t.repository}`:"Drafted issue",icon:em,name:"Draft Issue",activeSkillText:t.repository?`drafting issue in ${t.repository}`:"drafting issue"};case"repository-metadata":return{id:"repository-metadata",loadingText:`Fetching metadata from ${t.repository}`,completedText:`Using metadata from ${t.repository}`,icon:em,name:"Repository Metadata",activeSkillText:`fetching metadata from ${t.repository}`}}}}(e);return e.statusMessage??t?.activeSkillText??ep}try{ei.displayName||(ei.displayName="CodeSearchIcon")}catch{}try{es.displayName||(es.displayName="GetFileIcon")}catch{}try{eo.displayName||(eo.displayName="ReleaseIcon")}catch{}try{el.displayName||(el.displayName="JobIcon")}catch{}try{ec.displayName||(ec.displayName="KnowledgeBaseIcon")}catch{}try{ed.displayName||(ed.displayName="DiscussionIcon")}catch{}try{eu.displayName||(eu.displayName="PlanIcon")}catch{}try{em.displayName||(em.displayName="IssueDraftIcon")}catch{}try{eh.displayName||(eh.displayName="FunctionCompleted")}catch{}try{ef.displayName||(ef.displayName="FunctionLoading")}catch{}try{eg.displayName||(eg.displayName="FunctionError")}catch{}try{ey.displayName||(ey.displayName="FunctionTitle")}catch{}},31958:(e,t,n)=>{n.d(t,{h:()=>l});var a=n(74848),r=n(21728),i=n(39820),s=n(34164);let o={interruptedBanner:"InterruptedBanner-module__interruptedBanner--o4zN7",hasContent:"InterruptedBanner-module__hasContent--eZVJ0"};function l(e){let t,n,l=(0,r.c)(4),{messageHasContent:c}=e,d=c&&o.hasContent;return l[0]!==d?(t=(0,s.$)(o.interruptedBanner,d),l[0]=d,l[1]=t):t=l[1],l[2]!==t?(n=(0,a.jsx)(i.l,{className:t,"data-testid":"chat-message-interrupted",description:"Copilot was interrupted before it could finish this message.",hideTitle:!0,title:"Message interrupted",variant:"info"}),l[2]=t,l[3]=n):n=l[3],n}try{l.displayName||(l.displayName="InterruptedBanner")}catch{}},54508:(e,t,n)=>{n.d(t,{E:()=>u});var a=n(74848),r=n(21728),i=n(10871),s=n(55847),o=n(96665),l=n(96540);let c={dialog:"InterviewSurveyDialog-module__dialog--VJeZO",body:"InterviewSurveyDialog-module__body--GX6c_",primaryText:"InterviewSurveyDialog-module__primaryText--H2SlC InterviewSurveyDialog-module__text--WPIpz",secondaryText:"InterviewSurveyDialog-module__secondaryText--SQrin InterviewSurveyDialog-module__text--WPIpz",surveyLink:"InterviewSurveyDialog-module__surveyLink--XKIEl",noThanksButton:"InterviewSurveyDialog-module__noThanksButton--yLSzs"};function d(e,t){let n,d,u,m,p=(0,r.c)(10),{title:h,onClose:f}=e,g=void 0===h?"Give feedback":h,[y,_]=(0,l.useState)(!1);p[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:()=>_(!0)}),p[0]=n):n=p[0],(0,l.useImperativeHandle)(t,n),p[1]!==f?(d=e=>{_(!1),f?.(e)},p[1]=f,p[2]=d):d=p[2];let x=d;p[3]!==x?(u=()=>(0,a.jsxs)("div",{className:c.body,children:[(0,a.jsx)("img",{alt:"Mona and Copilot flying a Hubot-themed spaceship",src:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship.png",srcSet:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship@2x.png 2x"}),(0,a.jsx)("span",{className:c.primaryText,children:"Would you like to participate in our research?"}),(0,a.jsx)("span",{className:c.secondaryText,children:"You will be compensated for your time"}),(0,a.jsx)(i.z,{variant:"primary",className:c.surveyLink,href:"/github-copilot/chat/feedback/interview-survey",target:"_blank",children:"Book a session"}),(0,a.jsx)(s.Q,{variant:"link",className:c.noThanksButton,onClick:()=>x("no-thanks"),children:"No, thanks"})]}),p[3]=x,p[4]=u):u=p[4];let v=u;return p[5]!==x||p[6]!==y||p[7]!==v||p[8]!==g?(m=y&&(0,a.jsx)(o.l,{className:c.dialog,onClose:()=>x("close"),title:g,renderBody:v}),p[5]=x,p[6]=y,p[7]=v,p[8]=g,p[9]=m):m=p[9],m}let u=(0,l.forwardRef)(d);try{d.displayName||(d.displayName="InterviewSurveyDialogInner")}catch{}try{u.displayName||(u.displayName="InterviewSurveyDialog")}catch{}},93412:(e,t,n)=>{n.d(t,{h:()=>o});var a=n(74848),r=n(21728),i=n(81246);let s={container:"LegalDisclaimer-module__container--lNe5E"},o=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("span",{className:s.container,children:[(0,a.jsx)(i.A,{href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-chat-in-githubcom",inline:!0,muted:!0,children:"Copilot"})," ","uses AI. Check for mistakes."]}),t[0]=e):e=t[0],e};try{o.displayName||(o.displayName="LegalDisclaimer")}catch{}},87255:(e,t,n)=>{n.d(t,{Y:()=>w});var a,r=n(74848),i=n(21728),s=n(70170),o=n(53419),l=n(29731),c=n(83494),d=n(88431),u=n(96379),m=n(16255),p=n(65029),h=n(75298),f=n(55847),g=n(96665),y=n(96540),_=n(40961),x=n(2635),v=n(33592);let b={footerContainer:"PersonalInstructionsDialog-module__footerContainer--T9wxr"};var S=n(38621),C=n(52446);let j={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},N=(0,y.forwardRef)(function(e,t){let n,a,s,o,l,c,d,u,m=(0,i.c)(19),{onSelect:p}=e,[h,f]=(0,y.useState)(!1);m[0]!==h?(n=()=>f(!h),m[0]=h,m[1]=n):n=m[1];let g=n;m[2]===Symbol.for("react.memo_cache_sentinel")?(a={marginBottom:"1px"},m[2]=a):a=m[2],m[3]!==p||m[4]!==h?(s=h&&Object.entries(j)?.map(e=>{let[t,n]=e;return(0,r.jsxs)(C.l.Item,{"aria-label":`${n.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>p(t,n.body),children:[(0,r.jsx)(S.PlusIcon,{}),t]},t)}),m[3]=p,m[4]=h,m[5]=s):s=m[5],m[6]!==s?(o=(0,r.jsx)(C.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:s}),m[6]=s,m[7]=o):o=m[7];let _=h?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(l={border:"1px solid transparent"},m[8]=l):l=m[8],m[9]!==h?(c=h?(0,r.jsx)(S.XIcon,{}):(0,r.jsx)(S.LightBulbIcon,{}),m[9]=h,m[10]=c):c=m[10],m[11]!==_||m[12]!==c||m[13]!==g?(d=(0,r.jsx)(C.l,{className:"d-flex flex-column flex-justify-end",children:(0,r.jsx)(C.l.Item,{"aria-label":_,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:l,onSelect:g,children:c})}),m[11]=_,m[12]=c,m[13]=g,m[14]=d):d=m[14],m[15]!==t||m[16]!==o||m[17]!==d?(u=(0,r.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:a,children:[o,d]}),m[15]=t,m[16]=o,m[17]=d,m[18]=u):u=m[18],u});try{N.displayName||(N.displayName="PersonalInstructionsTemplates")}catch{}try{(a=PersonalInstructionsTemplatesWithRef).displayName||(a.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let w=({onDismiss:e,returnFocusRef:t})=>{let n=(0,x.Pk)(),a=(0,v.b)(),[S,C]=(0,y.useState)(n.personalInstructions??""),[j,w]=(0,y.useState)(void 0),[E,T]=(0,y.useState)(!1),k=(0,y.useRef)(null),R=(0,y.useRef)(null),[A,L]=(0,y.useState)(""),D=((e,t)=>{let n,a,r=(0,i.c)(4),[o,l]=(0,y.useState)(48);return r[0]!==e||500!==r[1]?(n=()=>{let t=(0,s.s)(()=>{e?.current&&l(e.current.clientHeight??48)},500),n=new ResizeObserver(t);return e?.current&&n.observe(e.current),()=>{t.cancel(),n?.disconnect?.()}},a=[e,500],r[0]=e,r[1]=500,r[2]=n,r[3]=a):(n=r[2],a=r[3]),(0,y.useEffect)(n,a),o})(R);(0,d.N)(()=>{k?.current&&(k.current.scrollTop=k.current.scrollHeight)},[S]);let P=(0,y.useCallback)(async()=>{if(!E){T(!0),A&&(0,o.BI)("copilot_personal_instruction_template_usage",{content:A});try{let t=await (0,u.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:S}});if(t.ok)(0,o.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),a.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:S}),(0,_.flushSync)(()=>e());else{let e=await t.json();w(String(e.errorMessage))}}catch{w("An error occurred while saving your personal instructions.")}finally{T(!1)}}},[E,S,a,e,A]),M=(e,t)=>{t&&(C(S?`${S}
${t}`:t),L(e),k?.current?.focus())},O=()=>{P()},B=(0,y.useCallback)(()=>{(0,o.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,_.flushSync)(()=>e())},[e]);return(0,r.jsx)(m.Z,{children:(0,r.jsx)(g.l,{onClose:B,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,r.jsx)(g.l.Body,{children:(0,r.jsx)("form",{onSubmit:P,children:(0,r.jsxs)(p.A,{children:[(0,r.jsx)(p.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,r.jsx)("div",{className:"width-full position-relative",children:(0,r.jsxs)(c.tL,{commands:{"github:submit-form":O},children:[(0,r.jsx)(h.Ay,{ref:k,className:"width-full",style:{paddingBottom:`${D}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:S,validationStatus:j||S.length>4e3?"error":void 0,...(0,l.G)("prompt-input"),onChange:e=>{C(e.target.value),w(void 0)}}),(0,r.jsx)(N,{ref:R,onSelect:M})]})}),(0,r.jsx)(I,{text:S,promptCharLimit:4e3}),j&&(0,r.jsx)(p.A.Validation,{variant:"error",children:(0,r.jsx)("span",{...(0,l.G)("error-message"),children:j})})]})})}),renderFooter:()=>(0,r.jsxs)("div",{className:b.footerContainer,children:[(0,r.jsx)(f.Q,{variant:"default",onClick:B,children:"Cancel"}),(0,r.jsx)(f.Q,{loading:E,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:P,children:"Save"})]})})})};function I(e){let t,n,a,s,o=(0,i.c)(10),{text:c,promptCharLimit:d}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.G)("current-character-count"),o[0]=t):t=o[0],o[1]!==c.length?(n=(0,r.jsx)("span",{className:"text-tabular-nums",...t,children:c.length}),o[1]=c.length,o[2]=n):n=o[2],o[3]!==d||o[4]!==n?(a=(0,r.jsxs)(r.Fragment,{children:[n," ","/ ",d," characters"]}),o[3]=d,o[4]=n,o[5]=a):a=o[5];let u=a;return o[6]!==u||o[7]!==d||o[8]!==c.length?(s=(0,r.jsx)(r.Fragment,{children:c.length>d?(0,r.jsx)(p.A.Validation,{variant:"error",children:u}):(0,r.jsx)(p.A.Caption,{children:u})}),o[6]=u,o[7]=d,o[8]=c.length,o[9]=s):s=o[9],s}try{w.displayName||(w.displayName="PersonalInstructionsDialog")}catch{}try{I.displayName||(I.displayName="CharacterCount")}catch{}},37204:(e,t,n)=>{n.d(t,{X:()=>x});var a=n(74848),r=n(21728),i=n(38621),s=n(65029),o=n(75298),l=n(24815),c=n(46309),d=n(81679),u=n(87330),m=n(55847),p=n(16255),h=n(96665),f=n(96540),g=n(79064),y=n(33592);let _={Dialog:"PromptDialog-module__Dialog--gvqi7",systemInstructionsTextarea:"PromptDialog-module__systemInstructionsTextarea--JIAZO",temperatureFormControl:"PromptDialog-module__temperatureFormControl--oJoQJ",toolsSectionHeader:"PromptDialog-module__toolsSectionHeader--jFBxE",deleteToolButton:"PromptDialog-module__deleteToolButton--PRDPZ"},x=e=>{let t,n,x,b,S,C,j,N,w,I,E,T,k,R,A,L,D,P,M,O,B,F,U,$=(0,r.c)(53),{onDismiss:V,promptDialogRef:q}=e,W=(0,y.b)(),G=g.Jt.settings,[H,z]=(0,f.useState)(G?.instructionPrompt||void 0);$[0]===Symbol.for("react.memo_cache_sentinel")?(t=G?.skillOverrides??[],$[0]=t):t=$[0];let[Q,K]=(0,f.useState)(t),[J,Y]=(0,f.useState)(G?.temperature||.7),X=(0,f.useRef)(void 0);$[1]!==W||$[2]!==V||$[3]!==H||$[4]!==J||$[5]!==Q?(n=()=>{let e=Q.filter(v);W.setCopilotSettings({instructionPrompt:H||"",skillOverrides:e,temperature:J}),V()},$[1]=W,$[2]=V,$[3]=H,$[4]=J,$[5]=Q,$[6]=n):n=$[6];let Z=n;$[7]!==W?(x=async()=>{if(X.current)return void z(X.current);let e=await W.getSystemPrompt();X.current=e,z(e)},$[7]=W,$[8]=x):x=$[8];let ee=x;$[9]!==ee||$[10]!==H?(b=()=>{(async()=>{void 0===H&&await ee()})()},$[9]=ee,$[10]=H,$[11]=b):b=$[11],$[12]!==ee||$[13]!==W||$[14]!==H?(S=[ee,W,H],$[12]=ee,$[13]=W,$[14]=H,$[15]=S):S=$[15],(0,f.useEffect)(b,S),$[16]!==ee?(C=()=>{ee(),K([]),Y(.7)},$[16]=ee,$[17]=C):C=$[17];let et=C;return $[18]===Symbol.for("react.memo_cache_sentinel")?(j=(0,a.jsx)(s.A.Label,{children:"System Instructions"}),$[18]=j):j=$[18],$[19]===Symbol.for("react.memo_cache_sentinel")?(N=(0,a.jsx)(s.A.Caption,{children:(0,a.jsx)("span",{children:"Make adjustments to the system instructions or add new instructions."})}),$[19]=N):N=$[19],$[20]===Symbol.for("react.memo_cache_sentinel")?(w=e=>z(e.target.value),$[20]=w):w=$[20],$[21]!==H?(I=(0,a.jsxs)(s.A,{children:[j,N,(0,a.jsx)(o.Ay,{block:!0,"aria-label":"Prompt",name:"Prompt",value:H,onChange:w,className:_.systemInstructionsTextarea})]}),$[21]=H,$[22]=I):I=$[22],$[23]===Symbol.for("react.memo_cache_sentinel")?(E=(0,a.jsx)(s.A.Label,{children:"Temperature"}),T=(0,a.jsx)(s.A.Caption,{children:"Controls the randomness of the model's responses. Lower temperatures are more deterministic, while higher temperatures are more random."}),$[23]=E,$[24]=T):(E=$[23],T=$[24]),$[25]===Symbol.for("react.memo_cache_sentinel")?(k=e=>Y(Number(e.target.value)),$[25]=k):k=$[25],$[26]!==J?(R=(0,a.jsxs)(s.A,{className:_.temperatureFormControl,children:[E,T,(0,a.jsx)(l.A,{type:"number",min:"0",max:"1",step:"0.01",block:!0,value:J,onChange:k})]}),$[26]=J,$[27]=R):R=$[27],$[28]===Symbol.for("react.memo_cache_sentinel")?(A=(0,a.jsx)("div",{className:_.toolsSectionHeader,children:"Tools"}),$[28]=A):A=$[28],$[29]!==Q?(L=Q.map((e,t)=>(0,a.jsxs)(f.Fragment,{children:[(0,a.jsxs)(c.B,{direction:"horizontal",className:"py-2",children:[(0,a.jsxs)(s.A,{children:[(0,a.jsx)(s.A.Label,{children:"Name"}),(0,a.jsx)(s.A.Caption,{children:(0,a.jsx)("span",{children:"Slug of tool you want to adjust"})}),(0,a.jsx)(l.A,{defaultValue:e.slug,onChange:e=>{Q.map((n,a)=>{a===t&&(n.slug=e.target.value)})}})]}),(0,a.jsxs)(s.A,{children:[(0,a.jsx)(s.A.Label,{children:"Description"}),(0,a.jsx)(s.A.Caption,{children:(0,a.jsx)("span",{children:"Make changes to the tool description"})}),(0,a.jsx)(l.A,{defaultValue:e.description,onChange:n=>{Q.map((a,r)=>{r===t&&(e.description=n.target.value)})}})]}),(0,a.jsxs)(s.A,{children:[(0,a.jsx)(s.A.Label,{id:"toggle",children:"Enabled?"}),(0,a.jsx)(d.A,{size:"small","aria-labelledby":"toggle",defaultChecked:e.enabled,onChange:e=>{Q.map((n,a)=>{a===t&&(n.enabled=e)})}})]}),(0,a.jsx)(u.K,{icon:i.TrashIcon,"aria-label":"Delete tool",variant:"invisible",onClick:()=>{let e=[...Q];1===Q.length?K([]):(e.splice(t,1),K(e))},className:_.deleteToolButton})]}),t===Q.length-1&&(0,a.jsx)(m.Q,{leadingVisual:(0,a.jsx)(i.PlusIcon,{}),onClick:()=>K([...Q,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add another tool"})]},`tool-${e.slug}-${Math.random()}`)),$[29]=Q,$[30]=L):L=$[30],$[31]!==Q?(D=0===Q.length&&(0,a.jsx)(m.Q,{leadingVisual:(0,a.jsx)(i.PlusIcon,{}),onClick:()=>K([...Q,{slug:"",description:"",enabled:!0}]),variant:"invisible",size:"small",children:"Add a tool"}),$[31]=Q,$[32]=D):D=$[32],$[33]!==I||$[34]!==R||$[35]!==L||$[36]!==D?(P=(0,a.jsxs)(h.l.Body,{children:[I,R,A,L,D]}),$[33]=I,$[34]=R,$[35]=L,$[36]=D,$[37]=P):P=$[37],$[38]!==V?(M={type:"button",onClick:V,content:"Cancel"},$[38]=V,$[39]=M):M=$[39],$[40]!==et?(O={type:"button",onClick:et,content:"Reset"},$[40]=et,$[41]=O):O=$[41],$[42]!==Z?(B={type:"button",onClick:Z,content:"Save",buttonType:"primary"},$[42]=Z,$[43]=B):B=$[43],$[44]!==M||$[45]!==O||$[46]!==B?(F=(0,a.jsx)(h.l.Footer,{children:(0,a.jsx)(h.l.Buttons,{buttons:[M,O,B]})}),$[44]=M,$[45]=O,$[46]=B,$[47]=F):F=$[47],$[48]!==V||$[49]!==q||$[50]!==P||$[51]!==F?(U=(0,a.jsx)(p.Z,{children:(0,a.jsxs)(h.l,{ref:q,onClose:V,title:"Prompt Settings",width:"xlarge",className:_.Dialog,children:[P,F]})}),$[48]=V,$[49]=q,$[50]=P,$[51]=F,$[52]=U):U=$[52],U};try{x.displayName||(x.displayName="PromptDialog")}catch{}function v(e){return e.slug&&e.description}},42983:(e,t,n)=>{n.d(t,{$:()=>c});var a=n(74848),r=n(21728),i=n(38621),s=n(87330),o=n(79184),l=n(12970);function c(e){let t,n,c=(0,r.c)(11),{handleRetryMessage:d,disabled:u,showModelPicker:m,model:p,navigateToNewThread:h}=e,f=void 0!==u&&u,g=void 0!==m&&m;c[0]!==d||c[1]!==p?(t=()=>{d(p)},c[0]=d,c[1]=p,c[2]=t):t=c[2];let y=t,{isLicensedLimited:_}=(0,o.xR)();if(g&&(!h||!p))throw Error("navigateToNewThread and model must be provided in order to show the model picker");return c[3]!==f||c[4]!==y||c[5]!==d||c[6]!==_||c[7]!==p||c[8]!==h||c[9]!==g?(n=g?(0,a.jsx)(l.Yb,{onNewThreadSelected:h,limited:_,type:"message-retry",selectedModel:p,onModelSelected:d,disabled:f}):(0,a.jsx)(s.K,{variant:"invisible","aria-label":"Retry","data-testid":"retry-button",onClick:y,icon:i.SyncIcon,disabled:f}),c[3]=f,c[4]=y,c[5]=d,c[6]=_,c[7]=p,c[8]=h,c[9]=g,c[10]=n):n=c[10],n}try{c.displayName||(c.displayName="RetryButton")}catch{}},95896:(e,t,n)=>{n.d(t,{M:()=>l});var a=n(74848),r=n(21728),i=n(11683),s=n(82678),o=n(96540);function l(e){let t,n,l,c,d=(0,r.c)(8);d[0]!==e?({className:t,...n}=e,d[0]=e,d[1]=t,d[2]=n):(t=d[1],n=d[2]);let u=(0,o.useRef)(null);return d[3]===Symbol.for("react.memo_cache_sentinel")?(l={containerRef:u,focusInStrategy:"first",focusOutBehavior:"stop",bindKeys:i.z0.ArrowHorizontal|i.z0.HomeAndEnd},d[3]=l):l=d[3],(0,s.G)(l),d[4]!==t||d[5]!==e.children||d[6]!==n?(c=(0,a.jsx)("div",{ref:u,className:t,role:"toolbar",...n,children:e.children}),d[4]=t,d[5]=e.children,d[6]=n,d[7]=c):c=d[7],c}try{l.displayName||(l.displayName="Toolbar")}catch{}},82151:(e,t,n)=>{n.d(t,{R:()=>p});var a=n(74848),r=n(21728),i=n(81246),s=n(34164),o=n(7277),l=n(99054),c=n(97949),d=n(93997),u=n(46665),m=n(6224);function p(e){let t,n,i,p,f,g,y,_=(0,r.c)(24),{className:x,accessibleHeader:v}=e,{message:b}=(0,u.V)(),S=b.content??"";_[0]!==S?(t=(0,d._)(S),_[0]=S,_[1]=t):t=_[1];let{availableAgents:C}=(0,l.JE)(t);_[2]!==C?(n=void 0===C?[]:C,_[2]=C,_[3]=n):n=_[3];let j=n;if(_[4]!==v||_[5]!==j||_[6]!==x||_[7]!==b.references||_[8]!==S){let e;_[12]!==b.references?(e=b.references??[],_[12]=b.references,_[13]=e):e=_[13];let t=(0,o.l)().use(c.U,{references:e,agents:j}).parse(S);_[14]!==v?(f=v&&(0,a.jsx)("h3",{className:"sr-only",children:v}),_[14]=v,_[15]=f):f=_[15],_[16]!==x?(i=(0,s.$)(m.A.container,x),_[16]=x,_[17]=i):i=_[17],p=t.children.map(h),_[4]=v,_[5]=j,_[6]=x,_[7]=b.references,_[8]=S,_[9]=i,_[10]=p,_[11]=f}else i=_[9],p=_[10],f=_[11];return _[18]!==i||_[19]!==p?(g=(0,a.jsx)("div",{className:i,children:p}),_[18]=i,_[19]=p,_[20]=g):g=_[20],_[21]!==f||_[22]!==g?(y=(0,a.jsxs)(a.Fragment,{children:[f,g]}),_[21]=f,_[22]=g,_[23]=y):y=_[23],y}function h(e,t){switch(e.type){case"text":return e.value;case"agent-mention":return(0,a.jsx)(f,{agent:e.data.mentionedAgent,children:e.value},t);case"reference-mention":return void 0!==e.data.mentionedReferenceId?(0,a.jsx)("span",{className:m.A.mention,children:e.value},t):e.value}}function f(e){let t,n=(0,r.c)(4),{agent:s,children:o}=e,l=`/integrations/${s.slug}/hovercard`;return n[0]!==s.integrationUrl||n[1]!==o||n[2]!==l?(t=(0,a.jsx)(i.A,{href:s.integrationUrl,"data-hovercard-url":l,className:m.A.mention,children:o}),n[0]=s.integrationUrl,n[1]=o,n[2]=l,n[3]=t):t=n[3],t}try{p.displayName||(p.displayName="UserMessage")}catch{}try{f.displayName||(f.displayName="AgentLink")}catch{}},3201:(e,t,n)=>{n.d(t,{p:()=>C,V:()=>S});var a=n(74848),r=n(21728),i=n(2635),s=n(33592),o=n(25641),l=n(53419),c=n(79634),d=n(97286),u=n(38621),m=n(52446),p=n(69948),h=n(65029),f=n(24815),g=n(96665),y=n(96540),_=n(84802),x=n(35247);let v={hideOnDesktop:"ConversationActions-module__hideOnDesktop--J5K5t"};var b=n(79007);function S(e){let t,n,s,d,p,h,f,g,y,_=(0,r.c)(23),{onOpenDialog:x,showShare:b,hideShareOnDesktop:S,isShared:C}=e,j=void 0===b||b,N=void 0!==S&&S,w=void 0!==C&&C,{canShareThread:I}=(0,c.X)(),{isWaitingOnCopilot:E,messages:T}=(0,i.Pk)(),k=(0,o.Q7)(T);_[0]!==T?(t=(0,o.UM)(T),_[0]=T,_[1]=t):t=_[1];let R=t,A=k.length>0||E||R;return _[2]!==x?(n=()=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),x("rename")},_[2]=x,_[3]=n):n=_[3],_[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(m.l.LeadingVisual,{children:(0,a.jsx)(u.PencilIcon,{})}),_[4]=s):s=_[4],_[5]!==n?(d=(0,a.jsxs)(m.l.Item,{onSelect:n,children:[s,"Rename"]}),_[5]=n,_[6]=d):d=_[6],_[7]!==I||_[8]!==N||_[9]!==w||_[10]!==x||_[11]!==A||_[12]!==j?(p=j&&I&&(0,a.jsxs)(m.l.Item,{className:N?v.hideOnDesktop:void 0,disabled:A,onSelect:()=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),x("share")},children:[(0,a.jsx)(m.l.LeadingVisual,{children:w?(0,a.jsx)(u.UnlockIcon,{}):(0,a.jsx)(u.LockIcon,{})}),"Share"]}),_[7]=I,_[8]=N,_[9]=w,_[10]=x,_[11]=A,_[12]=j,_[13]=p):p=_[13],_[14]!==x?(h=()=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),x("delete")},_[14]=x,_[15]=h):h=_[15],_[16]===Symbol.for("react.memo_cache_sentinel")?(f=(0,a.jsx)(m.l.LeadingVisual,{children:(0,a.jsx)(u.TrashIcon,{})}),_[16]=f):f=_[16],_[17]!==h?(g=(0,a.jsxs)(m.l.Item,{variant:"danger",onSelect:h,children:[f,"Delete"]}),_[17]=h,_[18]=g):g=_[18],_[19]!==g||_[20]!==d||_[21]!==p?(y=(0,a.jsxs)(a.Fragment,{children:[d,p,g]}),_[19]=g,_[20]=d,_[21]=p,_[22]=y):y=_[22],y}function C(e){let t,n,o,c,u,m,p,h=(0,r.c)(33),{visibleDialog:f,onClose:g,threadName:y,threadId:v,selectedThreadId:S,onStartLoading:C,onFinishLoading:I,returnFocusRef:E}=e,{threads:T}=(0,i.Pk)(),k=(0,s.b)(),R=(0,_.G)();h[0]===Symbol.for("react.memo_cache_sentinel")?(t=["copilot-chat-mcps"],h[0]=t):t=h[0],h[1]!==k?(n={queryKey:t,queryFn:async()=>k.service.fetchMCPServers(),placeholderData:j},h[1]=k,h[2]=n):n=h[2];let{data:A}=(0,d.I)(n),L=x.W.copilotThirdPartyMcp&&(A||[]).length>0;h[3]!==g?(o=()=>{(0,l.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"}),g()},h[3]=g,h[4]=o):o=h[4];let D=o;h[5]!==k||h[6]!==R||h[7]!==g||h[8]!==I||h[9]!==C||h[10]!==S||h[11]!==v||h[12]!==T?(c=async()=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),C();let e=T.get(v);e&&(v===S&&await R({clearTopic:!0,includeThreads:!1}),await k.deleteThread(e)),I(),g()},h[5]=k,h[6]=R,h[7]=g,h[8]=I,h[9]=C,h[10]=S,h[11]=v,h[12]=T,h[13]=c):c=h[13];let P=c;h[14]!==k||h[15]!==g||h[16]!==I||h[17]!==C||h[18]!==v||h[19]!==T?(u=async e=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),C();let t=T.get(v);t&&await k.renameThread(t,e),I(),g()},h[14]=k,h[15]=g,h[16]=I,h[17]=C,h[18]=v,h[19]=T,h[20]=u):u=h[20];let M=u;return h[21]!==D||h[22]!==P||h[23]!==g||h[24]!==E||h[25]!==L||h[26]!==M||h[27]!==v||h[28]!==y||h[29]!==f?(m="delete"===f?(0,a.jsx)(N,{onCancel:g,onConfirm:P,returnFocusRef:E}):"rename"===f?(0,a.jsx)(w,{onCancel:g,currentName:y,onSubmit:M,returnFocusRef:E}):"share"===f?(0,a.jsx)(b.S,{closeDialog:D,threadId:v,returnFocusRef:E,showThirdPartyMcpWarning:L}):null,h[21]=D,h[22]=P,h[23]=g,h[24]=E,h[25]=L,h[26]=M,h[27]=v,h[28]=y,h[29]=f,h[30]=m):m=h[30],h[31]!==m?(p=(0,a.jsx)(a.Fragment,{children:m}),h[31]=m,h[32]=p):p=h[32],p}function j(e){return e}let N=e=>{let t,n=(0,r.c)(4),{onConfirm:i,onCancel:s,returnFocusRef:o}=e;return n[0]!==s||n[1]!==i||n[2]!==o?(t=(0,a.jsx)(p.K,{title:"Delete conversation",onClose:e=>{if("confirm"===e){(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"});let e=o.current?.closest("nav,aside,section");i(),window.setTimeout(()=>{e instanceof HTMLElement&&e.focus()},0)}else(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),s(),window.setTimeout(()=>o.current?.focus(),0)},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this conversation? This action cannot be undone."}),n[0]=s,n[1]=i,n[2]=o,n[3]=t):t=n[3],t},w=e=>{let t,n,i,s,o,c,d,u,m,p,_,x,v=(0,r.c)(34),{currentName:b,onCancel:S,onSubmit:C,returnFocusRef:j}=e,[N,w]=(0,y.useState)(void 0),E=(0,y.useRef)(null),T=(0,y.useId)(),k=(0,y.useId)();v[0]!==C?(t=e=>{e.preventDefault();let t=E.current?.value?.trim()??"";t?t.length>100?(w("max_length"),E.current?.focus()):(w(void 0),C(t)):(w("required"),E.current?.focus())},v[0]=C,v[1]=t):t=v[1];let R=t;v[2]!==S?(n=()=>{(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),S()},v[2]=S,v[3]=n):n=v[3];let A=n;v[4]!==k?(i=(0,a.jsx)("span",{id:k,children:"Rename conversation"}),v[4]=k,v[5]=i):i=v[5],v[6]!==A?(s={content:"Cancel",onClick:A},v[6]=A,v[7]=s):s=v[7],v[8]!==T?(o={content:"Update",buttonType:"primary",type:"submit",form:T,onClick:I},v[8]=T,v[9]=o):o=v[9],v[10]!==s||v[11]!==o?(c=[s,o],v[10]=s,v[11]=o,v[12]=c):c=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(h.A.Label,{visuallyHidden:!0,children:"Rename conversation"}),v[13]=d):d=v[13];let L=N?"error-message":void 0,D=N?"true":void 0;return v[14]!==b||v[15]!==k||v[16]!==L||v[17]!==D?(u=(0,a.jsx)(f.A,{"aria-labelledby":k,"aria-describedby":L,"aria-invalid":D,ref:E,defaultValue:b,block:!0}),v[14]=b,v[15]=k,v[16]=L,v[17]=D,v[18]=u):u=v[18],v[19]!==N?(m=N&&(0,a.jsx)(h.A.Validation,{id:"error-message",variant:"error",children:"required"===N?"Enter a name":"Name cannot exceed 100 characters"}),v[19]=N,v[20]=m):m=v[20],v[21]!==u||v[22]!==m?(p=(0,a.jsxs)(h.A,{required:!0,children:[d,u,m]}),v[21]=u,v[22]=m,v[23]=p):p=v[23],v[24]!==T||v[25]!==R||v[26]!==p?(_=(0,a.jsx)("form",{id:T,onSubmit:R,children:p}),v[24]=T,v[25]=R,v[26]=p,v[27]=_):_=v[27],v[28]!==A||v[29]!==j||v[30]!==_||v[31]!==i||v[32]!==c?(x=(0,a.jsx)(g.l,{title:i,onClose:A,width:"small",footerButtons:c,initialFocusRef:E,returnFocusRef:j,children:_}),v[28]=A,v[29]=j,v[30]=_,v[31]=i,v[32]=c,v[33]=x):x=v[33],x};try{S.displayName||(S.displayName="ConversationActions")}catch{}try{C.displayName||(C.displayName="ConversationActionDialogs")}catch{}try{N.displayName||(N.displayName="DeleteDialog")}catch{}try{w.displayName||(w.displayName="RenameDialog")}catch{}function I(){return(0,l.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}},79007:(e,t,n)=>{n.d(t,{S:()=>S});var a=n(74848),r=n(21728),i=n(20139),s=n(35247),o=n(2635),l=n(33592),c=n(40260),d=n(53419),u=n(71315),m=n(38621),p=n(55847),h=n(12004),f=n(84511),g=n(46309),y=n(65029),_=n(24815),x=n(96665),v=n(96540);let b={container:"ConversationSharingDialog-module__container--wNKq6",innerContainer:"ConversationSharingDialog-module__innerContainer--OaIjU",sharedLinkContainer:"ConversationSharingDialog-module__sharedLinkContainer--jDnVn",textInputContainer:"ConversationSharingDialog-module__textInputContainer--jHhX6",textInput:"ConversationSharingDialog-module__textInput--DymUf",success:"ConversationSharingDialog-module__success--zCOcd",spinner:"ConversationSharingDialog-module__spinner--KpY5f",successIcon:"ConversationSharingDialog-module__successIcon--z1nhd",mutedText:"ConversationSharingDialog-module__mutedText--r3ZSy",warningText:"ConversationSharingDialog-module__warningText--t4nnB",snapshotText:"ConversationSharingDialog-module__snapshotText--XNu1W",buttonStack:"ConversationSharingDialog-module__buttonStack--gWe8E",lockIcon:"ConversationSharingDialog-module__lockIcon--yCWzZ",cancelButton:"ConversationSharingDialog-module__cancelButton--CL34L",quickFadeUp:"ConversationSharingDialog-module__quickFadeUp--_qvsX"},S=e=>{let t,n,S,C,j,N,w,I,E,T,k,R,A,L,D,P,M,O,B,F,U,$,V,q,W,G,H,z,Q,K=(0,r.c)(94),{closeDialog:J,threadId:Y,returnFocusRef:X,showThirdPartyMcpWarning:Z}=e,ee=void 0!==Z&&Z,et=(0,o.Pk)(),en=(0,l.b)(),[ea,er]=(0,v.useState)(!1),[ei,es]=(0,v.useState)(!1),[eo,el]=(0,v.useState)(!1),[ec,ed]=(0,v.useState)(!1),{selectedThreadID:eu,ssoOrganizations:em,apiUrl:ep,threads:eh}=et;K[0]!==eu||K[1]!==Y||K[2]!==eh?(t=eh.get(Y||eu),K[0]=eu,K[1]=Y,K[2]=eh,K[3]=t):t=K[3];let ef=t;K[4]!==ef?.sharedID?(n=()=>ef?.sharedID||"",K[4]=ef?.sharedID,K[5]=n):n=K[5];let[eg,ey]=(0,v.useState)(n);K[6]!==ef?(S=()=>ef?.sharedMessageID?ef.sharedMessageID:"",K[6]=ef,K[7]=S):S=K[7];let[e_,ex]=(0,v.useState)(S),ev=u.fV.origin,eb=`${ev}/copilot/share/${eg}`;K[8]!==ea?(C=()=>{if(ea){let e=setTimeout(()=>er(!1),1500);return()=>clearTimeout(e)}},j=[ea],K[8]=ea,K[9]=C,K[10]=j):(C=K[9],j=K[10]),(0,v.useEffect)(C,j),K[11]!==eo?(N=()=>{if(eo){let e=setTimeout(()=>el(!1),1500);return()=>clearTimeout(e)}},w=[eo],K[11]=eo,K[12]=N,K[13]=w):(N=K[12],w=K[13]),(0,v.useEffect)(N,w),K[14]!==eb?(I=async()=>{try{await (0,c.D)(eb),er(!0),(0,d.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},K[14]=eb,K[15]=I):I=K[15];let eS=I;K[16]!==ef?.sharedID||K[17]!==eu||K[18]!==Y?(E=()=>{(Y||eu)&&ey(ef?.sharedID||"")},K[16]=ef?.sharedID,K[17]=eu,K[18]=Y,K[19]=E):E=K[19];let eC=ef?.sharedID;K[20]!==eu||K[21]!==eC||K[22]!==Y?(T=[eC,eu,Y],K[20]=eu,K[21]=eC,K[22]=Y,K[23]=T):T=K[23],(0,v.useEffect)(E,T),K[24]!==ep||K[25]!==en||K[26]!==eu||K[27]!==em||K[28]!==Y?(k=async()=>{es(!0);let e=Y||eu,t=new i.k(ep,em),n=await t.shareThread(e,s.W.copilotShareActiveSubthread&&e===eu?en.FindLastMessageID():"");if(n.ok){es(!1);let{sharedAt:t,sharedID:a,sharedMessageID:r}=n.payload;ey(a),el(!0),ex(r),en.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:a,sharedAt:t,sharedMessageID:r}}),(0,d.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:a})}else es(!1)},K[24]=ep,K[25]=en,K[26]=eu,K[27]=em,K[28]=Y,K[29]=k):k=K[29];let ej=k;K[30]!==ep||K[31]!==en||K[32]!==eu||K[33]!==eg||K[34]!==ec||K[35]!==em||K[36]!==Y?(R=async()=>{if(!ec)return void ed(!0);ed(!1),es(!0);let e=Y||eu,t=new i.k(ep,em),n=await t.unshareThread(e);if(n.ok){es(!1),ex("");let{sharedID:t,sharedAt:a,sharedMessageID:r}=n.payload;en.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:a,sharedMessageID:r}}),(0,d.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:eg})}else es(!1)},K[30]=ep,K[31]=en,K[32]=eu,K[33]=eg,K[34]=ec,K[35]=em,K[36]=Y,K[37]=R):R=K[37];let eN=R;K[38]!==ej||K[39]!==ei||K[40]!==eg?(A=()=>{if(!eg)return(0,a.jsx)(p.Q,{variant:"primary",disabled:ei,onClick:ej,children:"Share"})},K[38]=ej,K[39]=ei,K[40]=eg,K[41]=A):A=K[41];let ew=A;K[42]!==eS||K[43]!==eg?(L=()=>{if(eg)return(0,a.jsx)(p.Q,{variant:"primary",autoFocus:!0,onClick:eS,children:"Copy link"})},K[42]=eS,K[43]=eg,K[44]=L):L=K[44];let eI=L;K[45]!==eN||K[46]!==ei||K[47]!==eg?(D=()=>{if(eg)return(0,a.jsx)(p.Q,{variant:"danger",disabled:ei,onClick:eN,children:"Unshare"})},K[45]=eN,K[46]=ei,K[47]=eg,K[48]=D):D=K[48];let eE=D;K[49]!==eg||K[50]!==ec?(P=()=>{if(eg&&ec)return(0,a.jsx)(p.Q,{variant:"default",onClick:()=>ed(!1),className:b.cancelButton,children:"Cancel"})},K[49]=eg,K[50]=ec,K[51]=P):P=K[51];let eT=P;K[52]!==ea||K[53]!==ei||K[54]!==eg||K[55]!==ec||K[56]!==eo?(M=()=>ei?(0,a.jsxs)("div",{className:b.quickFadeUp,children:[(0,a.jsx)(h.A,{size:"small",className:b.spinner}),eg?"Unsharing conversation...":"Sharing conversation..."]}):ec?(0,a.jsx)("div",{className:b.quickFadeUp,children:(0,a.jsx)(f.A,{size:"medium",className:b.warningText,children:"Confirm unsharing this conversation?"})}):ea?(0,a.jsxs)("div",{className:b.quickFadeUp,children:[(0,a.jsx)(m.CheckIcon,{className:b.successIcon}),(0,a.jsx)(f.A,{size:"medium",className:b.success,children:"Copied to clipboard"})]}):eo?(0,a.jsxs)("div",{className:b.quickFadeUp,children:[(0,a.jsx)(m.CheckIcon,{className:b.successIcon}),(0,a.jsx)(f.A,{size:"medium",className:b.success,children:"Conversation shared"})]}):eg?(0,a.jsxs)("div",{children:[(0,a.jsx)(m.UnlockIcon,{className:b.lockIcon}),(0,a.jsx)(f.A,{size:"medium",className:b.mutedText,children:"Visible to anyone with the link"})]}):(0,a.jsx)("div",{}),K[52]=ea,K[53]=ei,K[54]=eg,K[55]=ec,K[56]=eo,K[57]=M):M=K[57];let ek=M,eR=eg?"Conversation shared":"Share conversation";return K[58]!==e_||K[59]!==eg||K[60]!==ee?(O=(0,a.jsx)(g.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:e_?(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:b.snapshotText,children:"This shared conversation is a snapshot"}),", accessible to anyone with the link. It will not update with new messages."]}):eg?(0,a.jsx)("span",{children:`This conversation and future messages are visible to anyone with the link. If private repository content
                is included, repository access is required to view.${ee?" Third-party MCP tool calling is disabled while this thread is shared.":""}`}):(0,a.jsx)("span",{children:`When shared, this conversation and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view.${ee?" Third-party MCP tool calling will be disabled if the thread is shared.":""}`})}),K[58]=e_,K[59]=eg,K[60]=ee,K[61]=O):O=K[61],K[62]!==eb||K[63]!==eg?(B=eg&&(0,a.jsx)("div",{className:b.innerContainer,children:(0,a.jsx)("div",{className:b.sharedLinkContainer,children:(0,a.jsxs)(y.A,{id:"share-link",className:b.textInputContainer,children:[(0,a.jsx)(y.A.Label,{children:"Share link"}),(0,a.jsx)(_.A,{size:"large",readOnly:!0,value:eg&&eb,className:b.textInput})]})})}),K[62]=eb,K[63]=eg,K[64]=B):B=K[64],K[65]!==O||K[66]!==B?(F=(0,a.jsxs)(g.B,{direction:"vertical",gap:"condensed",children:[O,B]}),K[65]=O,K[66]=B,K[67]=F):F=K[67],K[68]!==ek?(U=(0,a.jsx)("div",{role:"status",children:ek()}),K[68]=ek,K[69]=U):U=K[69],K[70]!==ew?($=ew(),K[70]=ew,K[71]=$):$=K[71],K[72]!==eT?(V=eT(),K[72]=eT,K[73]=V):V=K[73],K[74]!==eE?(q=eE(),K[74]=eE,K[75]=q):q=K[75],K[76]!==eI?(W=eI(),K[76]=eI,K[77]=W):W=K[77],K[78]!==$||K[79]!==V||K[80]!==q||K[81]!==W?(G=(0,a.jsxs)(g.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",children:[$,V,q,W]}),K[78]=$,K[79]=V,K[80]=q,K[81]=W,K[82]=G):G=K[82],K[83]!==U||K[84]!==G?(H=(0,a.jsxs)(g.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:b.buttonStack,children:[U,G]}),K[83]=U,K[84]=G,K[85]=H):H=K[85],K[86]!==F||K[87]!==H?(z=(0,a.jsxs)("div",{className:b.container,children:[F,H]}),K[86]=F,K[87]=H,K[88]=z):z=K[88],K[89]!==J||K[90]!==X||K[91]!==eR||K[92]!==z?(Q=(0,a.jsx)(x.l,{title:eR,onClose:J,width:"large",returnFocusRef:X,children:z}),K[89]=J,K[90]=X,K[91]=eR,K[92]=z,K[93]=Q):Q=K[93],Q};try{S.displayName||(S.displayName="ConversationSharingDialog")}catch{}},16030:(e,t,n)=>{n.d(t,{b:()=>S});var a=n(74848),r=n(2635),i=n(33592),s=n(98755),o=n(53419),l=n(71315),c=n(38621),d=n(96665),u=n(46309),m=n(12004),p=n(81246),h=n(87330),f=n(88657),g=n(43543),y=n(56221),_=n(96540);let x={dialog:"ManageSharedConversationsDialog-module__dialog--_C8sX",actionButtons:"ManageSharedConversationsDialog-module__actionButtons--iuECd",alertIcon:"ManageSharedConversationsDialog-module__alertIcon--mA28C",footer:"ManageSharedConversationsDialog-module__footer--aTXFp",mutedText:"ManageSharedConversationsDialog-module__mutedText--_uOci",footerContent:"ManageSharedConversationsDialog-module__footerContent--yVU91",footerLeft:"ManageSharedConversationsDialog-module__footerLeft--eRZWV",footerRight:"ManageSharedConversationsDialog-module__footerRight--n1XJG",confirmationText:"ManageSharedConversationsDialog-module__confirmationText--tYQ41",quickFadeUp:"ManageSharedConversationsDialog-module__quickFadeUp--tiEAs",conversationLink:"ManageSharedConversationsDialog-module__conversationLink--JqMKE"};var v=n(4466);let b=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},S=({closeDialog:e,returnFocusRef:t})=>{let n=(0,i.b)(),S=(0,r.Pk)(),[C,j]=(0,_.useState)(0),[N,w]=(0,_.useState)([]),[I,E]=(0,_.useState)(!0),[T,k]=(0,_.useState)(!1),[R,A]=(0,_.useState)(null),[L,D]=(0,_.useState)(!1),[P,M]=(0,_.useState)(5>N.length),O=5*C,B=N.slice(O,O+5);(0,_.useEffect)(()=>{(async()=>{let e=await n.fetchSharedThreads();e&&w(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:b(e.updatedAt),sharedUrl:`${l.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${l.fV.origin}/copilot/c/${e.id}`}))),E(!1)})()},[n]),(0,_.useEffect)(()=>{P&&C>0&&N.length<=5*C&&j(0);let e=5<N.length;e!==P&&M(e)},[N,C,5,P]);let F=(0,_.useCallback)(()=>{e()},[e]),U=(0,_.useCallback)(async()=>{if(!L)return void D(!0);D(!1),E(!0);try{(await n.unshareAllThreads()).ok&&(w([]),await n.fetchThreads())}finally{E(!1)}},[L,n]),$=async()=>{k(!1),A(null),E(!0);let e=await n.fetchSharedThreads();e&&w(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:b(e.updatedAt),sharedUrl:`${l.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${l.fV.origin}/copilot/c/${e.id}`}))),E(!1)},V=I||"error"===S.sharedThreadsLoading.state||0===N.length,q=(0,_.useMemo)(()=>{if(!N.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{L?U():D(!0)}};return L?[{buttonType:"default",content:"Cancel",onClick:()=>D(!1)},e]:[e]},[N.length,L,U]),W=(0,_.useMemo)(()=>I?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===S.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[I,S.sharedThreadsLoading.state]);return(0,a.jsxs)(d.l,{title:"Manage shared conversations",width:"xlarge",className:x.dialog,position:{narrow:"fullscreen",regular:"center"},onClose:F,returnFocusRef:t,renderFooter:()=>q?.length?(0,a.jsx)(d.l.Footer,{className:x.footer,children:(0,a.jsxs)("div",{className:x.footerContent,children:[(0,a.jsx)("div",{className:x.footerLeft,children:L&&(0,a.jsx)("div",{className:`${x.confirmationText} ${x.quickFadeUp}`,children:(e=>1===e?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`)(N.length)})}),(0,a.jsx)("div",{className:x.footerRight,children:(0,a.jsx)(d.l.Buttons,{buttons:q})})]})}):null,children:[V?(0,a.jsxs)(f.E,{children:[(0,a.jsx)(f.E.Visual,{children:W.isSpinner?(0,a.jsx)(u.B,{direction:"horizontal",align:"center",children:(0,a.jsx)(m.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,a.jsx)("div",{className:x.mutedText,children:"error"===W.result?(0,a.jsx)(c.AlertIcon,{size:"medium",className:x.alertIcon,"aria-label":"Error loading shared conversations"}):(0,a.jsx)(c.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,a.jsx)(f.E.Heading,{children:W.heading}),(0,a.jsx)(f.E.Description,{children:W.description})]}):(0,a.jsxs)(g.X.Container,{children:[(0,a.jsx)(y.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Conversation",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,a.jsx)(p.A,{href:e.threadUrl,className:x.conversationLink,children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,a.jsx)("span",{className:x.mutedText,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,a.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:x.actionButtons,children:[(0,a.jsx)(s.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,o.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,a.jsx)(h.K,{"aria-label":"Unshare conversation",title:"Unshare conversation",icon:c.UnlinkIcon,variant:"invisible",onClick:()=>{A(e),k(!0)}})]})})}],data:B}),N.length>5&&(0,a.jsx)(g.X.Pagination,{"aria-label":"Shared conversations pagination",pageSize:5,defaultPageIndex:C,totalCount:N.length,onChange:e=>{j(e.pageIndex)},showPages:!1})]}),T&&R&&(0,a.jsx)(v.Q,{threadId:R.id,closeDialog:$})]})};try{S.displayName||(S.displayName="ManageSharedConversationsDialog")}catch{}},4466:(e,t,n)=>{n.d(t,{Q:()=>h});var a=n(74848),r=n(21728),i=n(2635),s=n(33592),o=n(20139),l=n(53419),c=n(55847),d=n(46309),u=n(96665),m=n(96540);let p={container:"UnshareConversationDialog-module__container--Tc1R_",buttonStack:"UnshareConversationDialog-module__buttonStack--JvbNF",threadInfoStack:"UnshareConversationDialog-module__threadInfoStack--gcf6y",threadTitle:"UnshareConversationDialog-module__threadTitle--eBgrX",threadDescription:"UnshareConversationDialog-module__threadDescription--E1H0T"},h=e=>{let t,n,h,f,g,y,_,x,v,b,S,C,j,N,w,I,E,T,k,R,A=(0,r.c)(60),{closeDialog:L,threadId:D}=e,P=(0,i.Pk)(),M=(0,s.b)(),{selectedThreadID:O,ssoOrganizations:B,apiUrl:F,threads:U}=P,[$,V]=(0,m.useState)(P.messages);A[0]!==D||A[1]!==U?(t=()=>{let e=U.get(D);return e?.sharedID||""},A[0]=D,A[1]=U,A[2]=t):t=A[2];let[q,W]=(0,m.useState)(t),G=(0,m.useRef)(""!==q),H=(0,m.useRef)("");A[3]!==$||A[4]!==q||A[5]!==P.apiUrl||A[6]!==P.ssoOrganizations||A[7]!==D?(n=()=>{let e=async()=>{if(0===$.filter(e=>e.threadID===D).length){let e=new o.k(P.apiUrl,P.ssoOrganizations),t=await e.listSharedThreadMessages(q);t.ok&&V(t.payload.messages)}};H.current!==q&&q&&(H.current=q,e())},h=[q,D,$,P.apiUrl,P.ssoOrganizations],A[3]=$,A[4]=q,A[5]=P.apiUrl,A[6]=P.ssoOrganizations,A[7]=D,A[8]=n,A[9]=h):(n=A[8],h=A[9]),(0,m.useEffect)(n,h),A[10]!==O||A[11]!==D||A[12]!==U?(f=U.get(D||O),A[10]=O,A[11]=D,A[12]=U,A[13]=f):f=A[13];let z=f,Q=$[$.length-1],K=Q?.content||"";A[14]!==O||A[15]!==D||A[16]!==U?(g=()=>{let e=D||O;if(e){let t=U.get(e);W(t?.sharedID||"")}},A[14]=O,A[15]=D,A[16]=U,A[17]=g):g=A[17],A[18]!==M||A[19]!==O||A[20]!==D||A[21]!==U?(y=[M,W,O,U,D],A[18]=M,A[19]=O,A[20]=D,A[21]=U,A[22]=y):y=A[22],(0,m.useEffect)(g,y),A[23]!==F||A[24]!==L||A[25]!==M||A[26]!==O||A[27]!==q||A[28]!==B||A[29]!==D?(_=async()=>{let e=D||O,t=new o.k(F,B),n=await t.unshareThread(e);if(n.ok){let{sharedID:t,sharedAt:a,sharedMessageID:r}=n.payload;M.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:a,sharedMessageID:r}}),G.current=!1,L(),(0,l.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:q})}},A[23]=F,A[24]=L,A[25]=M,A[26]=O,A[27]=q,A[28]=B,A[29]=D,A[30]=_):_=A[30];let J=_;A[31]!==L?(x=()=>{L()},A[31]=L,A[32]=x):x=A[32];let Y=x;A[33]!==J||A[34]!==q?(v=()=>{if(q)return(0,a.jsx)(c.Q,{onClick:J,variant:"danger",children:"Unshare"})},A[33]=J,A[34]=q,A[35]=v):v=A[35];let X=v;A[36]!==L?(b=()=>(0,a.jsx)(c.Q,{onClick:L,children:"Cancel"}),A[36]=L,A[37]=b):b=A[37];let Z=b;A[38]===Symbol.for("react.memo_cache_sentinel")?(S=(0,a.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),A[38]=S):S=A[38];let ee=z?.name||"";return A[39]!==ee?(C=(0,a.jsx)("span",{className:p.threadTitle,children:ee}),A[39]=ee,A[40]=C):C=A[40],A[41]!==K?(j=(0,a.jsx)("span",{className:p.threadDescription,children:K}),A[41]=K,A[42]=j):j=A[42],A[43]!==C||A[44]!==j?(N=(0,a.jsxs)(d.B,{direction:"vertical",className:p.threadInfoStack,children:[C,j]}),A[43]=C,A[44]=j,A[45]=N):N=A[45],A[46]===Symbol.for("react.memo_cache_sentinel")?(w=(0,a.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),A[46]=w):w=A[46],A[47]!==Z?(I=Z(),A[47]=Z,A[48]=I):I=A[48],A[49]!==X?(E=X(),A[49]=X,A[50]=E):E=A[50],A[51]!==I||A[52]!==E?(T=(0,a.jsxs)(d.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:p.buttonStack,children:[I,E]}),A[51]=I,A[52]=E,A[53]=T):T=A[53],A[54]!==N||A[55]!==T?(k=(0,a.jsxs)("div",{className:p.container,children:[S,N,w,T]}),A[54]=N,A[55]=T,A[56]=k):k=A[56],A[57]!==Y||A[58]!==k?(R=(0,a.jsx)(u.l,{title:"Unshare conversation",onClose:Y,width:"large",children:k}),A[57]=Y,A[58]=k,A[59]=R):R=A[59],R};try{h.displayName||(h.displayName="UnshareConversationDialog")}catch{}},5156:(e,t,n)=>{n.d(t,{U:()=>Y});var a=n(74848),r=n(21728),i=n(35247),s=n(84646),o=n(82595),l=n(894),c=n(75202),d=n(13017),u=n(38621),m=n(5945),p=n(52446),h=n(34164),f=n(96540),g=n(2635),y=n(33592),_=n(25641),x=n(53419),v=n(87330),b=n(63557),S=n(19342),C=n(40961),j=n(3201);let N={container:"ConversationListV2-module__container--DfLLE",condensed:"ConversationListV2-module__condensed--vCbJZ",empty:"ConversationListV2-module__empty--4TgQY",list:"ConversationListV2-module__list--N8p2i",section:"ConversationListV2-module__section--G3Lm1",title:"ConversationListV2-module__title--VKD9S",item:"ConversationListV2-module__item--cPXI6",link:"ConversationListV2-module__link--J46j6",text:"ConversationListV2-module__text--IsNRP",context:"ConversationListV2-module__context--a0pCE",emptyStateHeading:"ConversationListV2-module__emptyStateHeading--KkuQU",emptyStateText:"ConversationListV2-module__emptyStateText--LsdKG"};function w({selectedItemID:e,loadingState:t,onConversationSelect:n,isSidebarCondensed:r}){let i=(0,y.b)(),{threads:s}=(0,g.Pk)(),o=(0,f.useMemo)(()=>i.sortAndFilterThreads(s).map(e=>({id:e.id,text:(0,_.CB)(e),href:`${_.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[s,i]),l=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let a=new Date(t);a.setDate(t.getDate()-7);let r=new Date(t);r.setDate(t.getDate()-30);let i=[],s=[],o=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?i.push(c):c.date.toDateString()===n.toDateString()?s.push(c):c.date>a?o.push(c):c.date>r&&l.push(c);return{Today:i,Yesterday:s,"Last 7 days":o,"Last 30 days":l}}(o),c=0===o.length,d=(0,f.useId)();return(0,a.jsx)("nav",{"aria-labelledby":`${d}-conversations`,id:`${d}-conversation-list`,tabIndex:-1,className:(0,h.$)(N.container,r&&N.condensed),children:c&&("loading"===t||"pending"===t)?(0,a.jsx)(S.r,{lines:5}):c?(0,a.jsx)(T,{}):(0,a.jsxs)("div",{className:N.section,children:[(0,a.jsx)("h3",{id:`${d}-conversations`,className:"sr-only",children:"Conversations"}),Object.entries(l).map(([t,r])=>r.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{id:`${d}_${t}`,className:N.title,children:t}),(0,a.jsx)("ul",{className:N.list,children:r.map(t=>(0,a.jsx)(I,{item:t,selectedItemId:e??void 0,onSelect:n,threads:s},t.id))})]},t))]})})}function I(e){let t,n,i,s,o,l=(0,r.c)(17),{item:c,selectedItemId:h,onSelect:g,threads:y}=e,_=c.id===h,[b,S]=(0,f.useState)(null),[w,I]=(0,f.useState)(!1);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>I(!0),l[0]=t):t=l[0];let T=t;l[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>I(!1),l[1]=n):n=l[1];let k=n;l[2]!==h||l[3]!==y?(i=y.get(h),l[2]=h,l[3]=y,l[4]=i):i=l[4];let R=i,A=!!R?.customCopilotID,L=(0,f.useRef)(null);l[5]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,C.flushSync)(()=>S(null)),L.current?.focus()},l[5]=s):s=l[5];let D=s;return l[6]!==b||l[7]!==A||l[8]!==c.href||l[9]!==c.id||l[10]!==c.text||l[11]!==w||l[12]!==g||l[13]!==_||l[14]!==h||l[15]!==y?(o=c.href&&(0,a.jsxs)("li",{className:N.item,children:[(0,a.jsx)(d.N_,{className:N.link,to:c.href,"aria-current":_?"page":void 0,onClick:()=>{g(),(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:c.id,mode:"immersive"})},children:(0,a.jsx)("span",{className:N.text,children:c.text})}),(0,a.jsx)("span",{className:N.context,children:(0,a.jsxs)(m.W,{anchorRef:L,children:[(0,a.jsx)(m.W.Anchor,{children:(0,a.jsx)(v.K,{loading:w,icon:u.KebabHorizontalIcon,"aria-label":"Manage conversation",variant:"invisible",onClick:E})}),(0,a.jsx)(m.W.Overlay,{children:(0,a.jsx)(p.l,{children:(0,a.jsx)(j.V,{onOpenDialog:S,isShared:!!y.get(c.id)?.sharedID,showShare:!A})})})]})}),(0,a.jsx)(j.p,{visibleDialog:b,onClose:D,threadName:c.text,threadId:c.id,selectedThreadId:h,onStartLoading:T,onFinishLoading:k,returnFocusRef:L})]},c.id),l[6]=b,l[7]=A,l[8]=c.href,l[9]=c.id,l[10]=c.text,l[11]=w,l[12]=g,l[13]=_,l[14]=h,l[15]=y,l[16]=o):o=l[16],o}function E(){return(0,x.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})}function T(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsxs)("div",{className:N.empty,children:[(0,a.jsx)(b.A,{as:"h3",className:N.emptyStateHeading,children:"No conversations yet"}),(0,a.jsx)("span",{className:N.emptyStateText,children:"Ask Copilot anything on the right to start your first conversation."})]}),t[0]=e):e=t[0],e}try{w.displayName||(w.displayName="ConversationList")}catch{}try{I.displayName||(I.displayName="ConversationListEntry")}catch{}try{T.displayName||(T.displayName="EmptyState")}catch{}let k={quicklinks:"CopilotNavigation-module__quicklinks--y91ru",footer:"CopilotNavigation-module__footer--WE0C5",blankslateContainer:"CopilotNavigation-module__blankslateContainer--nuX9Y",ssoButton:"CopilotNavigation-module__ssoButton--cAcPq",ssoContent:"CopilotNavigation-module__ssoContent--sQStD",condensed:"CopilotNavigation-module__condensed--TzlR_"};var R=n(27359),A=n(47789),L=n(23657),D=n(49851),P=n(77999),M=n(21654),O=n(84802);let B={list:"ServiceList-module__list--nR74A",section:"ServiceList-module__section--k1uLc",item:"ServiceList-module__item--fn806",link:"ServiceList-module__link--VJdHH",content:"ServiceList-module__content--k6BSj",textWrapper:"ServiceList-module__textWrapper--jtpsQ",text:"ServiceList-module__text--DxTKY",label:"ServiceList-module__label--eTRas",externalLabel:"ServiceList-module__externalLabel--P9mcb",condensed:"ServiceList-module__condensed--x5s6A",previewLabel:"ServiceList-module__previewLabel--JWC5Z",externalIcon:"ServiceList-module__externalIcon--lTFBq"};function F(e){let t,n,i,s,l=(0,r.c)(18),{"aria-current":c,"data-analytics-event":m,href:p,icon:f,onLinkClick:g,id:y,displayName:_,condensed:x,label:v,external:b}=e;l[0]!==y||l[1]!==g?(t=e=>{g?.(e,y)},l[0]=y,l[1]=g,l[2]=t):t=l[2];let S=t;l[3]!==c||l[4]!==m||l[5]!==S?(n={"aria-current":c,"data-analytics-event":m,className:B.link,onClick:S},l[3]=c,l[4]=m,l[5]=S,l[6]=n):n=l[6];let C=n;l[7]!==C||l[8]!==x||l[9]!==_||l[10]!==b||l[11]!==p||l[12]!==f||l[13]!==v?(i=b?(0,a.jsxs)("a",{href:p,className:B.link,"aria-label":_,rel:"noopener noreferrer",children:[(0,a.jsx)(o.I,{size:16,icon:f}),(0,a.jsxs)("div",{className:(0,h.$)(B.content,x&&B.condensed),children:[(0,a.jsx)("div",{className:B.textWrapper,children:(0,a.jsx)("div",{className:B.text,children:_})}),(0,a.jsx)("div",{className:B.label,children:(0,a.jsxs)("div",{className:B.externalLabel,children:[(0,a.jsx)("span",{className:B.previewLabel,children:v}),(0,a.jsx)(u.ArrowUpRightIcon,{className:B.externalIcon})]})})]})]}):(0,a.jsxs)(d.N_,{to:p,...C,"aria-label":_,children:[(0,a.jsx)(o.I,{size:16,icon:f}),(0,a.jsxs)("div",{className:(0,h.$)(B.content,x&&B.condensed),children:[(0,a.jsx)("div",{className:B.textWrapper,children:(0,a.jsx)("div",{className:B.text,children:_})}),(0,a.jsx)("div",{className:B.label,children:v})]})]}),l[7]=C,l[8]=x,l[9]=_,l[10]=b,l[11]=p,l[12]=f,l[13]=v,l[14]=i):i=l[14];let j=i,N=x?_:"";return l[15]!==j||l[16]!==N?(s=(0,a.jsx)("li",{className:B.section,children:(0,a.jsx)("div",{className:B.item,children:(0,a.jsx)(P.m,{text:N,children:j})})}),l[15]=j,l[16]=N,l[17]=s):s=l[17],s}let U=JSON.stringify({source:"ServiceList"});function $({toggleFloatingSidebar:e,isSidebarCondensed:t}){let n=(0,g.Pk)(),{selectedThreadID:r}=n,i=(0,R.v)()?.id,o=(0,A.qw)(),l=(0,y.b)(),c=(0,O.G)(),d=(0,s.BV)(),u=(0,L.mM)(),m=!r&&!i&&!u,p=async t=>{t.metaKey||t.ctrlKey||(e(),await c({clearTopic:!0,includeThreads:!1}),(0,x.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},h=(0,f.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),v=(0,f.useCallback)((t,n)=>{t.metaKey||t.ctrlKey||(e(),l.selectPlugin(n))},[e,l]),b=(0,f.useMemo)(()=>[...d?[{type:"spaces",component:(0,a.jsx)(F,{"aria-current":u?"page":void 0,"data-analytics-event":U,displayName:"Spaces",href:_.VR,icon:D.Dy,condensed:t,id:"spaces",onLinkClick:h,label:(0,a.jsx)(M.A,{variant:"success",children:"Preview"})},"spaces"),displayName:"Spaces"}]:[],...o.flatMap(e=>e.navigationItems&&e.navigationItems.length>0?e.navigationItems.map(n=>({type:"plugin",component:(0,a.jsx)(F,{"aria-current":i===e.id?"page":void 0,"data-analytics-event":U,displayName:n.displayName,href:n.href,icon:n.icon,condensed:t,id:n.id,onLinkClick:n.external?void 0:t=>v(t,e.id),label:n.label,external:n.external},`${e.id}-${n.id}`),displayName:n.displayName})):e.NavigationComponent?[{type:"plugin",component:(0,a.jsx)(e.NavigationComponent,{"data-analytics-event":U,chatState:n,onLinkClick:v},e.id),displayName:e.displayName}]:[])].sort((e,t)=>e.displayName.localeCompare(t.displayName)),[d,u,t,h,o,i,v,n]);return(0,a.jsxs)("ul",{className:B.list,children:[(0,a.jsx)(F,{"aria-current":m?"page":void 0,"data-analytics-event":U,displayName:"New chat",href:_.Jz,icon:D.KJ,condensed:t,id:"home",onLinkClick:p}),b.map(e=>e.component)]})}try{F.displayName||(F.displayName="ServiceListItem")}catch{}try{$.displayName||($.displayName="ServiceList")}catch{}var V=n(17005),q=n(87255),W=n(51213),G=n(77430),H=n(16030),z=n(66289);let Q={userButton:"UserMenu-module__userButton--FuXsC",condensed:"UserMenu-module__condensed--rjzRR",userContent:"UserMenu-module__userContent--jXldm",userAvatar:"UserMenu-module__userAvatar--sp40T",menuItem:"UserMenu-module__menuItem--oXBxi",userDetails:"UserMenu-module__userDetails--mes1V",username:"UserMenu-module__username--n5Tln",description:"UserMenu-module__description--FvI5s"};function K(e){let t,n,i,s,o,l,c,d,y,_,v,b,S,C,j,N,w,I,E,T,k,R,A,D,P,M=(0,r.c)(52),{isCondensed:O}=e,B=void 0!==O&&O,F=(0,f.useRef)(null),U=(0,f.useRef)(null),[$,K]=(0,f.useState)(!1),[Y,X]=(0,f.useState)(!1),{currentUserLogin:Z,plan:ee}=(0,g.bP)("currentUserLogin","plan"),et=(0,L.mM)(),en=B&&Q.condensed;M[0]!==en?(t=(0,h.$)(Q.userButton,en),M[0]=en,M[1]=t):t=M[1];let ea=B?"user":void 0,er=`/${Z}.png`;M[2]!==er?(n=(0,a.jsx)("div",{className:Q.userAvatar,children:(0,a.jsx)(G.r,{src:er,size:20})}),M[2]=er,M[3]=n):n=M[3],M[4]!==Z?(i=(0,a.jsx)("div",{className:Q.userContent,children:Z}),M[4]=Z,M[5]=i):i=M[5],M[6]!==t||M[7]!==ea||M[8]!==n||M[9]!==i?(s=(0,a.jsx)(m.W.Anchor,{children:(0,a.jsxs)("button",{className:t,"aria-label":ea,children:[n,i]})}),M[6]=t,M[7]=ea,M[8]=n,M[9]=i,M[10]=s):s=M[10];let ei=`/${Z}`,es=`/${Z}.png`;return M[11]!==es?(o=(0,a.jsx)("div",{className:Q.userAvatar,children:(0,a.jsx)(G.r,{src:es,size:32})}),M[11]=es,M[12]=o):o=M[12],M[13]!==Z?(l=(0,a.jsx)("div",{className:Q.username,children:Z}),M[13]=Z,M[14]=l):l=M[14],M[15]!==ee?(c=function(e){switch(e){case W.UH.IndividualFree:return"Free";case W.UH.IndividualPro:return"Pro";case W.UH.IndividualProPlus:return"Pro+";case W.UH.Business:return"Business";case W.UH.Enterprise:return"Enterprise";default:return"Free"}}(ee),M[15]=ee,M[16]=c):c=M[16],M[17]!==c?(d=(0,a.jsxs)("span",{className:Q.description,children:["Copilot ",c]}),M[17]=c,M[18]=d):d=M[18],M[19]!==l||M[20]!==d?(y=(0,a.jsxs)("div",{className:Q.userDetails,children:[l,d]}),M[19]=l,M[20]=d,M[21]=y):y=M[21],M[22]!==o||M[23]!==y?(_=(0,a.jsxs)("div",{className:Q.menuItem,children:[o,y]}),M[22]=o,M[23]=y,M[24]=_):_=M[24],M[25]!==_||M[26]!==ei?(v=(0,a.jsx)(p.l.LinkItem,{href:ei,children:_}),M[25]=_,M[26]=ei,M[27]=v):v=M[27],M[28]===Symbol.for("react.memo_cache_sentinel")?(b=(0,a.jsx)(p.l.Divider,{}),M[28]=b):b=M[28],M[29]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{X(!0),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},M[29]=S):S=M[29],M[30]===Symbol.for("react.memo_cache_sentinel")?(C=(0,a.jsxs)(p.l.Item,{onSelect:S,children:[(0,a.jsx)(p.l.LeadingVisual,{children:(0,a.jsx)(u.NoteIcon,{})}),"Personal instructions"]}),M[30]=C):C=M[30],M[31]!==et?(j=!et&&(0,a.jsxs)(p.l.Item,{onSelect:()=>{K(!0),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_MANAGE_SHARED",mode:"immersive"})},children:[(0,a.jsx)(p.l.LeadingVisual,{children:(0,a.jsx)(u.ListUnorderedIcon,{})}),"Manage shared conversations"]}),M[31]=et,M[32]=j):j=M[32],M[33]===Symbol.for("react.memo_cache_sentinel")?(N=()=>{U.current?.openDialog(),(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},M[33]=N):N=M[33],M[34]===Symbol.for("react.memo_cache_sentinel")?(w=(0,a.jsxs)(p.l.Item,{onSelect:N,children:[(0,a.jsx)(p.l.LeadingVisual,{children:(0,a.jsx)(u.CommentIcon,{})}),"Give feedback"]}),M[34]=w):w=M[34],M[35]===Symbol.for("react.memo_cache_sentinel")?(I=(0,a.jsxs)(p.l.LinkItem,{href:"/settings/copilot",onClick:J,children:[(0,a.jsx)(p.l.LeadingVisual,{children:(0,a.jsx)(u.GearIcon,{})}),"Settings"]}),E=(0,a.jsx)(z.k,{}),M[35]=I,M[36]=E):(I=M[35],E=M[36]),M[37]!==v||M[38]!==j?(T=(0,a.jsx)(m.W.Overlay,{width:"small",align:"end",children:(0,a.jsxs)(p.l,{children:[v,b,C,j,w,I,E]})}),M[37]=v,M[38]=j,M[39]=T):T=M[39],M[40]!==T||M[41]!==s?(k=(0,a.jsxs)(m.W,{anchorRef:F,children:[s,T]}),M[40]=T,M[41]=s,M[42]=k):k=M[42],M[43]===Symbol.for("react.memo_cache_sentinel")?(R=(0,a.jsx)(V.l,{ref:U,mode:"immersive",returnFocusRef:F}),M[43]=R):R=M[43],M[44]!==$?(A=$&&(0,a.jsx)(H.b,{closeDialog:()=>{K(!1)},returnFocusRef:F}),M[44]=$,M[45]=A):A=M[45],M[46]!==Y?(D=Y&&(0,a.jsx)(q.Y,{onDismiss:()=>X(!1),returnFocusRef:F}),M[46]=Y,M[47]=D):D=M[47],M[48]!==k||M[49]!==A||M[50]!==D?(P=(0,a.jsxs)(a.Fragment,{children:[k,R,A,D]}),M[48]=k,M[49]=A,M[50]=D,M[51]=P):P=M[51],P}function J(){return(0,x.BI)("dotcom_chat.activate",{target:"USER_MENU_SETTINGS",mode:"immersive"})}try{K.displayName||(K.displayName="UserMenu")}catch{}function Y(){let e,t=(0,r.c)(5),{sidebarExpanded:n,sidebarVisible:i,layoutBreakpoint:s,toggleSidebar:o}=(0,l.L)();return t[0]!==s||t[1]!==n||t[2]!==i||t[3]!==o?(e=(0,a.jsx)(X,{sidebarExpanded:n,sidebarVisible:i,sidebarFloating:s,onToggleSidebar:o}),t[0]=s,t[1]=n,t[2]=i,t[3]=o,t[4]=e):e=t[4],e}function X(e){let t,n,l,_,x,v,b,S,C,j,N,I,E,T,R,A=(0,r.c)(46),{onSidebarClick:L,onToggleSidebar:D,sidebarExpanded:P,sidebarFloating:M,sidebarVisible:O}=e,B=!M&&!P,F=(0,y.b)(),{threadsLoading:U,threads:V,selectedThreadID:q,ssoOrganizations:W}=(0,g.bP)("threadsLoading","threads","selectedThreadID","ssoOrganizations"),G=(0,s.BV)(),H=i.W.immersiveServiceNavigation||G,z=(0,d.zy)(),Q=z.pathname.includes("/share/");A[0]!==F||A[1]!==V.size||A[2]!==U.state?(t=()=>{0===V.size&&"pending"===U.state&&F.fetchThreads()},n=[V.size,F,U.state],A[0]=F,A[1]=V.size,A[2]=U.state,A[3]=t,A[4]=n):(t=A[3],n=A[4]),(0,f.useEffect)(t,n),A[5]!==L||A[6]!==O||A[7]!==D?(l=()=>{L?.(),O&&D()},A[5]=L,A[6]=O,A[7]=D,A[8]=l):l=A[8];let J=l,Y=(0,f.useId)();A[9]!==z.hash||A[10]!==z.pathname||A[11]!==z.search?(_=e=>{let t=`/orgs/${encodeURIComponent(e)}/sso`,n=z.pathname+z.search+z.hash;return`${t}?return_to=${encodeURIComponent(n)}`},A[9]=z.hash,A[10]=z.pathname,A[11]=z.search,A[12]=_):_=A[12];let X=_;A[13]!==X||A[14]!==B||A[15]!==W?(x=()=>{if(0===W.length)return null;if(1===W.length){let e=W[0];return(0,a.jsxs)("a",{href:X(e.login),className:k.ssoButton,children:[(0,a.jsx)(u.ShieldLockIcon,{size:16}),"Single sign-on"]})}return(0,a.jsxs)(m.W,{children:[(0,a.jsx)(m.W.Anchor,{children:(0,a.jsxs)("button",{className:k.ssoButton,"aria-label":"Single sign on",children:[(0,a.jsx)(o.I,{icon:u.ShieldLockIcon,size:16}),(0,a.jsx)("div",{className:(0,h.$)(k.ssoContent,B&&k.condensed),children:"Single sign-on"})]})}),(0,a.jsx)(m.W.Overlay,{children:(0,a.jsx)(p.l,{children:W.map(e=>(0,a.jsx)(p.l.LinkItem,{href:X(e.login),children:e.login},e.login))})})]})},A[13]=X,A[14]=B,A[15]=W,A[16]=x):x=A[16];let ee=x;A[17]===Symbol.for("react.memo_cache_sentinel")?(v=(0,a.jsx)(Z,{}),A[17]=v):v=A[17];let et=`${Y}-quick-links`,en=`${Y}-quick-links`;A[18]!==en?(b=(0,a.jsx)("h3",{id:en,className:"sr-only",children:"Quick links"}),A[18]=en,A[19]=b):b=A[19],A[20]!==J||A[21]!==B||A[22]!==H?(S=H&&(0,a.jsx)($,{isSidebarCondensed:B,toggleFloatingSidebar:J}),A[20]=J,A[21]=B,A[22]=H,A[23]=S):S=A[23],A[24]!==S||A[25]!==et||A[26]!==b?(C=(0,a.jsxs)("nav",{"aria-labelledby":et,className:k.quicklinks,children:[b,S]}),A[24]=S,A[25]=et,A[26]=b,A[27]=C):C=A[27];let ea=Q?null:q;return A[28]!==J||A[29]!==B||A[30]!==ea||A[31]!==U.state?(j=(0,a.jsx)(w,{selectedItemID:ea,loadingState:U.state,onConversationSelect:J,isSidebarCondensed:B}),A[28]=J,A[29]=B,A[30]=ea,A[31]=U.state,A[32]=j):j=A[32],A[33]!==C||A[34]!==j?(N=(0,a.jsxs)(c.t,{fallback:v,children:[C,j]}),A[33]=C,A[34]=j,A[35]=N):N=A[35],A[36]!==ee?(I=ee(),A[36]=ee,A[37]=I):I=A[37],A[38]!==B?(E=(0,a.jsx)(K,{isCondensed:B}),A[38]=B,A[39]=E):E=A[39],A[40]!==I||A[41]!==E?(T=(0,a.jsxs)("div",{className:k.footer,children:[I,E]}),A[40]=I,A[41]=E,A[42]=T):T=A[42],A[43]!==N||A[44]!==T?(R=(0,a.jsxs)(a.Fragment,{children:[N,T]}),A[43]=N,A[44]=T,A[45]=R):R=A[45],R}function Z(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:k.blankslateContainer,children:(0,a.jsx)("div",{children:"Error loading conversations"})}),t[0]=e):e=t[0],e}try{Y.displayName||(Y.displayName="CopilotNavigationWithContext")}catch{}try{X.displayName||(X.displayName="CopilotNavigation")}catch{}try{Z.displayName||(Z.displayName="SidebarContentsFallback")}catch{}},66289:(e,t,n)=>{n.d(t,{k:()=>u});var a=n(74848),r=n(21728),i=n(2635),s=n(11083),o=n(52446),l=n(35247),c=n(79064),d=n(33592);function u(){let e,t,n,u,m,p=(0,r.c)(12),[h,f]=(0,c.iI)("getTracingRequestedFlag","setTracingRequestedFlag"),g=(0,d.b)(),{traceInfo:y}=(0,i.bP)("traceInfo");return(e=(0,s.X)(),l.W.requestTracing&&e)?(p[0]!==g||p[1]!==y?.roots?(t=y?.roots&&(0,a.jsx)(o.l.Item,{onSelect:()=>g.showTraceDisplay(!0),children:"Show Trace"}),p[0]=g,p[1]=y?.roots,p[2]=t):t=p[2],p[3]!==f||p[4]!==h?(n=()=>{f(!h)},p[3]=f,p[4]=h,p[5]=n):n=p[5],p[6]!==n||p[7]!==h?(u=(0,a.jsx)(o.l.Item,{onSelect:n,selected:h,children:"Request tracing"}),p[6]=n,p[7]=h,p[8]=u):u=p[8],p[9]!==t||p[10]!==u?(m=(0,a.jsxs)(o.l.Group,{selectionVariant:"multiple",children:[t,u]}),p[9]=t,p[10]=u,p[11]=m):m=p[11],m):null}try{u.displayName||(u.displayName="TracingMenuItems")}catch{}},76347:(e,t,n)=>{n.d(t,{BH:()=>R,xx:()=>P,tZ:()=>M});var a=n(74848),r=n(21728),i=n(2635),s=n(35247),o=n(33535),l=n(6551),c=n(40104),d=n(96540),u=n(93380),m=n(41649),p=n(7812),h=n(33592),f=n(25641),g=n(82075),y=n(46996);let _=["thread-scoped-file","draft-issue"],x=e=>!!e.isUserEdited,v=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,y.A)(t.get(e),n)),b=(e,t)=>!v(new Map(e.filter(e=>_.includes(e.type)).map(e=>[(0,f.Vb)(e),e])),new Map(t.filter(e=>_.includes(e.type)).map(e=>[(0,f.Vb)(e),e]))),S=(e,t)=>!v(new Map(Array.from(e).filter(([,e])=>x(e))),new Map(Array.from(t).filter(([,e])=>x(e))));function C(e){return[e.id,e]}function j(e){return null!=e}function N(e){return[(0,f.Vb)(e),e]}function w(e){return null!=e}function I(e){return(0,p.PO)(e)}let E=(0,d.createContext)(void 0),T=new Map,k=[];function R(e){let t,n,c,y,v,R,P,M,O,B,F,U,$,V,q,W=(0,r.c)(45),{children:G}=e,H=(0,o.AI)(!1),[z,Q]=(0,d.useState)(T),[K,J]=(0,d.useState)(k),[Y,X]=(0,d.useState)(k),[Z,ee]=(0,d.useState)(void 0),[et,en,ea]=(0,u.B)(!1),er=(0,l.S)((0,i.pn)(L)),ei=(0,i.pn)(A);W[0]!==H||W[1]!==er||W[2]!==ei?(t=()=>{er&&er!==ei&&(Q(T),J(k),ee(void 0),null===ei&&H.setValue(!1))},n=[ei,er,H],W[0]=H,W[1]=er,W[2]=ei,W[3]=t,W[4]=n):(t=W[3],n=W[4]),(0,d.useEffect)(t,n),W[5]===Symbol.for("react.memo_cache_sentinel")?(c=(e,t)=>{let n=void 0===t||t;J(t=>{if(t.includes(e))return t;let n=(0,p.oy)(e),a=t.findIndex(e=>(0,p.oy)(e)===n),r=[...t];return -1===a?r.push(e):r.splice(a,1,e),r}),ee(t=>n||void 0===t||(0,p.oy)(t)===(0,p.oy)(e)?e:t)},W[5]=c):c=W[5];let es=c;W[6]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{Q(t=>{let n=new Map(t);return n.set(e.id,e),n})},W[6]=y):y=W[6];let eo=y;W[7]!==K||W[8]!==Z?(v=e=>{let t=K.indexOf(e);if(-1===t)return;let n=K.toSpliced(t,1);Z===e&&ee(n[t-1]??n[0]),J(n)},W[7]=K,W[8]=Z,W[9]=v):v=W[9];let el=(0,m.K)(v);W[10]!==K||W[11]!==Z?(R=e=>{if(e){let t=K;for(let n of e){let e=t.indexOf(n);-1!==e&&(t=t.toSpliced(e,1),Z===n&&ee(t[e-1]??t[0]))}J(t)}else J(k),ee(void 0)},W[10]=K,W[11]=Z,W[12]=R):R=W[12];let ec=(0,m.K)(R);if(W[13]!==z){for(let[e,t]of(M=new Map,z)){let n=(0,p.oy)(e),a=M.get(n)??[];a.push(t.id),M.set(n,a)}for(let e of M.values())e.sort((e,t)=>{let n=z.get(e),a=z.get(t);return"timestamp"in n&&"timestamp"in a?n.timestamp.valueOf()-a.timestamp.valueOf():0});W[13]=z,W[14]=M}else M=W[14];P=M,W[15]!==el||W[16]!==K||W[17]!==P?(O=e=>{if(e){for(let t of e)if(Q(e=>{let n=new Map(e);return n.delete(t)?n:e}),K.includes(t)){let e=(0,p.oy)(t),n=P.get(e),a=n?.indexOf(t)??-1,r=n?.[a-1];r?es(r,!1):el(t)}}else Q(T),J(k),ee(void 0)},W[15]=el,W[16]=K,W[17]=P,W[18]=O):O=W[18];let ed=(0,m.K)(O);W[19]!==H.value||W[20]!==K?(B=()=>H.value?K:k,W[19]=H.value,W[20]=K,W[21]=B):B=W[21];let eu=(0,m.K)(B);W[22]!==H?(F=()=>H.setValue(!0),W[22]=H,W[23]=F):F=W[23];let em=F;W[24]!==H?(U=()=>H.setValue(!1),W[24]=H,W[25]=U):U=W[25];let ep=U;return W[26]!==el||W[27]!==ec||W[28]!==ep||W[29]!==ea||W[30]!==en||W[31]!==eu||W[32]!==H||W[33]!==z||W[34]!==K||W[35]!==Y||W[36]!==em||W[37]!==ed||W[38]!==Z||W[39]!==et||W[40]!==P?(V={items:z,versionedItems:P,isContentPreviewOpen:H,getOpenItems:eu,allOpenItems:K,openItemsBeforeSubthreadChange:Y,selectedItem:Z,updateItem:eo,setOpenItemsBeforeSubthreadChange:X,openItem:es,closeItem:el,closeItems:ec,openPreviewPane:em,closePreviewPane:ep,removeItems:ed,showLoadingState:et,enableLoadingState:en,disableLoadingState:ea},W[26]=el,W[27]=ec,W[28]=ep,W[29]=ea,W[30]=en,W[31]=eu,W[32]=H,W[33]=z,W[34]=K,W[35]=Y,W[36]=em,W[37]=ed,W[38]=Z,W[39]=et,W[40]=P,W[41]=V):V=W[41],D($=V),!function(e){let t,n,a,o=(0,r.c)(10),{items:l,removeItems:c,updateItem:u}=e,{currentReferences:m,messages:y,selectedThreadID:v}=(0,i.Pk)(),E=(0,h.b)(),T=(0,d.useRef)(l),k=(0,d.useRef)(m);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,g.A)("sessionStorage"),o[0]=t):t=o[0];let R=t;o[1]!==m||o[2]!==l||o[3]!==E||o[4]!==y.length||o[5]!==c||o[6]!==v||o[7]!==u?(n=()=>{let e=S(T.current,l);T.current=l;let t=b(k.current,m);if(k.current=m,e){let e=new Map(Array.from(l.values()).filter(x).map(I).filter(w).map(N)),t=new Set;for(let n of m)if(_.includes(n.type)){let a=(0,f.Vb)(n);t.add(a);let r=e.get(a);r?b([r],[n])&&E.addReference(r,"content-preview"):E.removeReference(n)}for(let[n,a]of e)t.has(n)||E.addReference(a,"content-preview")}else if(t){let e=new Map(m.map(e=>(0,p.oR)({ref:e,messageIndex:y.length})).filter(j).map(C)),t=new Set;for(let[n,a]of l)if(x(a)){t.add(n);let r=e.get(n);null!=r?S(new Map([[r.id,r]]),new Map([[a.id,a]]))&&u(r):(c([n]),s.W.copilotPersistEditedDraftIssues&&R.removeItem(`edited-${v}-${n}`))}for(let[n,a]of e)t.has(n)||u(a)}},a=[l,E,m,y.length,c,u,R,v],o[1]=m,o[2]=l,o[3]=E,o[4]=y.length,o[5]=c,o[6]=v,o[7]=u,o[8]=n,o[9]=a):(n=o[8],a=o[9]),(0,d.useEffect)(n,a)}($),W[42]!==G||W[43]!==$?(q=(0,a.jsx)(E.Provider,{value:$,children:G}),W[42]=G,W[43]=$,W[44]=q):q=W[44],q}function A(e){return e.selectedThreadID}function L(e){return e.selectedThreadID}let D=e=>{let t,n,a,o=(0,r.c)(8),{updateItem:l}=e,{messagesLoading:u,selectedThreadID:m}=(0,i.Pk)(),p=`edited-${m}`;if(s.W.copilotPersistEditedDraftIssues){let e;o[0]!==p?(e=(0,c.MV)(p),o[0]=p,o[1]=e):e=o[1],t=e}else{let e;o[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[2]=e):e=o[2],t=e}let h=t;o[3]!==h||o[4]!==u.state||o[5]!==l?(n=()=>{if(h&&"loaded"===u.state)for(let e of h)l(e)},a=[h,l,u.state],o[3]=h,o[4]=u.state,o[5]=l,o[6]=n,o[7]=a):(n=o[6],a=o[7]),(0,d.useEffect)(n,a)};function P(){let e=(0,d.useContext)(E);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}function M(){let e=(0,d.useContext)(E);if(!e)throw Error("useContentPreviewOpen must be used within ContentPreviewContextProvider");return(0,o.HN)(e.isContentPreviewOpen)}try{E.displayName||(E.displayName="ContentPreviewContext")}catch{}try{R.displayName||(R.displayName="ContentPreviewProvider")}catch{}},56359:(e,t,n)=>{n.d(t,{T:()=>p});var a=n(74848),r=n(21728),i=n(5945),s=n(87330),o=n(52446),l=n(69948),c=n(96540),d=n(38621),u=n(295),m=n(53419);function p(e){let t,n,p,h,f,g,y,_,x,v,b,S,C,j,N=(0,r.c)(36),{onDelete:w,onCopyLoop:I,onDuplicate:E,onShare:T,loopId:k,variant:R}=e,A=void 0===R?"invisible":R,[L,D]=(0,c.useState)(null),P=(0,c.useRef)(null),{mutate:M,isPending:O}=(0,u.h)();N[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{D("delete")},N[0]=t):t=N[0];let B=t;N[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{D(null)},N[1]=n):n=N[1];let F=n;N[2]!==M||N[3]!==k||N[4]!==w?(p=async()=>{k&&(D(null),M(k,{onSuccess:w}),w?.())},N[2]=M,N[3]=k,N[4]=w,N[5]=p):p=N[5];let U=p;N[6]!==k||N[7]!==E?(h=()=>{k&&E&&((0,m.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),E(k))},N[6]=k,N[7]=E,N[8]=h):h=N[8];let $=h;N[9]!==T?(f=()=>{T?.()},N[9]=T,N[10]=f):f=N[10];let V=f;return k?(N[11]!==O||N[12]!==A?(g=(0,a.jsx)(i.W.Anchor,{children:(0,a.jsx)(s.K,{loading:O,icon:d.KebabHorizontalIcon,"aria-label":"Manage loop",variant:A})}),N[11]=O,N[12]=A,N[13]=g):g=N[13],N[14]!==$||N[15]!==E?(y=E&&(0,a.jsxs)(o.l.Item,{onSelect:$,children:[(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(d.DuplicateIcon,{})}),"Duplicate"]}),N[14]=$,N[15]=E,N[16]=y):y=N[16],N[17]!==V||N[18]!==T?(_=T&&(0,a.jsxs)(o.l.Item,{onSelect:V,children:[(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(d.LinkIcon,{})}),"Copy link"]}),N[17]=V,N[18]=T,N[19]=_):_=N[19],N[20]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsxs)(o.l.Item,{variant:"danger",onSelect:B,children:[(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(d.TrashIcon,{})}),"Delete"]}),N[20]=x):x=N[20],N[21]!==I?(v=I&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.l.Divider,{}),(0,a.jsxs)(o.l.Item,{onSelect:I,children:[(0,a.jsx)(o.l.LeadingVisual,{children:(0,a.jsx)(d.CopyIcon,{})}),"Copy JSON"]})]}),N[21]=I,N[22]=v):v=N[22],N[23]!==v||N[24]!==y||N[25]!==_?(b=(0,a.jsx)(i.W.Overlay,{align:"end",children:(0,a.jsxs)(o.l,{children:[y,_,x,v]})}),N[23]=v,N[24]=y,N[25]=_,N[26]=b):b=N[26],N[27]!==b||N[28]!==g?(S=(0,a.jsxs)(i.W,{anchorRef:P,children:[g,b]}),N[27]=b,N[28]=g,N[29]=S):S=N[29],N[30]!==U||N[31]!==L?(C="delete"===L&&(0,a.jsx)(l.K,{title:"Delete loop",onClose:e=>{"confirm"===e?U():F()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),N[30]=U,N[31]=L,N[32]=C):C=N[32],N[33]!==S||N[34]!==C?(j=(0,a.jsxs)(a.Fragment,{children:[S,C]}),N[33]=S,N[34]=C,N[35]=j):j=N[35],j):null}try{p.displayName||(p.displayName="LoopsActionMenu")}catch{}},99519:(e,t,n)=>{n.d(t,{Ak:()=>o,EY:()=>s,qT:()=>i});var a=n(96540);let r=(0,a.createContext)(null),i=r.Provider;function s(){let e=(0,a.useContext)(r);if(!e)throw Error("useLoopsService must be used inside a LoopsServiceProvider");return e}function o(){return(0,a.useContext)(r)}try{r.displayName||(r.displayName="LoopsServiceContext")}catch{}},50050:(e,t,n)=>{n.d(t,{Mr:()=>g,NY:()=>_,Ud:()=>y});var a=n(74848),r=n(49835),i=n(96540),s=n(33535),o=n(88431),l=n(96868),c=n(21728),d=n(96459),u=n(53380);function m(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SET_VIEW":return{...e,view:t.view};case"SET_SIDE_PANEL_VIEW":return{...e,sidePanelView:t.view};case"SET_VERSION":return{...e,version:t.version};case"SET_STATE":return{...e,...t.state};default:return e}}var p=n(53627);let h=(0,i.createContext)(new r.Lj(l.qB)),f=(0,i.createContext)(()=>{});function g({children:e}){let[t,n]=function(){let e,t,n,a,r=(0,c.c)(8),[s]=(0,d.o)();r[0]!==s?(e=(0,u.hW)(s),r[0]=s,r[1]=e):e=r[1];let[o,l]=(0,i.useReducer)(m,e);return r[2]!==s||r[3]!==o?(t=()=>{let e=(0,u.Ts)(o);e.toString()!==s.toString()&&(0,p.MM)(e)},n=[o,s],r[2]=s,r[3]=o,r[4]=t,r[5]=n):(t=r[4],n=r[5]),(0,i.useEffect)(t,n),r[6]!==o?(a=[o,l],r[6]=o,r[7]=a):a=r[7],a}(),r=(0,s.AI)(t);(0,o.N)(()=>{r.value=t},[t,r]);let l=(0,i.useCallback)(e=>{n(e)},[n]);return(0,a.jsx)(h.Provider,{value:r,children:(0,a.jsx)(f.Provider,{value:l,children:e})})}function y(e){let t=(0,i.useContext)(h);if(!t)throw Error("useLoopsStateLens can only be used inside a PipesProvider");let n=(0,s.Sk)(t,e);return(0,s.HN)(n)}function _(){return(0,i.useContext)(f)}try{h.displayName||(h.displayName="LoopsStateContext")}catch{}try{f.displayName||(f.displayName="LoopsDispatchContext")}catch{}try{g.displayName||(g.displayName="LoopsStateProvider")}catch{}},65025:(e,t,n)=>{n.d(t,{r:()=>u});var a=n(74848),r=n(38621),i=n(69410),s=n(81246),o=n(30729),l=n(20263);let c={Flash:"FlashError-module__Flash--fKR6V",SafeHTMLText:"FlashError-module__SafeHTMLText--J8lL9",Link:"FlashError-module__Link--doNrG",ruleViolationsTitle:"FlashError-module__ruleViolationsTitle--rHHNU",ruleViolationRow:"FlashError-module__ruleViolationRow--ekTTM",Octicon:"FlashError-module__Octicon--U4ZWa",ruleViolationText:"FlashError-module__ruleViolationText--Oe758"};var d=n(34164);function u({prefix:e,errorMessageUsingPrefix:t,errorMessageNotUsingPrefix:n,hideRuleErrorsTitle:u,ruleErrors:m,helpUrl:p,flashRef:h}){let f=(m?.length||0)>0;return t||n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{id:"flash",variant:"danger",className:(0,d.$)("d-flex flex-items-center flex-justify-between",c.Flash),tabIndex:-1,ref:h,children:t?(0,a.jsxs)("div",{children:[e," ",(0,a.jsx)(l.BC,{className:c.SafeHTMLText,html:t}),f&&p&&(0,a.jsx)(s.A,{href:`${p}/repositories/configuring-branches-and-merges-in-your-repository/managing-rulesets/about-rulesets`,className:c.Link,children:"Learn more about rulesets."})]}):n&&(0,a.jsx)("div",{children:n})}),f&&(0,a.jsxs)("div",{className:c.Flash,children:[!u&&(0,a.jsx)("div",{className:c.ruleViolationsTitle,children:"Repository rule violations found:"}),m?.map(e=>(0,a.jsxs)("div",{className:c.ruleViolationRow,children:[(0,a.jsx)(o.A,{icon:r.XCircleFillIcon,size:16,className:c.Octicon}),(0,a.jsx)("div",{className:c.ruleViolationText,children:e})]},e))]})]}):null}try{u.displayName||(u.displayName="FlashError")}catch{}},95280:(e,t,n)=>{n.d(t,{B:()=>f});var a=n(74848),r=n(35247),i=n(53419),s=n(38621),o=n(83294),l=n(10871),c=n(5945),d=n(87330),u=n(52446);let m={actions:"EditorMenu-module__actions--PsLtQ",editorButton:"EditorMenu-module__editorButton--MKhLx"};var p=n(56487),h=n(60429);function f({menuLocation:e,mode:t,onButtonClick:n}){let f=(n,a)=>{r.W.freeToPaidTelemetry?(0,p.F)({eventName:n,menuLocation:e,mode:t,action:a}):(0,i.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${n.toUpperCase()}`,mode:t})};return(0,a.jsxs)(o.A,{className:m.actions,children:[(0,a.jsx)(l.z,{className:m.editorButton,href:h.A.vscode.url,leadingVisual:(0,a.jsx)("img",{src:h.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{n?.(),f("vscode","ide_menu_primary_button_click")},children:h.A.vscode.name}),(0,a.jsxs)(c.W,{children:[(0,a.jsx)(c.W.Anchor,{children:(0,a.jsx)(d.K,{"aria-label":"More editors",icon:s.TriangleDownIcon,unsafeDisableTooltip:!0,onClick:()=>{f("menu","ide_menu_open")},"data-testid":"editor-dropdown-button"})}),(0,a.jsx)(c.W.Overlay,{align:"end",children:(0,a.jsx)(u.l,{children:(0,a.jsx)(p.t,{menuLocation:e,mode:t,onItemClick:n})})})]})]})}try{f.displayName||(f.displayName="EditorMenu")}catch{}},56487:(e,t,n)=>{n.d(t,{F:()=>l,t:()=>c});var a=n(74848),r=n(35247),i=n(53419),s=n(52446),o=n(60429);function l({eventName:e,menuLocation:t,mode:n,action:a,text:r}){let s=`${t.toUpperCase()}_${e.toUpperCase()}`;(0,i.BI)("dotcom_chat.activate",{target:s,text:r,category:t,action:a,mode:n})}function c({menuLocation:e,mode:t,onItemClick:n}){return Object.entries(o.A).map(([i,{name:o,url:c,icon:d}])=>(0,a.jsxs)(s.l.LinkItem,{href:c,onClick:()=>{n?.(),r.W.freeToPaidTelemetry&&l({eventName:i,menuLocation:e,mode:t,action:"menu_item_click",text:o})},children:[o,(0,a.jsx)(s.l.LeadingVisual,{children:(0,a.jsx)("img",{src:d,alt:"",height:"20",width:"20"})})]},i))}try{c.displayName||(c.displayName="EditorMenuItems")}catch{}},61305:(e,t,n)=>{n.d(t,{z4:()=>b,Y0:()=>E,$I:()=>w});var a=n(74848),r=n(21728),i=n(96540),s=n(55847),o=n(5945),l=n(52446),c=n(39820),d=n(38621),u=n(77430),m=n(13017),p=n(31315),h=n(69599),f=n(51587),g=n(11083),y=n(30459);let _={bannerOuterWrapper:"GlobalSSOBanner-module__bannerOuterWrapper--fyxDF",bannerInnerWrapper:"GlobalSSOBanner-module__bannerInnerWrapper--butqf",banner:"GlobalSSOBanner-module__banner--kzCnx"};function x({children:e,hidden:t}){let[n,r]=i.useState("visible"),s=i.useRef(null),o=i.useRef(void 0);return(i.useEffect(()=>{if(t&&"visible"===n){r("collapsing");let e=s.current;if(e){let t=e.getBoundingClientRect().height;o.current=t,e.style.height=`${t}px`}}else if("collapsing"===n){let e=setTimeout(()=>{r("hidden")},300);return()=>{clearTimeout(e)}}},[t,n]),"hidden"===n)?null:(0,a.jsx)("div",{ref:s,style:{height:"visible"===n?o.current??"auto":0},className:_.bannerOuterWrapper,children:(0,a.jsx)("div",{className:_.bannerInnerWrapper,style:{transform:"visible"===n?void 0:`translateY(-${o.current??0}px)`},children:e})})}try{300..displayName||(300..displayName="ANIMATION_DURATION")}catch{}try{x.displayName||(x.displayName="SlideDismiss")}catch{}var v=n(79634);let b="dismissed_sso_orgs",S="global_sso_banner";function C(e){return"object"==typeof e&&null!==e&&"id"in e&&"name"in e&&"login"in e}function j(e,t){let n=`/orgs/${encodeURIComponent(e)}/sso`,a=t.pathname+t.search+t.hash;return`${n}?return_to=${encodeURIComponent(a)}`}function N(e){let t,n,i,c,d,m=(0,r.c)(20),{ssoOrgs:p,redirectLocation:h}=e,{sendClickAnalyticsEvent:f}=(0,y.S)();if(0===p.length)return null;m[0]!==f?(t=()=>{f({category:S,action:"click_single_sso_button",label:"sso_authentication"})},m[0]=f,m[1]=t):t=m[1];let g=t;m[2]!==f?(n=e=>{f({category:S,action:"click_sso_dropdown_item",label:`org:${e}`})},m[2]=f,m[3]=n):n=m[3];let _=n;if(1===p.length){let e,t,n=p[0];return void 0===n?null:(m[4]!==n.login||m[5]!==h?(e=j(n.login,h),m[4]=n.login,m[5]=h,m[6]=e):e=m[6],m[7]!==g||m[8]!==e?(t=(0,a.jsx)(s.Q,{as:"a",href:e,onClick:g,children:"Single sign-on"}),m[7]=g,m[8]=e,m[9]=t):t=m[9],t)}if(m[10]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(o.W.Button,{size:"small",children:"Single sign-on"}),m[10]=i):i=m[10],m[11]!==_||m[12]!==h||m[13]!==p){let e;m[15]!==_||m[16]!==h?(e=e=>(0,a.jsxs)(l.l.LinkItem,{href:j(e.login,h),onClick:()=>_(e.name),children:[e.avatar_url&&(0,a.jsx)(l.l.LeadingVisual,{children:(0,a.jsx)(u.r,{size:24,src:e.avatar_url})}),e.name]},e.login),m[15]=_,m[16]=h,m[17]=e):e=m[17],c=p.map(e),m[11]=_,m[12]=h,m[13]=p,m[14]=c}else c=m[14];return m[18]!==c?(d=(0,a.jsxs)(o.W,{children:[i,(0,a.jsx)(o.W.Overlay,{children:(0,a.jsx)(l.l,{children:c})})]}),m[18]=c,m[19]=d):d=m[19],d}function w(e){let t,n,s,o,l,u,f,v,C,j=(0,r.c)(22),{ssoOrgs:w}=e,E=(0,m.zy)(),[T,k]=i.useState("visible"),R=i.useRef(!1),{sendClickAnalyticsEvent:A}=(0,y.S)();if(j[0]!==w.length?(t=()=>{!R.current&&w.length>0&&((0,h.G7)("record_sso_banner_metrics")&&(0,g.i)({incrementKey:"GLOBAL_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),R.current=!0)},j[0]=w.length,j[1]=t):t=j[1],j[2]!==w?(n=[w],j[2]=w,j[3]=n):n=j[3],i.useEffect(t,n),0===w.length)return null;j[4]!==A||j[5]!==w?(s=()=>{A({category:S,action:"click_dismiss_button",label:"banner_dismissed"}),k("hidden");let e=w.map(e=>e.id).sort(),t=new Date(Date.now()+2592e6).toUTCString();(0,p.Yj)(b),(0,p.TV)(b,JSON.stringify(e),t)},j[4]=A,j[5]=w,j[6]=s):s=j[6];let L=s;j[7]!==w?(o=()=>{if(0===w.length)return"Single sign-on to see results";let e=w.slice(0,3),t=w.length-3,n=1===w.length?"organization":"organizations";return(0,a.jsxs)(a.Fragment,{children:["Single sign-on to see results in the ",(()=>{let n=e.map(I);if(1===n.length)return n[0];{if(2===n.length)return(0,a.jsxs)(a.Fragment,{children:[n[0]," and ",n[1]]});let e=n.length-1,r=(0,a.jsxs)(a.Fragment,{children:[n[0],", ",n[1],", and ",n[e]]});return t>0?(0,a.jsxs)(a.Fragment,{children:[r,", and ",t," more"]}):r}})()," ",n]})},j[7]=w,j[8]=o):o=j[8];let D=o,P="visible"!==T;return j[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)(d.ShieldLockIcon,{}),j[9]=l):l=j[9],j[10]!==D?(u=D(),j[10]=D,j[11]=u):u=j[11],j[12]!==E||j[13]!==w?(f=(0,a.jsx)(N,{ssoOrgs:w,redirectLocation:E}),j[12]=E,j[13]=w,j[14]=f):f=j[14],j[15]!==L||j[16]!==u||j[17]!==f?(v=(0,a.jsx)(c.l,{title:"Single-sign on",className:_.banner,hideTitle:!0,icon:l,description:u,onDismiss:L,primaryAction:f,"data-testid":"global-sso-banner"}),j[15]=L,j[16]=u,j[17]=f,j[18]=v):v=j[18],j[19]!==P||j[20]!==v?(C=(0,a.jsx)(x,{hidden:P,children:v}),j[19]=P,j[20]=v,j[21]=C):C=j[21],C}function I(e){return(0,a.jsx)("strong",{children:e.name},e.login)}function E(){let e,t=(0,r.c)(2),{ssoOrgs:n,suppressBanner:s}=function(){let{ssoOrgs:e,baseAvatarUrl:t}=(0,f.N)(),{current_sso_orgs_match_dismissed_cookie:n}=(0,v.X)()??{},a=i.useMemo(()=>e.filter(C).map(e=>({...e,avatar_url:`${t}/u/${e.id}`})),[e,t]);return{suppressBanner:!0===n||function(e){let t=function(){let e=(0,p.Ri)(b);if(e?.value)try{let t=JSON.parse(e.value);return Array.isArray(t)?t:[]}catch(e){(0,p.Yj)(b)}return[]}();return e.length===t.length&&e.every(e=>t.includes(e.id))}(a),ssoOrgs:a,baseAvatarUrl:t}}();return 0===n.length||!(0,h.G7)("global_sso_banner")||s?null:(t[0]!==n?(e=(0,a.jsx)(w,{ssoOrgs:n}),t[0]=n,t[1]=e):e=t[1],e)}try{N.displayName||(N.displayName="SSOActionMenu")}catch{}try{w.displayName||(w.displayName="GlobalSsoBanner")}catch{}try{E.displayName||(E.displayName="ContextualGlobalSsoBanner")}catch{}},79684:(e,t,n)=>{n.d(t,{B:()=>m});var a=n(74848),r=n(21728),i=n(96540),s=n(13017),o=n(55847),l=n(5945),c=n(52446);let d={container:"Breadcrumbs-module__container--bnnIp",list:"Breadcrumbs-module__list--hG7n1",item:"Breadcrumbs-module__item--fekY7",link:"Breadcrumbs-module__link--A48Bt",text:"Breadcrumbs-module__text--yZS1N",icon:"Breadcrumbs-module__icon--CWnGJ",condensed:"Breadcrumbs-module__condensed--l60Z1",condensedList:"Breadcrumbs-module__condensedList--vpMXO",alwaysVisible:"Breadcrumbs-module__alwaysVisible--dK_nL",fullList:"Breadcrumbs-module__fullList--aHVvT"};var u=n(38621);let m=e=>{let t,n,s,u,m,y=(0,r.c)(31),{children:_,"aria-label":x,condensed:v}=e,b=void 0===x?"Breadcrumbs":x;if(y[0]!==_){t=[];let e=(n,a)=>{let r=void 0===a?"":a;for(let[a,s]of i.Children.toArray(n).entries())(0,i.isValidElement)(s)&&(s.type===i.Fragment||"Symbol(react.fragment)"===s.type.toString()?e(s.props.children,`${r}fragment-${a}-`):s.type===p?t.push({key:s.key?.toString()||`${r}item-${a}`,href:s.props.href,children:s.props.children,hasMenu:!1}):s.type===h&&t.push({key:s.key?.toString()||`${r}item-${a}`,children:s.props.children,hasMenu:!0,menuOverlay:s.props.menuOverlay}))};e(_),y[0]=_,y[1]=t}else t=y[1];let S=t[t.length-1];y[2]!==t?(n=t.slice(0,-1),y[2]=t,y[3]=n):n=y[3];let C=n,j=t.length>=3,N=void 0!==v&&v&&j,w=i.useRef(null);if(void 0!==v)if(N){let e,t,n,r,i;return y[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(o.Q,{ref:w,className:d.link,children:"..."}),y[4]=e):e=y[4],y[5]!==C?(t=(0,a.jsx)("li",{className:d.item,children:(0,a.jsxs)(l.W,{children:[e,(0,a.jsx)(l.W.Overlay,{children:(0,a.jsx)(c.l,{children:C.map(f)})})]})}),y[5]=C,y[6]=t):t=y[6],y[7]!==S?(n=S&&(S.hasMenu&&S.menuOverlay?(0,a.jsx)(h,{menuOverlay:S.menuOverlay,children:S.children}):S.href?(0,a.jsx)(p,{href:S.href,children:S.children}):null),y[7]=S,y[8]=n):n=y[8],y[9]!==t||y[10]!==n?(r=(0,a.jsxs)("ol",{className:d.list,children:[t,n]}),y[9]=t,y[10]=n,y[11]=r):r=y[11],y[12]!==b||y[13]!==r?(i=(0,a.jsx)("nav",{className:`${d.container} ${d.condensed}`,"aria-label":b,children:r}),y[12]=b,y[13]=r,y[14]=i):i=y[14],i}else{let e,t;return y[15]!==_?(e=(0,a.jsx)("ol",{className:d.list,children:_}),y[15]=_,y[16]=e):e=y[16],y[17]!==b||y[18]!==e?(t=(0,a.jsx)("nav",{className:d.container,"aria-label":b,children:e}),y[17]=b,y[18]=e,y[19]=t):t=y[19],t}let I=`${d.list} ${j?d.fullList:d.alwaysVisible}`;return y[20]!==_||y[21]!==I?(s=(0,a.jsx)("ol",{className:I,children:_}),y[20]=_,y[21]=I,y[22]=s):s=y[22],y[23]!==j||y[24]!==S||y[25]!==C?(u=j&&(0,a.jsxs)("ol",{className:`${d.list} ${d.condensedList}`,children:[(0,a.jsx)("li",{className:d.item,children:(0,a.jsxs)(l.W,{children:[(0,a.jsx)(o.Q,{ref:w,className:d.link,children:"..."}),(0,a.jsx)(l.W.Overlay,{children:(0,a.jsx)(c.l,{children:C.map(g)})})]})}),S&&(S.hasMenu&&S.menuOverlay?(0,a.jsx)(h,{menuOverlay:S.menuOverlay,children:S.children}):S.href?(0,a.jsx)(p,{href:S.href,children:S.children}):null)]}),y[23]=j,y[24]=S,y[25]=C,y[26]=u):u=y[26],y[27]!==b||y[28]!==s||y[29]!==u?(m=(0,a.jsxs)("nav",{className:d.container,"aria-label":b,children:[s,u]}),y[27]=b,y[28]=s,y[29]=u,y[30]=m):m=y[30],m},p=e=>{let t,n,i,o,l,c=(0,r.c)(10);return c[0]!==e?({href:n,children:t,...i}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=i):(t=c[1],n=c[2],i=c[3]),c[4]!==t?(o=(0,a.jsx)("span",{className:d.text,children:t}),c[4]=t,c[5]=o):o=c[5],c[6]!==n||c[7]!==i||c[8]!==o?(l=(0,a.jsx)("li",{className:d.item,children:(0,a.jsx)(s.N_,{...i,to:n,className:d.link,"aria-current":"page",children:o})}),c[6]=n,c[7]=i,c[8]=o,c[9]=l):l=c[9],l},h=e=>{let t,n,i,s,o=(0,r.c)(8),{children:c,menuOverlay:m}=e;return o[0]!==c?(t=(0,a.jsx)("span",{className:d.text,children:c}),o[0]=c,o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)("span",{className:d.icon,children:(0,a.jsx)(u.TriangleDownIcon,{})}),o[2]=n):n=o[2],o[3]!==t?(i=(0,a.jsx)(l.W.Anchor,{children:(0,a.jsxs)("button",{className:d.link,"aria-current":"page","aria-haspopup":"true",children:[t,n]})}),o[3]=t,o[4]=i):i=o[4],o[5]!==m||o[6]!==i?(s=(0,a.jsx)("li",{className:d.item,children:(0,a.jsxs)(l.W,{children:[i,m]})}),o[5]=m,o[6]=i,o[7]=s):s=o[7],s};m.Item=p,m.ItemWithMenu=h;try{m.displayName||(m.displayName="Breadcrumbs")}catch{}try{p.displayName||(p.displayName="Item")}catch{}try{h.displayName||(h.displayName="ItemWithMenu")}catch{}function f(e){return(0,a.jsx)(c.l.LinkItem,{href:e.href,children:e.children},e.key)}function g(e){return(0,a.jsx)(c.l.LinkItem,{href:e.href,children:e.children},e.key)}},11607:(e,t,n)=>{n.d(t,{$:()=>l});var a=n(74848),r=n(21728),i=n(34164),s=n(96540);let o={button:"Button-module__button--hMmd1",small:"Button-module__small--xYPhJ",medium:"Button-module__medium--d64dr",condensed:"Button-module__condensed--WrsZL",iconOnly:"Button-module__iconOnly--NkD70",default:"Button-module__default--fN_4Y",disabled:"Button-module__disabled--tNL94",invisible:"Button-module__invisible--lYAq6",icon:"Button-module__icon--Qd_AY",text:"Button-module__text--VDmpz"},l=(0,s.forwardRef)((e,t)=>{let n,s,l,c,d,u,m,p,h,f,g,y,_,x,v,b,S,C=(0,r.c)(51);C[0]!==e?({size:u,variant:m,condensed:p,iconOnly:h,icon:c,className:s,children:n,disabled:l,...d}=e,C[0]=e,C[1]=n,C[2]=s,C[3]=l,C[4]=c,C[5]=d,C[6]=u,C[7]=m,C[8]=p,C[9]=h):(n=C[1],s=C[2],l=C[3],c=C[4],d=C[5],u=C[6],m=C[7],p=C[8],h=C[9]);let j=void 0===m?"default":m,N=void 0!==p&&p,w=void 0!==h&&h,I=o[void 0===u?"small":u],E=o[j],T=N&&o.condensed,k=w&&o.iconOnly,R=l&&o.disabled;C[10]!==s||C[11]!==I||C[12]!==E||C[13]!==T||C[14]!==k||C[15]!==R?(f=(0,i.$)(o.button,I,E,T,k,R,s),C[10]=s,C[11]=I,C[12]=E,C[13]=T,C[14]=k,C[15]=R,C[16]=f):f=C[16];let A=f;C[17]!==c?(g=null!=c?(0,a.jsx)("span",{className:o.icon,children:c}):null,C[17]=c,C[18]=g):g=C[18],C[19]!==n||C[20]!==w?(y=!w&&n?(0,a.jsx)("span",{className:o.text,children:n}):null,C[19]=n,C[20]=w,C[21]=y):y=C[21],C[22]!==g||C[23]!==y?(_=(0,a.jsxs)(a.Fragment,{children:[g,y]}),C[22]=g,C[23]=y,C[24]=_):_=C[24];let L=_;if("href"in d){let e,n,r,i,s;return C[25]!==d?({href:e,target:i,rel:n,...r}=d,C[25]=d,C[26]=e,C[27]=n,C[28]=r,C[29]=i):(e=C[26],n=C[27],r=C[28],i=C[29]),C[30]!==A||C[31]!==L||C[32]!==l||C[33]!==e||C[34]!==n||C[35]!==r||C[36]!==t||C[37]!==i?(s=(0,a.jsx)("a",{ref:t,href:e,target:i,rel:n,className:A,"aria-disabled":l,...r,children:L}),C[30]=A,C[31]=L,C[32]=l,C[33]=e,C[34]=n,C[35]=r,C[36]=t,C[37]=i,C[38]=s):s=C[38],s}C[39]!==d?({onClick:x,type:b,...v}=d,C[39]=d,C[40]=x,C[41]=v,C[42]=b):(x=C[40],v=C[41],b=C[42]);let D=void 0===b?"button":b;return C[43]!==A||C[44]!==L||C[45]!==l||C[46]!==x||C[47]!==v||C[48]!==t||C[49]!==D?(S=(0,a.jsx)("button",{ref:t,type:D,onClick:x,disabled:l,className:A,...v,children:L}),C[43]=A,C[44]=L,C[45]=l,C[46]=x,C[47]=v,C[48]=t,C[49]=D,C[50]=S):S=C[50],S});l.displayName="Button"},27912:(e,t,n)=>{n.d(t,{X:()=>k,P:()=>D});var a=n(74848),r=n(21728),i=n(34164),s=n(96540),o=n(24021),l=n(69599),c=n(61305);let d={container:"Layout-module__container--qlyoa",banner:"Layout-module__banner--b14up",sidebar:"Layout-module__sidebar--r6coV",mainColumn:"Layout-module__mainColumn--OFMVb",secondaryColumn:"Layout-module__secondaryColumn--Ut9LZ",monoView:"Layout-module__monoView--z920C",sidebarCondensed:"Layout-module__sidebarCondensed--m7Zsu",panelView:"Layout-module__panelView--l6qZ7",columnLeft:"Layout-module__columnLeft--jY2aC",secondaryColumnVisible:"Layout-module__secondaryColumnVisible--RdfK7",splitView:"Layout-module__splitView--ldg6X",columnRight:"Layout-module__columnRight--WBwz7",mainColumnRight:"Layout-module__mainColumnRight--Izd_P"},u={header:"Header-module__header--tjtIT",columnHeader:"Header-module__columnHeader--UxTKW",column:"Header-module__column--ysX1b",leftColumn:"Header-module__leftColumn--MghGY",rightColumn:"Header-module__rightColumn--AckUb"};var m=n(38621),p=n(894),h=n(11607);let f={sidebarToggleButton:"SidebarToggle-module__sidebarToggleButton--NAVdU"};function g(){let e,t,n=(0,r.c)(3),{toggleSidebar:i}=(0,p.L)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(m.ThreeBarsIcon,{}),n[0]=e):e=n[0],n[1]!==i?(t=(0,a.jsx)("div",{className:f.sidebarToggleButton,children:(0,a.jsx)(h.$,{icon:e,iconOnly:!0,onClick:i,"aria-label":"Toggle sidebar"})}),n[1]=i,n[2]=t):t=n[2],t}try{g.displayName||(g.displayName="SidebarToggle")}catch{}function y(e){let t,n,s,o,l,c=(0,r.c)(10);return c[0]!==e?({children:t,className:n,...s}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=s):(t=c[1],n=c[2],s=c[3]),c[4]!==n?(o=(0,i.$)(u.column,u.leftColumn,n),c[4]=n,c[5]=o):o=c[5],c[6]!==t||c[7]!==s||c[8]!==o?(l=(0,a.jsx)("div",{className:o,...s,children:t}),c[6]=t,c[7]=s,c[8]=o,c[9]=l):l=c[9],l}function _(e){let t,n,s,o,l,c=(0,r.c)(10);return c[0]!==e?({children:t,className:n,...s}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=s):(t=c[1],n=c[2],s=c[3]),c[4]!==n?(o=(0,i.$)(u.column,u.rightColumn,n),c[4]=n,c[5]=o):o=c[5],c[6]!==t||c[7]!==s||c[8]!==o?(l=(0,a.jsx)("div",{className:o,...s,children:t}),c[6]=t,c[7]=s,c[8]=o,c[9]=l):l=c[9],l}function x(e){let t,n,s,l,c,d,m,p=(0,r.c)(20);p[0]!==e?({children:t,className:n,...s}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=s):(t=p[1],n=p[2],s=p[3]),p[4]===Symbol.for("react.memo_cache_sentinel")?(l={leftColumn:y,rightColumn:_},p[4]=l):l=p[4];let[h]=(0,o.H)(t,l);if(h.leftColumn&&h.rightColumn){let e,t,r;return p[5]!==n?(e=(0,i.$)(u.columnHeader,n),p[5]=n,p[6]=e):e=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(g,{}),p[7]=t):t=p[7],p[8]!==s||p[9]!==h.leftColumn||p[10]!==h.rightColumn||p[11]!==e?(r=(0,a.jsxs)("header",{className:e,...s,children:[t,h.leftColumn,h.rightColumn]}),p[8]=s,p[9]=h.leftColumn,p[10]=h.rightColumn,p[11]=e,p[12]=r):r=p[12],r}return p[13]!==n?(c=(0,i.$)(u.header,n),p[13]=n,p[14]=c):c=p[14],p[15]===Symbol.for("react.memo_cache_sentinel")?(d=(0,a.jsx)(g,{}),p[15]=d):d=p[15],p[16]!==t||p[17]!==s||p[18]!==c?(m=(0,a.jsxs)("header",{className:c,...s,children:[d,t]}),p[16]=t,p[17]=s,p[18]=c,p[19]=m):m=p[19],m}try{y.displayName||(y.displayName="HeaderLeft")}catch{}try{_.displayName||(_.displayName="HeaderRight")}catch{}try{x.displayName||(x.displayName="Header")}catch{}let v={headerToggleOnly:"HeaderToggleOnly-module__headerToggleOnly--wC7_E"};function b(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:v.headerToggleOnly,children:(0,a.jsx)(g,{})}),t[0]=e):e=t[0],e}try{b.displayName||(b.displayName="HeaderToggleOnly")}catch{}let S={container:"Sidebar-module__container--onmDW",header:"Sidebar-module__header--rIhJd",sidebar:"Sidebar-module__sidebar--u6QU6",toggleSidebarFloating:"Sidebar-module__toggleSidebarFloating--fQq3y",toggleSidebarVertical:"Sidebar-module__toggleSidebarVertical--_YU5M",githubLogo:"Sidebar-module__githubLogo--qLZu3",visible:"Sidebar-module__visible--NW0KW",iconLineTop:"Sidebar-module__iconLineTop--Ef2Ww",iconLineBottom:"Sidebar-module__iconLineBottom--QhwW5",condensed:"Sidebar-module__condensed--DvFLD"};var C=n(81425),j=n(77999);function N(e){let t,n,o,l,c,d,u,p,f,g,y,_,x,v=(0,r.c)(42),{children:b,className:N,isFloating:w,isVisible:I,isExpanded:E,sidebarRef:T,onToggle:k,"data-testid":R}=e,A=!E,L=(0,C.L)(T);v[0]!==A||v[1]!==E||v[2]!==k||v[3]!==L?(t=e=>{L.current?.contains(e.target)&&!e.target.closest('a, button, [role="button"], [role="link"], [role="menuitem"], [role="menuitemcheckbox"], [role="dialog"]')&&(A||E)&&k()},v[0]=A,v[1]=E,v[2]=k,v[3]=L,v[4]=t):t=v[4];let D=t,P=(0,s.useId)();v[5]!==I?(n=()=>I?(0,a.jsx)(m.XIcon,{}):(0,a.jsx)(m.ThreeBarsIcon,{}),v[5]=I,v[6]=n):n=v[6];let M=n,O=`${P}-copilot-navigation`;v[7]!==N||v[8]!==A||v[9]!==I?(o=(0,i.$)(S.container,N,{[S.visible]:I,[S.condensed]:A}),v[7]=N,v[8]=A,v[9]=I,v[10]=o):o=v[10];let B=w?void 0:D,F=`${P}-copilot-navigation`;v[11]!==F?(l=(0,a.jsx)("h2",{id:F,className:"sr-only",children:"Copilot navigation"}),v[11]=F,v[12]=l):l=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)("a",{href:"/",target:"_self",className:S.githubLogo,"aria-label":"GitHub homepage",children:(0,a.jsx)(m.MarkGithubIcon,{size:32})}),v[13]=c):c=v[13];let U=I?"Close sidebar":"Open sidebar",$=I?"invisible":"default";v[14]!==M?(d=M(),v[14]=M,v[15]=d):d=v[15],v[16]!==k||v[17]!==$||v[18]!==d||v[19]!==U?(u=(0,a.jsx)(h.$,{className:S.toggleSidebarFloating,"aria-label":U,onClick:k,iconOnly:!0,variant:$,icon:d}),v[16]=k,v[17]=$,v[18]=d,v[19]=U,v[20]=u):u=v[20],v[21]!==u||v[22]!==l?(p=(0,a.jsxs)("div",{className:S.header,children:[l,c,u]}),v[21]=u,v[22]=l,v[23]=p):p=v[23],v[24]!==b||v[25]!==p?(f=(0,a.jsxs)("div",{className:S.sidebar,children:[p,b]}),v[24]=b,v[25]=p,v[26]=f):f=v[26];let V=I||E?"Condense":"Expand",q=I||E?"Condense sidebar":"Expand sidebar";return v[27]===Symbol.for("react.memo_cache_sentinel")?(g=(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M8 2.75 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:S.iconLineTop}),(0,a.jsx)("path",{d:"M8 13.25 L8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:S.iconLineBottom})]}),v[27]=g):g=v[27],v[28]!==k||v[29]!==q?(y=(0,a.jsx)("button",{className:S.toggleSidebarVertical,"aria-label":q,onClick:k,children:g}),v[28]=k,v[29]=q,v[30]=y):y=v[30],v[31]!==V||v[32]!==y?(_=(0,a.jsx)(j.m,{text:V,children:y}),v[31]=V,v[32]=y,v[33]=_):_=v[33],v[34]!==R||v[35]!==L||v[36]!==f||v[37]!==_||v[38]!==O||v[39]!==o||v[40]!==B?(x=(0,a.jsxs)("aside",{"aria-labelledby":O,ref:L,className:o,onClick:B,"data-testid":R,children:[f,_]}),v[34]=R,v[35]=L,v[36]=f,v[37]=_,v[38]=O,v[39]=o,v[40]=B,v[41]=x):x=v[41],x}try{N.displayName||(N.displayName="Sidebar")}catch{}function w(e){let t,n,s,o,l,c,u=(0,r.c)(17);if(u[0]!==e){let{children:a,className:r,onToggle:i,"data-testid":l,...c}=e;t=a,n=r,s=l,o=c,u[0]=e,u[1]=t,u[2]=n,u[3]=s,u[4]=o}else t=u[1],n=u[2],s=u[3],o=u[4];let{sidebarExpanded:m,sidebarVisible:h,layoutBreakpoint:f,toggleSidebar:g,sidebarRef:y}=(0,p.L)();return u[5]!==n?(l=(0,i.$)(d.sidebar,n),u[5]=n,u[6]=l):l=u[6],u[7]!==t||u[8]!==s||u[9]!==f||u[10]!==o||u[11]!==m||u[12]!==y||u[13]!==h||u[14]!==l||u[15]!==g?(c=(0,a.jsx)(N,{className:l,isFloating:f,isVisible:h,isExpanded:m,onToggle:g,sidebarRef:y,"data-testid":s,...o,children:t}),u[7]=t,u[8]=s,u[9]=f,u[10]=o,u[11]=m,u[12]=y,u[13]=h,u[14]=l,u[15]=g,u[16]=c):c=u[16],c}function I(e){let t,n,s,o,l,c=(0,r.c)(11);c[0]!==e?({children:t,className:n,...s}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=s):(t=c[1],n=c[2],s=c[3]);let{mainColumn:u}=(0,p.L)(),m="left"===u?d.mainColumn:d.secondaryColumn;return c[4]!==n||c[5]!==m?(o=(0,i.$)(d.columnLeft,m,n),c[4]=n,c[5]=m,c[6]=o):o=c[6],c[7]!==t||c[8]!==s||c[9]!==o?(l=(0,a.jsx)("div",{className:o,"data-column-position":"left",...s,children:t}),c[7]=t,c[8]=s,c[9]=o,c[10]=l):l=c[10],l}function E(e){let t,n,s,o,l,c,u=(0,r.c)(13);u[0]!==e?({children:t,className:n,"data-testid":s,...o}=e,u[0]=e,u[1]=t,u[2]=n,u[3]=s,u[4]=o):(t=u[1],n=u[2],s=u[3],o=u[4]);let{mainColumn:m}=(0,p.L)(),h="right"===m?d.mainColumn:d.secondaryColumn;return u[5]!==n||u[6]!==h?(l=(0,i.$)(d.columnRight,h,n),u[5]=n,u[6]=h,u[7]=l):l=u[7],u[8]!==t||u[9]!==s||u[10]!==o||u[11]!==l?(c=(0,a.jsx)("div",{className:l,"data-testid":s,"data-column-position":"right",...o,children:t}),u[8]=t,u[9]=s,u[10]=o,u[11]=l,u[12]=c):c=u[12],c}function T(){let e,t=(0,r.c)(1);return(0,l.G7)("global_sso_banner")?(t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:d.banner,children:(0,a.jsx)(c.Y0,{})}),t[0]=e):e=t[0],e):null}let k="(max-width: 1024px)",R="COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY";function A(){return function(){if("undefined"==typeof window)return null;try{let e=localStorage.getItem(R);return null===e?null:JSON.parse(e)}catch{return null}}()??!0}function L(e){let t,n,l,c,u,m,h,f,g,v,S,C,j,N=(0,r.c)(28);N[0]!==e?({children:t,className:n,mainColumn:h,"data-testid":l,secondaryColumnState:m,faviconOverride:c,...u}=e,N[0]=e,N[1]=t,N[2]=n,N[3]=l,N[4]=c,N[5]=u,N[6]=m,N[7]=h):(t=N[1],n=N[2],l=N[3],c=N[4],u=N[5],m=N[6],h=N[7]);let L=void 0===h?"left":h;N[8]===Symbol.for("react.memo_cache_sentinel")?(f={banner:T,header:x,sidebar:w,columnLeft:I,columnRight:E},N[8]=f):f=N[8];let[D]=(0,o.H)(t,f),P=function(e){if(!e||!(0,s.isValidElement)(e))return!1;let t=!1,n=!1,a=e.props.children;for(let e of s.Children.toArray(a))(0,s.isValidElement)(e)&&(e.type===y&&(t=!0),e.type===_&&(n=!0));return t&&n}(D.header||null),M=!!D.columnLeft&&!D.columnRight||!D.columnLeft&&!!D.columnRight,O=!!D.columnLeft&&!!D.columnRight,B=!P&&!M,F=function(e,t){let n,a,i,o,l,c,d=(0,r.c)(20),[u,m]=(0,s.useState)(A),[p,h]=(0,s.useState)(!1),f=(0,s.useState)(!1),[g,y]=t??f;d[0]!==y?(n=e=>{e?y(!1):h(!1)},d[0]=y,d[1]=n):n=d[1];let _=function(e,t){let n,a,i,o=(0,r.c)(6);o[0]!==e?(n=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,o[0]=e,o[1]=n):n=o[1];let[l,c]=(0,s.useState)(n);return o[2]!==t||o[3]!==e?(a=()=>{let n=window.matchMedia(e),a=e=>{c(e.matches),t&&t(e.matches)};return c(n.matches),n.addEventListener("change",a),()=>{n.removeEventListener("change",a)}},i=[e,t],o[2]=t,o[3]=e,o[4]=a,o[5]=i):(a=o[4],i=o[5]),(0,s.useEffect)(a,i),l}(k,n),x=(0,s.useRef)(null),v=(0,s.useRef)(null);d[2]!==_||d[3]!==u||d[4]!==p?(a=()=>{if(_)h(!p);else{let e=!u;m(e);if("undefined"!=typeof window)try{localStorage.setItem(R,JSON.stringify(e))}catch{}}},d[2]=_,d[3]=u,d[4]=p,d[5]=a):a=d[5];let b=a;d[6]!==g||d[7]!==y?(i=()=>{y(!g)},d[6]=g,d[7]=y,d[8]=i):i=d[8];let S=i;return d[9]!==p?(o=()=>{if(p&&v.current){let e=e=>{v.current&&!v.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},l=[p],d[9]=p,d[10]=o,d[11]=l):(o=d[10],l=d[11]),(0,s.useEffect)(o,l),d[12]!==_||d[13]!==e||d[14]!==g||d[15]!==u||d[16]!==p||d[17]!==S||d[18]!==b?(c={sidebarExpanded:u,sidebarVisible:p,toggleSidebar:b,secondaryColumnVisible:g,toggleSecondaryColumn:S,layoutBreakpoint:_,mainColumn:e,containerRef:x,sidebarRef:v},d[12]=_,d[13]=e,d[14]=g,d[15]=u,d[16]=p,d[17]=S,d[18]=b,d[19]=c):c=d[19],c}(L,m),{containerRef:U,secondaryColumnVisible:$,sidebarExpanded:V}=F,q=p.M,W=(0,i.$)(d.container,B&&d.panelView,P&&d.splitView,P&&"right"===L&&d.mainColumnRight,$&&d.secondaryColumnVisible,!$&&O&&"secondaryColumnHidden",M&&d.monoView,!V&&d.sidebarCondensed,n);return N[9]!==c?(g=c&&(0,a.jsx)("span",{"data-favicon-override":c,"data-testid":"favicon-override"}),N[9]=c,N[10]=g):g=N[10],N[11]===Symbol.for("react.memo_cache_sentinel")?(v=(0,a.jsx)(T,{}),N[11]=v):v=N[11],N[12]!==D.header?(S=D.header||(0,a.jsx)(b,{}),N[12]=D.header,N[13]=S):S=N[13],N[14]!==U||N[15]!==l||N[16]!==u||N[17]!==D.columnLeft||N[18]!==D.columnRight||N[19]!==D.sidebar||N[20]!==W||N[21]!==g||N[22]!==S?(C=(0,a.jsxs)("div",{className:W,"data-testid":l,ref:U,...u,children:[g,v,S,D.sidebar,D.columnLeft,D.columnRight]}),N[14]=U,N[15]=l,N[16]=u,N[17]=D.columnLeft,N[18]=D.columnRight,N[19]=D.sidebar,N[20]=W,N[21]=g,N[22]=S,N[23]=C):C=N[23],N[24]!==F||N[25]!==q.Provider||N[26]!==C?(j=(0,a.jsx)(q.Provider,{value:F,children:C}),N[24]=F,N[25]=q.Provider,N[26]=C,N[27]=j):j=N[27],j}let D=Object.assign(L,{Banner:T,Sidebar:w,ColumnLeft:I,ColumnRight:E,Header:x,HeaderLeft:y,HeaderRight:_});try{w.displayName||(w.displayName="LayoutSidebar")}catch{}try{I.displayName||(I.displayName="ColumnLeft")}catch{}try{E.displayName||(E.displayName="ColumnRight")}catch{}try{T.displayName||(T.displayName="Banner")}catch{}try{k.displayName||(k.displayName="LAYOUT_BREAKPOINT")}catch{}try{L.displayName||(L.displayName="LayoutRoot")}catch{}try{D.displayName||(D.displayName="Layout")}catch{}},30388:(e,t,n)=>{n.d(t,{qJ:()=>b});var a=n(74848),r=n(21728),i=n(96540),s=n(13017),o=n(19342);let l={container:"ListBlock-module__container--QbgMo",header:"ListBlock-module__header--meKIf",list:"ListBlock-module__list--YHbt4",emptyState:"ListBlock-module__emptyState--MymTD",item:"ListBlock-module__item--xlbmd",itemButton:"ListBlock-module__itemButton--o9fcO",actions:"ListBlock-module__actions--LfUWo",leadingVisual:"ListBlock-module__leadingVisual--tOjGr",title:"ListBlock-module__title--MZAST",description:"ListBlock-module__description--dTYnl",metadata:"ListBlock-module__metadata--gtl9k",skeletonItem:"ListBlock-module__skeletonItem--ZfJMT"};function c(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:l.container,children:i}),n[0]=i,n[1]=t):t=n[1],t}function d(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:l.header,children:i}),n[0]=i,n[1]=t):t=n[1],t}function u(e){let t,n,i,s,o=(0,r.c)(11);if(o[0]!==e?({children:t,loading:i,...n}=e,o[0]=e,o[1]=t,o[2]=n,o[3]=i):(t=o[1],n=o[2],i=o[3]),void 0!==i&&i){let e,t;return o[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(m),o[4]=e):e=o[4],o[5]!==n||o[6]!==e?(t=(0,a.jsx)("ul",{className:l.list,"data-testid":"list-block-skeleton",...n,children:e}),o[5]=n,o[6]=e,o[7]=t):t=o[7],t}return o[8]!==t||o[9]!==n?(s=(0,a.jsx)("ul",{className:l.list,...n,children:t}),o[8]=t,o[9]=n,o[10]=s):s=o[10],s}function m(e,t){return(0,a.jsx)(f,{},t)}function p(e){let t,n,o,c,d,u=(0,r.c)(39),m=null,p=null,f=null,v=null,b=null;if(u[0]!==e.children){for(let t of i.Children.toArray(e.children))i.isValidElement(t)&&(t.type===g?m=t:t.type===y?p=t:t.type===_?f=t:t.type===x?v=t:t.type===h&&(b=t));u[0]=e.children,u[1]=m,u[2]=p,u[3]=f,u[4]=v,u[5]=b}else m=u[1],p=u[2],f=u[3],v=u[4],b=u[5];u[6]!==f||u[7]!==m||u[8]!==v||u[9]!==p?(t=(0,a.jsxs)(a.Fragment,{children:[m,p,f,v]}),u[6]=f,u[7]=m,u[8]=v,u[9]=p,u[10]=t):t=u[10];let S=t;if("href"in e){let t,n,r,i,o;if(u[11]!==e?({href:t,isExternalLink:r,...n}=e,u[11]=e,u[12]=t,u[13]=n,u[14]=r):(t=u[12],n=u[13],r=u[14]),void 0!==r&&r){let e,r;return u[15]!==S||u[16]!==t||u[17]!==n?(e=(0,a.jsx)("a",{href:t,className:l.itemButton,target:"_self",rel:"noopener noreferrer",...n,children:S}),u[15]=S,u[16]=t,u[17]=n,u[18]=e):e=u[18],u[19]!==b||u[20]!==e?(r=(0,a.jsxs)("li",{className:l.item,children:[e,b]}),u[19]=b,u[20]=e,u[21]=r):r=u[21],r}return u[22]!==S||u[23]!==t||u[24]!==n?(i=(0,a.jsx)(s.N_,{...n,to:t,className:l.itemButton,children:S}),u[22]=S,u[23]=t,u[24]=n,u[25]=i):i=u[25],u[26]!==b||u[27]!==i?(o=(0,a.jsxs)("li",{className:l.item,children:[i,b]}),u[26]=b,u[27]=i,u[28]=o):o=u[28],o}return u[29]!==e?({onClick:n,...o}=e,u[29]=e,u[30]=n,u[31]=o):(n=u[30],o=u[31]),u[32]!==S||u[33]!==n||u[34]!==o?(c=(0,a.jsx)("button",{...o,className:l.itemButton,onClick:n,type:"button",children:S}),u[32]=S,u[33]=n,u[34]=o,u[35]=c):c=u[35],u[36]!==b||u[37]!==c?(d=(0,a.jsxs)("li",{className:l.item,children:[c,b]}),u[36]=b,u[37]=c,u[38]=d):d=u[38],d}function h(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:l.actions,children:i}),n[0]=i,n[1]=t):t=n[1],t}function f(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("li",{className:l.item,children:(0,a.jsx)("div",{className:l.skeletonItem,children:(0,a.jsx)(o.r,{lines:2})})}),t[0]=e):e=t[0],e}function g(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:l.leadingVisual,children:i}),n[0]=i,n[1]=t):t=n[1],t}function y(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:l.title,children:i}),n[0]=i,n[1]=t):t=n[1],t}function _(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:l.description,children:i}),n[0]=i,n[1]=t):t=n[1],t}function x(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("div",{className:l.metadata,children:i}),n[0]=i,n[1]=t):t=n[1],t}function v(e){let t,n=(0,r.c)(2),{children:i}=e;return n[0]!==i?(t=(0,a.jsx)("li",{className:l.emptyState,children:i}),n[0]=i,n[1]=t):t=n[1],t}p.LeadingVisual=g,p.Title=y,p.Description=_,p.SecondaryDescription=x,p.Metadata=x,p.Actions=h,p.Skeleton=f;let b=c;b.Header=d,b.List=u,b.Item=p,b.EmptyState=v,b.displayName="ListBlock",d.displayName="ListBlock.Header",u.displayName="ListBlock.List",p.displayName="ListBlock.Item",g.displayName="ListBlock.Item.LeadingVisual",y.displayName="ListBlock.Item.Title",_.displayName="ListBlock.Item.Description",x.displayName="ListBlock.Item.Metadata",h.displayName="ListBlock.Item.Actions",f.displayName="ListBlock.Item.Skeleton",v.displayName="ListBlock.EmptyState";try{c.displayName||(c.displayName="ListBlock")}catch{}},77999:(e,t,n)=>{n.d(t,{m:()=>u});var a=n(74848),r=n(21728),i=n(34164),s=n(34743),o=n(71988),l=n(37367),c=n(96540);let d={tooltip:"Tooltip-module__tooltip--hAat9"},u=e=>{let t,n,u,m,p,h,f,g,y,_=(0,r.c)(33),{text:x,position:v,children:b,relationship:S}=e,C=void 0===S?"description":S,[j,N]=(0,c.useState)(!1);_[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.cY)(8),_[0]=t):t=_[0],_[1]!==v?(n=[t,...v?[]:[(0,s.RK)()]],_[1]=v,_[2]=n):n=_[2],_[3]!==j||_[4]!==v||_[5]!==n?(u={open:j,onOpenChange:N,placement:v,middleware:n,whileElementsMounted:o.ll},_[3]=j,_[4]=v,_[5]=n,_[6]=u):u=_[6];let{refs:w,floatingStyles:I,context:E,isPositioned:T}=(0,l.we)(u);_[7]===Symbol.for("react.memo_cache_sentinel")?(m={move:!1,delay:{open:200,close:0}},_[7]=m):m=_[7];let k=(0,l.Mk)(E,m),R=(0,l.iQ)(E),A=(0,l.s9)(E),L="description"===C;_[8]!==L?(p={role:"tooltip",enabled:L},_[8]=L,_[9]=p):p=_[9];let D=(0,l.It)(E,p);_[10]!==A||_[11]!==R||_[12]!==k||_[13]!==D?(h=[k,R,A,D],_[10]=A,_[11]=R,_[12]=k,_[13]=D,_[14]=h):h=_[14];let{getReferenceProps:P,getFloatingProps:M}=(0,l.bv)(h);if(_[15]!==b||_[16]!==E||_[17]!==P||_[18]!==w.setReference||_[19]!==C||_[20]!==x){let e=P(),t={};"label"===C?t["aria-label"]=x:"description"===C&&(t["aria-describedby"]=E.floatingId),f=(0,c.cloneElement)(b,{...e,...t,ref:w.setReference}),_[15]=b,_[16]=E,_[17]=P,_[18]=w.setReference,_[19]=C,_[20]=x,_[21]=f}else f=_[21];let O=f;return _[22]!==E||_[23]!==I||_[24]!==M||_[25]!==j||_[26]!==T||_[27]!==w.setFloating||_[28]!==x?(g=j&&(0,a.jsx)(l.XF,{children:(0,a.jsx)("div",{ref:w.setFloating,id:E.floatingId,style:{...I,visibility:T?"visible":"hidden"},className:(0,i.$)(d.tooltip),...M(),children:x})}),_[22]=E,_[23]=I,_[24]=M,_[25]=j,_[26]=T,_[27]=w.setFloating,_[28]=x,_[29]=g):g=_[29],_[30]!==O||_[31]!==g?(y=(0,a.jsxs)(a.Fragment,{children:[O,g]}),_[30]=O,_[31]=g,_[32]=y):y=_[32],y};try{u.displayName||(u.displayName="Tooltip")}catch{}},50129:(e,t,n)=>{n.d(t,{Kg:()=>o,Yu:()=>l});var a=n(74848),r=n(21728),i=n(96540);let s=(0,i.createContext)(null);function o(e){let t,n,i,o=(0,r.c)(5),{children:l,basePageDataUrl:c}=e;return o[0]!==c?(n={basePageDataUrl:c},o[0]=c,o[1]=n):n=o[1],t=n,o[2]!==l||o[3]!==t?(i=(0,a.jsx)(s.Provider,{value:t,children:l}),o[2]=l,o[3]=t,o[4]=i):i=o[4],i}function l(){let e=(0,i.useContext)(s);if(!e)throw Error("usePageDataContext must be used within a PageDataContextProvider");return e}try{s.displayName||(s.displayName="PageDataContext")}catch{}try{o.displayName||(o.displayName="PageDataContextProvider")}catch{}},20263:(e,t,n)=>{n.d(t,{BC:()=>c,JU:()=>u,Pk:()=>l});var a=n(74848),r=n(75177),i=n(84511),s=n(99418),o=n(96540);let l=m(r.A),c=m(i.A),d=(0,o.forwardRef)((e,t)=>(0,a.jsx)("div",{ref:t,...e}));d.displayName="Div";let u=m(d);function m(e){let t=(0,o.forwardRef)((t,n)=>{let{sanitizedHTML:r,props:i}=function(e){let{html:t,domPurifyConfig:n,...a}=e,r={...n,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{sanitizedHTML:s.default.sanitize(t,r),props:a}}(t);return(0,a.jsx)(e,{ref:n,...i,dangerouslySetInnerHTML:{__html:r}})});return t.displayName=`UnsafeHTML${e.displayName||e.name}`,t}try{u.displayName||(u.displayName="UnsafeHTMLDiv")}catch{}},81945:(e,t,n)=>{n.d(t,{O:()=>u});var a=n(75177),r=n(59299),i=n(44999),s=n(38267);let o=(0,s.i7)(["0%{transform:translateX(-100%);}50%{transform:translateX(100%);}100%{transform:translateX(100%);}"]),l=(0,s.AH)(["animation:"," 1.5s infinite linear;"],o),c=(0,s.i7)(["0%{opacity:.3;}10%{opacity:1;}100%{opacity:.3;}"]),d=(0,s.AH)(["animation:"," 2s infinite linear;"],c),u=(0,s.Ay)(a.A).withConfig({displayName:"LoadingSkeleton",componentId:"sc-70ff9d25-0"})(["position:relative;overflow:hidden;mask-image:radial-gradient(white,black);",";&::after{",";background:linear-gradient(90deg,transparent,",",transparent);content:'';position:absolute;transform:translateX(-100%);bottom:0;left:0;right:0;top:0;}background-color:",";border-radius:",";display:block;height:1.2em;"," width:",";height:",";",""],({animationStyle:e})=>"pulse"===e&&d,({animationStyle:e})=>"pulse"!==e&&l,(0,r.Jt)("colors.neutral.subtle"),(0,r.Jt)("colors.neutral.subtle"),({theme:e,variant:t})=>{switch(t){case"rounded":return(0,r.Jt)("radii.1")(e);case"pill":return"100px";case"elliptical":return"50%";default:return"0"}},({variant:e})=>"elliptical"===e&&{borderRadius:"50%"},({width:e})=>{switch(e){case"random":return`${Math.floor(40*Math.random()+40)}%`;case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},({height:e})=>{switch(e){case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},i.A);try{u.displayName||(u.displayName="LoadingSkeleton")}catch{}},40064:(e,t,n)=>{n.d(t,{V:()=>m});var a=n(74848),r=n(96540),i=n(43258),s=n(38621),o=n(65556),l=n(16255);let c={info:"",success:"Toast--success",error:"Toast--error"},d={info:(0,a.jsx)(s.InfoIcon,{}),success:(0,a.jsx)(s.CheckIcon,{}),error:(0,a.jsx)(s.StopIcon,{})},u=({message:e,timeToLive:t,icon:n,type:i="info",role:s="log"})=>{let[u,m]=r.useState(!0),{safeSetTimeout:p}=(0,o.A)();return(0,r.useEffect)(()=>{t&&p(()=>m(!1),t-300)},[p,t]),(0,a.jsx)(l.Z,{children:(0,a.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,a.jsxs)("div",{className:`Toast ${c[i]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${i}`,role:s,children:[(0,a.jsx)("span",{className:"Toast-icon",children:n||d[i]}),(0,a.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function m(){let{toasts:e,persistedToast:t}=(0,r.useContext)(i.T8);return(0,a.jsxs)(a.Fragment,{children:[e.map((e,t)=>(0,a.jsx)(u,{message:e.message,icon:e.icon,timeToLive:i.Qn,type:e.type,role:e.role},t)),t&&(0,a.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{m.displayName||(m.displayName="Toasts")}catch{}},77274:(e,t,n)=>{n.d(t,{NE:()=>g,Mm:()=>_,YS:()=>y,mN:()=>b,XF:()=>x,Cf:()=>v});var a=n(74848),r=n(96540),i=n(65029),s=n(75298),o=n(81246),l=n(3614),c=n(55847),d=n(96665),u=n(38621);let m={bodyContainer:"UserFeedback-module__bodyContainer--G2bmg",ratingContainer:"UserFeedback-module__ratingContainer--Mg11z",ratingOption:"UserFeedback-module__ratingOption--ZLoA0",ratingButton:"UserFeedback-module__ratingButton--wgOnk",ratingCaption:"UserFeedback-module__ratingCaption--TCp_8",footerContainer:"UserFeedback-module__footerContainer--wvEjF",footerActionButtonGroup:"UserFeedback-module__footerActionButtonGroup--FzuM1",copyLogsSuccessIcon:"UserFeedback-module__copyLogsSuccessIcon--i0uqN",messageContainer:"UserFeedback-module__messageContainer--FW6dD",validationError:"UserFeedback-module__validationError--e3pDo",privacyText:"UserFeedback-module__privacyText--J0awt",Dialog:"UserFeedback-module__Dialog--n5pi6"},p={verySatisfied:"UserFeedbackColors-module__verySatisfied--HQthN",good:"UserFeedbackColors-module__good--a6lz4",satisfied:"UserFeedbackColors-module__satisfied--R1wkm",dissatisfied:"UserFeedbackColors-module__dissatisfied--fRn_n",veryDissatisfied:"UserFeedbackColors-module__veryDissatisfied--C4vDF",bad:"UserFeedbackColors-module__bad--FROJd"};var h=n(34164);function f({title:e="Give feedback",requestID:t,options:n,returnFocusRef:f,onSubmit:g,onClose:y},_){let[x,v]=(0,r.useState)(null),[b,S]=(0,r.useState)(""),[C,j]=(0,r.useState)([]),[N,w]=(0,r.useState)(0),[I,E]=(0,r.useState)(!1),[T,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C.length>0&&w(e=>e+1)},[C]),(0,r.useImperativeHandle)(_,()=>({openDialog:e=>{if(null!=e){if(!n.some(t=>t.value===e))throw Error("invalid initial option value");v(e)}E(!0)}}));let R=async e=>{e.preventDefault();let t=[];try{t=await g(x,b)}catch{t=["An error occurred while submitting your feedback."]}j(t),0===t.length&&A()},A=()=>{v(null),S(""),j([]),E(!1),y?.()},L=e=>{S(e.target.value),j([])},D=async()=>{if(t){try{await navigator.clipboard.writeText(`Request ID: ${t}`)}catch{j(e=>[...e,"Failed to copy logs."]);return}k(!0),setTimeout(()=>{k(!1)},1e3)}};return(0,a.jsx)(a.Fragment,{children:I&&(0,a.jsx)(d.l,{onClose:A,title:e,renderBody:()=>(0,a.jsxs)("div",{className:m.bodyContainer,children:[(0,a.jsxs)(i.A,{required:!0,children:[(0,a.jsx)(i.A.Label,{visuallyHidden:!0,children:"Rating"}),(0,a.jsx)("div",{className:m.ratingContainer,children:n.map(e=>(0,a.jsxs)("div",{className:m.ratingOption,children:[(0,a.jsx)("button",{type:"button",role:"radio","aria-label":e.name,"aria-checked":x===e.value,onClick:()=>{v(e.value),j([])},className:(0,h.$)(m.ratingButton,p[e.color]),children:e.icon}),(0,a.jsx)("span",{className:m.ratingCaption,children:e.name})]},e.name))})]}),(0,a.jsxs)("div",{className:m.messageContainer,children:[(0,a.jsxs)(i.A,{children:[(0,a.jsx)(i.A.Label,{children:"Message"}),(0,a.jsx)(s.Ay,{placeholder:"Tell us what you liked or what could be better",value:b,onChange:L,resize:"vertical",block:!0,rows:5})]}),(0,a.jsxs)("span",{className:m.privacyText,children:["Please don\u2019t include sensitive, confidential, or personal data. Your feedback helps us improve our services in line with our"," ",(0,a.jsx)(o.A,{href:"https://docs.github.com/en/site-policy/privacy-policies/github-general-privacy-statement",inline:!0,muted:!0,children:"Privacy Policy"}),"."]}),(0,a.jsx)("div",{className:m.validationError,role:"alert",children:C.map(e=>(0,a.jsx)("div",{children:e},e))},N)]})]}),renderFooter:()=>(0,a.jsxs)("div",{className:m.footerContainer,children:[(0,a.jsx)("div",{children:t&&(0,a.jsx)(l.m,{text:"Copy logs to add in feedback",direction:"n",children:(0,a.jsx)(c.Q,{leadingVisual:T?(0,a.jsx)(u.CheckIcon,{className:m.copyLogsSuccessIcon,size:16}):(0,a.jsx)(u.CopyIcon,{size:16}),onClick:D,variant:"default",children:T?"Copied!":"Copy logs"})})}),(0,a.jsxs)("div",{className:m.footerActionButtonGroup,children:[(0,a.jsx)(c.Q,{onClick:A,children:"Cancel"}),(0,a.jsx)(c.Q,{variant:"primary",type:"submit",onClick:R,children:"Send"})]})]}),className:m.Dialog,returnFocusRef:f})})}let g=(0,r.forwardRef)(f),y=(0,a.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.7C6.15313 9.85483 7.09616 9.3 8 9.3C8.47794 9.3 9.0345 9.50535 9.54632 9.9146C9.83116 10.1424 10.0753 10.4124 10.2645 10.7H5.65646ZM11.8447 11.016C11.3379 9.39273 9.66897 8 8 8C6.30092 8 4.60185 9.23723 4.12902 11.011C3.98676 11.5446 4.44771 12 5 12H11C11.5523 12 12.0093 11.5432 11.8447 11.016Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.89649 4.7586C4.02981 4.42529 4.40809 4.26317 4.7414 4.39649L7.00928 5.30364C7.63789 5.55509 7.6379 6.44491 7.00928 6.69636L4.7414 7.60351C4.40809 7.73683 4.02981 7.57471 3.89649 7.2414C3.76317 6.90809 3.92529 6.52981 4.2586 6.39649L5.24982 6L4.2586 5.60351C3.92529 5.47019 3.76317 5.09191 3.89649 4.7586Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1035 4.7586C11.9702 4.42529 11.5919 4.26317 11.2586 4.39649L8.99072 5.30364C8.36211 5.55509 8.3621 6.44491 8.99072 6.69636L11.2586 7.60351C11.5919 7.73683 11.9702 7.57471 12.1035 7.2414C12.2368 6.90809 12.0747 6.52981 11.7414 6.39649L10.7502 6L11.7414 5.60351C12.0747 5.47019 12.2368 5.09191 12.1035 4.7586Z"})]}),_=(0,a.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,a.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3416 11.8591C9.33064 10.0058 6.66936 10.0058 5.65842 11.8591C5.46007 12.2228 5.0045 12.3568 4.64086 12.1584C4.27722 11.9601 4.14323 11.5045 4.34158 11.1409C5.92104 8.24518 10.079 8.24518 11.6584 11.1409C11.8568 11.5045 11.7228 11.9601 11.3591 12.1584C10.9955 12.3568 10.5399 12.2228 10.3416 11.8591Z"})]}),x=(0,a.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,a.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 11C5 10.5858 5.33579 10.25 5.75 10.25H10.25C10.6642 10.25 11 10.5858 11 11C11 11.4142 10.6642 11.75 10.25 11.75H5.75C5.33579 11.75 5 11.4142 5 11Z"})]}),v=(0,a.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,a.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3569 9.61413C9.28933 11.3934 6.71067 11.3934 5.64312 9.61413C5.43001 9.25894 4.96931 9.14377 4.61413 9.35688C4.25894 9.56999 4.14377 10.0307 4.35688 10.3859C6.00704 13.1361 9.99296 13.1361 11.6431 10.3859C11.8562 10.0307 11.7411 9.56999 11.3859 9.35688C11.0307 9.14377 10.57 9.25894 10.3569 9.61413Z"})]}),b=(0,a.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.3C6.15313 11.1452 7.09616 11.7 8 11.7C8.47794 11.7 9.0345 11.4947 9.54632 11.0854C9.83116 10.8576 10.0753 10.5876 10.2645 10.3H5.65646ZM11.8447 9.98403C11.3379 11.6073 9.66897 13 8 13C6.30092 13 4.60185 11.7628 4.12902 9.98904C3.98676 9.45539 4.44771 9 5 9H11C11.5523 9 12.0093 9.45684 11.8447 9.98403Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3292 6.83541C10.9875 6.15213 10.0125 6.15213 9.67082 6.83541C9.48558 7.20589 9.03507 7.35606 8.66459 7.17082C8.29411 6.98558 8.14394 6.53507 8.32918 6.16459C9.22361 4.37574 11.7764 4.37574 12.6708 6.16459C12.8561 6.53507 12.7059 6.98558 12.3354 7.17082C11.9649 7.35606 11.5144 7.20589 11.3292 6.83541Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.32918 6.83541C5.98754 6.15213 5.01246 6.15213 4.67082 6.83541C4.48558 7.20589 4.03507 7.35606 3.66459 7.17082C3.29411 6.98558 3.14394 6.53507 3.32918 6.16459C4.22361 4.37574 6.77639 4.37574 7.67082 6.16459C7.85606 6.53507 7.70589 6.98558 7.33541 7.17082C6.96493 7.35606 6.51442 7.20589 6.32918 6.83541Z"})]});try{f.displayName||(f.displayName="UserFeedbackInner")}catch{}try{g.displayName||(g.displayName="UserFeedback")}catch{}}},e=>{e.O(0,["primer-react","react-lib","react-core","octicons-react","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-1d3d52","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-928884","vendors-node_modules_primer_live-region-element_dist_esm_index_js-node_modules_swc_helpers_es-b6e71e","vendors-node_modules_swc_helpers_esm__define_property_js-node_modules_tanstack_query-core_bui-b9aec9","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_tanstack_react-query_build_modern_useQuery_js","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_github_hotkey_dist_inde-336f14","vendors-node_modules_date-fns_getDaysInMonth_mjs-node_modules_date-fns_isAfter_mjs-node_modul-49f526","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-72228e","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_tanstack_react-virtual_dist_esm_index_js","vendors-node_modules_react-relay_index_js","vendors-node_modules_hastscript_lib_index_js-node_modules_lowlight_lib_all_js-node_modules_re-277d5e","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_accname_dist_access-6ea9b0","vendors-node_modules_emoji-regex_index_js-node_modules_fzy_js_index_js-node_modules_tanstack_-0edaaf","vendors-node_modules_codemirror_language_dist_index_js","vendors-node_modules_codemirror_commands_dist_index_js","vendors-node_modules_react-relay_hooks_js-node_modules_github_g-emoji-element_dist_index_js-n-26679e","vendors-node_modules_codemirror_language-data_dist_index_js","vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_search_dis-aafe81","vendors-node_modules_js-yaml_dist_js-yaml_mjs","vendors-node_modules_github_catalyst_lib_index_js-node_modules_tanstack_react-query_build_mod-d1dec4","vendors-node_modules_github_quote-selection_dist_index_js-node_modules_tanstack_react-query_b-f14150","vendors-node_modules_codemirror_merge_dist_index_js-node_modules_floating-ui_react_dist_float-ff5ab7","packages_paths_index_ts","packages_ui-commands_ui-commands_ts","packages_date-picker_components_DatePicker_tsx","packages_drag-and-drop_drag-and-drop_ts-packages_hydro-analytics_hydro-analytics_ts","packages_list-view_src_hooks_use-next-header-tag_ts-packages_list-view_src_ListItem_ListItem_-055669","packages_ref-selector_RefSelector_tsx","packages_copilot-chat_utils_copilot-chat-helpers_ts","packages_copilot-markdown_MarkdownRenderer_tsx","packages_copilot-chat_utils_CopilotChatContext_tsx-packages_safe-html_VerifiedHTML_tsx","packages_item-picker_components_RepositoryPicker_tsx","packages_copilot-chat_components_ModelPicker_tsx","packages_comment-box_api_file-upload_ts-packages_comment-box_api_preview_ts-packages_history_-cb8c46","packages_relay-environment_relay-environment_ts-packages_agent-sessions_components_NewTaskCha-8c7997","packages_copilot-chat_components_CopilotIconAnimation_tsx","packages_app-uuid_app-uuid_ts-packages_signed-commit-badge_index_ts","packages_commenting_hooks_use-markdown-body_ts-packages_commenting_utils_blocked-commenting-r-6f548e","packages_markdown-viewer_NewMarkdownViewer_tsx","packages_issue-viewer_components_IssueViewer_tsx-packages_issue-viewer_contexts_IssueViewerCo-51dbb8"],()=>e(e.s=89775)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-7961b562b1ea.js.map